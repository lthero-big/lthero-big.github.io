<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>lthero</title>
  
  <subtitle>ä¸ªäººåšå®¢</subtitle>
  <link href="https://blog.lthero.cn/atom.xml" rel="self"/>
  
  <link href="https://blog.lthero.cn/"/>
  <updated>2024-08-19T10:46:50.651Z</updated>
  <id>https://blog.lthero.cn/</id>
  
  <author>
    <name>lthero</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>GetSSLforWebsite</title>
    <link href="https://blog.lthero.cn/2024/08/19/GetSSLforWebsite/"/>
    <id>https://blog.lthero.cn/2024/08/19/GetSSLforWebsite/</id>
    <published>2024-08-19T10:40:40.000Z</published>
    <updated>2024-08-19T10:46:50.651Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®å¡”">å®å¡”</h2><p>åœ¨å®å¡”ç½‘ç»œç®¡ç†ï¼Œé€‰æ‹©<strong>DNSéªŒè¯</strong>ï¼Œæ‰‹åŠ¨è§£æ<strong>é˜¿é‡Œäº‘DNS</strong>ï¼Œè®¾ç½®å¯†é’¥åè‡ªåŠ¨ç”³è¯·å³å¯</p><h2 id="é˜¿é‡Œäº‘å¹³å°">é˜¿é‡Œäº‘å¹³å°</h2><p>æœç´¢ï¼šæ•°å­—è¯ä¹¦ç®¡ç†æœåŠ¡</p><p>åœ¨SSLè¯ä¹¦ç®¡ç†ä¸­ï¼Œå¯ä»¥ç”³è¯·å…è´¹çš„DigiCertè¯ä¹¦ï¼Œæ—¶æ•ˆä¸‰ä¸ªæœˆï¼Œå¥½å¤„æ˜¯å¯¹äºéƒ¨ç½²åœ¨é˜¿é‡Œäº‘çš„cdnæœåŠ¡ï¼Œåœ¨ç”³è¯·è¯ä¹¦åï¼Œå¹³å°ä¼šè‡ªåŠ¨æ›´æ–°cdnç›¸å…³æœåŠ¡ã€‚</p><h2 id="certbotè‡ªåŠ¨">certbotè‡ªåŠ¨</h2><h3 id="å®‰è£…certbotå’Œé˜¿é‡Œäº‘dnsæ’ä»¶">å®‰è£…certbotå’Œé˜¿é‡Œäº‘DNSæ’ä»¶</h3><p>å®‰è£…æ­¥éª¤åœ¨<a href="https://certbot.eff.org/">certbot (opens new window)</a>çš„å®˜ç½‘ä¸Šæœ‰ï¼Œè€Œä¸”å¾ˆè¯¦ç»†ã€‚ä½†æœ€å¤§çš„é—®é¢˜æ˜¯ï¼Œå®˜ç½‘ä¸Šçš„å®‰è£…æ–¹æ³•è¦æ±‚ä½¿ç”¨snapdï¼Œè€Œä¸ƒç‰›äº‘æœåŠ¡å™¨ï¼ˆå®é™…ä¸Šæ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼‰å¹¶ä¸æ”¯æŒsnapdï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨yumå®‰è£…ã€‚</p><h4 id="å®‰è£…æ‰‹åŠ¨ç”³è¯·è¯ä¹¦æ‰€éœ€å·¥å…·">å®‰è£…æ‰‹åŠ¨ç”³è¯·è¯ä¹¦æ‰€éœ€å·¥å…·</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install certbot</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…è‡ªåŠ¨ç»­æœŸè¯ä¹¦æ‰€éœ€å·¥å…·">å®‰è£…è‡ªåŠ¨ç»­æœŸè¯ä¹¦æ‰€éœ€å·¥å…·</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt install certbot python3-certbot-nginx</span><br><span class="line">pip3 install certbot-dns-aliyun</span><br><span class="line">pip3 install certbot-nginx</span><br></pre></td></tr></table></figure><h3 id="ç”³è¯·è¯ä¹¦">ç”³è¯·è¯ä¹¦</h3><h4 id="æ‰‹åŠ¨ç”³è¯·è¯ä¹¦">æ‰‹åŠ¨ç”³è¯·è¯ä¹¦</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certbot -d *.sunxiaolong.net -d sunxiaolong.net --manual certonly</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª<code>--manual</code>å‚æ•°å¾ˆé‡è¦ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªå‚æ•°ï¼Œå°±å¿…é¡»å¾—ç”¨dnsæ’ä»¶äº†~<br>éšåä¼šæœ‰æç¤ºï¼Œç»™åŸŸåæ·»åŠ ä¸€ä¸ªTXTè§£æï¼ŒæŒ‰ç…§æç¤ºå»åŸŸåè§£ææ§åˆ¶å°æ·»åŠ å¯¹åº”è®°å½•ã€‚è¿™é‡Œä¸€å®šè¦æ³¨æ„è¿™ä¸ªè§£æè®°å½•ä¸è¦åŒºåˆ†å¤§é™†è¿˜æ˜¯æµ·å¤–çº¿è·¯ï¼Œå¦åˆ™å¯èƒ½ä¼šå¤±è´¥ã€‚<br>è§£æè®°å½•æ·»åŠ å®Œæˆåï¼Œå›åˆ°å‘½ä»¤è¡ŒæŒ‰ä¸‹å›è½¦é”®ã€‚<br>è¯ä¹¦å’Œç§é’¥æ–‡ä»¶ä¼šä¿å­˜åˆ°<code>/etc/letsenctypt/live</code>ä¸‹ï¼Œå‘½ä»¤è¡Œä¸Šæœ‰å›æ˜¾ã€‚</p><h4 id="è‡ªåŠ¨ç”³è¯·è¯ä¹¦">è‡ªåŠ¨ç”³è¯·è¯ä¹¦</h4><p>å°†é˜¿é‡Œäº‘DNSçš„keyå†™åˆ°æœ¬åœ°ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dns_aliyun_access_key</span>=<span class="string">*******</span></span><br><span class="line"><span class="attr">dns_aliyun_access_key_secret</span>=<span class="string">******</span></span><br></pre></td></tr></table></figure><p>éšåä¿å­˜åˆ°æœåŠ¡å™¨ä¸Šï¼Œå¦‚<code>/opt/cert/aliyun-dns.conf</code>ã€‚access_keyå’Œaccess_key_secretæ˜¯é˜¿é‡Œäº‘çš„å¤šç”¨æˆ·è®¿é—®æ§åˆ¶ä¸­ç›¸åº”ç”¨æˆ·çš„keyå’Œsecretã€‚</p><ol start="2"><li>ç­¾å‘è¯ä¹¦</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certbot certonly --authenticator=dns-aliyun --dns-aliyun-credentials=&#x27;/opt/cert/aliyun-dns.conf&#x27; -d &quot;*.sunxiaolong.net,sunxiaolong.net&quot;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±ç­¾å‘æˆåŠŸäº†ï½è¯ä¹¦ä½ç½®å¯ä»¥çœ‹å›æ˜¾ï¼Œç¡®è®¤é…ç½®æ²¡é”™ä¹‹åï¼Œreloadä¸€ä¸‹nginxå°±å¯ä»¥äº†ã€‚</p><h3 id="ä¿®æ”¹nginxé…ç½®">ä¿®æ”¹nginxé…ç½®</h3><p>å°†nginxé…ç½®ä¸­å¯¹åº”åŸŸåçš„è¯ä¹¦å’Œç§é’¥æ–‡ä»¶è·¯å¾„æŒ‡å®šåˆ°certbotå›æ˜¾çš„è·¯å¾„ä¸Šã€‚</p><h3 id="reload-nginx">reload nginx</h3><p>é‡æ–°åŠ è½½nginxå³å¯ç”Ÿæ•ˆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">NGINX_HOME/sbin/nginx -s reload</span></span><br></pre></td></tr></table></figure><h3 id="éªŒè¯æ˜¯å¦ç”Ÿæ•ˆ">éªŒè¯æ˜¯å¦ç”Ÿæ•ˆ</h3><p>é‡æ–°æ‰“å¼€å¯¹åº”çš„HTTPSç«™ç‚¹ï¼Œä¸å†æç¤ºè¯ä¹¦ä¸å®‰å…¨ï¼Œä¸”è¯ä¹¦è¿‡æœŸæ—¶é—´å’Œcertbotå‘½ä»¤è¡Œå›æ˜¾èƒ½å¯¹åº”ä¸Šå³ä¸ºæˆåŠŸã€‚</p><h3 id="é…ç½®è‡ªåŠ¨ç»­æœŸ">é…ç½®è‡ªåŠ¨ç»­æœŸ</h3><h4 id="æ‰‹åŠ¨ç»­æœŸ">æ‰‹åŠ¨ç»­æœŸ</h4><p>å¾…è¯ä¹¦è¦è¿‡æœŸï¼Œæ‰§è¡Œ<code>certbot renew</code>ï¼Œå†reload nginxå³å¯ã€‚</p><h4 id="è‡ªåŠ¨ç»­æœŸ">è‡ªåŠ¨ç»­æœŸ</h4><p>ç¼–è¾‘crontab</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure><p>æ·»åŠ è®°å½•ï¼Œ<code>0 0 1 * * /root/renew-cert.sh</code>ï¼Œè¡¨ç¤ºæ¯æœˆ1æ—¥0ç‚¹æ‰§è¡Œç»­æœŸè„šæœ¬ã€‚</p><p>ç¼–å†™ç»­æœŸè„šæœ¬ <code>/root/renew-cert.sh</code>çš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">certbot certonly -n --authenticator=dns-aliyun --dns-aliyun-credentials=&#x27;/opt/cert/aliyun-dns.conf&#x27; -d &quot;*.sunxiaolong.net,sunxiaolong.net&quot;</span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure><p>é‡æ–°åŠ è½½crondæœåŠ¡ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service crond reload</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å®å¡”&quot;&gt;å®å¡”&lt;/h2&gt;
&lt;p&gt;åœ¨å®å¡”ç½‘ç»œç®¡ç†ï¼Œé€‰æ‹©&lt;strong&gt;DNSéªŒè¯&lt;/strong&gt;ï¼Œæ‰‹åŠ¨è§£æ&lt;strong&gt;é˜¿é‡Œäº‘DNS&lt;/strong&gt;ï¼Œè®¾ç½®å¯†é’¥åè‡ªåŠ¨ç”³è¯·å³å¯&lt;/p&gt;
&lt;h2 id=&quot;é˜¿é‡Œäº‘å¹³å°&quot;&gt;é˜¿é‡Œäº‘å¹³å°&lt;/h2&gt;
&lt;p&gt;æœç´¢ï¼šæ•°å­—è¯ä¹¦ç®¡ç†æœåŠ¡</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ã€vless-realityã€‘å®‰è£…</title>
    <link href="https://blog.lthero.cn/2024/07/18/Install-vless-reality/"/>
    <id>https://blog.lthero.cn/2024/07/18/Install-vless-reality/</id>
    <published>2024-07-18T07:26:50.000Z</published>
    <updated>2024-07-18T08:20:50.823Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å®˜æ–¹è¯´æ³•æ˜¯ REALITY å¯ä»¥<strong>æ¶ˆé™¤æœåŠ¡ç«¯ TLS æŒ‡çº¹ç‰¹å¾</strong>ï¼ŒåŒæ—¶ä¿ç•™å‰å‘ä¿å¯†æ€§ç­‰åŠŸèƒ½ï¼Œè¯ä¹¦é“¾æ”»å‡»ä¹Ÿæ— æ•ˆï¼Œå®‰å…¨æ€§è¶…è¶Šäº†å¸¸è§„çš„ TLSã€‚è¿˜æœ‰ä¸ªä¼˜ç‚¹æ˜¯ REALITY <strong>å¯ä»¥æŒ‡å‘åˆ«äººçš„ç½‘ç«™ï¼Œæ— éœ€è‡ªå·±è´­ä¹°åŸŸåå’Œé…ç½® TLS æœåŠ¡ç«¯</strong>ï¼Œé€šä¿—æ¥è¯´å°±æ˜¯ä¼ªè£…æ€§å’Œä¾¿æ·æ€§éƒ½å¾—åˆ°äº†æå‡ã€‚</p></blockquote><h1 id="ä¸€é”®å®‰è£…è„šæœ¬">ä¸€é”®å®‰è£…è„šæœ¬</h1><blockquote><p>æœ¬æ–‡å‚è€ƒï¼š<a href="https://oooutman.github.io/reality-v2ray/">https://oooutman.github.io/reality-v2ray/</a></p><p>ä¸‹é¢è¿™ä¸ªå®‰è£…è„šæœ¬ï¼Œé»˜è®¤ä½¿ç”¨â€œæ— éœ€åŸŸåâ€çš„æ–¹æ³•</p><p>å¦‚æœéœ€è¦è®¾ç½®è‡ªå·±çš„åŸŸåï¼Œå¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ªè„šæœ¬ï¼š<a href="https://www.v2ray-agent.com/archives/1680104902581">https://www.v2ray-agent.com/archives/1680104902581</a></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O $&#123;HOME&#125;/Xray-script.sh https://raw.githubusercontent.com/zxcvos/Xray-script/main/reality.sh &amp;&amp; bash $&#123;HOME&#125;/Xray-script.sh</span><br></pre></td></tr></table></figure><p>å¤åˆ¶ä¸Šé¢ğŸ‘†ä¸€æ•´è¡Œå‘½ä»¤è¿è¡Œåä¼šå‡ºç°å¦‚ä¸‹ğŸ‘‡å®‰è£…å‘å¯¼ï¼Œæœ‰å„ç§é€‰é¡¹è®¾ç½®</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">--------------- Xray-script ---------------</span><br><span class="line"> Version      : v2023-03-15(beta)</span><br><span class="line"> Description  : Xray ç®¡ç†è„šæœ¬</span><br><span class="line">----------------- è£…è½½ç®¡ç† ----------------</span><br><span class="line">1. å®‰è£…</span><br><span class="line">2. æ›´æ–°</span><br><span class="line">3. å¸è½½</span><br><span class="line">----------------- æ“ä½œç®¡ç† ----------------</span><br><span class="line">4. å¯åŠ¨</span><br><span class="line">5. åœæ­¢</span><br><span class="line">6. é‡å¯</span><br><span class="line">----------------- é…ç½®ç®¡ç† ----------------</span><br><span class="line">101. æŸ¥çœ‹é…ç½®</span><br><span class="line">102. ä¿¡æ¯ç»Ÿè®¡</span><br><span class="line">103. ä¿®æ”¹ <span class="built_in">id</span></span><br><span class="line">104. ä¿®æ”¹ dest</span><br><span class="line">105. ä¿®æ”¹ x25519 key</span><br><span class="line">106. ä¿®æ”¹ shortIds</span><br><span class="line">107. ä¿®æ”¹ xray ç›‘å¬ç«¯å£</span><br><span class="line">108. åˆ·æ–°å·²æœ‰çš„ shortIds</span><br><span class="line">109. è¿½åŠ è‡ªå®šä¹‰çš„ shortIds</span><br><span class="line">110. ä½¿ç”¨ WARP åˆ†æµï¼Œå¼€å¯ OpenAI</span><br><span class="line">----------------- å…¶ä»–é€‰é¡¹ ----------------</span><br><span class="line">201. æ›´æ–°è‡³æœ€æ–°ç¨³å®šç‰ˆå†…æ ¸</span><br><span class="line">202. å¸è½½å¤šä½™å†…æ ¸</span><br><span class="line">203. ä¿®æ”¹ ssh ç«¯å£</span><br><span class="line">204. ç½‘ç»œè¿æ¥ä¼˜åŒ–</span><br><span class="line">-------------------------------------------</span><br><span class="line">0. é€€å‡º</span><br><span class="line">Choose:</span><br></pre></td></tr></table></figure><p>å…ˆé€‰ 1 å®‰è£…ï¼Œ è¾“å…¥ <code>1</code> å›è½¦å³å¯å®‰è£…ã€‚</p><p>ä»¥åå¦‚æœè¦è¿›å…¥è¿™ä¸ªç®¡ç†è„šæœ¬ç•Œé¢å¯ä»¥è¾“å…¥ <code>bash Xray-script.sh</code> å‘½ä»¤å›è½¦å³å¯</p><p>å®‰è£…è¿‡ç¨‹è¿›è¡Œä¸€ä¼šå„¿ä¼šæç¤ºä½ è¾“å…¥è‡ªå®šä¹‰ç«¯å£ï¼Œè¿™é‡Œç›´æ¥å›è½¦ä¸å¡«å°±ä¼šä½¿ç”¨é»˜è®¤ <code>443</code> ç«¯å£äº†ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¯·è¾“å…¥è‡ªå®šä¹‰çš„ç«¯å£(1-65535), é»˜è®¤ä¸ä¿®æ”¹:</span><br></pre></td></tr></table></figure><p>æ¥ç€æç¤ºè¾“å…¥ UUIDï¼Œä¹Ÿå¯ä»¥ç›´æ¥å›è½¦è®©å®ƒè‡ªåŠ¨ç”Ÿæˆ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¯·è¾“å…¥è‡ªå®šä¹‰ UUID, é»˜è®¤åˆ™è‡ªåŠ¨ç”Ÿæˆ:</span><br></pre></td></tr></table></figure><p>å‡ºç°è®©ä½ è®¾ç½®ç›®æ ‡ç½‘ç«™çš„é€‰é¡¹ï¼Œä¹Ÿå¯ä»¥çœ‹æƒ…å†µè¾“å…¥ <code>0</code> æ¥è‡ªå¡«ç½‘å€ã€‚</p><blockquote><p>å¡«å†™çš„ç½‘ç«™å»ºè®®è·Ÿä½  VPS æ‰€åœ¨åœ°å·®ä¸å¤šï¼Œæ¯”å¦‚æˆ‘çš„ IP æ˜¯å¤§ç‰ˆçš„ï¼Œæˆ‘å¯ä»¥æ‰¾å®¶æ—¥æœ¬åŠ¨ç”»å…¬å¸å®˜ç½‘å¡«å†™ã€‚ä¸è¿‡è¿™é‡Œé€‰é¡¹é‡Œå·²ç»æœ‰å‡ ä¸ª .jp åŸŸååç¼€çš„æ—¥æœ¬ç½‘ç«™ï¼Œæˆ‘å°±ç›´æ¥å¡« <code>5</code> å›è½¦ã€‚</p></blockquote><p>é€‰é¡¹ 1 å’Œ 2 çš„å¾®è½¯å’Œè‹¹æœå› ä¸ºæ˜¯å…¨çƒåŒ–çš„å…¬å¸ï¼Œåˆ°å¤„éƒ½æœ‰æœåŠ¡å™¨ï¼Œé€šç”¨æ€§å¾ˆå¥½ä¸ç”¨å¤ªåœ¨æ„åœ°å€ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">---------------- dest åˆ—è¡¨ -----------------</span><br><span class="line">1) learn.microsoft.com</span><br><span class="line">2) www.apple.com</span><br><span class="line">3) music.apple.com</span><br><span class="line">4) www.fandom.com</span><br><span class="line">5) www.lovelive-anime.jp</span><br><span class="line">6) tidal.com</span><br><span class="line">7) zoro.to</span><br><span class="line">8) www.pixiv.co.jp</span><br><span class="line">9) mxj.myanimelist.net</span><br><span class="line">10) mora.jp</span><br><span class="line">11) www.j-wave.co.jp</span><br><span class="line">12) www.dmm.com</span><br><span class="line">13) booth.pm</span><br><span class="line">14) www.ivi.tv</span><br><span class="line">15) fmovies.to/home</span><br><span class="line">16) www.leercapitulo.com</span><br><span class="line">17) www.sky.it</span><br><span class="line">18) www.sky.com</span><br><span class="line">19) www.smdyy.cc</span><br><span class="line">20) www.telecinco.es</span><br><span class="line">è¯·é€‰æ‹©ä½ çš„ dest, å½“å‰é»˜è®¤ä½¿ç”¨ <span class="string">&quot;learn.microsoft.com&quot;</span>, è‡ªå¡«é€‰ 0:</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé—®ä½ è¦é€‰å“ªä¸ª UUID çš„é…ç½®ï¼Œåªæœ‰ä¸€ä¸ªé€‰é¡¹è‡ªç„¶å¡« <code>1</code> ï¼Œä¹Ÿå¯ä»¥ä¸å¡«ï¼Œä½¿ç”¨â€œé»˜è®¤å…¨é€‰â€ç›´æ¥å›è½¦ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1) 422939fd-f699-4a26-a6d7-61e17ee3dd88</span><br><span class="line">è¯·é€‰æ‹©ç”Ÿæˆåˆ†äº«é“¾æ¥çš„ UUID ï¼Œç”¨è‹±æ–‡é€—å·åˆ†éš”ï¼Œ é»˜è®¤å…¨é€‰:</span><br></pre></td></tr></table></figure><p>è®©ä½ é€‰ç½‘å€ï¼Œè™½ç„¶ä¹‹å‰åªè®¾ç½®äº†ä¸€ä¸ªç½‘å€ï¼Œä¸è¿‡è¿™é‡Œæ‹†åˆ†æˆå¸¦å’Œä¸å¸¦ <code>www</code> ä¸¤ç§ï¼Œä¹Ÿä¸å¡«ç›´æ¥å›è½¦é»˜è®¤å…¨é€‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1) lovelive-anime.jp</span><br><span class="line">2) www.lovelive-anime.jp</span><br><span class="line">è¯·é€‰æ‹©ç”Ÿæˆåˆ†äº«é“¾æ¥çš„ serverName ï¼Œç”¨è‹±æ–‡é€—å·åˆ†éš”ï¼Œ é»˜è®¤å…¨é€‰:</span><br></pre></td></tr></table></figure><p>è®©é€‰ shortIdï¼Œè¿™ä¸ªè„šæœ¬é»˜è®¤ç”Ÿæˆäº† 5 ä¸ª shortIdï¼Œè¿˜æ˜¯ä¸å¡«ç›´æ¥å›è½¦ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1) <span class="string">&quot;&quot;</span></span><br><span class="line">2) <span class="string">&quot;6d&quot;</span></span><br><span class="line">3) <span class="string">&quot;85dd&quot;</span></span><br><span class="line">4) <span class="string">&quot;e04cccd5&quot;</span></span><br><span class="line">5) <span class="string">&quot;5042dcec226b1621&quot;</span></span><br><span class="line">è¯·é€‰æ‹©ç”Ÿæˆåˆ†äº«é“¾æ¥çš„ shortId ï¼Œç”¨è‹±æ–‡é€—å·åˆ†éš”ï¼Œ é»˜è®¤å…¨é€‰:</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è‡ªå·±è®¾å®š shortId è¦éµå¾ªè§„åˆ™ï¼Œå¯ä»¥ä½¿ç”¨åå…­è¿›åˆ¶ï¼šä¹Ÿå°±æ˜¯è¿™äº›æ•°å­—å’Œå­—æ¯ <code>0123456789abcdef</code>ï¼Œé•¿åº¦è¦æ±‚æ˜¯ 2 çš„å€æ•°ï¼Œä¸èƒ½å†™ 3 ä½ã€5 ä½è¿™ç§æ•°å­—å­—æ¯ç»„åˆï¼Œé•¿åº¦æœ€é•¿åˆ° 16 ä½ã€‚</p><blockquote><p>ğŸ‰å¤§åŠŸå‘Šæˆï¼å‡ºç°å¦‚ä¸‹å…± 10 ä¸ªåˆ†äº«é“¾æ¥ã€‚éšä¾¿å¤åˆ¶ä¸€ä¸ªåˆ°æœ¬åœ° v2rayN å®¢æˆ·ç«¯ä¸Šç²˜è´´å°±å¯ä»¥ç”¨äº†ï¼Œæ³¨æ„åˆ†äº«é“¾æ¥å¼€å¤´æ˜¯ <code>Vless://</code>ï¼Œç»“å°¾æ˜¯ <code>VLESS-XTLS-uTLS-REALITY</code>ã€‚</p></blockquote><h1 id="å®¢æˆ·ç«¯é…ç½®">å®¢æˆ·ç«¯é…ç½®</h1><p><strong>REALITY è¿™ä¸ªæ–°åè®®å¯¹å®¢æˆ·ç«¯å’Œå†…æ ¸æ˜¯æœ‰è¦æ±‚çš„</strong></p><ul><li>Windows ç«¯ v2rayN è‡³å°‘è¦ v6.21 ä»¥ä¸Šç‰ˆæœ¬</li><li>å®‰å“ç«¯ v2rayNGè¦ 1.8.0 åŠä»¥ä¸Šç‰ˆæœ¬</li><li>iPhone ç«¯ä¸æ¸…æ¥šï¼Œè‡ªè¡ŒæŸ¥é˜…ã€‚</li></ul><h2 id="pc-ç«¯-v2rayn-é…ç½®">PC ç«¯ v2rayN é…ç½®</h2><p><a href="https://github.com/2dust/v2rayN/releases">ç‚¹æˆ‘è¿›å…¥ v2rayN ä¸‹è½½é¡µé¢</a> ï¼Œå½“ä¸‹æœ€æ–°æ­£å¼ç‰ˆæ˜¯ 6.43 ï¼Œè¿™é‡Œä»¥æ­¤ä¸ºä¾‹ã€‚</p><ol><li>ä¸‹è½½ä¸‹æ–¹çš„ <code>v2rayN-With-Core.zip</code>ï¼Œè§£å‹å³ç”¨æ— éœ€å®‰è£…ï¼Œå»ºè®®å…ˆå°†è§£å‹åçš„æ–‡ä»¶å¤¹æ‰¾ä¸ªåœ°æ–¹æ”¾å¥½ï¼Œç„¶åå°†é‡Œé¢çš„ <code>v2rayN.exe</code> ç¨‹åºåˆ›å»ºä¸ªå¿«æ·æ–¹å¼ã€‚</li></ol><p><img src="https://oooutman.github.io/img/post/Reality/reality_02.jpg" alt="reality_02"></p><ol start="2"><li>æ‰“å¼€æ–‡ä»¶å¤¹ï¼ŒåŒå‡»é‡Œé¢çš„ <code>v2rayN.exe</code> å³å¯è¿è¡Œï¼Œè¿è¡Œåå¯èƒ½çª—å£é—ªä¸€ä¸‹å°±æ¶ˆå¤±äº†ï¼Œå»å³ä¸‹è§’æ‰˜ç›˜å›¾æ ‡é‡Œæ‰¾åˆ°å®ƒã€‚ä¹Ÿå¯èƒ½å…ˆå¼¹å‡ºæç¤ºè¦æ±‚ä¸‹è½½ <code>Microsoft .NET 8.0 Desktop Runtime</code> ï¼ŒæŒ‰æç¤ºä¸‹è½½å®‰è£…å³å¯ã€‚</li><li>è¿è¡Œåå…ˆå³é”®å›¾æ ‡åœ¨èœå• <code>è‡ªåŠ¨é…ç½®ç³»ç»Ÿä»£ç†</code> æ‰“ä¸Šå‹¾ï¼Œå¹¶ç¡®ä¿è·¯ç”±æ˜¯ <code>ç»•è¿‡å¤§é™†</code>ã€‚</li></ol><p><img src="https://oooutman.github.io/img/post/Reality/reality_03.jpg" alt="reality_03"></p><ol start="4"><li>å†åŒå‡»å›¾æ ‡æ‰“å¼€ç•Œé¢ï¼Œå¼€å§‹é‡Œé¢æ˜¯ç©ºç™½æ²¡æœ‰é…ç½®çš„ï¼Œ<strong>å°†ä½ ä¸Šé¢ç”Ÿæˆçš„åˆ†äº«é“¾æ¥å¤åˆ¶</strong>ï¼Œç„¶åç›´æ¥åœ¨è¿™ä¸ªç•Œé¢ <code>Cltr+V</code> ç²˜è´´å°±å¯ä»¥æ·»åŠ é…ç½®</li><li>æ‰“å¼€æµè§ˆå™¨è®¿é—®è¢«å¢™ç½‘ç«™çœ‹èƒ½ä¸èƒ½ä¸Šï¼Œä¹Ÿå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸Šå³é”®ä½¿ç”¨ <code>æµ‹è¯•æœåŠ¡å™¨é€Ÿåº¦</code> çœ‹çœ‹èƒ½ä¸èƒ½è·‘èµ·æ¥ã€‚</li></ol><p><img src="https://oooutman.github.io/img/post/Reality/reality_04.jpg" alt="reality_04"></p><h2 id="å®‰å“ç«¯-v2rayng-é…ç½®">å®‰å“ç«¯ v2rayNG é…ç½®</h2><p><a href="https://github.com/2dust/v2rayNG/releases">ç‚¹æˆ‘è¿›å…¥ v2rayNG ä¸‹è½½é¡µé¢</a>ï¼Œå½“å‰æœ€æ–° Latest ç‰ˆæœ¬ä¸º 1.8.19ï¼Œä¸‹è½½ä¸‹æ–¹çš„ <code>v2rayNG_1.8.19.apk</code>ã€‚</p><p><img src="https://oooutman.github.io/img/post/Reality/reality_05.jpg" alt="reality_05"></p><p>æ‰‹æœºä¸Šå®‰è£…åæ‰“å¼€åº”ç”¨ï¼Œç‚¹å‡»å³ä¸Šè§’ <code>+</code> å›¾æ ‡ï¼Œ é€‰æ‹© <code>æ‰«æäºŒç»´ç </code>æˆ–<code>ä»å‰ªè´´æ¿å¯¼å…¥</code> é€‰é¡¹ï¼Œä¸è¿‡æ‰‹æœºä¸Šæƒ³è·å¾—ç”µè„‘ç«¯çš„åˆ†äº«é“¾æ¥å¯èƒ½æœ‰ç‚¹éº»çƒ¦ï¼Œç”¨æ‰«æäºŒç»´ç ä¼šæ–¹ä¾¿ç‚¹ï¼Œå¯ä»¥å…ˆåœ¨PCç«¯ v2rayN é…ç½®ä¸Šå³é”®ç‚¹å‡» <code>åˆ†äº«æœåŠ¡å™¨(Ctrl+F)</code>è¿™ä¸ªé€‰é¡¹ï¼ˆå®‰å“ç«¯é…ç½®ä¸Šé¢é‚£å¼ æµ‹è¯•é€Ÿåº¦çš„å›¾ç‰‡é‡Œèƒ½çœ‹åˆ°ï¼‰ï¼Œç„¶åæ‰«æå‡ºç°çš„äºŒç»´ç çª—å£ ã€‚</p><p><img src="https://oooutman.github.io/img/post/Reality/reality_06.gif" alt="reality_06"></p><h2 id="sing-boxé…ç½®">sing-boxé…ç½®</h2><blockquote><p>ç»æµ‹è¯•ä½¿ç”¨sing-boxéœ€è¦èƒ½è¿æ¥é€šï¼Œä½†é€Ÿåº¦ä¸å¿«ï¼Œå»¶è¿Ÿä¹Ÿé«˜ï¼Œä½“éªŒä¸Šä¸å¦‚v2rayNG</p><p>é…ç½®æ–‡ä»¶æ¥æºï¼š<a href="https://www.youtube.com/watch?v=e8EU29_YlOo">https://www.youtube.com/watch?v=e8EU29_YlOo</a></p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;log&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;disabled&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&quot;level&quot;</span>: <span class="string">&quot;info&quot;</span>,</span><br><span class="line">    <span class="string">&quot;output&quot;</span>: <span class="string">&quot;sing-box.log&quot;</span>,</span><br><span class="line">    <span class="string">&quot;timestamp&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;dns&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;servers&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;alidns&quot;</span>,</span><br><span class="line">        <span class="string">&quot;address&quot;</span>: <span class="string">&quot;https://dns.alidns.com/dns-query&quot;</span>,</span><br><span class="line">        <span class="string">&quot;address_resolver&quot;</span>: <span class="string">&quot;cf&quot;</span>,</span><br><span class="line">        <span class="string">&quot;address_strategy&quot;</span>: <span class="string">&quot;prefer_ipv4&quot;</span>,</span><br><span class="line">        <span class="string">&quot;strategy&quot;</span>: <span class="string">&quot;ipv4_only&quot;</span>,</span><br><span class="line">        <span class="string">&quot;detour&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;cf&quot;</span>,</span><br><span class="line">        <span class="string">&quot;address&quot;</span>: <span class="string">&quot;https://1.1.1.1/dns-query&quot;</span>,</span><br><span class="line">        <span class="string">&quot;strategy&quot;</span>: <span class="string">&quot;ipv4_only&quot;</span>,</span><br><span class="line">        <span class="string">&quot;detour&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;block&quot;</span>,</span><br><span class="line">        <span class="string">&quot;address&quot;</span>: <span class="string">&quot;rcode://success&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;rules&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;geosite&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;cn&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;domain&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;myChinaDnsSite.com&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;domain_suffix&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;.cn&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;server&quot;</span>: <span class="string">&quot;alidns&quot;</span>,</span><br><span class="line">        <span class="string">&quot;disable_cache&quot;</span>: <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;geosite&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;category-ads-all&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;server&quot;</span>: <span class="string">&quot;block&quot;</span>,</span><br><span class="line">        <span class="string">&quot;disable_cache&quot;</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;final&quot;</span>: <span class="string">&quot;cf&quot;</span>,</span><br><span class="line">    <span class="string">&quot;strategy&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;disable_cache&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&quot;disable_expire&quot;</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;inbounds&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;tun-in&quot;</span>,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;tun&quot;</span>,</span><br><span class="line">      <span class="string">&quot;inet4_address&quot;</span>: <span class="string">&quot;172.19.0.1/30&quot;</span>,</span><br><span class="line">      <span class="string">&quot;auto_route&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&quot;strict_route&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&quot;stack&quot;</span>: <span class="string">&quot;gvisor&quot;</span>,</span><br><span class="line">      <span class="string">&quot;mtu&quot;</span>: 9000,</span><br><span class="line">      <span class="string">&quot;sniff&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&quot;sniff_timeout&quot;</span>: <span class="string">&quot;300ms&quot;</span>,</span><br><span class="line">      <span class="string">&quot;domain_strategy&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;udp_timeout&quot;</span>: 300</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;outbounds&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;proxy&quot;</span>,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;vless&quot;</span>,</span><br><span class="line">      <span class="string">&quot;server&quot;</span>: <span class="string">&quot;ä½ çš„æœåŠ¡å™¨IP&quot;</span>,</span><br><span class="line">      <span class="string">&quot;server_port&quot;</span>: ä½ ç”¨çš„ç«¯å£,</span><br><span class="line">      <span class="string">&quot;uuid&quot;</span>: <span class="string">&quot;ä½ æœåŠ¡ç«¯çš„ç”¨æˆ·UUID&quot;</span>,</span><br><span class="line">      <span class="string">&quot;flow&quot;</span>: <span class="string">&quot;xtls-rprx-vision&quot;</span>,</span><br><span class="line">      <span class="string">&quot;network&quot;</span>: <span class="string">&quot;tcp&quot;</span>,</span><br><span class="line">      <span class="string">&quot;packet_encoding&quot;</span>: <span class="string">&quot;xudp&quot;</span>,</span><br><span class="line">      <span class="string">&quot;tls&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;enabled&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;server_name&quot;</span>: <span class="string">&quot;ä½ çš„æœåŠ¡ç«¯è®¾ç½®çš„serverNameså…¶ä¸€&quot;</span>,</span><br><span class="line">        <span class="string">&quot;utls&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;enabled&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="string">&quot;fingerprint&quot;</span>: <span class="string">&quot;chrome&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;reality&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;enabled&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="string">&quot;public_key&quot;</span>: <span class="string">&quot;ä½ æœåŠ¡ç«¯ç”Ÿæˆçš„å…¬é’¥&quot;</span>,</span><br><span class="line">          <span class="string">&quot;short_id&quot;</span>: <span class="string">&quot;ä½ æœåŠ¡ç«¯shortIdså…¶ä¸€ï¼Œæˆªæ­¢å‘æ–‡sing-boxå¿…é¡»ä½¿ç”¨16ä½çš„short_id&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;direct&quot;</span>,</span><br><span class="line">      <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;block&quot;</span>,</span><br><span class="line">      <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;block&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;dns&quot;</span>,</span><br><span class="line">      <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;dns-out&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;route&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;geoip&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;path&quot;</span>: <span class="string">&quot;geoip.db&quot;</span>,</span><br><span class="line">      <span class="string">&quot;download_url&quot;</span>: <span class="string">&quot;https://github.com/SagerNet/sing-geoip/releases/latest/download/geoip.db&quot;</span>,</span><br><span class="line">      <span class="string">&quot;download_detour&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;geosite&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;path&quot;</span>: <span class="string">&quot;geosite.db&quot;</span>,</span><br><span class="line">      <span class="string">&quot;download_url&quot;</span>: <span class="string">&quot;https://github.com/SagerNet/sing-geosite/releases/latest/download/geosite.db&quot;</span>,</span><br><span class="line">      <span class="string">&quot;download_detour&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;rules&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;protocol&quot;</span>: <span class="string">&quot;dns&quot;</span>,</span><br><span class="line">        <span class="string">&quot;outbound&quot;</span>: <span class="string">&quot;dns-out&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;domain&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;myProxy.com&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;outbound&quot;</span>: <span class="string">&quot;proxy&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;domain&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;myDirect.com&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;outbound&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;geosite&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;cn&quot;</span>,</span><br><span class="line">          <span class="string">&quot;private&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;geoip&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;cn&quot;</span>,</span><br><span class="line">          <span class="string">&quot;private&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;domain_suffix&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;.cn&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;outbound&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;geosite&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;category-ads-all&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;outbound&quot;</span>: <span class="string">&quot;block&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;auto_detect_interface&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;final&quot;</span>: <span class="string">&quot;proxy&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;experimental&quot;</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å®˜æ–¹è¯´æ³•æ˜¯ REALITY å¯ä»¥&lt;strong&gt;æ¶ˆé™¤æœåŠ¡ç«¯ TLS æŒ‡çº¹ç‰¹å¾&lt;/strong&gt;ï¼ŒåŒæ—¶ä¿ç•™å‰å‘ä¿å¯†æ€§ç­‰åŠŸèƒ½ï¼Œè¯ä¹¦é“¾æ”»å‡»ä¹Ÿæ— æ•ˆï¼Œå®‰å…¨æ€§è¶…è¶Šäº†å¸¸è§„çš„ TLSã€‚è¿˜æœ‰ä¸ªä¼˜ç‚¹æ˜¯ REALITY &lt;strong&gt;å¯ä»¥æŒ‡å‘åˆ«äººçš„ç½‘ç«™ï¼Œæ— éœ€è‡ªå·±è´­ä¹°åŸŸ</summary>
      
    
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>å°†Naså…±äº«åˆ°è™šæ‹Ÿå±€åŸŸç½‘å†…</title>
    <link href="https://blog.lthero.cn/2024/07/04/ShareNasWithZerotier/"/>
    <id>https://blog.lthero.cn/2024/07/04/ShareNasWithZerotier/</id>
    <published>2024-07-04T15:38:11.000Z</published>
    <updated>2024-07-04T15:45:37.144Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>èµ·å› ï¼šå±€åŸŸç½‘å†…æœ‰ä¸ªNasï¼Œä½†æ²¡æ³•å®‰è£…Dockerï¼Œä¸èƒ½å®‰è£…Zerotierï¼›</p><p>ç›®çš„ï¼šé€šè¿‡Zerotieråˆ›å»ºä¸ªè™šæ‹Ÿå±€åŸŸç½‘ï¼Œè®©Nasè¢«è™šæ‹Ÿå±€åŸŸç½‘å…¶å®ƒè®¾å¤‡ä½¿ç”¨</p><p>åšæ³•ï¼š</p><ol><li>æŠŠNasæŒ‚è½½åˆ°å±€åŸŸç½‘å†…çš„Ubuntuè®¾å¤‡ä¸Š</li><li>Ubuntuä¸Šè¿è¡ŒZerotierå¹¶åŠ å…¥åˆ°è™šæ‹Ÿå±€åŸŸç½‘</li><li>Ubuntuä¸Šå°†æŒ‚è½½çš„ç›®å½•å…±äº«ï¼Œä»è€Œè®©è™šæ‹Ÿå±€åŸŸç½‘å†…çš„å…¶å®ƒè®¾å¤‡è®¿é—®åˆ°è¿™ä¸ªç›®å½•</li></ol></blockquote><h1 id="æŒ‚è½½nasåˆ°ubuntu">æŒ‚è½½Nasåˆ°ubuntu</h1><blockquote><p>ç›®çš„ï¼šæŠŠå±€åŸŸç½‘çš„Nasè®¾å¤‡æŒ‚è½½åˆ°Ubuntuç”µè„‘ä¸Š</p></blockquote><h2 id="å•æ¬¡æŒ‚è½½">å•æ¬¡æŒ‚è½½</h2><p>é¦–å…ˆåœ¨Ubuntu çš„ <code>/mnt</code> ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª NAS æŒ‚è½½ç›®å½• <code>nas</code>ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> /mnt/nas</span><br><span class="line"><span class="comment"># ä¸‹é¢è¿™ä¸ªå‘½ä»¤æ˜¯ä¸ºäº†å…±äº«æ—¶ï¼Œå…è®¸åŒ¿åç›´æ¥è®¿é—®ï¼Œè§£å†³æƒé™é—®é¢˜</span></span><br><span class="line">sudo <span class="built_in">chmod</span> 777 /mnt/nas</span><br></pre></td></tr></table></figure><p>å®‰è£… <code>cifs-utils</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install cifs-utils</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç”¨æˆ·çš„ <code>uid</code> å’Œ <code>gid</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span> root</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå®Œæˆå•æ¬¡æŒ‚è½½</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -t cifs -o uid=root,username=admin,password=xxxx,iocharset=utf8,file_mode=0777,dir_mode=0777 //192.168.6.154/public /mnt/nas/ </span><br></pre></td></tr></table></figure><ul><li>uid é€‰æ‹©<strong>ubuntuç³»ç»Ÿä¸Š</strong>æ™®é€šç”¨æˆ·æˆ–root</li><li>username æ˜¯<strong>nasä¸Š</strong>çš„ç”¨æˆ·å</li><li>password æ˜¯<strong>nasä¸Š</strong>çš„å¯†ç </li><li>iocharset=utf8 é˜²æ­¢æœ‰ä¸­æ–‡è·¯å¾„</li><li><a href="//192.168.6.154/public">//192.168.6.154/public</a> æ˜¯nasä¸‹çš„publicç›®å½•</li><li>/mnt/nas/ æŒ‚è½½åˆ°ubuntuçš„è¿™ä¸ªç›®å½•ä¸‹</li><li>file_mode=0777,dir_mode=0777  æƒé™å…¨å¼€</li></ul><h2 id="å¼€æœºè‡ªåŠ¨æŒ‚è½½">å¼€æœºè‡ªåŠ¨æŒ‚è½½</h2><p>ç¼–è¾‘å¯åŠ¨æŒ‚è½½æ–‡ä»¶ <code>fstab</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/fstab</span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶æœ€åè¿½åŠ ä¸€è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»…ç»™rootç”¨æˆ·å…¨éƒ¨æƒé™</span></span><br><span class="line">//192.168.6.154/public /mnt/nas/ cifs uid=root,username=admin,password=xxx,iocharset=utf8 0 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢è¿™è¡Œæ˜¯å°†æƒé™å…¨éƒ¨å¼€æ”¾</span></span><br><span class="line">//192.168.6.154/public /mnt/nas cifs uid=root,username=admin,password=xxxx,iocharset=utf8,file_mode=0777,dir_mode=0777 0 0</span><br></pre></td></tr></table></figure><p>åœ¨é‡å¯ä¹‹å‰ï¼Œä½ å¯ä»¥æ‰‹åŠ¨æµ‹è¯•è¿™ä¸ªé…ç½®æ˜¯å¦æœ‰æ•ˆã€‚</p><p>é¦–å…ˆï¼Œå¸è½½ä¹‹å‰å¯èƒ½å·²ç»æ‰‹åŠ¨æŒ‚è½½çš„å…±äº«ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo umount /mnt/nas/</span><br></pre></td></tr></table></figure><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æŒ‚è½½æ‰€æœ‰åœ¨<code>/etc/fstab</code>ä¸­å®šä¹‰çš„æ–‡ä»¶ç³»ç»Ÿï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -a</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰é”™è¯¯æç¤ºï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚</p><p>é‡å¯ç³»ç»Ÿï¼Œå¹¶æ£€æŸ¥CIFSå…±äº«æ˜¯å¦è‡ªåŠ¨æŒ‚è½½äº†ã€‚</p><p>é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œæ¯æ¬¡ç³»ç»Ÿå¯åŠ¨æ—¶ï¼ŒCIFSå…±äº«å°±ä¼šè‡ªåŠ¨æŒ‚è½½åˆ°æŒ‡å®šçš„æŒ‚è½½ç‚¹ã€‚å¦‚æœé‡åˆ°é—®é¢˜ï¼Œæ£€æŸ¥æ—¥å¿—æ–‡ä»¶ï¼ˆå¦‚<code>/var/log/syslog</code>ï¼‰ä¸­çš„é”™è¯¯ä¿¡æ¯</p><h1 id="ubuntuä¸Šè¿è¡Œzerotier">Ubuntuä¸Šè¿è¡ŒZerotier</h1><blockquote><p>å‚è€ƒæ—©å‰çš„ä¸€ç¯‡æ–‡ç« </p><p><a href="https://blog.lthero.cn/2024/05/25/install-zeroTier/">https://blog.lthero.cn/2024/05/25/install-zeroTier/</a></p></blockquote><h1 id="ubuntuå…±äº«æ–‡ä»¶">Ubuntuå…±äº«æ–‡ä»¶</h1><blockquote><p>ubuntuå…±äº«å…¶ç›®å½•ç»™å±€åŸŸç½‘å†…çš„å…¶å®ƒè®¾å¤‡</p><p>è¿™é‡Œæ³¨æ„ä¸‹ï¼Œå¦‚æœä½¿ç”¨äº†ä¸‹é¢çš„æ–¹æ³•ï¼Œå°±ä¸è¦åœ¨â€œæ¡Œé¢ç‰ˆâ€ä¸Šè¿›è¡Œæ“ä½œäº†ï¼ˆå¯¹æŸä¸ªç›®å½•å³é”®ï¼Œé€‰æ‹©å±€åŸŸç½‘å…±äº«ï¼Œè®¾ç½®åå­—ä¹‹ç±»çš„ï¼‰ï¼Œ<strong>å®¹æ˜“å†²çª</strong></p></blockquote><h2 id="é€šè¿‡-samba-å…±äº«ç›®å½•">é€šè¿‡ Samba å…±äº«ç›®å½•</h2><p>å®‰è£…samba</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install samba</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘ Samba é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/samba/smb.conf</span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[nas]</span><br><span class="line">    path = <span class="regexp">/mnt/</span>nas</span><br><span class="line">    browseable = yes</span><br><span class="line">    read only = no</span><br><span class="line">    guest ok = yes</span><br><span class="line">    force user = nobody</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0777</span></span><br></pre></td></tr></table></figure><h2 id="é‡å¯-samba-æœåŠ¡">é‡å¯ Samba æœåŠ¡</h2><p>æ¯æ¬¡ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œéƒ½éœ€è¦é‡å¯ Samba æœåŠ¡ä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart smbd</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•-samba-å…±äº«">æµ‹è¯• Samba å…±äº«</h2><p>ä½ ç°åœ¨å¯ä»¥ä»å…¶ä»–è®¡ç®—æœºè®¿é—®å…±äº«ç›®å½•ã€‚æ¯”å¦‚åœ¨ Windows ä¸Šï¼Œé€šè¿‡æ–‡ä»¶èµ„æºç®¡ç†å™¨è®¿é—®ï¼š</p><p>ï¼ˆå¯ä»¥ä»ç‰©ç†å±€åŸŸç½‘å†…è¿›è¡Œè®¿é—®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è™šæ‹Ÿipè¿›è¡Œè®¿é—®ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\\your_ubuntu_ip\nas</span><br></pre></td></tr></table></figure><p>åœ¨ Linux ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŒ‚è½½å…±äº«ç›®å½•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -t cifs //your_ubuntu_ip/nas /path/to/mount -o guest</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;èµ·å› ï¼šå±€åŸŸç½‘å†…æœ‰ä¸ªNasï¼Œä½†æ²¡æ³•å®‰è£…Dockerï¼Œä¸èƒ½å®‰è£…Zerotierï¼›&lt;/p&gt;
&lt;p&gt;ç›®çš„ï¼šé€šè¿‡Zerotieråˆ›å»ºä¸ªè™šæ‹Ÿå±€åŸŸç½‘ï¼Œè®©Nasè¢«è™šæ‹Ÿå±€åŸŸç½‘å…¶å®ƒè®¾å¤‡ä½¿ç”¨&lt;/p&gt;
&lt;p&gt;åšæ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æŠŠNasæŒ‚è½½åˆ°å±€åŸŸç½‘å†…çš„Ubu</summary>
      
    
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>å›½å¤–å†…å¤§æ¨¡å‹è¡Œä¸šåˆ†ææŠ¥å‘Š</title>
    <link href="https://blog.lthero.cn/2024/07/01/AReportAboutLLM/"/>
    <id>https://blog.lthero.cn/2024/07/01/AReportAboutLLM/</id>
    <published>2024-07-01T12:22:11.000Z</published>
    <updated>2024-07-01T12:48:49.028Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¤§æ¨¡å‹çš„å®šä¹‰">å¤§æ¨¡å‹çš„å®šä¹‰</h1><p>å¤§æ¨¡å‹æ˜¯æŒ‡å…·æœ‰<strong>å¤§è§„æ¨¡å‚æ•°å’Œå¤æ‚è®¡ç®—ç»“æ„</strong>çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œ<strong>æ‹¥æœ‰æ•°åäº¿ç”šè‡³æ•°åƒäº¿ä¸ªå‚æ•°</strong>ã€‚</p><p>å¤§æ¨¡å‹çš„è®¾è®¡ç›®çš„ï¼šä¸ºäº†<strong>æé«˜æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›å’Œé¢„æµ‹æ€§èƒ½</strong>ï¼Œèƒ½å¤Ÿå¤„ç†æ›´åŠ å¤æ‚çš„ä»»åŠ¡å’Œæ•°æ®ã€‚</p><p>å¤§æ¨¡å‹åœ¨å„ç§é¢†åŸŸéƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ï¼ŒåŒ…æ‹¬è‡ªç„¶è¯­è¨€å¤„ç†ã€è®¡ç®—æœºè§†è§‰ã€è¯­éŸ³è¯†åˆ«å’Œæ¨èç³»ç»Ÿç­‰ã€‚</p><h2 id="å¤§æ¨¡å‹å’Œå°æ¨¡å‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ">å¤§æ¨¡å‹å’Œå°æ¨¡å‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p><strong>å°æ¨¡å‹</strong>é€šå¸¸æŒ‡å‚æ•°è¾ƒå°‘ã€å±‚æ•°è¾ƒæµ…çš„æ¨¡å‹ï¼Œå®ƒä»¬å…·æœ‰è½»é‡çº§ã€é«˜æ•ˆç‡ã€æ˜“äºéƒ¨ç½²ç­‰ä¼˜ç‚¹ï¼Œé€‚ç”¨äºæ•°æ®é‡è¾ƒå°ã€è®¡ç®—èµ„æºæœ‰é™çš„åœºæ™¯ï¼Œä¾‹å¦‚ç§»åŠ¨ç«¯åº”ç”¨ã€åµŒå…¥å¼è®¾å¤‡ã€ç‰©è”ç½‘ç­‰ã€‚</p><p>è€Œå½“æ¨¡å‹çš„è®­ç»ƒæ•°æ®å’Œå‚æ•°ä¸æ–­æ‰©å¤§ï¼Œç›´åˆ°<strong>è¾¾åˆ°ä¸€å®šçš„ä¸´ç•Œè§„æ¨¡å</strong>ï¼Œå…¶è¡¨ç°å‡ºäº†ä¸€äº›æœªèƒ½é¢„æµ‹çš„ã€æ›´å¤æ‚çš„èƒ½åŠ›å’Œç‰¹æ€§ï¼Œ<strong>æ¨¡å‹èƒ½å¤Ÿä»åŸå§‹è®­ç»ƒæ•°æ®ä¸­è‡ªåŠ¨å­¦ä¹ å¹¶å‘ç°æ–°çš„ã€æ›´é«˜å±‚æ¬¡çš„ç‰¹å¾å’Œæ¨¡å¼</strong>ï¼Œè¿™ç§èƒ½åŠ›è¢«ç§°ä¸ºâ€œ<strong>æ¶Œç°èƒ½åŠ›</strong>â€ã€‚</p><blockquote><p><strong>å…·å¤‡æ¶Œç°èƒ½åŠ›çš„æœºå™¨å­¦ä¹ æ¨¡å‹</strong>å°±è¢«è®¤ä¸ºæ˜¯ç‹¬ç«‹æ„ä¹‰ä¸Šçš„å¤§æ¨¡å‹ï¼Œè¿™ä¹Ÿæ˜¯å…¶å’Œå°æ¨¡å‹æœ€å¤§æ„ä¹‰ä¸Šçš„åŒºåˆ«ã€‚</p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/Chatgpt1.png" alt="AI å¤§æ¨¡å‹çš„ä¸‰å¤§ç‰¹å¾ï¼šæ³›åŒ–æ€§ã€é€šç”¨æ€§ã€æ¶Œç°æ€§"></p><p>ç›¸æ¯”å°æ¨¡å‹ï¼Œå¤§æ¨¡å‹é€šå¸¸å‚æ•°è¾ƒå¤šã€å±‚æ•°è¾ƒæ·±ï¼Œå…·æœ‰æ›´å¼ºçš„è¡¨è¾¾èƒ½åŠ›å’Œæ›´é«˜çš„å‡†ç¡®åº¦ï¼Œä½†ä¹Ÿéœ€è¦æ›´å¤šçš„è®¡ç®—èµ„æºå’Œæ—¶é—´æ¥è®­ç»ƒå’Œæ¨ç†ï¼Œé€‚ç”¨äºæ•°æ®é‡è¾ƒå¤§ã€è®¡ç®—èµ„æºå……è¶³çš„åœºæ™¯ï¼Œä¾‹å¦‚äº‘ç«¯è®¡ç®—ã€é«˜æ€§èƒ½è®¡ç®—ã€äººå·¥æ™ºèƒ½ç­‰ã€‚</p><h2 id="å¤§æ¨¡å‹çš„æ ¸å¿ƒçªç ´æ˜¯ä»€ä¹ˆï¼Ÿ">å¤§æ¨¡å‹çš„æ ¸å¿ƒçªç ´æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>ä¸ä¼ ç»ŸAIä»…èƒ½å¤„ç†å•ä¸€ä»»åŠ¡ç›¸æ¯”ï¼Œå¤§æ¨¡å‹æŠ€æœ¯é€šè¿‡<strong>å…¶åºå¤§çš„å‚æ•°è§„æ¨¡ã€å¼ºå¤§çš„æ³›åŒ–èƒ½åŠ›</strong>ã€<strong>å¯¹å¤šæ¨¡æ€æ•°æ®çš„æ”¯æŒ</strong>ï¼Œå±•ç°å‡ºç±»ä¼¼äººç±»çš„é€šç”¨æ™ºèƒ½**â€œæ¶Œç°â€èƒ½åŠ›**ï¼Œèƒ½å¤Ÿå­¦ä¹ å¤šä¸ªé¢†åŸŸçŸ¥è¯†ã€å¤„ç†å¤šç§æ•°æ®å’Œä»»åŠ¡ã€‚</p><p>OpenAIæå‡ºçš„â€œè§„æ¨¡å®šå¾‹â€ï¼ˆScaling Lawï¼‰é©±åŠ¨äº†å¤§æ¨¡å‹çš„å¿«é€Ÿå‘å±•ï¼Œ</p><blockquote><p>è§„æ¨¡å®šå¾‹å³ï¼šæ¨¡å‹çš„æ€§èƒ½ä¸æ¨¡å‹çš„è§„æ¨¡ã€æ•°æ®é›†å¤§å°å’Œè®­ç»ƒç”¨çš„è®¡ç®—é‡ä¹‹é—´å­˜åœ¨å¹‚å¾‹å…³ç³»ï¼Œæ€§èƒ½ä¼šéšç€è¿™ä¸‰ä¸ªå› ç´ çš„æŒ‡æ•°å¢åŠ è€Œçº¿æ€§æé«˜</p></blockquote><ol><li><strong>æ¨¡å‹å‚æ•°è§„æ¨¡</strong>ï¼šéšç€æ¨¡å‹å‚æ•°æ•°é‡å¢åŠ ï¼Œæ¨¡å‹çš„è¡¨ç°ä¼šæœ‰æ˜¾è‘—æå‡ã€‚ä½†è¿™ç§æå‡ä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡ºç°é€’å‡æ•ˆåº”ï¼Œå³æ¯å¢åŠ ä¸€å€çš„å‚æ•°æ•°é‡æ‰€å¸¦æ¥çš„æ€§èƒ½æå‡ä¼šé€æ¸å‡å°ã€‚</li><li><strong>è®¡ç®—é‡</strong>ï¼šå¢åŠ è®­ç»ƒè®¡ç®—é‡ï¼ˆé€šå¸¸é€šè¿‡<strong>å¢åŠ è®­ç»ƒæ­¥æ•°æˆ–æ›´å¤æ‚çš„æ¨¡å‹ç»“æ„</strong>ï¼‰ä¹Ÿå¯ä»¥æå‡æ¨¡å‹æ€§èƒ½ã€‚è¿™ç§æå‡åŒæ ·å­˜åœ¨é€’å‡æ•ˆåº”ã€‚</li><li><strong>æ•°æ®é‡</strong>ï¼š<strong>å¢åŠ è®­ç»ƒæ•°æ®é‡</strong>åŒæ ·èƒ½å¤Ÿæå‡æ¨¡å‹æ€§èƒ½ï¼Œå¹¶ä¸”åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ•°æ®é‡çš„å¢åŠ æ¯”å¢åŠ å‚æ•°æ•°é‡æˆ–è®¡ç®—é‡æ›´ä¸ºæœ‰æ•ˆã€‚</li><li><strong>ç»„åˆæ•ˆåº”</strong>ï¼šæœ€ç†æƒ³çš„æƒ…å†µæ˜¯åŒæ—¶<strong>å¢åŠ æ¨¡å‹çš„å‚æ•°è§„æ¨¡ã€è®¡ç®—é‡å’Œæ•°æ®é‡</strong>ï¼Œè¿™æ ·å¯ä»¥æœ€å¤§åŒ–æ¨¡å‹çš„æ€§èƒ½æå‡ã€‚</li></ol><blockquote><p>é€šä¿—è€Œè¨€å°±æ˜¯â€œ<strong>å¤§åŠ›å‡ºå¥‡è¿¹</strong>â€ã€‚</p></blockquote><p>ä¼ ç»ŸAIæ¨¡å‹å‚æ•°é‡é€šå¸¸åœ¨æ•°ä¸‡è‡³æ•°äº¿ä¹‹é—´ï¼Œå¤§æ¨¡å‹çš„å‚æ•°é‡åˆ™è‡³å°‘åœ¨äº¿çº§ï¼Œå¹¶å·²å‘å±•åˆ°è¿‡ä¸‡äº¿çº§çš„è§„æ¨¡ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/Chatgpt.png" alt="image-20240701190534784"></p><h1 id="å¤§æ¨¡å‹ç›¸å…³æ¦‚å¿µåŒºåˆ†">å¤§æ¨¡å‹ç›¸å…³æ¦‚å¿µåŒºåˆ†</h1><p><strong>å¤§æ¨¡å‹ï¼ˆLarge Model,ä¹Ÿç§°åŸºç¡€æ¨¡å‹ï¼Œå³Foundation Modelï¼‰</strong>ï¼Œæ˜¯æŒ‡å…·æœ‰å¤§é‡å‚æ•°å’Œå¤æ‚ç»“æ„çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œèƒ½å¤Ÿå¤„ç†æµ·é‡æ•°æ®ã€å®Œæˆå„ç§å¤æ‚çš„ä»»åŠ¡ï¼Œå¦‚è‡ªç„¶è¯­è¨€å¤„ç†ã€è®¡ç®—æœºè§†è§‰ã€è¯­éŸ³è¯†åˆ«ç­‰ã€‚</p><p><strong>è¶…å¤§æ¨¡å‹</strong>ï¼šè¶…å¤§æ¨¡å‹æ˜¯å¤§æ¨¡å‹çš„ä¸€ä¸ªå­é›†ï¼Œå®ƒä»¬çš„å‚æ•°é‡è¿œè¶…è¿‡å¤§æ¨¡å‹ã€‚</p><p><strong>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLarge Language Modelï¼‰</strong>ï¼šé€šå¸¸æ˜¯å…·æœ‰å¤§è§„æ¨¡å‚æ•°å’Œè®¡ç®—èƒ½åŠ›çš„è‡ªç„¶è¯­è¨€å¤„ç†æ¨¡å‹ï¼Œä¾‹å¦‚ OpenAI çš„ GPT-3 æ¨¡å‹ã€‚è¿™äº›æ¨¡å‹å¯ä»¥é€šè¿‡å¤§é‡çš„æ•°æ®å’Œå‚æ•°è¿›è¡Œè®­ç»ƒï¼Œä»¥ç”Ÿæˆäººç±»ç±»ä¼¼çš„æ–‡æœ¬æˆ–å›ç­”è‡ªç„¶è¯­è¨€çš„é—®é¢˜ã€‚å¤§å‹è¯­è¨€æ¨¡å‹åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ã€æ–‡æœ¬ç”Ÿæˆå’Œæ™ºèƒ½å¯¹è¯ç­‰é¢†åŸŸæœ‰å¹¿æ³›åº”ç”¨ã€‚</p><p><strong>GPTï¼ˆGenerative Pre-trained Transformer</strong>ï¼‰ï¼šGPT å’ŒChatGPTéƒ½æ˜¯åŸºäºTransformeræ¶æ„çš„è¯­è¨€æ¨¡å‹ï¼Œä½†å®ƒä»¬åœ¨è®¾è®¡å’Œåº”ç”¨ä¸Šå­˜åœ¨åŒºåˆ«ï¼šGPTæ¨¡å‹æ—¨åœ¨ç”Ÿæˆè‡ªç„¶è¯­è¨€æ–‡æœ¬å¹¶å¤„ç†å„ç§è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ï¼Œå¦‚æ–‡æœ¬ç”Ÿæˆã€ç¿»è¯‘ã€æ‘˜è¦ç­‰ã€‚å®ƒé€šå¸¸åœ¨å•å‘ç”Ÿæˆçš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œå³æ ¹æ®ç»™å®šçš„æ–‡æœ¬ç”Ÿæˆè¿è´¯çš„è¾“å‡ºã€‚</p><p><strong>ChatGPT</strong>ï¼šChatGPTåˆ™ä¸“æ³¨äºå¯¹è¯å’Œäº¤äº’å¼å¯¹è¯ã€‚å®ƒç»è¿‡ç‰¹å®šçš„è®­ç»ƒï¼Œä»¥æ›´å¥½åœ°å¤„ç†å¤šè½®å¯¹è¯å’Œä¸Šä¸‹æ–‡ç†è§£ã€‚ChatGPTè®¾è®¡ç”¨äºæä¾›æµç•…ã€è¿è´¯å’Œæœ‰è¶£çš„å¯¹è¯ä½“éªŒï¼Œä»¥å“åº”ç”¨æˆ·çš„è¾“å…¥å¹¶ç”Ÿæˆåˆé€‚çš„å›å¤ã€‚</p><h1 id="å¤§æ¨¡å‹çš„å‘å±•å†ç¨‹">å¤§æ¨¡å‹çš„å‘å±•å†ç¨‹</h1><p>å¤§æ¨¡å‹çš„å‘å±•å†ç¨‹å¯ä»¥è¿½æº¯åˆ°æ—©æœŸçš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œå¹¶éšç€è®¡ç®—èƒ½åŠ›çš„æå‡å’Œå¤§æ•°æ®çš„ç§¯ç´¯é€æ¸æ¼”è¿›ã€‚ä»¥ä¸‹æ˜¯å¤§æ¨¡å‹å‘å±•çš„å‡ ä¸ªé‡è¦é˜¶æ®µï¼š</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/Hi.png" alt="image-20240701190534784"></p><h2 id="æ—©æœŸæ·±åº¦å­¦ä¹ æ¨¡å‹">æ—©æœŸæ·±åº¦å­¦ä¹ æ¨¡å‹</h2><p>åœ¨å¤§æ¨¡å‹ä¹‹å‰ï¼Œæ·±åº¦å­¦ä¹ å·²ç»åœ¨å›¾åƒå’Œè¯­éŸ³è¯†åˆ«ç­‰é¢†åŸŸå–å¾—äº†æ˜¾è‘—æˆæœã€‚æ—©æœŸçš„å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰å’Œé€’å½’ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰åœ¨ç‰¹å®šä»»åŠ¡ä¸Šè¡¨ç°å‡ºè‰²ï¼Œä½†è¿™äº›æ¨¡å‹çš„å‚æ•°æ•°é‡å’Œå¤æ‚åº¦ç›¸å¯¹è¾ƒå°ï¼Œä¸»è¦åº”ç”¨äºå•ä¸€ä»»åŠ¡ã€‚</p><h4 id="ä»£è¡¨æ€§æ¨¡å‹ï¼š">ä»£è¡¨æ€§æ¨¡å‹ï¼š</h4><ul><li>LeNetï¼ˆ1998å¹´ï¼‰ï¼šLeNetæ˜¯æœ€æ—©çš„CNNæ¨¡å‹ä¹‹ä¸€ï¼Œä¸»è¦ç”¨äºæ‰‹å†™æ•°å­—è¯†åˆ«ã€‚</li><li>AlexNetï¼ˆ2012å¹´ï¼‰ï¼šAlexNetåœ¨ImageNetæ¯”èµ›ä¸­å–å¾—äº†çªç ´æ€§èƒœåˆ©ï¼Œæ˜¾è‘—æ¨åŠ¨äº†æ·±åº¦å­¦ä¹ çš„å‘å±•ã€‚</li></ul><h2 id="è½¬æŠ˜ç‚¹ï¼štransformeræ¨¡å‹">è½¬æŠ˜ç‚¹ï¼šTransformeræ¨¡å‹</h2><p>2017å¹´ï¼ŒTransformeræ¨¡å‹çš„æå‡ºæ ‡å¿—ç€æ·±åº¦å­¦ä¹ é¢†åŸŸçš„ä¸€ä¸ªé‡è¦è½¬æŠ˜ç‚¹ã€‚Transformerå¼•å…¥äº†è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œæå¤§åœ°æé«˜äº†æ¨¡å‹åœ¨å¤„ç†è‡ªç„¶è¯­è¨€ä»»åŠ¡æ—¶çš„æ€§èƒ½ï¼Œå¹¶æˆä¸ºåç»­å¤§æ¨¡å‹çš„åŸºç¡€æ¶æ„ã€‚</p><h4 id="ä»£è¡¨æ€§æ¨¡å‹ï¼š">ä»£è¡¨æ€§æ¨¡å‹ï¼š</h4><ul><li>Transformerï¼ˆ2017å¹´ï¼‰ï¼šç”±Vaswaniç­‰äººæå‡ºï¼Œå¼•å…¥äº†è‡ªæ³¨æ„åŠ›æœºåˆ¶å’Œå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ï¼Œæ˜¾è‘—æå‡äº†è‡ªç„¶è¯­è¨€å¤„ç†çš„æ•ˆæœã€‚</li></ul><h2 id="é¢„è®­ç»ƒå’Œå¾®è°ƒï¼šbertå’Œgpt">é¢„è®­ç»ƒå’Œå¾®è°ƒï¼šBERTå’ŒGPT</h2><p>Transformerçš„æˆåŠŸå¸¦æ¥äº†é¢„è®­ç»ƒå’Œå¾®è°ƒèŒƒå¼çš„å…´èµ·ã€‚è¿™ä¸€é˜¶æ®µçš„ä»£è¡¨æ¨¡å‹åŒ…æ‹¬BERTå’ŒGPTç³»åˆ—ï¼Œå®ƒä»¬é€šè¿‡åœ¨å¤§è§„æ¨¡æ•°æ®ä¸Šè¿›è¡Œé¢„è®­ç»ƒï¼Œå†åœ¨ç‰¹å®šä»»åŠ¡ä¸Šè¿›è¡Œå¾®è°ƒï¼Œå±•ç¤ºäº†å¼ºå¤§çš„è¿ç§»å­¦ä¹ èƒ½åŠ›ã€‚</p><h4 id="ä»£è¡¨æ€§æ¨¡å‹ï¼š">ä»£è¡¨æ€§æ¨¡å‹ï¼š</h4><ul><li>BERTï¼ˆ2018å¹´ï¼‰ï¼šç”±Googleæå‡ºï¼Œé€šè¿‡åŒå‘ç¼–ç å™¨è¡¨ç¤ºå®ç°äº†åœ¨å¤šä¸ªNLPä»»åŠ¡ä¸Šçš„æ˜¾è‘—æå‡ã€‚</li><li>GPTï¼ˆ2018å¹´ï¼‰ï¼šç”±OpenAIæå‡ºï¼Œé‡‡ç”¨ç”Ÿæˆé¢„è®­ç»ƒç­–ç•¥ï¼Œé€šè¿‡å•å‘ç”Ÿæˆå®ç°äº†å¼ºå¤§çš„æ–‡æœ¬ç”Ÿæˆèƒ½åŠ›ã€‚</li></ul><h2 id="å¤§æ¨¡å‹æ—¶ä»£çš„å¼€å¯ï¼šgpt-3">å¤§æ¨¡å‹æ—¶ä»£çš„å¼€å¯ï¼šGPT-3</h2><p>2020å¹´ï¼ŒOpenAIå‘å¸ƒäº†GPT-3ï¼Œæ ‡å¿—ç€å¤§æ¨¡å‹æ—¶ä»£çš„æ­£å¼å¼€å¯ã€‚GPT-3æ‹¥æœ‰1750äº¿å‚æ•°ï¼Œå±•ç¤ºäº†å‰æ‰€æœªæœ‰çš„ç”Ÿæˆå’Œç†è§£èƒ½åŠ›ï¼Œä½¿å¾—å¤§æ¨¡å‹åœ¨NLPé¢†åŸŸçš„åº”ç”¨å–å¾—äº†çªç ´æ€§è¿›å±•ã€‚</p><h4 id="ä»£è¡¨æ€§æ¨¡å‹ï¼š">ä»£è¡¨æ€§æ¨¡å‹ï¼š</h4><ul><li>GPT-3ï¼ˆ2020å¹´ï¼‰ï¼šOpenAIçš„GPT-3æ¨¡å‹é€šè¿‡å¤§è§„æ¨¡é¢„è®­ç»ƒå’Œå‚æ•°æ‰©å±•ï¼Œå±•ç¤ºäº†åœ¨å¤šç§ä»»åŠ¡ä¸Šçš„å¼ºå¤§æ€§èƒ½ã€‚</li></ul><p><img src="https://cdn.lthero.cn/post_images/course/ML/ChatgptExp.png" alt="è§£é‡Šchatgptå·¥ä½œåŸç†"></p><h2 id="å¤šæ¨¡æ€æ¨¡å‹çš„å‘å±•">å¤šæ¨¡æ€æ¨¡å‹çš„å‘å±•</h2><p>éšç€å¤§æ¨¡å‹æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ï¼Œç ”ç©¶è€…å¼€å§‹æ¢ç´¢å¤šæ¨¡æ€æ¨¡å‹ï¼Œè¿™äº›æ¨¡å‹èƒ½å¤Ÿå¤„ç†å’Œç†è§£å¤šç§æ•°æ®å½¢å¼ï¼ˆå¦‚æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰ï¼‰ï¼Œè¿›ä¸€æ­¥æå‡äº†AIçš„åº”ç”¨èŒƒå›´å’Œæ™ºèƒ½æ°´å¹³ã€‚</p><h4 id="ä»£è¡¨æ€§æ¨¡å‹ï¼š">ä»£è¡¨æ€§æ¨¡å‹ï¼š</h4><ul><li>DALL-Eï¼ˆ2021å¹´ï¼‰ï¼šç”±OpenAIæå‡ºï¼Œèƒ½å¤Ÿæ ¹æ®æ–‡æœ¬æè¿°ç”Ÿæˆå›¾åƒï¼Œå±•ç¤ºäº†æ–‡æœ¬åˆ°å›¾åƒç”Ÿæˆçš„å¼ºå¤§èƒ½åŠ›ã€‚</li><li>CLIPï¼ˆ2021å¹´ï¼‰ï¼šç”±OpenAIæå‡ºï¼Œèƒ½å¤ŸåŒæ—¶å¤„ç†æ–‡æœ¬å’Œå›¾åƒï¼Œå¹¶å®ç°è·¨æ¨¡æ€ç†è§£å’Œç”Ÿæˆã€‚</li></ul><h2 id="ç”Ÿæˆå¼æ¨¡å‹çš„å‘å±•">ç”Ÿæˆå¼æ¨¡å‹çš„å‘å±•</h2><p>ç”Ÿæˆå¼æ¨¡å‹æ˜¯å¤§æ¨¡å‹çš„é‡è¦åˆ†æ”¯ï¼Œé€šè¿‡å­¦ä¹ æ•°æ®çš„åˆ†å¸ƒæ¥ç”Ÿæˆæ–°çš„æ•°æ®ã€‚è¿™äº›æ¨¡å‹åœ¨å›¾åƒç”Ÿæˆã€æ–‡æœ¬ç”Ÿæˆã€éŸ³é¢‘ç”Ÿæˆç­‰é¢†åŸŸå±•ç°äº†å¼ºå¤§çš„èƒ½åŠ›ã€‚</p><h4 id="ä»£è¡¨æ€§æ¨¡å‹ï¼š">ä»£è¡¨æ€§æ¨¡å‹ï¼š</h4><ul><li>Diffusionæ¨¡å‹ï¼šä¸€ç§é€šè¿‡é€æ­¥æ·»åŠ å™ªå£°å¹¶é€†å‘å»å™ªçš„æ–¹å¼ç”Ÿæˆå›¾åƒçš„æ¨¡å‹ï¼Œå±•ç¤ºäº†é«˜è´¨é‡å›¾åƒç”Ÿæˆçš„æ½œåŠ›ã€‚</li><li>ChatGPTï¼ˆ2022å¹´ï¼‰ï¼šåŸºäºGPTæ¶æ„ï¼Œä¸“æ³¨äºå¯¹è¯å’Œäº¤äº’ï¼Œé€šè¿‡å¾®è°ƒä¼˜åŒ–å¯¹è¯è´¨é‡ï¼Œæä¾›æµç•…çš„å¯¹è¯ä½“éªŒã€‚</li></ul><h1 id="å›½å†…å¤–å¤§æ¨¡å‹å¯¹æ¯”">å›½å†…å¤–å¤§æ¨¡å‹å¯¹æ¯”</h1><h2 id="chatgptæˆåŠŸåŸå› ç®€è¦åˆ†æ">ChatGPTæˆåŠŸåŸå› ç®€è¦åˆ†æ</h2><blockquote><p>ChatGPTçš„æˆåŠŸå¹¶éå¶ç„¶ï¼Œè€Œæ˜¯å¤šå› ç´ ç»¼åˆä½œç”¨çš„ç»“æœï¼Œå‡¸æ˜¾äº†æˆ˜ç•¥æ–¹å‘å’Œæ‰§è¡Œè·¯å¾„çš„è‡³å…³é‡è¦æ€§ã€‚</p></blockquote><p>é¦–å…ˆï¼ŒOpenAIè‡ªéè¥åˆ©å‘åŠè¥åˆ©æ¨¡å¼è½¬å‹ï¼Œä¸ºChatGPTè¿™ä¸€æ˜ç¡®å•†ä¸šåŒ–æ–¹å‘çš„äº§å“æä¾›äº†æœ‰åŠ›çš„å¸‚åœºå¯¼å‘ã€‚å…¶æ¬¡ï¼ŒOpenAIå§‹ç»ˆç§‰æŒå®ç°å®‰å…¨çš„é€šç”¨äººå·¥æ™ºèƒ½ï¼ˆArtificial General Intelligenceï¼ŒAGIï¼‰çš„åˆå¿ƒï¼Œç”±åˆ›å§‹å›¢é˜Ÿç”¨ç¬¬ä¸€æ€§åŸç†å®šä½ç ”å‘è·¯çº¿ï¼ŒæˆåŠŸçªç ´å„ç§æŠ€æœ¯ç“¶é¢ˆï¼Œä»è€Œç¡®ç«‹åœ¨é€šç”¨AIé¢†åŸŸçš„é¢†å…ˆåœ°ä½</p><p>èµ„é‡‘æŠ•å…¥ä¸å‘å±•ç­–ç•¥ä¸º ChatGPTæˆåŠŸå¸¦æ¥è‡³å…³é‡è¦çš„å½±å“</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/Chatgpt2-3.png" alt="èµ„é‡‘æŠ•å…¥ä¸å‘å±•ç­–ç•¥ä¸º ChatGPTæˆåŠŸå¸¦æ¥è‡³å…³é‡è¦çš„å½±å“"></p><p>åœ¨æ•°æ®æ–¹é¢ï¼ŒGPT-3æ¨¡å‹è®­ç»ƒäº†é«˜è¾¾45TBçš„æ•°æ®ï¼Œæ¶µç›–æ•°åƒä¸‡æœ¬æ–‡å­¦ä½œå“ã€‚èµ„é‡‘ä¸Šï¼Œä»GPT-1åˆ°ChatGPTçš„å¼€å‘å‘¨æœŸä¸­ï¼Œæ€»æŠ•å…¥èµ„é‡‘é«˜è¾¾æ•°åäº¿ç¾å…ƒï¼Œè¿™äº›èµ„é‡‘ä¸»è¦ç”¨äºæ•°æ®é‡‡é›†ã€æ¨¡å‹è®­ç»ƒã€è¿è¥ä»¥åŠäººåŠ›èµ„æºã€‚ç®—åŠ›æ–¹é¢ï¼ŒOpenAIé€šè¿‡ä¸å¾®è½¯Azureçš„åˆä½œï¼ŒåŠ¨ç”¨äº†å¤§çº¦1ä¸‡å—NVIDIA A100 GPUï¼Œç¡®ä¿æ¨¡å‹èƒ½å¤Ÿé«˜æ•ˆè¿è¡Œã€‚</p><p>æ›´ä¸å¯æˆ–ç¼ºçš„æ˜¯äººæ‰å› ç´ ã€‚ChatGPTå›¢é˜Ÿç”±87åå…¨çƒé¡¶å°–çš„AIä¸“å®¶ç»„æˆï¼Œä¸»è¦æ¯•ä¸šäºæ–¯å¦ç¦ã€ä¼¯å…‹åˆ©å’Œéº»çœç†å·¥ç­‰åæ ¡ï¼Œå…¶ä¸­5äººè¢«è¯„é€‰ä¸º2023å¹´åº¦â€œAI 2000å…¨çƒäººå·¥æ™ºèƒ½å­¦è€…â€ã€‚ç»¼ä¸Šæ‰€è¿°ï¼ŒChatGPTçš„æˆåŠŸæ˜¯å¤šç»´åº¦è¦ç´ ï¼ŒåŒ…æ‹¬åˆå¿ƒã€æ•°æ®ã€èµ„é‡‘ã€ç®—åŠ›å’Œäººæ‰ï¼Œå…±åŒä½œç”¨ä¸‹çš„å¿…ç„¶ç»“æœã€‚</p><blockquote><p>é€šç”¨åŸºç¡€å¤§è¯­è¨€æ¨¡å‹çš„ä»·å€¼ä¸è‡ªç ”å¡ç‚¹å¦‚ä¸‹</p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/Chatgpt3-1.png" alt="å›¾3-1 é€šç”¨åŸºç¡€å¤§è¯­è¨€æ¨¡å‹çš„ä»·å€¼ä¸è‡ªç ”å¡ç‚¹"></p><p>åœ¨é€šç”¨åŸºç¡€å¤§è¯­è¨€æ¨¡å‹çš„ç ”å‘å’Œåº”ç”¨æ–¹é¢ï¼Œä»·å€¼ä¸æŒ‘æˆ˜å¹¶å­˜ï¼ˆå¦‚å›¾3-1æ‰€ç¤ºï¼‰ã€‚</p><p>é¦–å…ˆï¼Œä»<strong>ä»·å€¼è§’åº¦çœ‹</strong>ï¼Œè‡ªä¸»å¯æ§çš„æ¨¡å‹åœ¨å…¨çƒæ”¿æ²»ç»æµæ ¼å±€ä¸‹å…·æœ‰æˆ˜ç•¥æ„ä¹‰ï¼Œèƒ½æœ‰æ•ˆè§„é¿æ•°æ®è·¨å¢ƒçš„åˆè§„é£é™©ï¼Œæ»¡è¶³ä¸­å¤§å‹ä¼ä¸šå’Œæ”¿åºœçš„ç§æœ‰åŒ–éƒ¨ç½²éœ€æ±‚ï¼ŒåŒæ—¶è¿˜èƒ½æŠµå¾¡ç¾å›½ç§‘æŠ€ä¿æŠ¤ä¸»ä¹‰çš„å½±å“ã€‚æ›´è¿›ä¸€æ­¥ï¼Œ<strong>å¦‚èƒ½æˆåŠŸå¼€å‘ï¼Œå…¶å°†åƒâ€œè¶…çº§å¤§è„‘â€ä¸€æ ·ï¼Œæˆä¸ºå…·æœ‰å·¨å¤§å•†ä¸šä»·å€¼çš„èµ„äº§</strong>ã€‚</p><p><strong>é¢ä¸´çš„ä¸»è¦å¡ç‚¹åŒ…æ‹¬</strong></p><ol><li>ç¾å›½çš„èŠ¯ç‰‡ç¦ä»¤å¯¼è‡´çš„é«˜ç«¯AIç®—åŠ›ä¸è¶³</li><li>ä¸­æ–‡é«˜è´¨é‡æ•°æ®èµ„æºç›¸è¾ƒäºè‹±æ–‡çš„æ˜æ˜¾ä¸è¶³</li><li>ç ”å‘è¿‡ç¨‹ä¸­å¿…è¦çš„æŠ€æœ¯å’Œå·¥ç¨‹èƒ½åŠ›ï¼Œä¾‹å¦‚åˆ†å¸ƒå¼è®­ç»ƒå’Œæ¨¡å‹è’¸é¦ç­‰</li><li>æ­¤å¤–ï¼Œå¦‚ä½•å°†â€œknow-howâ€æ•°æ®æœ‰æ•ˆè½¬åŒ–ä¸ºé—®ç­”èƒ½åŠ›ï¼Œè¿˜éœ€è¦å¤§é‡çš„æç¤ºå·¥ç¨‹å¸ˆæŠ•å…¥ã€‚</li></ol><p>ç»¼åˆæ¥çœ‹ï¼Œè™½æœ‰å·¨å¤§ä»·å€¼ç­‰å¾…æŒ–æ˜ï¼Œä½†ä¹Ÿéœ€é¢å¯¹ä¸€ç³»åˆ—å¤æ‚çš„æŒ‘æˆ˜å’Œé™åˆ¶å› ç´ ã€‚</p><h2 id="ä¸­å›½è‡ªç ”é€šç”¨åŸºç¡€å¤§è¯­è¨€æ¨¡å‹">ä¸­å›½è‡ªç ”é€šç”¨åŸºç¡€å¤§è¯­è¨€æ¨¡å‹</h2><p>åœ¨2023å¹´3æœˆï¼ŒOpenAIå‘å¸ƒäº†å…·æœ‰GPT-4æ¶æ„çš„ChatGPTï¼Œå®ç°äº†å¤šæ¨¡æ€äº¤äº’ã€æ˜¾è‘—ä¼˜åŒ–äº†é•¿æ–‡æœ¬ç†è§£ä¸ç”Ÿæˆèƒ½åŠ›ï¼Œå¹¶åœ¨å¯æ§æ€§æ–¹é¢å–å¾—äº†é‡å¤§çªç ´ï¼Œæ­¤ä¸¾åœ¨å…¨çƒç§‘æŠ€ç•Œå¼•å‘äº†å¼ºçƒˆéœ‡è¡ã€‚</p><p>ä¸æ­¤åŒæ—¶ï¼Œä¸­å›½çš„ç§‘æŠ€ä¸æŠ•èµ„ç•Œä¹Ÿé«˜åº¦å…³æ³¨è¿™ä¸€è¶‹åŠ¿ï¼Œ<strong>ç™¾åº¦ç´§è·Ÿå…¶åï¼Œå‘å¸ƒäº†â€œæ–‡å¿ƒä¸€è¨€â€äº§å“</strong>ã€‚å°½ç®¡åœ¨äº§å“åŠŸèƒ½ã€æˆç†Ÿåº¦å’Œç”¨æˆ·å¹¶å‘å¤„ç†ç­‰æ–¹é¢ä¸ChatGPTå°šæœ‰è¾ƒå¤§å·®è·ï¼Œä½†ç™¾åº¦çš„è¿™ä¸€è¡ŒåŠ¨æ ‡å¿—ç€ä¸­å›½åœ¨æ–°ä¸€è½®å…¨çƒâ€œç§‘æŠ€å†›å¤‡ç«èµ›â€ä¸­ç§¯æçš„æ¢ç´¢ä¸è¡¨æ€ã€‚</p><p>ç›®å‰ï¼Œç™¾åº¦å·²å¯åŠ¨äº†åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£çš„å¼€æ”¾æµ‹è¯•ï¼Œå¹¶é’ˆå¯¹Bç«¯å¸‚åœºè¿›è¡Œæˆ˜ç•¥å®šä½ã€‚å…¶å®ƒç§‘æŠ€å·¨å¤´å¦‚360ã€é˜¿é‡Œã€åä¸ºã€å•†æ±¤ã€äº¬ä¸œã€ç§‘å¤§è®¯é£ã€å­—èŠ‚è·³åŠ¨ç­‰ä¹Ÿåœ¨åŠ é€ŸåŠ¨ä½œï¼Œå„è‡ªä»è‡ªèº«ä¸šåŠ¡ç”Ÿæ€å‡ºå‘ï¼Œé€‰æ‹©äº†ä¸åŒçš„æˆ˜ç•¥è·¯å¾„ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/834e858aee044bfd832117e1d183bf46.png" alt="å›½å†…å¤–å¤§æ¨¡å‹å‘å±•"></p><p>ä»<strong>å…¨çƒæ”¿æ²»ç»æµå±€åŠ¿</strong>çœ‹ï¼Œ<strong>è‡ªä¸»ç ”å‘é€šç”¨é¢„è®­ç»ƒå¤§è¯­è¨€æ¨¡å‹å…·æœ‰è‡³å…³é‡è¦çš„æˆ˜ç•¥ä»·å€¼</strong>ï¼Œå®ƒæ˜¯ç¡®ä¿ç½‘ç»œå®‰å…¨å’Œä¿¡æ¯å®‰å…¨çš„åŸºç¡€ã€‚</p><p>ä»<strong>è‡ªç ”å¯è¡Œæ€§è§’åº¦</strong>æ¥çœ‹ï¼Œè€ƒè™‘åˆ°ç®—åŠ›ã€æ•°æ®ã€ç®—æ³•ã€äººæ‰å’Œèµ„é‡‘ç­‰å¤šä¸ªè¦ç´ ï¼Œä¸­å›½ä»…æœ‰å°‘æ•°å¤´éƒ¨ä¼ä¸šå…·å¤‡è¿›è¡Œæ­¤ç±»ç ”å‘çš„èµ„æ ¼ã€‚å¯ä»¥é¢„è§ï¼Œæœªæ¥å¤§æ¨¡å‹æŠ€æœ¯å°†æˆä¸ºå„å¤§ä¼ä¸šç«ç›¸äº‰å¤ºçš„å…³é”®èµ„æºï¼Œè°èƒ½åœ¨è¿™åœºç«èµ›ä¸­é¢†è·‘ï¼Œä¸ä»…åœ¨åº”ç”¨å±‚æœ‰æ›´å¤šçš„è¥æ”¶è¯è¯­æƒï¼Œç”šè‡³åœ¨ç®—åŠ›å±‚ä¹Ÿå°†å…·æœ‰æ˜æ˜¾ä¼˜åŠ¿ã€‚</p><p>ä»è‡ªç ”é€šç”¨é¢„è®­ç»ƒå¤§è¯­è¨€æ¨¡å‹ï¼ˆLarge Language Modelï¼ŒLLMï¼‰çš„<strong>å¿…è¦æ€§</strong>è§’åº¦ï¼Œè‡ªä¸»å¯æ§æ˜¯ç¡®ä¿ç½‘ç»œå’Œä¿¡æ¯å®‰å…¨çš„åŸºç¡€ï¼Œè€Œè‡ªç ”æ¨¡å‹åœ¨å…¨çƒæ”¿æ²»ç»æµæ ¼å±€ä¸‹å…·æœ‰æˆ˜ç•¥æ„ä¹‰ã€‚</p><p>ä»<strong>å¯è¡Œæ€§è§’åº¦</strong>ï¼Œé‰´äºç ”å‘LLMæ‰€éœ€çš„ç®—åŠ›ã€æ•°æ®ã€ç®—æ³•ã€äººæ‰å’Œèµ„é‡‘ï¼Œ<strong>ä»…æœ‰å°‘æ•°ä¸­å›½é¡¶çº§äº’è”ç½‘å…¬å¸å…·å¤‡ç›¸åº”æ¡ä»¶</strong>ã€‚å„å¤§å‚ä¸è€…æ ¹æ®è‡ªèº«ä¸šåŠ¡ç”Ÿæ€é€‰æ‹©ä¸åŒçš„æˆ˜ç•¥è·¯çº¿ï¼Œä½†ä¸€ä¸ªå¤§èƒ†çš„å‡è®¾æ˜¯ï¼Œæœªæ¥æ‹¥æœ‰å…ˆè¿›çš„å¤§æ¨¡å‹å’Œç”Ÿæ€ç³»ç»Ÿçš„ä¼ä¸šå°†æ›´æœ‰å¯èƒ½åœ¨åº”ç”¨å±‚åˆ°ç®—åŠ›å±‚æŒæ¡è¥æ”¶è¯è¯­æƒã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/Chatgpt3-2.png" alt="å›¾3-2 ä¸­å›½å¤§è¯­è¨€æ¨¡å‹äº§ä¸šä»·å€¼é“¾"></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/Chatgpt3-2-2.png" alt="å›¾3-2 ä¸­å›½å¤§è¯­è¨€æ¨¡å‹äº§ä¸šä»·å€¼é“¾"></p><p>æ•´ä¸ªä»·å€¼é“¾ä¸ä»…ä¾èµ–äºç®—æ³•å’Œæ¨¡å‹ï¼Œæ›´ç¦»ä¸å¼€ç®—åŠ›åŸºç¡€è®¾æ–½å’Œæ•°æ®åŸºç¡€è®¾æ–½çš„æ”¯æŒã€‚ç®—åŠ›åŸºç¡€è®¾æ–½æä¾›äº†å¤§æ¨¡å‹è®­ç»ƒå’Œè¿è¡Œæ‰€éœ€çš„åº•å±‚èƒ½åŠ›ï¼Œè€Œæ•°æ®åŸºç¡€è®¾æ–½åˆ™ä¸ºæ¨¡å‹æä¾›ä¸°å¯Œçš„è®­ç»ƒæ•°æ®å’Œç”¨æˆ·åé¦ˆï¼Œå…±åŒæ„å»ºäº†ä¸€ä¸ªå¥å£®å’Œé«˜æ•ˆçš„å¤§è¯­è¨€æ¨¡å‹äº§ä¸šç”Ÿæ€ç³»ç»Ÿã€‚</p><h2 id="ç¡¬ä»¶èµ„æºå…¨é¢å¯¹æ¯”">ç¡¬ä»¶èµ„æºå…¨é¢å¯¹æ¯”</h2><p>OpenAIä»¥å…¶å¯¹å‰æ²¿AIæŠ€æœ¯çš„é¢†å¯¼åœ°ä½ï¼Œä½¿ç”¨äº†<strong>800å¼ NVIDIA A100æ˜¾å¡</strong>ï¼Œæ€»è€—ç”µé‡è¾¾åˆ°1500åƒç“¦æ—¶ï¼Œä»¥å®ç°å…¶GPTç³»åˆ—æ¨¡å‹çš„é«˜æ•ˆè®­ç»ƒã€‚</p><p>Googleåˆ™ä¾é äº†è‡ªå®¶å¼€å‘çš„TPU v4ï¼Œ<strong>éƒ¨ç½²äº†1000å¼ æ˜¾å¡</strong>ï¼Œæ€»è€—ç”µé‡çº¦ä¸º1300åƒç“¦æ—¶ï¼Œä»¥æ”¯æŒå…¶å„ç±»å¤§è§„æ¨¡æœºå™¨å­¦ä¹ é¡¹ç›®ã€‚</p><p>Metaé‡‡ç”¨äº†<strong>NVIDIAçš„V100æ˜¾å¡ï¼Œå…±è®¡900å¼ </strong>ï¼Œæ€»è€—ç”µé‡è¾¾åˆ°1400åƒç“¦æ—¶ï¼Œæ”¯æŒå…¶è™šæ‹Ÿç°å®å’Œå¢å¼ºç°å®ç­‰å…ˆè¿›æŠ€æœ¯çš„ç ”å‘ã€‚</p><p>ä¸­å›½ç§‘æŠ€å·¨å¤´ç™¾åº¦åˆ™é€‰æ‹©äº†<strong>AMDçš„Instinct MI100æ˜¾å¡ï¼Œå…±éƒ¨ç½²äº†700å¼ </strong>ï¼Œè€—ç”µé‡å¤§çº¦1200åƒç“¦æ—¶ï¼Œä»¥æ¨åŠ¨å…¶è‡ªåŠ¨é©¾é©¶å’Œæ™ºèƒ½æœç´¢ç­‰å…³é”®ä¸šåŠ¡çš„è¿›å±•ã€‚</p><p>æ¸…åå¤§å­¦ä¹Ÿåœ¨AIé¢†åŸŸå‘æŒ¥äº†é‡è¦ä½œç”¨ï¼Œ<strong>é‡‡ç”¨äº†600å¼ NVIDIAçš„A30æ˜¾å¡</strong>ï¼Œæ€»è€—ç”µé‡çº¦ä¸º1000åƒç“¦æ—¶ï¼Œç”¨äºæ”¯æŒå„ç±»å­¦æœ¯ç ”ç©¶å’Œåˆ›æ–°é¡¹ç›®ã€‚</p><p>æ€»ä½“è€Œè¨€ï¼Œä»ä¸Šè¿°å„å¤§å…¬å¸å’Œæœºæ„çš„ç¡¬ä»¶èµ„æºé…ç½®å¯ä»¥çœ‹å‡ºï¼Œæ˜¾å¡ç±»å‹ã€æ•°é‡å’Œè€—ç”µé‡çš„é€‰æ‹©åæ˜ äº†å„è‡ªçš„æŠ€æœ¯æ–¹å‘å’Œæˆ˜ç•¥ç›®æ ‡ã€‚æ— è®ºæ˜¯é€‰æ‹©ä¸šç•Œé¢†å…ˆçš„æ˜¾å¡äº§å“ï¼Œè¿˜æ˜¯è‡ªä¸»å¼€å‘ç¡¬ä»¶ï¼Œéƒ½ä½“ç°äº†å¤§è¯­è¨€æ¨¡å‹è®­ç»ƒé¢†åŸŸç«äº‰çš„æ¿€çƒˆå’Œå¤šæ ·åŒ–ã€‚è¿™ä¸€ç«èµ›ä¸ä»…æ¨åŠ¨äº†ç¡¬ä»¶æŠ€æœ¯çš„è¿›æ­¥ï¼Œä¹Ÿä¸ºAIçš„æœªæ¥å‘å±•å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚</p><h2 id="ç ”å‘è·¯å¾„ä¸æŠ€æœ¯å¯¹æ¯”">ç ”å‘è·¯å¾„ä¸æŠ€æœ¯å¯¹æ¯”</h2><p>åœ¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰çš„å…¨çƒç«æŠ€åœºä¸­ï¼ŒChatGPTä¸Googleçš„Gopherã€LaMDAï¼Œä»¥åŠMetaçš„Llamaç­‰æ„æˆäº†å›½é™…æ ‡æ†</p><p>è€Œå›½å†…åˆ™ç”±ç™¾åº¦çš„â€œæ–‡å¿ƒä¸€è¨€â€ã€360çš„å¤§è¯­è¨€æ¨¡å‹ã€é˜¿é‡Œçš„â€œé€šä¹‰åƒé—®â€å’Œå•†æ±¤çš„â€œå•†é‡â€ç­‰å¼•é¢†æ½®æµã€‚</p><p>ä»å¯¹è¯å’Œæ–‡æœ¬ç”Ÿæˆèƒ½åŠ›çš„è§’åº¦ï¼Œ<strong>ChatGPTæš‚å±…ä¼˜åŠ¿ï¼Œä½†è¿™å¹¶éå› ä¸ºæŠ€æœ¯å£å’ä¸å¯é€¾è¶Š</strong>ã€‚å®é™…ä¸Šï¼ŒGoogleç­‰å›½å¤–ä¼ä¸šå› æˆ˜ç•¥å’ŒæŠ€æœ¯ç†å¿µé€‰æ‹©äº†ä¸åŒçš„å‘å±•è·¯å¾„ï¼Œè¿™æ˜¯å…¶æš‚æ—¶è½åçš„ä¸»å› ã€‚<strong>éšç€æ–°æŠ€æœ¯çš„ä¸æ–­æ¶Œç°ï¼Œèµ¶è¶…ChatGPTå¹¶éä¸å¯èƒ½</strong>ã€‚ç›¸å¯¹è€Œè¨€ï¼Œç™¾åº¦ç­‰å›½å†…ä¼ä¸šåœ¨æ•°æ®é›†ã€è®¡ç®—èƒ½åŠ›å’Œå·¥ç¨‹åŒ–æ–¹é¢å­˜åœ¨çŸ­æ¿ï¼ŒçŸ­æœŸå†…éš¾ä»¥å®ç°å¯¹å›½å¤–æ¨¡å‹çš„è¿å¤´èµ¶ä¸Šï¼Œè¿™æ›´å¤šåœ°éœ€è¦å›½å†…AIäº§ä¸šå…¨é“¾æ¡çš„ååŒè¿›æ­¥ã€‚</p><p>åœ¨å½±å“å¤§è¯­è¨€æ¨¡å‹æ€§èƒ½çš„å› ç´ æ–¹é¢ï¼Œè®­ç»ƒæ•°æ®ã€æ¨¡å‹è§„æ¨¡ï¼ˆå³å‚æ•°æ•°é‡ï¼‰ã€ç”Ÿæˆç®—æ³•å’Œä¼˜åŒ–æŠ€æœ¯è¢«è®¤ä¸ºæ˜¯æ ¸å¿ƒå˜é‡ã€‚</p><p>ç„¶è€Œï¼Œå¦‚ä½•å‡†ç¡®é‡åŒ–è¿™äº›å› ç´ å¯¹æ¨¡å‹æ€§èƒ½çš„å…·ä½“å½±å“ï¼Œç›®å‰è¿˜å¤„äºæ¢ç´¢é˜¶æ®µï¼Œæ²¡æœ‰æ˜ç¡®çš„ç»“è®ºã€‚æ€»ä½“æ¥çœ‹ï¼Œä¸–ç•Œé¡¶çº§çš„å¤§è¯­è¨€æ¨¡å‹åœ¨æŠ€æœ¯å±‚é¢ä¸Šå°šæœªæ‹‰å¼€æ˜æ˜¾çš„å·®è·ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/Chatgpt3-3-3.png" alt="å›¾3-3 å›½å†…å¤–ä¸»è¦å¤§è¯­è¨€æ¨¡å‹ç ”å‘è·¯å¾„ä¸æŠ€æœ¯å¯¹æ¯”"></p><h2 id="å•†ä¸šè·¯å¾„å¯¹æ¯”">å•†ä¸šè·¯å¾„å¯¹æ¯”</h2><h3 id="chatgpt">ChatGPT</h3><p>åœ¨æˆ˜ç•¥ä¸šåŠ¡æ‹“å±•æ–¹é¢ï¼Œ<strong>ChatGPT</strong>å·²ç»å½¢æˆäº†æ˜ç¡®ä¸”å·®å¼‚åŒ–çš„å•†ä¸šè·¯çº¿ï¼Œ<strong>ä¸»è¦å›´ç»•APIã€è®¢é˜…åˆ¶å’Œæˆ˜ç•¥åˆä½œ</strong>ï¼ˆä¾‹å¦‚ä¸å¾®è½¯çš„Bingã€Officeç­‰è½¯ä»¶çš„åµŒå…¥åˆä½œï¼‰ä¸‰å¤§è¥æ”¶æ¨¡å¼ï¼ˆå¦‚å›¾3-4æ‰€ç¤ºï¼‰ã€‚åœ¨ç”¨æˆ·æ•°æ®ç§¯ç´¯ã€äº§å“å¸ƒå±€å’Œç”Ÿæ€å»ºè®¾ç­‰æ–¹é¢å·²å…·å¤‡æ˜æ˜¾çš„å…ˆå‘ä¼˜åŠ¿ã€‚</p><p>åœ¨Cç«¯ç”Ÿæ€å¸ƒå±€æ–¹é¢ï¼ŒChatGPTé‡‡å–åŒç®¡é½ä¸‹çš„æˆ˜ç•¥ã€‚ä¸€æ–¹é¢ï¼Œé€šè¿‡å¼•è¿›å„ç§ä¸Šæ¸¸æ’ä»¶æ¥å¢å¼ºåº”ç”¨èƒ½åŠ›ï¼Œç›®æ ‡æ‰“é€ æˆä¸€ä¸ªsuper APPä»¥å¸å¼•æ›´å¤šç”¨æˆ·ã€‚å¦ä¸€æ–¹é¢ï¼Œé€šè¿‡åˆ›æ–°è½¯ä»¶äº¤äº’æ–¹å¼å°†ç”¨æˆ·çº³å…¥ç”Ÿæ€åœˆï¼Œä»è€Œå®ŒæˆCç«¯ç”Ÿæ€çš„å…¨é¢å¸ƒå±€ã€‚</p><p>å¯¹äºBç«¯ç”Ÿæ€ï¼ŒOpenAIé€šè¿‡ä¸å¾®è½¯Azureçš„åˆä½œï¼Œé—´æ¥å®ç°äº†â€œæ¨¡å‹å³æœåŠ¡â€çš„æ¨¡å¼ï¼ŒåŒæ—¶ä¹Ÿç›´æ¥æä¾›å¤§æ¨¡å‹APIï¼Œä»¥æœåŠ¡å°å‹Bç«¯å¼€å‘è€…ï¼Œè¿›ä¸€æ­¥å®Œå–„äº†Bç«¯ç”Ÿæ€ä½“ç³»ã€‚</p><h3 id="google">Google</h3><p>ç›¸å¯¹ä¹‹ä¸‹ï¼Œ<strong>Googleç”±äºå…¶ä¸»è¥ä¸šåŠ¡æ˜¯æœç´¢å¼•æ“</strong>ï¼Œå¯¹äºèŠå¤©æœºå™¨äººç­‰äº§å“çš„å‘å±•ç›¸å¯¹ä¿å®ˆï¼Œæ›´æ³¨é‡åˆ©ç”¨å¤§æ¨¡å‹èƒ½åŠ›æ¥æ¨åŠ¨â€œæ¨¡å‹å³æœåŠ¡â€èŒƒå¼ï¼Œä»¥æ‹“å±•å…¶åœ¨äº‘æœåŠ¡å¸‚åœºçš„ä»½é¢ã€‚ä¸æ­¤åŒæ—¶ï¼Œè°·æ­Œä¹Ÿåœ¨ç§¯ææ‹‰åŠ¨Bç«¯ä¸šåŠ¡ï¼Œé€šè¿‡å¤šæ¬¾å¤§æ¨¡å‹èƒ½åŠ›çš„ç»„åˆæ‹³æ¥æå‡å¸‚åœºç«äº‰åŠ›ã€‚</p><h3 id="ç™¾åº¦">ç™¾åº¦</h3><p>ç™¾åº¦çš„æˆ˜ç•¥æ›´æ¥è¿‘Googleï¼Œä¸»è¦é’ˆå¯¹Bç«¯å¸‚åœºï¼Œé€šè¿‡å…¨æ ˆä¼˜åŠ¿æ¥æ„å»ºå…¨é“¾èƒ½åŠ›</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/Chatgpt3-4.png" alt="å›¾3-4 å›½å†…å¤–ä¸»è¦å¤§è¯­è¨€æ¨¡å‹å‚å•†å•†ä¸šè·¯å¾„å¯¹æ¯”"></p><h3 id="å•†ä¸šå‘å±•å‰æ™¯">å•†ä¸šå‘å±•å‰æ™¯</h3><blockquote><p>AIäº‘ä¾§ä¸ç«¯ä¾§å¤§æ¨¡å‹æ»¡è¶³ä¸åŒéœ€æ±‚ï¼ŒCç«¯ç”¨æˆ·å°†æˆä¸ºç«¯ä¾§çš„ä¸»è¦å®¢ç¾¤</p></blockquote><p>ä¸€æ–¹é¢ï¼Œé¢å‘Cç«¯ä¸ªäººç”¨æˆ·ï¼Œäº‘ä¾§å¤§æ¨¡å‹æä¾›æ™ºèƒ½é—®ç­”ã€æ–‡æœ¬ç”Ÿæˆã€å›¾ç‰‡ç”Ÿæˆã€è§†é¢‘ç”Ÿæˆç­‰åŠŸèƒ½ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œé¢å‘Bç«¯ä¼ä¸šç”¨æˆ·ï¼Œäº‘ä¾§å¤§æ¨¡å‹å˜é©ä¼ä¸šä¼ ç»Ÿä¸šåŠ¡æ¨¡å¼ï¼Œæä¾›è¥é”€ã€å®¢æœã€ä¼šè®®è®°å½•ã€æ–‡æœ¬ç¿»è¯‘ã€é¢„ç®—ç®¡ç†ç­‰ä¸ªæ€§åŒ–æœåŠ¡ã€‚</p><p>ç«¯ä¾§å¤§æ¨¡å‹å…·æœ‰æˆæœ¬ä½ã€ç§»åŠ¨æ€§å¼ºã€æ•°æ®å®‰å…¨ç­‰ä¼˜åŠ¿,ä¸»è¦åº”ç”¨åœ¨æ‰‹æœºã€PCç­‰ç»ˆç«¯è®¾å¤‡ä¸Šã€‚<strong>ç«¯ä¾§å¤§æ¨¡å‹ä¸»è¦é¢å‘Cç«¯ç”¨æˆ·</strong>ï¼Œé‡å¡‘ä¼ ç»Ÿä¸ªäººè®¾å¤‡çš„ä½¿ç”¨æ–¹å¼å’Œä¹ æƒ¯ï¼Œæä¾›æ‰‹æœºæ–‡æ¡£æœç´¢ã€æ™ºèƒ½è¯†å±ã€å›¾åƒåˆ›ä½œã€ç”Ÿæ´»åŠ©æ‰‹ã€å‡ºè¡ŒåŠ©æ‰‹ç­‰ä¸“å±æœåŠ¡ã€‚</p><p><strong>æˆæœ¬æ–¹é¢</strong>ï¼Œæ ¹æ®äº‘ä¾§å¤§æ¨¡å‹æ¯æ¬¡è°ƒç”¨æˆæœ¬ã€ç”¨æˆ·æ•°ã€ç”¨æˆ·ä½¿ç”¨é¢‘ç‡ä¸åŒï¼Œäº‘ä¾§å¤§æ¨¡å‹æœåŠ¡å™¨æ¯å¹´æˆæœ¬å¯è¾¾æ•°äº¿æˆ–æ•°åäº¿ï¼Œé«˜æ˜‚çš„æœåŠ¡å™¨æ”¯å‡ºæˆä¸ºå„å¤§å‚å•†å‘å±•å¤§æ¨¡å‹çš„éšœç¢ã€‚å°†å¤§æ¨¡å‹ç«¯ä¾§åŒ–ï¼Œèƒ½æŠŠä¸€éƒ¨åˆ†äº‘ç«¯è®¡ç®—è½¬ç§»ç»™ç»ˆç«¯ï¼Œä»è€Œå¤§å¤§é™ä½äº‘ç«¯æœåŠ¡å™¨æˆæœ¬ã€‚</p><p><strong>å®‰å…¨æ–¹é¢</strong>ï¼Œç”±äºç«¯ä¾§å¤§æ¨¡å‹æ•°æ®ä¿å­˜åœ¨æœ¬åœ°ï¼Œä¸ªäººæ•°æ®ä¸éœ€è¦ä¸Šä¼ äº‘ç«¯ï¼Œä¸ªäººéšç§æ•°æ®æ›´åŠ å®‰å…¨ã€‚</p><p>ä¸°å¯Œçš„ä½¿ç”¨åœºæ™¯ã€è¾ƒä½çš„æ¨¡å‹æˆæœ¬ã€å®‰å…¨çš„éšç§ä¿æŠ¤ï¼Œä½¿å¾—æœªæ¥å¤§æ¨¡å‹ç«¯ä¾§åŒ–å¯èƒ½æˆä¸ºè¶‹åŠ¿ã€‚</p><p><strong>ç‘é“¶é¢„è®¡ç”Ÿæˆå¼AI æ™ºèƒ½æ‰‹æœºå‡ºè´§é‡å°†ä»2023 å¹´çš„5000 ä¸‡éƒ¨å¢é•¿åˆ°2027 å¹´çš„5.83 äº¿éƒ¨ï¼Œåˆ°2027 å¹´æ”¶å…¥å°†è¾¾5130 äº¿ç¾å…ƒ</strong>ã€‚æœªæ¥é¢å‘å¹¿å¤§C ç«¯ç”¨æˆ·çš„ç«¯ä¾§å¤§æ¨¡å‹å¸‚åœºå‰æ™¯å¹¿é˜”ã€‚</p><h2 id="å›½å†…å¤§æ¨¡å‹å‘å±•ç¼ºé™·åˆ†æ">å›½å†…å¤§æ¨¡å‹å‘å±•ç¼ºé™·åˆ†æ</h2><h3 id="æŠ€æœ¯å±‚é¢">æŠ€æœ¯å±‚é¢</h3><p>å½“å‰å›½å†…æŠ€æœ¯æ¯”ChatGPTä¸»è¦å·®åœ¨å¤§æ¨¡å‹ç¯èŠ‚ï¼Œ<strong>åŒ…æ‹¬æ¸…æ´—ã€æ ‡æ³¨ã€æ¨¡å‹ç»“æ„è®¾è®¡ã€è®­ç»ƒæ¨ç†çš„æŠ€æœ¯ç§¯ç´¯</strong>ã€‚</p><blockquote><p>ChatGPTèƒŒåæ˜¯æ–‡æœ¬/è·¨æ¨¡æ€å¤§æ¨¡å‹ã€å¤šè½®å¯¹è¯ã€å¼ºåŒ–å­¦ä¹ ç­‰å¤šæŠ€æœ¯çš„èåˆåˆ›æ–°ï¼Œ<strong>è€Œå›½å†…å¤§éƒ¨åˆ†ç§‘æŠ€ä¼ä¸šã€ç§‘ç ”é™¢æ‰€å¤šèšç„¦å‚ç›´åº”ç”¨ï¼Œç¼ºä¹å¤šæŠ€æœ¯èåˆåˆ›æ–°èƒ½åŠ›</strong>ã€‚</p></blockquote><p>ä»è½åœ°åº”ç”¨æ¥çœ‹ï¼Œå›½å†…å¤´éƒ¨ä¼ä¸šå‡è¡¨ç¤ºå·²å¼€å±•ç›¸å…³æŠ€æœ¯ç ”å‘æˆ–éƒ¨åˆ†æ¨¡å‹è¿›å…¥å†…æµ‹é˜¶æ®µï¼Œä½†ä»æœªå‡ºç°ä¸ChatGPTæŠ—è¡¡çš„å¤§æ¨¡å‹äº§å“ã€‚åŠ ä¹‹å¤§æ¨¡å‹çš„è®­ç»ƒæˆæœ¬è¾ƒé«˜ï¼ŒæŠ€æœ¯åº”ç”¨é¢ä¸´ç€äº¿å…ƒçº§ç ”å‘æŠ•å…¥å’Œæµ·é‡è®­ç»ƒè¯•é”™ï¼Œå›½å†…ä¼ä¸šæŠ•å…¥ä¸¥é‡ä¸è¶³ï¼Œç ”å‘æ¨å¹¿å’Œäº§ä¸šè½åœ°æ•´ä½“è½åäºæµ·å¤–ã€‚</p><h3 id="ç®—åŠ›ç“¶é¢ˆ">ç®—åŠ›ç“¶é¢ˆ</h3><blockquote><p>å½“å‰ï¼Œä¸»æµå¤§æ¨¡å‹æ‰€ä½¿ç”¨çš„<strong>Transformer æ¶æ„å­˜åœ¨æ¶ˆè€—ç®—åŠ›èµ„æºå¤§ã€å ç”¨å†…å­˜å‚¨é‡å¤šç­‰å±€é™æ€§</strong>ã€‚</p></blockquote><h4 id="ç®—åŠ›éœ€æ±‚æ¥æº">ç®—åŠ›éœ€æ±‚æ¥æº</h4><p>é¦–å…ˆï¼ŒTransformeræ¶æ„æ¶ˆè€—çš„ç®—åŠ›èµ„æºæ™®éè¾ƒå¤§ã€‚ä¼ ç»ŸTransformer æ¶æ„ç”±äºç®—æ³•ç‰¹æ€§ï¼Œè®¡ç®—é‡ä¼šéšç€ä¸Šä¸‹æ–‡é•¿åº¦çš„å¢åŠ å‘ˆå¹³æ–¹çº§ä¸Šå‡ã€‚å‡å¦‚ç”¨æˆ·è¾“å…¥çš„ä¸Šä¸‹æ–‡å¢åŠ 32 å€ï¼Œè®¡ç®—é‡å¯èƒ½ä¼šå¢åŠ 1000å€ä»¥ä¸Šã€‚</p><p>å…¶æ¬¡ï¼ŒåŸºäºTransformer æ¶æ„çš„å¤§æ¨¡å‹å¯¹å­˜å‚¨è®¾å¤‡çš„è¦æ±‚ä¹Ÿæ›´é«˜ã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­éœ€è¦åœ¨å†…å­˜ä¸­å­˜å‚¨å‚æ•°çš„å½“å‰å€¼ã€æ¢¯åº¦ä»¥åŠå…¶ä»–ä¼˜åŒ–å™¨çŠ¶æ€ã€‚æ¨¡å‹çš„å‚æ•°è¶Šå¤šï¼Œæ‰€éœ€çš„è®¡ç®—å°±è¶Šå¤šï¼Œéœ€è¦çš„å­˜å‚¨ç©ºé—´å°±è¶Šå¤§ã€‚å¦‚1000äº¿ä¸ªå‚æ•°çš„Transformeræ¨¡å‹ï¼Œå­˜å‚¨è¿™äº›å‚æ•°å°±éœ€è¦400GBçš„ç©ºé—´</p><h4 id="å…¨çƒä¸»å¯¼çš„èŠ¯ç‰‡">å…¨çƒä¸»å¯¼çš„èŠ¯ç‰‡</h4><blockquote><p>éšç€å¤§æ¨¡å‹è§„æ¨¡å‘ˆç°æŒ‡æ•°çº§å¢é•¿ï¼Œ<strong>è®­ç»ƒå¤§æ¨¡å‹è¶Šå‘ä¾èµ–é«˜æ€§èƒ½èŠ¯ç‰‡ã€‚</strong></p></blockquote><p>å¤§æ¨¡å‹çš„è®­ç»ƒé€Ÿåº¦ã€äº§å‡ºè´¨é‡ï¼Œéƒ½å’Œç®—åŠ›ç›´æ¥ç›¸å…³ï¼Œå¯¹äºGPT è¿™ç§å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æ¥è¯´ï¼Œç®—åŠ›çš„è¦æ±‚æ›´é«˜ï¼Œä¹Ÿå†³å®šäº†æ¨¡å‹çš„â€œæ™ºå•†â€ã€‚<strong>ç›®å‰åœ¨å…¨çƒAI é«˜æ€§èƒ½èŠ¯ç‰‡å¸‚åœºä¸­ï¼Œä¸»è¦ä»¥è‹±ä¼Ÿè¾¾çš„A100ã€H100 ä¸ºä»£è¡¨çš„é«˜æ€§èƒ½èŠ¯ç‰‡åº”ç”¨åˆ°ä¸»æµå¤§æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹</strong>ã€‚è‹±ä¼Ÿè¾¾çš„èŠ¯ç‰‡äº§å“é‡‡ç”¨æœ€å‰æ²¿åŠå¯¼ä½“å·¥è‰ºå’Œåˆ›æ–°GPU æ¶æ„ä¿æŒè¡Œä¸šçš„é¢†å…ˆåœ°ä½ã€‚ç›®å‰ï¼Œè‹±ä¼Ÿè¾¾çš„A100 èŠ¯ç‰‡åœ¨ä¸»æµAI å¤§æ¨¡å‹è®­ç»ƒä¸­å æ®é‡è¦å¸‚åœºä»½é¢ï¼ŒH100 è™½æ€§èƒ½å¼ºåŠ²ä½†éš¾ä»¥è·å–ã€‚</p><p>ä»¥ChatGPT ä¸ºä¾‹ï¼Œ<strong>å¾®è½¯Azure äº‘æœåŠ¡ä¸ºå…¶æä¾›äº†1ä¸‡æšè‹±ä¼Ÿè¾¾A100 GPU</strong>ï¼Œè¿™ä¸ªç®—åŠ›ä¹Ÿæ­£æ˜¯å›½å†…äº‘è®¡ç®—æŠ€æœ¯äººå£«å…±è¯†çš„AI å¤§æ¨¡å‹é—¨æ§›ã€‚</p><p>ç„¶è€Œ<strong>å›½å†…æ‹¥æœ‰1 ä¸‡æšGPU çš„ä¼ä¸šå¾ˆå°‘ï¼Œè€Œä¸”å•æšGPU æ™®éå¼±äºè‹±ä¼Ÿè¾¾A100</strong>ã€‚ç”±äºè‹±ä¼Ÿè¾¾A100 åŠä»¥ä¸Šæ€§èƒ½GPUè¢«åˆ—å…¥ç®¡åˆ¶æ¸…å•ï¼Œç›®å‰ä¸­å›½ä¼ä¸šèƒ½è·å–çš„æ›¿ä»£å“ä¸ºè‹±ä¼Ÿè¾¾A800ï¼Œç„¶è€ŒA800 ä¹Ÿå­˜åœ¨ç¼ºè´§å’Œæº¢ä»·çš„æƒ…å†µã€‚</p><h4 id="æˆ‘å›½èŠ¯ç‰‡äº§ä¸šç®€ä»‹">æˆ‘å›½èŠ¯ç‰‡äº§ä¸šç®€ä»‹</h4><p>ä»æˆ‘å›½è‡ªç ”AIèŠ¯ç‰‡æ¥çœ‹ï¼Œä¸­å›½æœ¬åœŸçš„é«˜æ€§èƒ½èŠ¯ç‰‡é¾™å¤´ä»¥åä¸ºæµ·æ€ã€å¯’æ­¦çºªã€åœ°å¹³çº¿ã€æ˜†ä»‘èŠ¯ç­‰ä¸ºä»£è¡¨ã€‚æˆ‘å›½æ­£åœ¨é«˜æ€§èƒ½èŠ¯ç‰‡é¢†åŸŸåŠ å¤§æŠ•å…¥å¹¶å–å¾—æå¤§è¿›å±•ï¼Œéƒ¨åˆ†è§£å†³æ–¹æ¡ˆæ­£æ›¿ä»£è‹±ä¼Ÿè¾¾æˆä¸ºä¸€äº›å¤§å‚çš„é€‰æ‹©ã€‚<strong>ä½†å›½äº§èŠ¯ç‰‡æ€§èƒ½ç›®å‰ä»ä¸å›½é™…é¡¶å°–æ°´å¹³å­˜åœ¨ä¸€å®šå·®è·ã€‚</strong></p><p>åœ¨å›½å†…ï¼ŒAI é«˜æ€§èƒ½èŠ¯ç‰‡è¿‘å¹´æ¥å‘å±•é€Ÿåº¦åŠ å¿«ã€‚å…¶ä¸­ï¼Œåä¸ºæ˜‡è…¾ä¸»è¦åŒ…æ‹¬310 å’Œ910 ä¸¤æ¬¾ä¸»åŠ›èŠ¯ç‰‡ï¼Œå…¶ä¸­æ˜‡è…¾910 é‡‡ç”¨äº†7nm å·¥è‰ºï¼Œæœ€é«˜å¯æä¾›256 TFLOPSçš„FP16 è®¡ç®—èƒ½åŠ›ï¼Œå…¶èƒ½æ•ˆæ¯”åœ¨è¡Œä¸šä¸­å¤„äºé¢†å…ˆæ°´å¹³ã€‚å¯’æ­¦çºªæ˜¯ä¸­å›½å…·æœ‰ä»£è¡¨æ€§çš„å¦ä¸€æœ¬åœŸAI èŠ¯ç‰‡å‚å•†ï¼Œå…¬å¸å…ˆåæ¨å‡ºäº†æ€å…ƒ290 å’Œæ€å…ƒ370 èŠ¯ç‰‡åŠç›¸åº”çš„äº‘ç«¯æ™ºèƒ½åŠ é€Ÿå¡ç³»åˆ—äº§å“ã€è®­ç»ƒæ•´æœºã€‚</p><p>æ€»ä½“è€Œè¨€ï¼Œ<strong>å›½å†…AIé«˜æ€§èƒ½èŠ¯ç‰‡å¸‚åœºå—è¿›å£é™åˆ¶å’Œå›½å†…æŠ€æœ¯ç“¶é¢ˆçš„åŒé‡å½±å“ï¼Œå¤§æ¨¡å‹äº§ä¸šå‘å±•å—åˆ°ç®—åŠ›å±‚é¢çš„ä¸€äº›åˆ¶çº¦ã€‚</strong></p><h3 id="æ•°æ®é›†">æ•°æ®é›†</h3><blockquote><p>é«˜è´¨é‡çš„è®­ç»ƒæ•°æ®é›†ä»éœ€æ‰©å±•</p></blockquote><p>å›½å†…çš„AIå¤§æ¨¡å‹æ•°æ®ä¸»è¦æ¥è‡ªäº’è”ç½‘ã€ç”µå•†ã€ç¤¾äº¤ã€æœç´¢ç­‰æ¸ é“ï¼Œå­˜åœ¨æ•°æ®ç±»å‹ä¸å…¨é¢ï¼Œä¿¡æ¯å¯ä¿¡åº¦ä¸é«˜ç­‰é—®é¢˜ã€‚</p><h4 id="æ•°æ®é›†æ•°é‡å¯¹æ¯”">æ•°æ®é›†æ•°é‡å¯¹æ¯”</h4><p>æ•´ä½“æ¥çœ‹ï¼Œ<strong>æˆ‘å›½å¯ç”¨äºå¤§æ¨¡å‹è®­ç»ƒçš„ä¸­æ–‡æ•°æ®åº“ä½“é‡ä¸¥é‡ä¸è¶³</strong>ã€‚å¦‚æ‚Ÿé“è¯­æ–™åº“ï¼Œå…¶åŒ…æ‹¬æ–‡æœ¬ã€å›¾æ–‡å’Œå¯¹è¯æ•°æ®é›†ï¼Œæœ€å¤§çš„ä»…5TBï¼Œå…¶ä¸­å¼€æºçš„æ–‡æœ¬éƒ¨åˆ†ä»…ä¸º200GBã€‚å¦å¤–ä¸€ä¸ªå¼€æºçš„ä¸­æ–‡æœ¬æ•°æ®é›†CLUECorps ä¸º100Gã€‚<strong>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒGPT-3 çš„è®­ç»ƒæ•°æ®é‡ï¼Œä»¥è‹±è¯­ä¸ºä¸»ï¼Œè¾¾åˆ°45TBã€‚</strong></p><h4 id="æ•°é‡ä¸è¶³åŸå› ">æ•°é‡ä¸è¶³åŸå› </h4><p>å›½å†…å¤§æ¨¡å‹çš„<strong>æ•°æ®è¿˜ç¼ºä¹å¤šæ•°æ®æºçš„è°ƒç”¨</strong>ï¼Œå¯ä¾›å¤§æ¨¡å‹è®­ç»ƒçš„æœ‰æ•ˆ<strong>æ•°æ®æºå‘ˆç°ç¢ç‰‡åŒ–åˆ†æ•£çŠ¶æ€</strong>ï¼Œå¦‚<strong>å¾®ä¿¡å…¬ä¼—å·çš„æ–‡ç« ä»…åœ¨æœç‹—å¼•æ“æ”¯æŒè°ƒç”¨</strong>ï¼Œè€Œå¤šæ•°å¤§æ¨¡å‹å¦‚æ™ºè°±æ¸…è¨€åœ¨è”ç½‘æ”¶é›†æ•°æ®æ—¶æ— æ³•ç›´æ¥è°ƒç”¨å¾®ä¿¡å…¬ä¼—å·æ–‡ç« ã€‚</p><p>å½“å‰ï¼Œæ”¿åºœéƒ¨é—¨çš„æƒå¨æ•°æ®ã€å¤§å‹ä¼ä¸šæŒæ¡çš„è¡Œä¸šæˆ–å†…éƒ¨æ•°æ®é€šå¸¸ä¸å¯¹å¤–å…¬å¼€ã€‚ä»¥<strong>é˜¿é‡Œå·´å·´çš„â€œé€šä¹‰åƒé—®â€å¤§æ¨¡å‹ä¸ºä¾‹ï¼Œè®­ç»ƒæ•°æ®æ¥è‡ªå…¬å¼€æ¥æºçš„æ··åˆæ•°æ®ï¼Œä¸­æ–‡è¯­æ–™ä¸»è¦æ¥è‡ªçŸ¥ä¹ã€ç™¾åº¦ç™¾ç§‘ã€ç™¾åº¦çŸ¥é“ç­‰å…¬å¼€ç½‘ç»œæ•°æ®ï¼Œæ¥æºäºæ”¿åºœåŠä¼ä¸šæ•°æ®è¾ƒå°‘</strong>ã€‚æœªæ¥ï¼Œä»éœ€æ„å»ºé«˜è´¨é‡çš„AI å¤§æ¨¡å‹è®­ç»ƒæ•°æ®é›†ï¼Œä¸æ–­æ‰©å……æ•°æ®æºæé«˜æ•°æ®è´¨é‡ã€‚</p><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¤§æ¨¡å‹çš„å®šä¹‰&quot;&gt;å¤§æ¨¡å‹çš„å®šä¹‰&lt;/h1&gt;
&lt;p&gt;å¤§æ¨¡å‹æ˜¯æŒ‡å…·æœ‰&lt;strong&gt;å¤§è§„æ¨¡å‚æ•°å’Œå¤æ‚è®¡ç®—ç»“æ„&lt;/strong&gt;çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œ&lt;strong&gt;æ‹¥æœ‰æ•°åäº¿ç”šè‡³æ•°åƒäº¿ä¸ªå‚æ•°&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¤§æ¨¡å‹çš„è®¾è®¡ç›®çš„ï¼šä¸ºäº†&lt;strong&gt;æé«˜æ¨¡å‹çš„è¡¨è¾¾</summary>
      
    
    
    
    <category term="å¤§æ¨¡å‹" scheme="https://blog.lthero.cn/categories/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"/>
    
    
    <category term="å¤§æ¨¡å‹" scheme="https://blog.lthero.cn/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Sunshineè½¯ä»¶è¿œç¨‹æ§åˆ¶Ubuntu</title>
    <link href="https://blog.lthero.cn/2024/06/27/InstallSunshineStreaming/"/>
    <id>https://blog.lthero.cn/2024/06/27/InstallSunshineStreaming/</id>
    <published>2024-06-27T12:59:25.000Z</published>
    <updated>2024-06-27T13:12:26.155Z</updated>
    
    <content type="html"><![CDATA[<p>åŸæ‰“ç®—ä½¿ç”¨Windowsè‡ªå¸¦çš„è¿œç¨‹æ§åˆ¶è½¯ä»¶æ§åˆ¶Ubuntuï¼Œéœ€è¦åœ¨Ubuntuå®‰è£…xrdpï¼Œä½†æœ€ç»ˆæ— æ³•è¿›å…¥æ¡Œé¢ï¼ˆé—ªé€€ï¼‰</p><p>é™„åŠ ä¸€ä¸ªåœ¨ubuntuä¸€é”®å®‰è£…ä¸é…ç½®xrdpè„šæœ¬ï¼š<a href="https://c-nergy.be/blog/?p=19814">https://c-nergy.be/blog/?p=19814</a></p><blockquote><p>åæ¥æƒ³åˆ°ä½¿ç”¨<strong>æ¸¸æˆä¸²æµç¥å™¨sunshine+moonlight</strong>ï¼Œå°è¯•åå‘ç°<strong>å®‰è£…ç®€å•ï¼Œä½“éªŒéå¸¸å¥½</strong></p><p>å¦‚æœä¸»æ§å’Œè¢«æ§éƒ½åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘æˆ–è™šæ‹Ÿå±€åŸŸç½‘ï¼ˆç›´è¿ï¼‰ä¸‹ï¼Œä½“éªŒæœ€ä½³</p></blockquote><h1 id="å®‰è£…sunshine">å®‰è£…Sunshine</h1><p>åœ¨<strong>è¢«æ§ç«¯</strong>ä¸‹è½½sunshine</p><blockquote><p>ä¸‹è½½é“¾æ¥ï¼š<a href="https://github.com/LizardByte/Sunshine/releases/tag/v0.23.1">https://github.com/LizardByte/Sunshine/releases/tag/v0.23.1</a></p></blockquote><p>å®‰è£…åæ‰“å¼€sunshineï¼Œå®ƒä¼šè·³è½¬åˆ°æµè§ˆå™¨<code>localhost:47990</code></p><p>ç®€å•<strong>é…ç½®ä¸‹è´¦å·å¯†ç </strong>å³å¯</p><h1 id="å®‰è£…moonlight">å®‰è£…Moonlight</h1><p>åœ¨<strong>ä¸»æ§ç«¯</strong>ä¸‹è½½moonlightï¼Œæ”¯æŒå¤šå¹³å°</p><blockquote><p>å®˜ç½‘ï¼š<a href="https://moonlight-stream.org/">https://moonlight-stream.org/</a></p><p>PCç«¯ä¸‹è½½é“¾æ¥<code>https://github.com/moonlight-stream/moonlight-qt/releases</code></p></blockquote><p>å®‰è£…åä¼šè‡ªåŠ¨è¯†åˆ«å±€åŸŸç½‘å†…çš„è®¾å¤‡ï¼ˆå·²ç»å¯åŠ¨äº†sunshineæœåŠ¡çš„è®¾å¤‡ï¼‰</p><p>éšåéœ€è¦è¿›è¡Œ<strong>PinåŒ¹é…</strong>ï¼Œ<strong>åœ¨è¢«æ§åˆ¶ç«¯è¾“å…¥pinç å³å¯</strong></p><p>åœ¨Moonlighté…ç½®ä¸­å¯ä»¥è®¾ç½®åˆ†è¾¨ç‡ã€å¸§æ•°ï¼Œæ ¹æ®ç½‘ç»œæƒ…å†µè‡ªè¡Œè°ƒæ•´å³å¯</p><h1 id="å¿«æ·é”®">å¿«æ·é”®</h1><h3 id="pcå®¢æˆ·ç«¯">PCå®¢æˆ·ç«¯</h3><p>PCå®¢æˆ·ç«¯æ”¯æŒé”®ç›˜ã€é¼ æ ‡å’Œè§¦æ‘¸å±è¾“å…¥ï¼Œä»¥åŠæœ€å¤š4ä¸ªæ¸¸æˆæ§åˆ¶å™¨ï¼ˆåŒ…å«å¤§å¤šæ•°å¸¸è§æ¸¸æˆæ‰‹æŸ„çš„æ˜ å°„ï¼‰ã€‚</p><ul><li><strong>Ctrl+Alt+Shift+Q</strong> - é€€å‡ºæµåª’ä½“ä¼šè¯ï¼ˆ<strong>æ¸¸æˆå°†åœ¨è¢«æ§ä¸»æœºPCä¸Šç»§ç»­è¿è¡Œ</strong>ï¼Œå¸¸ç”¨ï¼ï¼ï¼ï¼ï¼ï¼‰</li><li><strong>Ctrl+Alt+Shift+Z</strong> - åˆ‡æ¢é¼ æ ‡å’Œé”®ç›˜æ•è·ï¼ˆ<strong>åˆ‡å‡ºåˆ°ä¸»æ§ç«¯</strong>ï¼Œå¸¸ç”¨ï¼ï¼ï¼ï¼ï¼ï¼‰</li><li><strong>Ctrl+Alt+Shift+X</strong> - åœ¨å…¨å±å’Œçª—å£æ¨¡å¼ä¹‹é—´åˆ‡æ¢</li><li><strong>Ctrl+Alt+Shift+S</strong> - æ‰“å¼€æ€§èƒ½ç»Ÿè®¡å åŠ ï¼ˆä¸æ”¯æŒSteam Linkæˆ–Raspberry Piï¼‰</li><li><strong>Ctrl+Alt+Shift+M</strong> - åˆ‡æ¢é¼ æ ‡æ¨¡å¼ï¼ˆæŒ‡é’ˆæ•è·æˆ–ç›´æ¥æ§åˆ¶ï¼‰</li><li><strong>Ctrl+Alt+Shift+V</strong> - åœ¨ä¸»æœºä¸Šé”®å…¥å‰ªè´´æ¿æ–‡æœ¬</li><li><strong>Ctrl+Alt+Shift+D</strong> - æœ€å°åŒ–æµåª’ä½“çª—å£</li><li><strong>Ctrl+Alt+Shift+C</strong> - åœ¨è¿œç¨‹æ¡Œé¢é¼ æ ‡æ¨¡å¼ä¸‹åˆ‡æ¢æœ¬åœ°å…‰æ ‡æ˜¾ç¤ºï¼ˆç”±äºGameStreamé™åˆ¶ï¼Œè¿œç¨‹å…‰æ ‡å°†å§‹ç»ˆæ˜¾ç¤ºï¼‰</li><li><strong>Ctrl+Alt+Shift+L</strong> - åˆ‡æ¢å°†é¼ æ ‡æŒ‡é’ˆé”å®šåˆ°è§†é¢‘åŒºåŸŸï¼ˆéœ€è¦å¯ç”¨â€œä¼˜åŒ–é¼ æ ‡ç”¨äºè¿œç¨‹æ¡Œé¢è€Œéæ¸¸æˆâ€é€‰é¡¹ï¼‰</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åŸæ‰“ç®—ä½¿ç”¨Windowsè‡ªå¸¦çš„è¿œç¨‹æ§åˆ¶è½¯ä»¶æ§åˆ¶Ubuntuï¼Œéœ€è¦åœ¨Ubuntuå®‰è£…xrdpï¼Œä½†æœ€ç»ˆæ— æ³•è¿›å…¥æ¡Œé¢ï¼ˆé—ªé€€ï¼‰&lt;/p&gt;
&lt;p&gt;é™„åŠ ä¸€ä¸ªåœ¨ubuntuä¸€é”®å®‰è£…ä¸é…ç½®xrdpè„šæœ¬ï¼š&lt;a href=&quot;https://c-nergy.be/blog/?p=19814&quot;&gt;ht</summary>
      
    
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>ç¦ç”¨æ¯æ¬¡å¼€æœºå¯åŠ¨çš„Pythonè¿›ç¨‹</title>
    <link href="https://blog.lthero.cn/2024/06/10/DisableAuto-StartProcesses/"/>
    <id>https://blog.lthero.cn/2024/06/10/DisableAuto-StartProcesses/</id>
    <published>2024-06-10T11:51:29.000Z</published>
    <updated>2024-06-10T11:52:34.564Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç¦ç”¨æ¯æ¬¡å¼€æœºå¯åŠ¨çš„pythonè¿›ç¨‹">ç¦ç”¨æ¯æ¬¡å¼€æœºå¯åŠ¨çš„Pythonè¿›ç¨‹</h1><blockquote><p>Ubuntuç³»ç»Ÿé‡åˆ°ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡å¼€æœºæœ‰ä¸ªpythonè¿›ç¨‹ï¼ˆä½¿ç”¨psæŸ¥åˆ°â€œpt_main_threadâ€ï¼‰å ç”¨1.5GBæ˜¾å­˜ï¼Œä¸‹é¢æ˜¯æŸ¥æ‰¾è¿™ä¸ªè¿›ç¨‹çš„æ–¹æ³•</p></blockquote><h2 id="æŸ¥æ‰¾å·¥ä½œç›®å½•">æŸ¥æ‰¾å·¥ä½œç›®å½•</h2><p><code>pt_main_thread</code> å¯èƒ½æ˜¯æŸä¸ªç‰¹å®š Python åº”ç”¨ç¨‹åºæˆ–æœåŠ¡çš„ä¸»çº¿ç¨‹ï¼Œè¦ç¦ç”¨è¿™ä¸ªè¿›ç¨‹çš„å¼€æœºå¯åŠ¨ï¼Œå¯ä»¥è¿›ä¸€æ­¥æ’æŸ¥å¯åŠ¨é¡¹å’ŒæœåŠ¡é…ç½®ã€‚ä»¥ä¸‹æ˜¯æ›´è¯¦ç»†çš„æ­¥éª¤ï¼š</p><ol><li><p><strong>è·å–è¿›ç¨‹ ID (PID)</strong>ï¼š<br>å¦‚æœä½ å·²ç»çŸ¥é“è¿›ç¨‹ IDï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒã€‚å¦‚æœä¸çŸ¥é“ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥æ‰¾ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep pt_main_thread</span><br></pre></td></tr></table></figure></li><li><p><strong>é€šè¿‡ PID è·å–æ‰§è¡Œæ–‡ä»¶è·¯å¾„</strong>ï¼š<br>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹è¯¥è¿›ç¨‹çš„æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -l /proc/&lt;PID&gt;/exe</span><br></pre></td></tr></table></figure><p>å°† <code>&lt;PID&gt;</code> æ›¿æ¢ä¸ºå®é™…çš„è¿›ç¨‹ IDã€‚è¯¥å‘½ä»¤å°†è¿”å›æŒ‡å‘æ‰§è¡Œæ–‡ä»¶çš„ç¬¦å·é“¾æ¥ã€‚</p></li><li><p><strong>æŸ¥æ‰¾è¿›ç¨‹å¯åŠ¨å‘½ä»¤å’Œå·¥ä½œç›®å½•</strong>ï¼š<br>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹è¿›ç¨‹çš„å¯åŠ¨å‘½ä»¤å’Œå·¥ä½œç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/&lt;PID&gt;/cmdline</span><br><span class="line"><span class="built_in">cat</span> /proc/&lt;PID&gt;/cwd</span><br></pre></td></tr></table></figure><p><code>cmdline</code> æ–‡ä»¶åŒ…å«äº†<strong>è¿›ç¨‹çš„å¯åŠ¨å‘½ä»¤</strong>ï¼Œ<code>cwd</code> æ–‡ä»¶åŒ…å«äº†è¿›ç¨‹çš„å½“å‰å·¥ä½œç›®å½•ã€‚</p></li></ol><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»¥ç¡®å®š <code>pt_main_thread</code> è¿›ç¨‹å¯¹åº”çš„æ‰§è¡Œæ–‡ä»¶å’Œå¯åŠ¨å‘½ä»¤ï¼Œä»è€Œæ›´å¥½åœ°æ’æŸ¥å…¶å¯åŠ¨æ¥æºå¹¶è¿›è¡Œç¦ç”¨æˆ–åˆ é™¤æ“ä½œã€‚</p><hr><h2 id="è¿›å…¥åº”ç”¨ç›®å½•">è¿›å…¥åº”ç”¨ç›®å½•</h2><p>é¦–å…ˆï¼Œè¿›å…¥è¯¥è¿›ç¨‹çš„å·¥ä½œç›®å½•ï¼ŒæŸ¥çœ‹å…¶ä¸­çš„å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /proc/2632/cwd</span><br><span class="line"><span class="built_in">ls</span> -la</span><br></pre></td></tr></table></figure><blockquote><p>ç»“åˆå‰é¢çš„<code>cat /proc/&lt;PID&gt;/cmdline</code>åº”è¯¥å°±èƒ½ç¡®å®šæ˜¯å“ªä¸ªç¨‹åºæ‰§è¡Œçš„</p></blockquote><h3 id="æŸ¥æ‰¾å¯åŠ¨è„šæœ¬æˆ–æœåŠ¡">æŸ¥æ‰¾å¯åŠ¨è„šæœ¬æˆ–æœåŠ¡</h3><ol><li><p><strong>æ£€æŸ¥ systemd æœåŠ¡</strong>ï¼š<br>è¿›å…¥åº”ç”¨ç›®å½•åï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ <code>systemd</code> æœåŠ¡æ–‡ä»¶æˆ–è€…å¯åŠ¨è„šæœ¬ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/systemd/system</span><br><span class="line"><span class="built_in">ls</span> -la | grep -i app</span><br></pre></td></tr></table></figure><p>å¦‚æœæ‰¾åˆ°ç›¸å…³æœåŠ¡æ–‡ä»¶ï¼Œå¯ä»¥ç¦ç”¨å®ƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">disable</span> &lt;service_name&gt;</span><br></pre></td></tr></table></figure></li><li><p><strong>æ£€æŸ¥ rc.local æ–‡ä»¶</strong>ï¼š<br>æŸ¥çœ‹ <code>/etc/rc.local</code> æ–‡ä»¶ï¼Œçœ‹æ˜¯å¦æœ‰å¯åŠ¨è¯¥ Python è„šæœ¬çš„å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/rc.local</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰ç›¸å…³å‘½ä»¤ï¼Œå°†å…¶æ³¨é‡Šæˆ–åˆ é™¤ã€‚</p></li><li><p><strong>æ£€æŸ¥ crontab</strong>ï¼š<br>æŸ¥çœ‹æ˜¯å¦æœ‰ä¸è¯¥ Python è„šæœ¬ç›¸å…³çš„ cron ä»»åŠ¡ï¼š</p><ul><li><p>ç”¨æˆ· crontabï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure></li><li><p>ç³»ç»Ÿçº§åˆ«çš„ crontabï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo crontab -e</span><br></pre></td></tr></table></figure></li></ul><p>æŸ¥æ‰¾å¹¶åˆ é™¤ä¸è¯¥ Python è„šæœ¬ç›¸å…³çš„å¯åŠ¨æ¡ç›®ã€‚</p></li><li><p><strong>æ£€æŸ¥ç”¨æˆ·å¯åŠ¨é¡¹</strong>ï¼š<br>æ£€æŸ¥ <code>~/.config/autostart</code> ç›®å½•ï¼Œçœ‹æ˜¯å¦æœ‰ä¸è¯¥ Python è„šæœ¬ç›¸å…³çš„å¯åŠ¨é¡¹æ–‡ä»¶ã€‚å¦‚æœæœ‰ï¼Œå°†å…¶åˆ é™¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> ~/.config/autostart</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ç¦ç”¨æ¯æ¬¡å¼€æœºå¯åŠ¨çš„pythonè¿›ç¨‹&quot;&gt;ç¦ç”¨æ¯æ¬¡å¼€æœºå¯åŠ¨çš„Pythonè¿›ç¨‹&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;Ubuntuç³»ç»Ÿé‡åˆ°ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡å¼€æœºæœ‰ä¸ªpythonè¿›ç¨‹ï¼ˆä½¿ç”¨psæŸ¥åˆ°â€œpt_main_threadâ€ï¼‰å ç”¨1.5GBæ˜¾å­˜ï¼Œä¸‹é¢æ˜¯æŸ¥æ‰¾è¿™ä¸ªè¿›ç¨‹çš„æ–¹æ³•</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://blog.lthero.cn/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="è¿ç»´" scheme="https://blog.lthero.cn/tags/%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨pm2ç®¡ç†ä»£ç è¿è¡Œ</title>
    <link href="https://blog.lthero.cn/2024/06/05/pm2InstallAndUse/"/>
    <id>https://blog.lthero.cn/2024/06/05/pm2InstallAndUse/</id>
    <published>2024-06-05T14:18:07.000Z</published>
    <updated>2024-06-05T14:24:42.903Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä½¿ç”¨pm2ç®¡ç†ä»£ç è¿è¡Œ">ä½¿ç”¨pm2ç®¡ç†ä»£ç è¿è¡Œ</h1><blockquote><p>è¦åœ¨condaç¯å¢ƒä¸‹ä½¿ç”¨pm2ç®¡ç†è¿è¡Œå¸¦æœ‰å‚æ•°<code>--listen 0.0.0.0</code>çš„<code>main.py</code>è„šæœ¬ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œ</p></blockquote><h2 id="å®‰è£…pm2">å®‰è£…pm2</h2><p>å¦‚æœè¿˜æ²¡æœ‰å®‰è£…pm2ï¼Œå¯ä»¥ä½¿ç”¨npmå®‰è£…ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pm2 -g</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºä¸€ä¸ªå¯åŠ¨è„šæœ¬">åˆ›å»ºä¸€ä¸ªå¯åŠ¨è„šæœ¬</h2><p>å¯ä»¥åˆ›å»ºä¸€ä¸ªshellè„šæœ¬ï¼Œæ¯”å¦‚<code>start.sh</code>ï¼Œæ¥æ¿€æ´»condaç¯å¢ƒå¹¶è¿è¡Œ<code>main.py</code>ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">source</span> activate sdv3</span><br><span class="line">python main.py --listen 0.0.0.0</span><br></pre></td></tr></table></figure><h2 id="ç»™äºˆæ‰§è¡Œæƒé™">ç»™äºˆæ‰§è¡Œæƒé™</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x start.sh</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨pm2ç®¡ç†è„šæœ¬">ä½¿ç”¨pm2ç®¡ç†è„šæœ¬</h2><p>ä½¿ç”¨<code>pm2</code>å¯åŠ¨shellè„šæœ¬æ—¶ï¼Œä½¿ç”¨<code>--interpreter</code>å‚æ•°æŒ‡å®šä½¿ç”¨<code>bash</code>æ¥è¿è¡Œè¯¥è„šæœ¬ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 start start.sh --name Comfyui --interpreter bash</span><br></pre></td></tr></table></figure><h2 id="pm2å¸¸ç”¨å‘½ä»¤">pm2å¸¸ç”¨å‘½ä»¤</h2><h3 id="æŸ¥çœ‹æ‰€æœ‰è¿è¡Œçš„åº”ç”¨">æŸ¥çœ‹æ‰€æœ‰è¿è¡Œçš„åº”ç”¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 list</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹è¿è¡ŒçŠ¶æ€">æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 status</span><br></pre></td></tr></table></figure><h3 id="åœæ­¢åº”ç”¨">åœæ­¢åº”ç”¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 stop Comfyui</span><br></pre></td></tr></table></figure><h3 id="é‡å¯åº”ç”¨">é‡å¯åº”ç”¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 restart Comfyui</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹æ—¥å¿—">æŸ¥çœ‹æ—¥å¿—</h3><ol><li><p><strong>æŸ¥çœ‹æ‰€æœ‰åº”ç”¨çš„å®æ—¶æ—¥å¿—</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 logs</span><br></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ç‰¹å®šåº”ç”¨çš„å®æ—¶æ—¥å¿—</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 logs &lt;app-name&gt;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„åº”ç”¨åä¸º<code>sdv3-app</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 logs sdv3-app</span><br></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ç‰¹å®šåº”ç”¨çš„é”™è¯¯æ—¥å¿—</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 logs &lt;app-name&gt; --err</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 logs sdv3-app --err</span><br></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ç‰¹å®šåº”ç”¨çš„æ ‡å‡†è¾“å‡ºæ—¥å¿—</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 logs &lt;app-name&gt; --out</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 logs sdv3-app --out</span><br></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹æœ€è¿‘çš„100è¡Œæ—¥å¿—</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 logs --lines 100</span><br></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ç‰¹å®šåº”ç”¨çš„æœ€è¿‘100è¡Œæ—¥å¿—</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 logs &lt;app-name&gt; --lines 100</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 logs sdv3-app --lines 100</span><br></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ä½ç½®</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 info &lt;app-name&gt;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 info sdv3-app</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä½¿ç”¨pm2ç®¡ç†ä»£ç è¿è¡Œ&quot;&gt;ä½¿ç”¨pm2ç®¡ç†ä»£ç è¿è¡Œ&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;è¦åœ¨condaç¯å¢ƒä¸‹ä½¿ç”¨pm2ç®¡ç†è¿è¡Œå¸¦æœ‰å‚æ•°&lt;code&gt;--listen 0.0.0.0&lt;/code&gt;çš„&lt;code&gt;main.py&lt;/code&gt;è„šæœ¬ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œ</summary>
      
    
    
    
    <category term="æœºå™¨å­¦ä¹ " scheme="https://blog.lthero.cn/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="æœºå™¨å­¦ä¹ " scheme="https://blog.lthero.cn/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>ç›‘æ§GPUæ˜¯å¦å¯ç”¨</title>
    <link href="https://blog.lthero.cn/2024/05/26/shell-monitorGPU/"/>
    <id>https://blog.lthero.cn/2024/05/26/shell-monitorGPU/</id>
    <published>2024-05-26T15:28:59.000Z</published>
    <updated>2024-05-27T14:52:58.732Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åˆ›å»ºè„šæœ¬">åˆ›å»ºè„šæœ¬</h1><blockquote><p>è„šæœ¬åŠŸèƒ½ï¼šè„šæœ¬ç›‘æ§GPUä½¿ç”¨ç‡ï¼Œå¹¶åœ¨GPUå†…å­˜ä½¿ç”¨ç‡ä½äº20%æ—¶æ‰§è¡ŒæŒ‡å®šè„šæœ¬</p></blockquote><p>åœ¨ä»»æ„ä½ç½®åˆ›å»º<code>mgpu</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim mgpu</span><br></pre></td></tr></table></figure><p>æŠŠä¸‹é¢çš„å†…å®¹ç²˜è´´ä¸Šå»</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">param1=<span class="variable">$1</span></span><br><span class="line">param2=<span class="variable">$2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ANSI color codes</span></span><br><span class="line">GREEN=<span class="string">&quot;\033[0;32m&quot;</span></span><br><span class="line">RED=<span class="string">&quot;\033[0;31m&quot;</span></span><br><span class="line">BLUE=<span class="string">&quot;\033[0;34m&quot;</span></span><br><span class="line">RESET=<span class="string">&quot;\033[0m&quot;</span></span><br><span class="line">threshold=20</span><br><span class="line"></span><br><span class="line">log_file_global=<span class="string">&quot;/home/dongli911/mgpu.log&quot;</span>  <span class="comment"># å…¨å±€æ—¥å¿—æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆä¸€ä¸ªåŸºäºæ—¶é—´æˆ³çš„å”¯ä¸€ID</span></span><br><span class="line">script_id=$(<span class="built_in">date</span> +%s)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ˜¯å¦è¯·æ±‚æŸ¥çœ‹å½“å‰è¿è¡Œçš„è„šæœ¬</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$param1</span>&quot;</span> == <span class="string">&quot;ps&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>å½“å‰æ­£åœ¨è¿è¡Œçš„è„šæœ¬:<span class="variable">$&#123;RESET&#125;</span>&quot;</span></span><br><span class="line">    grep <span class="string">&quot;Status: Running&quot;</span> <span class="variable">$log_file_global</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœè¾“å…¥äº†-gå‚æ•°ï¼Œæ ¹æ®åç»­å‚æ•°ç”Ÿæˆæ¨¡æ¿å¹¶é€€å‡º</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$param1</span>&quot;</span> == <span class="string">&quot;-g&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    script_name=<span class="string">&quot;<span class="variable">$&#123;param2:-run_python&#125;</span>&quot;</span></span><br><span class="line">    template_path=<span class="string">&quot;./<span class="variable">$&#123;script_name&#125;</span>.sh&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;æ­£åœ¨å½“å‰ç›®å½•<span class="variable">$&#123;template_path&#125;</span>ç”Ÿæˆ <span class="variable">$&#123;GREEN&#125;</span> <span class="variable">$&#123;script_name&#125;</span>.sh <span class="variable">$&#123;RESET&#125;</span> æ¨¡æ¿...&quot;</span></span><br><span class="line">    <span class="built_in">cat</span> &gt; <span class="string">&quot;<span class="variable">$template_path</span>&quot;</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># æ¿€æ´» Conda ç¯å¢ƒ (ä¸è¦åˆ é™¤ä¸‹é¢è¿™è¡Œ!)</span></span><br><span class="line"><span class="string">source /opt/anaconda3/etc/profile.d/conda.sh</span></span><br><span class="line"><span class="string"># é€‰æ‹©è¦æ¿€æ´»çš„ç¯å¢ƒ (ä¿®æ”¹ä¸‹ä¸€è¡Œä»¥æ¿€æ´»ä½ åå¥½çš„ç¯å¢ƒ)</span></span><br><span class="line"><span class="string">conda activate sdv3</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># æ‰§è¡Œ Python è„šæœ¬, åé¢å¯ä»¥æ¥å‚æ•°</span></span><br><span class="line"><span class="string">python ~/.wan/aigc/main.py</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">    <span class="built_in">chmod</span> +x <span class="string">&quot;<span class="variable">$template_path</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>æ¨¡æ¿ &#x27;<span class="variable">$&#123;script_name&#125;</span>.sh&#x27; <span class="variable">$&#123;RESET&#125;</span> å·²åˆ›å»ºå¹¶è®¾ç½®ä¸ºå¯æ‰§è¡ŒçŠ¶æ€ï¼Œä½äºå½“å‰ç›®å½•ã€‚&quot;</span></span><br><span class="line">    <span class="comment"># è®°å½•ç”Ÿæˆæ¨¡æ¿æ“ä½œ</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$script_id</span> - <span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span> - <span class="variable">$&#123;USER&#125;</span> - <span class="variable">$&#123;PWD&#125;</span> - Generated script template: <span class="variable">$&#123;script_name&#125;</span>.sh&quot;</span> &gt;&gt; <span class="variable">$log_file_global</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ˜¯å¦æœ‰è¾“å…¥å‚æ•°æˆ–è€…æ˜¯å¦è¾“å…¥äº† -h</span></span><br><span class="line"><span class="keyword">if</span> [[ -z <span class="string">&quot;<span class="variable">$param1</span>&quot;</span> || <span class="string">&quot;<span class="variable">$param1</span>&quot;</span> == <span class="string">&quot;-h&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>æ­¤è„šæœ¬ç›‘æ§GPUä½¿ç”¨ç‡ï¼Œå¹¶åœ¨GPUå†…å­˜ä½¿ç”¨ç‡ä½äº20%æ—¶æ‰§è¡ŒæŒ‡å®šè„šæœ¬ã€‚<span class="variable">$&#123;RESET&#125;</span>\n&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;ç”Ÿæˆè„šæœ¬æ¨¡æ¿&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;ç”¨æ³•: <span class="variable">$&#123;GREEN&#125;</span><span class="variable">$0</span> -g [script_name]<span class="variable">$&#123;RESET&#125;</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;  å¦‚: <span class="variable">$&#123;GREEN&#125;</span><span class="variable">$0</span> -g lthero<span class="variable">$&#123;RESET&#125;</span>ï¼Œåˆ™ç”Ÿæˆlthero.sh&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;  å¦‚: <span class="variable">$&#123;GREEN&#125;</span><span class="variable">$0</span> -g <span class="variable">$&#123;RESET&#125;</span>ï¼Œåˆ™ç”Ÿæˆé»˜è®¤årun_python.sh\n&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;è¿è¡Œè„šæœ¬&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;ç”¨æ³•: <span class="variable">$&#123;GREEN&#125;</span><span class="variable">$0</span> &lt;è¦æ‰§è¡Œçš„è„šæœ¬&gt;<span class="variable">$&#123;RESET&#125;</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;  å¦‚: <span class="variable">$&#123;GREEN&#125;</span><span class="variable">$0</span> lthero.sh<span class="variable">$&#123;RESET&#125;</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;  å¦‚: <span class="variable">$&#123;GREEN&#125;</span><span class="variable">$0</span> run_python.sh<span class="variable">$&#123;RESET&#125;</span>\n&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è„šæœ¬&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;ç”¨æ³•: <span class="variable">$&#123;GREEN&#125;</span><span class="variable">$0</span> ps<span class="variable">$&#123;RESET&#125;</span>&quot;</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span> [ -f <span class="string">&quot;<span class="variable">$param1</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;å¦‚æœGPUå¯ç”¨ï¼Œå°†æ‰§è¡Œè„šæœ¬ <span class="variable">$&#123;GREEN&#125;</span> $param1<span class="variable">$&#123;RESET&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>é”™è¯¯ï¼šæœªæ‰¾åˆ°è„šæœ¬ <span class="variable">$param1</span> æˆ–è„šæœ¬ä¸å¯æ‰§è¡Œã€‚<span class="variable">$&#123;RESET&#125;</span>&quot;</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">log_file=<span class="string">&quot;./<span class="variable">$&#123;param1%.*&#125;</span>.log&quot;</span></span><br><span class="line">counter=0</span><br><span class="line"><span class="keyword">while</span> [[ -f <span class="string">&quot;<span class="variable">$log_file</span>&quot;</span> ]]; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">let</span> counter+=1</span><br><span class="line">    log_file=<span class="string">&quot;./<span class="variable">$&#123;param1%.*&#125;</span><span class="variable">$counter</span>.log&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®°å½•æ‰§è¡Œè„šæœ¬æ“ä½œ</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$script_id</span> - <span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span> - <span class="variable">$&#123;USER&#125;</span> - <span class="variable">$&#123;PWD&#125;</span> - Executed script: <span class="variable">$param1</span> - Status: Running&quot;</span> &gt;&gt; <span class="variable">$log_file_global</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒç»­æ£€æµ‹GPUå ç”¨ï¼Œå¹¶å°†è¾“å‡ºé‡å®šå‘åˆ°æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    usage=$(nvidia-smi --query-gpu=memory.used,memory.total --format=csv,noheader,nounits | awk <span class="string">&#x27;&#123;print ($1/$2)*100&#125;&#x27;</span>)</span><br><span class="line">    usage_lt_threshold=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$usage</span> &lt; <span class="variable">$threshold</span> &quot;</span> | bc)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;å½“å‰GPUå†…å­˜ä½¿ç”¨ç‡ä¸º <span class="variable">$usage</span>%&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$log_file</span>&quot;</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$usage_lt_threshold</span>&quot;</span> -eq 1 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;å½“å‰GPUå†…å­˜ä½¿ç”¨ç‡ä½äº<span class="variable">$&#123;threshold&#125;</span>%ï¼Œå°†æ‰§è¡Œè„šæœ¬&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$log_file</span>&quot;</span></span><br><span class="line">        bash <span class="variable">$param1</span> &gt;&gt; <span class="string">&quot;<span class="variable">$log_file</span>&quot;</span> 2&gt;&amp;1</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>è„šæœ¬ <span class="variable">$param1</span> å·²æ‰§è¡Œã€‚<span class="variable">$&#123;RESET&#125;</span>&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$log_file</span>&quot;</span></span><br><span class="line">        sed -i <span class="string">&quot;/<span class="variable">$script_id</span>/c\\<span class="variable">$script_id</span> - <span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span> - <span class="variable">$&#123;USER&#125;</span> - <span class="variable">$&#123;PWD&#125;</span> - Executed script: <span class="variable">$param1</span> - Status: Completed&quot;</span> <span class="variable">$log_file_global</span></span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">sleep</span> 60</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">) &amp;</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>è„šæœ¬å·²è½¬è‡³åå°è¿è¡Œã€‚<span class="variable">$&#123;RESET&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>éšåï¼Œæ”¾åœ¨å…¨å±€å¯ç”¨çš„åœ°æ–¹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mv</span> ./mgpu /usr/local/bin/mgpu</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨è„šæœ¬">ä½¿ç”¨è„šæœ¬</h1><h2 id="è¯´æ˜">è¯´æ˜</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log_file_global=<span class="string">&quot;/home/mgpu.log&quot;</span>  <span class="comment"># å…¨å±€æ—¥å¿—æ–‡ä»¶è·¯å¾„</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œè®¾ç½®äº†å…¨å±€çš„æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼Œå¯ä»¥ä¿®æ”¹</p><p>å…¨å±€æ—¥å¿—ä¼šè®°å½•IDå·ã€è¿è¡Œæ—¶åˆ»ï¼Œè¿è¡ŒçŠ¶æ€ã€ç›®å½•ã€è„šæœ¬åç­‰ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1716812372 - 2024-05-27 20:19:32 - dongli911 - /home/ - Executed script: 1picwait4extract.sh - Status: Running</span><br></pre></td></tr></table></figure><h3 id="è„šæœ¬è¯´æ˜">è„šæœ¬è¯´æ˜</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mgpu</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">mgpu -h</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆè„šæœ¬æ¨¡æ¿">ç”Ÿæˆè„šæœ¬æ¨¡æ¿</h3><p>â€‹        ç”¨æ³•: <code>/usr/local/bin/mgpu -g [script_name]</code><br>â€‹        å¦‚ <code>mgpu -g lthero</code> ä¼šç”Ÿæˆ:lthero.sh<br>â€‹        å¦‚ <code>mgpu -g</code>  ä¼šç”Ÿæˆé»˜è®¤å:run_python.sh</p><h3 id="è¿è¡Œè„šæœ¬">è¿è¡Œè„šæœ¬</h3><p>â€‹        ç”¨æ³•: <code>/usr/local/bin/mgpu &lt;è¦æ‰§è¡Œçš„è„šæœ¬&gt;</code><br>â€‹        å¦‚ <code>/usr/local/bin/mgpu lthero.sh</code></p><h2 id="ä¸¾ä¾‹">ä¸¾ä¾‹</h2><blockquote><p>è¿›å…¥è¦è¿è¡Œçš„pyç›®å½•ï¼Œå¦‚~/test/ç›®å½•ä¸‹æœ‰main.pyï¼Œéœ€è¦çš„condaç¯å¢ƒä¸ºsdv3</p></blockquote><h3 id="ç”Ÿæˆè„šæœ¬æ¨¡æ¿">ç”Ÿæˆè„šæœ¬æ¨¡æ¿</h3><p>å…ˆè¿›å…¥è¾“å…¥<code>mgpu -g</code>ï¼Œéšååœ¨~/test/ç›®å½•ä¸‹æœ‰<code>run_python.sh</code>æ–‡ä»¶ï¼Œæ‰“å¼€run_python.shè¿›è¡Œç¼–è¾‘ï¼Œåœ¨ç¬¬6è¡Œä¿®æ”¹æˆéœ€è¦ç”¨çš„ç¯å¢ƒï¼Œç¬¬9è¡Œä¿®æ”¹æˆéœ€è¦è¿è¡Œçš„main.pyä»£ç </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¿€æ´» Conda ç¯å¢ƒ (ä¸è¦åˆ é™¤ä¸‹é¢è¿™è¡Œ!)</span></span><br><span class="line"><span class="built_in">source</span> /opt/anaconda3/etc/profile.d/conda.sh</span><br><span class="line"><span class="comment"># é€‰æ‹©è¦æ¿€æ´»çš„ç¯å¢ƒ (ä¿®æ”¹ä¸‹ä¸€è¡Œä»¥æ¿€æ´»ä½ åå¥½çš„ç¯å¢ƒ)</span></span><br><span class="line">conda activate sdv3 <span class="comment"># ä¿®æ”¹è¿™è¡Œå†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œ Python è„šæœ¬, åé¢å¯ä»¥æ¥å‚æ•°</span></span><br><span class="line">python ~/.wan/aigc/main.py <span class="comment"># ä¿®æ”¹è¿™è¡Œå†…å®¹</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å¥½åï¼Œä¿å­˜è¿™ä¸ª<code>run_python.sh</code>æ–‡ä»¶</p><h3 id="è¿è¡Œå®šåˆ¶è„šæœ¬">è¿è¡Œå®šåˆ¶è„šæœ¬</h3><p>åœ¨<code>~/test/</code>ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹ä»£ç å³å¯åœ¨åå°ç›‘æ§GPUï¼Œå¹¶ç©ºé—²æ—¶æ‰§è¡Œä»£ç </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mgpu run_python.sh</span><br></pre></td></tr></table></figure><p>ä»£ç è¾“å‡ºçš„æ—¥å¿—ä¿å­˜åœ¨<code>~/test/</code>ç›®å½•ä¸‹çš„run_python.logï¼Œå¦‚æœå¤šæ¬¡è¿è¡Œï¼Œæ—¥å¿—ä¼šè‡ªåŠ¨æ’åºrun_python.log1ï¼Œrun_python.log2â€¦â€¦</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åˆ›å»ºè„šæœ¬&quot;&gt;åˆ›å»ºè„šæœ¬&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;è„šæœ¬åŠŸèƒ½ï¼šè„šæœ¬ç›‘æ§GPUä½¿ç”¨ç‡ï¼Œå¹¶åœ¨GPUå†…å­˜ä½¿ç”¨ç‡ä½äº20%æ—¶æ‰§è¡ŒæŒ‡å®šè„šæœ¬&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨ä»»æ„ä½ç½®åˆ›å»º&lt;code&gt;mgpu&lt;/code&gt;&lt;/p&gt;
&lt;figure cla</summary>
      
    
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>zeroTier|è‡ªå»ºæœåŠ¡å™¨ä¸æ—è·¯ç”±ä½¿ç”¨</title>
    <link href="https://blog.lthero.cn/2024/05/25/install-zeroTier/"/>
    <id>https://blog.lthero.cn/2024/05/25/install-zeroTier/</id>
    <published>2024-05-25T14:54:59.000Z</published>
    <updated>2024-06-27T06:59:09.311Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£…zerotier">å®‰è£…zerotier</h1><blockquote><p>å‚è€ƒï¼š<a href="https://zhuanlan.zhihu.com/p/123956151">https://zhuanlan.zhihu.com/p/123956151</a></p><p><a href="https://blog.csdn.net/coldboy258/article/details/93133860">https://blog.csdn.net/coldboy258/article/details/93133860</a></p><p><a href="https://post.smzdm.com/p/a7nwn8q9/">https://post.smzdm.com/p/a7nwn8q9/</a></p><p>è§†é¢‘è§£é‡Šï¼š<a href="https://www.bilibili.com/video/BV1Vh411F7Mr/">https://www.bilibili.com/video/BV1Vh411F7Mr/</a></p></blockquote><p>ZerotieræœåŠ¡åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæ§åˆ¶å™¨å’Œroot</p><p>Zerotierå®˜æ–¹æä¾›äº†è‡ªå»ºçš„æ–‡æ¡£ï¼Œå…¶ä¸­webåå°å±äºâ€œcontrollersï¼ˆæ§åˆ¶å™¨ï¼‰â€ï¼Œæ§åˆ¶å™¨æ˜¯å¼€æºçš„ï¼Œä½†ä¸æä¾›webuiï¼ŒGitHubä¸Šæœ‰å¼€æºçš„uié¡¹ç›®ï¼Œæ¯”å¦‚zero-uiå’Œztncuiã€‚</p><p><strong>æ§åˆ¶å™¨</strong>ä½¿ç”¨æ ¹çš„APIåˆ›å»ºå’Œç®¡ç†ç½‘ç»œï¼Œä¸å‚ä¸æµé‡é€šä¿¡ã€‚</p><p><strong>æ ¹æœåŠ¡å™¨</strong>ï¼ˆRoot Serverï¼‰è´Ÿè´£æµé‡è½¬å‘å’ŒP2Pé€šä¿¡ï¼Œæ ¹æœåŠ¡å™¨å¦‚æœæ˜¯å®Œå…¨è‡ªå»ºçš„è¯ï¼Œé‚£å°±æ˜¯ç§æœï¼Œä¸å‚ä¸å®˜æ–¹çš„èŠ‚ç‚¹ç½‘ç»œï¼Œä¹Ÿå°±æ˜¯Zerotierä¸­çš„â€œPlanetï¼ˆè¡Œæ˜ŸèŠ‚ç‚¹ï¼‰â€çš„æ¦‚å¿µã€‚</p><p>å¦‚æœæƒ³<strong>ä½¿ç”¨å®˜æ–¹çš„Planetçš„åŒæ—¶ä½¿ç”¨è‡ªå·±çš„æ ¹æœåŠ¡å™¨</strong>ï¼Œé‚£å°±æ˜¯ä»¥<strong>Moon</strong>ï¼ˆæœˆäº®èŠ‚ç‚¹ï¼‰çš„å½¢å¼åŠ å…¥åˆ°ç½‘ç»œä¸­ã€‚ä¸¤è€…ç”¨èµ·æ¥å…¶å®æ²¡æœ‰åŒºåˆ«ï¼Œåªæ˜¯æ ‡è¯†ä¸åŒï¼Œæ— è®ºæ˜¯è‡ªå»ºçš„Planetè¿˜æ˜¯Moonï¼Œéƒ½å¯ä»¥è¢«è‡ªå»ºçš„æ§åˆ¶å™¨è°ƒç”¨ã€‚</p><p>ä½†æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œ<strong>è‡ªå»ºæ§åˆ¶å™¨çš„ç½‘ç»œå’Œå®˜æ–¹webåå°ä¸é€šç”¨</strong>ï¼Œä½ ä¸ä¼šåœ¨å®˜æ–¹webåå°çœ‹åˆ°ä½ åœ¨è‡ªå»ºæ§åˆ¶å™¨ä¸Šåˆ›å»ºçš„ç½‘ç»œï¼Œåè¿‡æ¥ä¹Ÿä¸€æ ·ï¼Œè‡ªå»ºæ§åˆ¶å™¨ä¹Ÿçœ‹ä¸åˆ°å®˜æ–¹æ§åˆ¶å™¨åˆ›å»ºçš„ç½‘ç»œã€‚ä½†ç½‘ç»œIDçš„åŠ å…¥æ˜¯å¯ä»¥é€šç”¨çš„ï¼Œå³ä½¿ä½ ä¸æ­å»ºè‡ªå·±çš„MoonèŠ‚ç‚¹ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±çš„æ§åˆ¶å™¨+å®˜æ–¹çš„Planetè¿›è¡Œé€šä¿¡ã€‚</p><hr><h2 id="åˆ›å»ºè™šæ‹Ÿå±€åŸŸç½‘">åˆ›å»ºè™šæ‹Ÿå±€åŸŸç½‘</h2><p>åœ¨zerotierå®˜ç½‘ä¸Šæ³¨å†Œè´¦å·ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿå±€åŸŸç½‘</p><h2 id="ä¸‹è½½ä¸è‡ªåŠ¨å®‰è£…">ä¸‹è½½ä¸è‡ªåŠ¨å®‰è£…</h2><p>zerotierå®˜æ–¹æä¾›äº†æ¯”è¾ƒæ–¹ä¾¿çš„å®‰è£…æ–¹å¼,ä¸€æ¡å‘½ä»¤å³å¯å®Œæˆ:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://install.zerotier.com/ | sudo bash</span><br></pre></td></tr></table></figure><h2 id="åŠ å…¥ç½‘ç»œ">åŠ å…¥ç½‘ç»œ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zerotier-cli <span class="built_in">join</span> fadxxxxx5eb45a9</span><br></pre></td></tr></table></figure><p>éšåï¼Œåœ¨zerotierå®˜ç½‘ä¸ŠåŒæ„è¿™ä¸ªè®¾å¤‡çš„æ¥å…¥ï¼Œæ­¤è®¾å¤‡å°±åŠ å…¥è™šæ‹Ÿå±€åŸŸç½‘æˆåŠŸäº†</p><h1 id="æ³¨å†Œæˆä¸ºmoon">æ³¨å†Œæˆä¸ºMoon</h1><blockquote><p>è¿™é‡Œçš„Moonæ˜¯ä¸­ç»§æœåŠ¡å™¨ï¼Œé»˜è®¤ç”¨ä½¿ç”¨å®˜æ–¹çš„ä¸­ç»§æœåŠ¡å™¨ï¼Œä½†å»¶è¿Ÿè¾ƒé«˜ï¼›</p><p>Moonåªæœ‰åœ¨ç›´è¿å¤±è´¥æ—¶æ‰ä¼šä½¿ç”¨ä¸­ç»§æœåŠ¡å™¨è¿›è¡Œä¸­è½¬</p></blockquote><h2 id="ç”Ÿæˆmooné…ç½®æ–‡ä»¶">ç”Ÿæˆmooné…ç½®æ–‡ä»¶</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /var/lib/zerotier-one <span class="comment">#å®‰è£…å¥½zerotierå,è‡ªåŠ¨ä¼šå®‰è£…åˆ°æ­¤ç›®å½•</span></span><br><span class="line">sudo zerotier-idtool initmoon identity.public &gt; moon.json    <span class="comment">#è¯¥å‘½ä»¤å°†idæ–‡ä»¶è½¬æ¢ä¸ºèƒ½ç”¨äºé…ç½®çš„json</span></span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶moon-json">ä¿®æ”¹é…ç½®æ–‡ä»¶moon.json</h2><p>ä¸»è¦æ˜¯æ·»åŠ å…¬ç½‘IPï¼Œä¿®æ”¹å†…å®¹å¦‚ä¸‹, 9993æ˜¯é»˜è®¤ç«¯å£</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;stableEndpoints&quot;</span>: [ <span class="string">&quot;23.23.23.23/9993&quot;</span> ]</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨:23.23.23.23ä¸ºå…¬ç½‘ip, ä¸€å®šè¦é…ç½®æ­£ç¡®,Zerotierä¾é æ­¤é…ç½®å»è¿æ¥moon.</p><p>åé¢çš„ç«¯å£è‹¥æ²¡æœ‰æ”¹å˜åˆ™é»˜è®¤éƒ½æ˜¯9993ç«¯å£, ä¸”æ˜¯UDPåè®®çš„, æ­¤å¤„åœ¨é˜²ç«å¢™ä¸Šéœ€è¦å¼€æ”¾UDP,å¦åˆ™æ˜¯è¿æ¥ä¸ä¸ŠMoonçš„.</p></blockquote><p>è¯¥é…ç½®é‡Œé¢,æœ‰ä¸€ä¸ªidå­—æ®µ,10ä¸ªå­—ç¬¦,å¦‚: [ â€œidâ€: â€œ18fasd2319â€ ] å°±æ˜¯moonçš„id, åœ¨å®¢æˆ·ç«¯è¿æ¥æ—¶,éœ€è¦ç”¨åˆ°å®ƒ</p><blockquote><p>è¿™é‡Œçš„idè¿˜å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤å¾—åˆ°</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line">grep <span class="built_in">id</span> /var/lib/zerotier-one/moon.json | <span class="built_in">head</span> -n 1</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">zerotier-cli info</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿæˆmoonæ–‡ä»¶">ç”Ÿæˆmoonæ–‡ä»¶</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zerotier-idtool genmoon moon.json </span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè¯¥å‘½ä»¤å,ä¼šåœ¨åœ¨/var/lib/zerotier-oneç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªç±»ä¼¼000000<strong>18fasd2319</strong>.moonçš„æ–‡ä»¶â€¦è¿™ä¸ªæ–‡ä»¶éå¸¸é‡è¦,æ‰€æœ‰çš„å®¢æˆ·ç«¯è¦è¿æ¥ä¸Šmoonéƒ½æ˜¯ä¾é è¯¥æ–‡ä»¶å…³è”çš„â€¦</p><h2 id="ä½¿mooné…ç½®æ–‡ä»¶ç”Ÿæ•ˆ">ä½¿mooné…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</h2><p>åœ¨<code>/var/lib/zerotier-one</code>ç›®å½•ä¸‹,æ–°å»ºä¸€ä¸ª <code>moons.d</code> æ–‡ä»¶å¤¹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> moons.d/</span><br></pre></td></tr></table></figure><p>å¹¶å°†åˆšç”Ÿæˆçš„<code>mooné…ç½®æ–‡ä»¶</code>æ”¾åˆ°è¯¥æ–‡ä»¶å¤¹ä¸‹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> 000000**18fasd2319**.moon moons.d/</span><br></pre></td></tr></table></figure><h2 id="é‡æ–°å¯åŠ¨moonæœåŠ¡å™¨">é‡æ–°å¯åŠ¨MoonæœåŠ¡å™¨</h2><p>ç”±äºä½¿ç”¨å‘½ä»¤å®‰è£…æ—¶ä¼šè‡ªåŠ¨æ³¨å†Œä¸ºæœåŠ¡,æ‰€ä»¥å¯ä»¥ä¾é ä»¥ä¸‹å‘½ä»¤å®Œæˆå¯åŠ¨æˆ–é‡å¯**ï¼ˆæ‰§è¡Œä¸€ä¸ªå³å¯ï¼‰**</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">service zerotier-one restart  <span class="comment">#æœåŠ¡é‡å¯å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">/etc/init.d/zerotier-one restart <span class="comment">#æœåŠ¡é‡å¯å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">service zerotier-one start <span class="comment">#æœåŠ¡å¯åŠ¨å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">zerotier-one -d <span class="comment">#æˆ–ç›´æ¥ç¨‹åºå¯åŠ¨</span></span><br></pre></td></tr></table></figure><p>ç»è¿‡ä»¥ä¸Šé…ç½®,æœåŠ¡å™¨ä¸Šçš„moonå³é…ç½®å¹¶åº”ç”¨å®Œé—­.</p><h1 id="å®¢æˆ·ç«¯ä½¿ç”¨moon">å®¢æˆ·ç«¯ä½¿ç”¨Moon</h1><blockquote><p>å‡è®¾å·²ç»â€œAæœåŠ¡å™¨â€ä¸ºäº†Moonï¼Œæ­¤æ—¶è®©&quot;BæœåŠ¡å™¨&quot;è®¾ç½®&quot;A&quot;ä¸ºå…¶MoonæœåŠ¡å™¨</p><p>æ¥ä¸‹æ¥å°±éœ€è¦åœ¨å„å®¢æˆ·ç«¯zerotierä¸Šé…ç½®,å¹¶è¿æ¥æ­¤æœåŠ¡å™¨</p></blockquote><p>æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å®Œæˆ.</p><h2 id="æ–¹æ³•1-è‡ªåŠ¨">æ–¹æ³•1(è‡ªåŠ¨)</h2><p>åªéœ€æ‰§è¡Œæ­¤å‘½ä»¤å³å¯,<strong>æ­¤å¤„éœ€è¦è¾“å…¥ä¸¤éid</strong>:</p><blockquote><p>zerotier-cli orbit <strong>18fasd2319</strong> <strong>18fasd2319</strong></p></blockquote><p>(æ­¤ç§æ–¹æ³•ä¾èµ–<strong>zerotierçš„æ ¹æœåŠ¡å™¨</strong>,è‹¥æ ¹æœåŠ¡å™¨è¿æ¥ä¸ä¸Š,åˆ™ä¼šæ— æ•ˆ,ç”±äºä¸ç¡®å®šæ€§</p><h2 id="æ–¹æ³•2-æ‰‹åŠ¨">æ–¹æ³•2(æ‰‹åŠ¨)</h2><p><strong>Linux:</strong></p><ol><li>ç›´æ¥åœ¨zerotierç›®å½•(<code>/var/lib/zerotier-one/</code>)ä¸‹,åˆ›å»º<code>moons.d</code>æ–‡ä»¶å¤¹</li><li>å¹¶ä¸”å°†ç”Ÿæˆçš„000000<strong>18fasd2319</strong>.moonæ–‡ä»¶æ‹·å…¥</li><li><strong>é‡å¯æœåŠ¡</strong>å³å¯</li></ol><p><strong>Windows:</strong></p><ol><li>æ‰“å¼€æœåŠ¡ç¨‹åºservices.msc, æ‰¾åˆ°æœåŠ¡&quot;ZeroTier One&quot;</li><li>åœ¨å±æ€§å†…æ‰¾åˆ°è¯¥æœåŠ¡å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„,æˆ‘çš„ç¯å¢ƒä¸‹ä¸ºC:\ProgramData\ZeroTier\One\zerotier-one_x64.exe</li><li>æ‰“å¼€è¯¥æ–‡ä»¶å¤¹, å¹¶ä¸”åœ¨å…¶ä¸‹å»ºç«‹moons.dæ–‡ä»¶å¤¹</li><li>å°†moonæœåŠ¡å™¨ä¸‹ç”Ÿæˆçš„000000<strong>18fasd2319</strong>.moonæ–‡ä»¶,æ‹·è´åˆ°æ­¤æ–‡ä»¶å¤¹å†…â€¦<strong>å†é‡å¯è¯¥æœåŠ¡å³å¯</strong>â€¦</li></ol><blockquote><p>æ­¤å¤„<strong>é‡å¯çš„æ˜¯è¯¥é¡¹æœåŠ¡</strong>,<strong>ä¸æ˜¯ç”µè„‘å³ä¸‹è§’çš„å›¾æ ‡ç¨‹åº</strong>â€¦ç½‘ä¸Šå¤§å¤šèµ„æ–™éƒ½æ²¡æ³•ç‰¹åˆ«è¯´æ˜,æˆ–è€…å«ç³Šæ²¡è¯´æ¸…,ç”šè‡³é‡å¯ç”µè„‘ä¹‹ç±»çš„è¯´æ³•éƒ½è¯´å‡ºæ¥äº†,æ¯”è¾ƒé©¬è™â€¦å³ä¸‹è§’ä»»åŠ¡æ ç¨‹åºè·¯å¾„æ˜¯åœ¨C:\Program Files (x86)\ZeroTier\Oneç›®å½•ä¸‹,è€ŒæœåŠ¡è·¯å¾„å´å¹¶éåœ¨è¯¥è·¯å¾„,è‹¥å°†moons.dæ–‡ä»¶å¤¹æ”¾ä¸å¯¹ä½ç½®,æ˜¯æ— æ³•è¿ä¸ŠMoonæœåŠ¡å™¨çš„.)</p></blockquote><h2 id="éªŒè¯ç”Ÿæ•ˆ">éªŒè¯ç”Ÿæ•ˆ</h2><p>è¦éªŒè¯æ˜¯å¦moonç”Ÿæ•ˆ,åªéœ€è¦åœ¨å®¢æˆ·ç«¯zerotierç¨‹åºç›®å½•ä¸‹,æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯:</p><p>windows/linuxé€šç”¨å‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zerotier-cli listpeers</span><br></pre></td></tr></table></figure><p>è‹¥æœ‰ç±»ä¼¼åœ°å€,å³å¯è¯æ˜moonè¿æ¥æˆåŠŸ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">200 listpeers 18fasd2319 23.23.23.23/9994;4242;4038 224 1.2.12 MOON</span><br></pre></td></tr></table></figure><hr><h1 id="åœ¨æ—è·¯ç”±ä½¿ç”¨zerotier">åœ¨æ—è·¯ç”±ä½¿ç”¨zerotier</h1><blockquote><p>å‡è®¾openwrtæ—è·¯ç”±çš„å®é™…å±€åŸŸç½‘ä¸º192.168.6.155</p><p>è¿™ç§æ–¹å¼ï¼Œå¿…é¡»è®©<strong>192.168.0.0/16</strong>ç½‘æ®µä¸‹çš„è®¾å¤‡ï¼Œè®¾ç½®å…¶ç½‘å…³å’ŒDNSä¸ºæ—è·¯ç”±ipåœ°å€</p></blockquote><p>æ‰“å¼€openwrtç½‘é¡µä¸­çš„zerotierè½¯ä»¶ï¼Œå¡«å†™è™šæ‹Ÿå±€åŸŸç½‘IDï¼Œç‚¹å‡»å¯ç”¨å³å¯ï¼Œéšåä¿å­˜å¹¶åº”ç”¨</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240525231051219.png" alt="image-20240525231051219"></p><p>éšååœ¨zerotierçš„ç½‘ç«™ä¸Šï¼Œå…è®¸openwrtç³»ç»Ÿæ¥å…¥ï¼Œåœ¨æ—è·¯ç”±è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥åˆ¤æ–­æ˜¯å¦åŠ å…¥æˆåŠŸ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zerotier-cli listnetworks</span><br></pre></td></tr></table></figure><p>è¿”å›å€¼å¦‚ä¸‹å³åŠ å…¥æˆåŠŸï¼Œå¹¶ä¸”è™šæ‹Ÿå±€åŸŸç½‘ipä¸ºï¼š<strong>172.22.33.155</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">200 listnetworks &lt;nwid&gt; &lt;name&gt; &lt;mac&gt; &lt;status&gt; &lt;<span class="built_in">type</span>&gt; &lt;dev&gt; &lt;ZT assigned ips&gt;</span><br><span class="line">200 listnetworks fada252630165xxx xxxxxx bb:95:e9:ff:ee:64 OK PRIVATE zasdhyt5n4 172.22.33.155/16</span><br></pre></td></tr></table></figure><blockquote><p>ä¸ºäº†è®©æ—è·¯ç”±ä¸‹çš„æ‰€æœ‰è®¾å¤‡ï¼ˆä¸ä¸‹è½½zerotierï¼‰ç›´æ¥å¯ä»¥è®¿é—®è™šæ‹Ÿå±€åŸŸç½‘æ‰€æœ‰è®¾å¤‡</p></blockquote><p><strong>è‡ªåŠ¨å…è®¸å®¢æˆ·ç«¯ NAT</strong> è¦æ‰“å¼€ï¼Œéšåä¿å­˜å¹¶åº”ç”¨</p><p>éšååœ¨zerotierçš„ç½‘ç«™ä¸Šï¼Œ<strong>Add Routes</strong>å¡«å†™ä»¥ä¸‹å†…å®¹</p><p>Destinationå†™å±€åŸŸç½‘çš„ç½‘æ®µï¼Œå¦‚<strong>192.168.0.0/16</strong>ï¼›Viaå†™æ—è·¯ç”±çš„è™šæ‹Ÿipï¼š<strong>172.22.33.155</strong></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240525231559150.png" alt="image-20240525231559150"></p><blockquote><p>ä»è€Œï¼Œè™šæ‹Ÿå±€åŸŸç½‘æ‰€æœ‰è®¾å¤‡ä¸<strong>192.168.0.0/16</strong>ç½‘æ®µä¸‹çš„æ‰€æœ‰è®¾å¤‡äº’é€š</p></blockquote><hr><h1 id="é™„å½•">é™„å½•</h1><blockquote><p>ç”±äºå¾ˆå¤šäººå¯¹é…ç½®æœåŠ¡ç«¯çš„moonéƒ½ä¼šæœ‰ä¿®æ”¹ç«¯å£çš„éœ€æ±‚ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼Œä½†æˆ‘æ²¡æˆåŠŸ</p></blockquote><p><strong>åœ¨è¿è¡Œç¨‹åºåŒçº§ç›®å½•ä¸‹å»ºç«‹local.confæ–‡ä»¶:</strong></p><p><strong>æ–‡ä»¶å†…å®¹é…ç½®å¦‚ä¸‹,primaryPortå³ä¸ºæƒ³è¦é…ç½®çš„ç«¯å£:</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="string">&quot;settings&quot;</span>:</span><br><span class="line">  &#123;</span><br><span class="line">   <span class="string">&quot;primaryPort&quot;</span>:9994</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>local.conf å®Œæ•´é…ç½®ç¤ºä¾‹å¦‚ä¸‹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;physical&quot;: &#123; /* Settings that apply to physical L2/L3 network paths. */</span><br><span class="line">        &quot;NETWORK/bits&quot;: &#123; /* Network e.g. 10.0.0.0/24 or fd00::/32 */</span><br><span class="line">            &quot;blacklist&quot;: true|false, /* If true, blacklist this path for all ZeroTier traffic */</span><br><span class="line">            &quot;trustedPathId&quot;: 0|!0 /* If present and nonzero, define this as a trusted path (see below) */</span><br><span class="line">        &#125; /* ,... additional networks */</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;virtual&quot;: &#123; /* Settings applied to ZeroTier virtual network devices (VL1) */</span><br><span class="line">        &quot;##########&quot;: &#123; /* 10-digit ZeroTier address */</span><br><span class="line">            &quot;try&quot;: [ &quot;IP/port&quot;/*,...*/ ], /* Hints on where to reach this peer if no upstreams/roots are online */</span><br><span class="line">            &quot;blacklist&quot;: [ &quot;NETWORK/bits&quot;/*,...*/ ] /* Blacklist a physical path for only this peer. */</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;settings&quot;: &#123; /* Other global settings */</span><br><span class="line">        &quot;primaryPort&quot;: 0-65535, /* If set, override default port of 9993 and any command line port */</span><br><span class="line">        &quot;portMappingEnabled&quot;: true|false, /* If true (the default), try to use uPnP or NAT-PMP to map ports */</span><br><span class="line">        &quot;softwareUpdate&quot;: &quot;apply&quot;|&quot;download&quot;|&quot;disable&quot;, /* Automatically apply updates, just download, or disable built-in software updates */</span><br><span class="line">        &quot;softwareUpdateChannel&quot;: &quot;release&quot;|&quot;beta&quot;, /* Software update channel */</span><br><span class="line">        &quot;softwareUpdateDist&quot;: true|false, /* If true, distribute software updates (only really useful to ZeroTier, Inc. itself, default is false) */</span><br><span class="line">        &quot;interfacePrefixBlacklist&quot;: [ &quot;XXX&quot;,... ], /* Array of interface name prefixes (e.g. eth for eth#) to blacklist for ZT traffic */</span><br><span class="line">        &quot;allowManagementFrom&quot;: &quot;NETWORK/bits&quot;|null, /* If non-NULL, allow JSON/HTTP management from this IP network. Default is 127.0.0.1 only. */</span><br><span class="line">        &quot;allowTcpFallbackRelay&quot;: true|false /* Allow or disallow establishment of TCP relay connections (true by default) */</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å®‰è£…zerotier&quot;&gt;å®‰è£…zerotier&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;å‚è€ƒï¼š&lt;a href=&quot;https://zhuanlan.zhihu.com/p/123956151&quot;&gt;https://zhuanlan.zhihu.com/p/1239561</summary>
      
    
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>æœåŠ¡å™¨ä¸Šå»ºç«‹ç”»å»Š</title>
    <link href="https://blog.lthero.cn/2024/05/12/InstallHomeGalleryOnSelfHost/"/>
    <id>https://blog.lthero.cn/2024/05/12/InstallHomeGalleryOnSelfHost/</id>
    <published>2024-05-12T14:22:33.000Z</published>
    <updated>2024-07-21T06:32:45.953Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è‡ªå»ºç”»å»Š">è‡ªå»ºç”»å»Š</h1><blockquote><p>home-galleryé¡¹ç›®ï¼š<a href="https://docs.home-gallery.org/install/">https://docs.home-gallery.org/install/</a></p></blockquote><p>æˆ‘æ˜¯å°†OnedriveæŒ‚è½½åˆ°æœåŠ¡å™¨ä¸Šï¼Œå†åœ¨æœåŠ¡å™¨è¿è¡Œhome-gallery</p><p>æŒ‚è½½Onedriveåˆ°æœåŠ¡å™¨çš„æ•™ç¨‹ï¼š<a href="https://blog.lthero.cn/2024/05/12/MountOneDriveUsingRclone/">https://blog.lthero.cn/2024/05/12/MountOneDriveUsingRclone/</a></p><h2 id="docker">Docker</h2><p>HomeGallery çš„dockeré•œåƒä¸‹è½½ <a href="https://hub.docker.com/r/xemle/home-gallery">xemle/home-gallery</a> (amd64, arm64, arm/v7 and arm/v6 architecture).</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull xemle/home-gallery</span><br></pre></td></tr></table></figure><h3 id="data-volume-structure">Data volume structure</h3><p>The gallery application is located at <code>/app</code> whereas the data is stored in <code>/data</code> within the container. The <code>/data</code> folder has following structure:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">`-- /data - Docker data volume</span><br><span class="line">  +-- sources - Your media file sources or other volumne mounts</span><br><span class="line">  +-- config - File index, database and configuration files</span><br><span class="line">  | `-- gallery.config.yml - Main configuration file</span><br><span class="line">  `-- storage - Preview images and meta data</span><br></pre></td></tr></table></figure><p>The media volumes should be mounted into the <code>/data</code> directory. Eg. mount your host directory <code>~/Pictures</code> to <code>/data/Pictures</code> in the container and add it as source to your <code>gallery.config.yml</code>.</p><p>To avoid user permission problems it is advisable to run the container with your user and group id via <code>-u</code> parameter.</p><h3 id="quickstart">Quickstart</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºhome-galleryï¼Œä¿å­˜æ•°æ®</span></span><br><span class="line"><span class="built_in">mkdir</span> home-gallery</span><br><span class="line"><span class="built_in">cd</span> home-gallery</span><br><span class="line"><span class="built_in">mkdir</span> -p data</span><br><span class="line"><span class="built_in">alias</span> gallery=<span class="string">&quot;docker run -d -ti --rm \</span></span><br><span class="line"><span class="string">  -v <span class="subst">$(pwd)</span>/data:/data \</span></span><br><span class="line"><span class="string">  -v /root/Onedrive/Photos/Z30/:/data/Pictures \</span></span><br><span class="line"><span class="string">  -u <span class="subst">$(id -u)</span>:<span class="subst">$(id -g)</span> \</span></span><br><span class="line"><span class="string">  -p 3000:3000 xemle/home-gallery \</span></span><br><span class="line"><span class="string">  -e GALLERY_WATCH_POLL_INTERVAL=60&quot;</span></span><br><span class="line">gallery run init --<span class="built_in">source</span> /data/Pictures</span><br><span class="line">gallery run server</span><br></pre></td></tr></table></figure><p>æŠŠ<code>/root/Onedrive/Photos/Z30/</code>ä¿®æ”¹æˆæœ¬åœ°çš„ç›¸å†Œç›®å½•ï¼ˆåé¢çš„<code>:/data/Pictures</code>ä¸è¦åŠ¨ï¼‰ï¼Œè¿è¡Œserveråï¼Œæµè§ˆå™¨ä¸Šæ‰“å¼€<a href="http://localhost:3000/">localhost:3000</a>å³å¯</p><blockquote><p>The docker container is configured to poll image sources each 5 minutes for compatibility reasons of slow or large media volumes. Check if inotify through disabled polling by <code>GALLERY_WATCH_POLL_INTERVAL=0</code> is working for you.</p><p>å®ƒä¼šåœ¨åå°ç”Ÿæˆå›¾åƒçš„ç¼©ç•¥å›¾ï¼Œè¿™é‡Œæœ‰ä¸ªé—´éš”è®¾ç½®å•Š(-e GALLERY_WATCH_POLL_INTERVAL=60)ï¼Œæ¯1åˆ†é’Ÿä¼šæ›´æ–°ä¸€æ‰¹ç…§ç‰‡ï¼Œæ‰€ä»¥è¿è¡Œäº†<code>gallery run server</code>åï¼Œå¯ä»¥å¤šç­‰ä¸€ä¼šå„¿</p></blockquote><h1 id="ä½¿ç”¨httpè®¿é—®">ä½¿ç”¨HTTPè®¿é—®</h1><p>è¦å°†è¿è¡Œåœ¨Dockerå®¹å™¨ä¸­çš„æœåŠ¡é€šè¿‡åŸŸåè®¿é—®ï¼Œå¹¶ä½¿ç”¨Nginxä½œä¸ºåå‘ä»£ç†æ¥è½¬å‘åˆ°å®¿ä¸»æœºçš„3000ç«¯å£ï¼Œä½ éœ€è¦å®Œæˆå‡ ä¸ªæ­¥éª¤ã€‚è¿™åŒ…æ‹¬è®¾ç½®DNSè®°å½•ã€é…ç½®Nginxä»¥åŠç¡®ä¿ç½‘ç»œå®‰å…¨ã€‚ä¸‹é¢æ˜¯å…·ä½“æ­¥éª¤ï¼š</p><h2 id="æ­¥éª¤-1-è®¾ç½®dnsè®°å½•">æ­¥éª¤ 1: è®¾ç½®DNSè®°å½•</h2><p>ç¡®ä¿ä½ çš„åŸŸå <code>gallery.lthero.top</code> çš„DNSè®°å½•æŒ‡å‘æ‰˜ç®¡Nginxçš„æœåŠ¡å™¨çš„IPåœ°å€ã€‚è¿™é€šå¸¸åœ¨ä½ çš„åŸŸåæ³¨å†Œå•†å¤„è¿›è¡Œè®¾ç½®ï¼š</p><ul><li><strong>Aè®°å½•</strong>ï¼šå°†åŸŸåæŒ‡å‘IPv4åœ°å€ã€‚</li><li><strong>AAAAè®°å½•</strong>ï¼šå°†åŸŸåæŒ‡å‘IPv6åœ°å€ï¼ˆå¦‚æœé€‚ç”¨ï¼‰ã€‚</li></ul><h2 id="æ­¥éª¤-2-å®‰è£…å¹¶å¯åŠ¨nginx">æ­¥éª¤ 2: å®‰è£…å¹¶å¯åŠ¨Nginx</h2><p>æ­¥éª¤ 1: æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨</p><p>æ‰“å¼€ç»ˆç«¯ï¼Œé¦–å…ˆä½¿ç”¨<code>apt</code>å‘½ä»¤æ›´æ–°ä½ çš„åŒ…åˆ—è¡¨ï¼Œä»¥ç¡®ä¿ä½ å®‰è£…çš„æ˜¯æœ€æ–°ç‰ˆæœ¬çš„Nginxã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><p>æ­¥éª¤ 2: å®‰è£…Nginx</p><p>ä½¿ç”¨<code>apt</code>å®‰è£…Nginxã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install nginx</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-3-é…ç½®nginx">æ­¥éª¤ 3: é…ç½®Nginx</h2><p>ä½ éœ€è¦åœ¨Nginxä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æœåŠ¡å™¨å—ï¼ˆserver blockï¼‰ï¼Œæˆ–è€…åœ¨å·²æœ‰çš„é»˜è®¤é…ç½®ä¸­ä¿®æ”¹ï¼Œä»¥è®¾ç½®åå‘ä»£ç†ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„Nginxé…ç½®ç¤ºä¾‹ï¼Œå°†ä¼šæŠŠæ‰€æœ‰åˆ° <code>gallery.lthero.top</code> çš„è¯·æ±‚è½¬å‘åˆ°æœ¬åœ°çš„3000ç«¯å£ï¼š</p><ol><li><p>æ‰“å¼€æˆ–åˆ›å»ºä¸€ä¸ªæ–°çš„Nginxé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/nginx/sites-available/gallery.lthero.top</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> gallery.lthero.top;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://localhost:3000;</span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">&#x27;upgrade&#x27;</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_cache_bypass</span> <span class="variable">$http_upgrade</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé…ç½®åšäº†ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li><code>listen 80;</code> å‘Šè¯‰Nginxç›‘å¬80ç«¯å£ï¼ˆHTTPæ ‡å‡†ç«¯å£ï¼‰ã€‚</li><li><code>server_name gallery.lthero.top;</code> è®¾ç½®è¿™ä¸ªå—åº”å½“å“åº”çš„åŸŸåã€‚</li><li><code>proxy_pass http://localhost:3000;</code> æŒ‡å®šæ‰€æœ‰ä¼ å…¥çš„è¯·æ±‚è½¬å‘åˆ°æœ¬åœ°çš„3000ç«¯å£ã€‚</li><li><code>proxy_set_header</code> æŒ‡ä»¤å°†é‡è¦çš„HTTPå¤´ä¿¡æ¯è½¬å‘ç»™åç«¯åº”ç”¨ã€‚</li></ul></li><li><p>å¯ç”¨é…ç½®æ–‡ä»¶é€šè¿‡åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥(ä¸€å®šè¦åš)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">ln</span> -s /etc/nginx/sites-available/gallery.lthero.top /etc/nginx/sites-enabled/</span><br></pre></td></tr></table></figure></li><li><p>æ£€æŸ¥Nginxé…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -t</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œé‡å¯Nginxä»¥åº”ç”¨é…ç½®(ä¸€å®šè¦åš)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure></li></ol><h2 id="æ­¥éª¤-4-è°ƒæ•´é˜²ç«å¢™è§„åˆ™">æ­¥éª¤ 4: è°ƒæ•´é˜²ç«å¢™è§„åˆ™</h2><p>ç¡®ä¿ä½ çš„æœåŠ¡å™¨çš„é˜²ç«å¢™è§„åˆ™å…è®¸HTTPï¼ˆç«¯å£80ï¼‰å’ŒHTTPSï¼ˆç«¯å£443ï¼Œå¦‚æœä½ ä½¿ç”¨SSLï¼‰çš„æµé‡ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨<code>ufw</code>ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow <span class="string">&#x27;Nginx Full&#x27;</span></span><br><span class="line">sudo ufw reload</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-5-æµ‹è¯•é…ç½®">æ­¥éª¤ 5: æµ‹è¯•é…ç½®</h2><p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>http://gallery.lthero.top</code> æˆ–ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·å¦‚ <code>curl</code> æ¥æµ‹è¯•ä½ çš„é…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://gallery.lthero.top</span><br></pre></td></tr></table></figure><p>ä½ åº”è¯¥èƒ½çœ‹åˆ°ä»Dockerå®¹å™¨ä¸­è¿è¡Œçš„æœåŠ¡å“åº”çš„å†…å®¹ã€‚</p><p>è¿™æ ·ï¼Œä½ å°±é…ç½®å¥½äº†Nginxä½œä¸ºåå‘ä»£ç†ï¼Œå°†åŸŸå <code>gallery.lthero.top</code> çš„æµé‡è½¬å‘åˆ°å®¿ä¸»æœºçš„3000ç«¯å£ä¸Šçš„æœåŠ¡ã€‚å¦‚æœä½ å¸Œæœ›ä½¿ç”¨HTTPSï¼Œä½ è¿˜éœ€è¦è®¾ç½®SSLè¯ä¹¦ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨Letâ€™s Encryptå…è´¹è¯ä¹¦å¹¶é…ç½®HTTPSã€‚</p><h1 id="ä½¿ç”¨httpsè®¿é—®">ä½¿ç”¨HTTPSè®¿é—®</h1><p>è¦è®©ä½ çš„åŸŸå <code>gallery.lthero.top</code> ä½¿ç”¨ HTTPSï¼Œä½ éœ€è¦è·å– SSL/TLS è¯ä¹¦ï¼Œå¹¶é…ç½® Nginx ä»¥ä½¿ç”¨è¿™äº›è¯ä¹¦æ¥åŠ å¯†ç½‘é¡µå†…å®¹ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„æ­¥éª¤ï¼ŒåŒ…æ‹¬å¦‚ä½•ä½¿ç”¨ Letâ€™s Encrypt æä¾›çš„å…è´¹è¯ä¹¦è‡ªåŠ¨åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚</p><h2 id="æ­¥éª¤-1-å®‰è£…-certbot">æ­¥éª¤ 1: å®‰è£… Certbot</h2><p>Certbot æ˜¯ä¸€ä¸ªè‡ªåŠ¨è·å–å¹¶å®‰è£… Letâ€™s Encrypt è¯ä¹¦çš„å®¢æˆ·ç«¯ã€‚åœ¨ Ubuntu ä¸Šå®‰è£… Certbot åŠå…¶ Nginx æ’ä»¶éå¸¸ç®€å•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install certbot python3-certbot-nginx</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-2-è·å–å’Œå®‰è£…è¯ä¹¦">æ­¥éª¤ 2: è·å–å’Œå®‰è£…è¯ä¹¦</h2><p>ä½¿ç”¨ Certbot è·å–å¹¶ä¸ºä½ çš„åŸŸåå®‰è£…è¯ä¹¦ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot --nginx -d gallery.lthero.top</span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤ä¼šè‡ªåŠ¨ä¸ºæŒ‡å®šçš„åŸŸå <code>gallery.lthero.top</code> é…ç½® SSL è¯ä¹¦ï¼Œå¹¶æ›´æ–° Nginx é…ç½®ä»¥ä½¿ç”¨è¿™äº›è¯ä¹¦ã€‚Certbot ä¼šè¯¢é—®ä½ ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ç”µå­é‚®ä»¶åœ°å€ï¼ˆç”¨äºç´§æ€¥è”ç³»å’Œè¯ä¹¦ç»­è®¢æé†’ï¼‰ï¼Œä»¥åŠæ˜¯å¦é‡å®šå‘æ‰€æœ‰ HTTP è¯·æ±‚åˆ° HTTPSï¼ˆå¼ºçƒˆå»ºè®®å¯ç”¨ï¼‰ã€‚</p><p>ç”Ÿæˆçš„è¯ä¹¦ä½ç½®<code>/etc/letsencrypt/live/</code></p><h2 id="æ­¥éª¤-3-æ›´æ–°-nginx-é…ç½®">æ­¥éª¤ 3: æ›´æ–° Nginx é…ç½®</h2><p>å¦‚æœä½ æƒ³æ‰‹åŠ¨ç¼–è¾‘ Nginx é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼é…ç½®ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/nginx/sites-available/gallery.lthero.top</span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> gallery.lthero.top;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$server_name</span><span class="variable">$request_uri</span>;  <span class="comment"># å¼ºåˆ¶é‡å®šå‘æ‰€æœ‰ HTTP è¯·æ±‚åˆ° HTTPS</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl http2;</span><br><span class="line">    <span class="attribute">server_name</span> gallery.lthero.top;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /etc/letsencrypt/live/gallery.lthero.top/fullchain.pem;  <span class="comment"># è¯ä¹¦æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /etc/letsencrypt/live/gallery.lthero.top/privkey.pem;  <span class="comment"># ç§é’¥æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_session_timeout</span> <span class="number">1d</span>;</span><br><span class="line">    <span class="attribute">ssl_session_cache</span> shared:MozSSL:<span class="number">10m</span>;  <span class="comment"># ç¼“å­˜ SSL ä¼šè¯ä»¥æå‡æ€§èƒ½</span></span><br><span class="line">    <span class="attribute">ssl_session_tickets</span> <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç°ä»£åŠ å¯†å¥—ä»¶é…ç½®</span></span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> <span class="string">&#x27;ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384&#x27;</span>;</span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å…¶ä»– SSL ä¼˜åŒ–è®¾ç½®</span></span><br><span class="line">    <span class="attribute">ssl_stapling</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">ssl_stapling_verify</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å…è®¸æœ€å¤§è¯·æ±‚ä½“å¤§å°ä¸º 1000MB</span></span><br><span class="line">    <span class="attribute">client_max_body_size</span> <span class="number">1000m</span>;  </span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://localhost:3000;</span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">&#x27;upgrade&#x27;</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_cache_bypass</span> <span class="variable">$http_upgrade</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé…ç½®ä¸ä»…å¯ç”¨äº† HTTPSï¼Œè¿˜åŒ…æ‹¬äº†ä¸€äº›ç°ä»£çš„å®‰å…¨å®è·µï¼Œå¦‚å¯ç”¨ HTTP/2ï¼Œé…ç½®åŠ å¯†å¥—ä»¶å’Œåè®®ç­‰ã€‚</p><h2 id="æ­¥éª¤-4-é‡æ–°åŠ è½½-nginx">æ­¥éª¤ 4: é‡æ–°åŠ è½½ Nginx</h2><p>å¯ç”¨é…ç½®æ–‡ä»¶é€šè¿‡åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">ln</span> -s /etc/nginx/sites-available/gallery.lthero.top /etc/nginx/sites-enabled/</span><br></pre></td></tr></table></figure><p>æ›´æ”¹é…ç½®åï¼Œéœ€è¦é‡æ–°åŠ è½½ Nginx ä»¥åº”ç”¨æ–°çš„é…ç½®ï¼š</p><blockquote><p>æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼Œå¦‚æœæœ‰warn!ç›´æ¥çœ‹â€œé‡åˆ°çš„é—®é¢˜â€éƒ¨åˆ†ï¼Œé‡æ–°åŠ è½½é…ç½®æ˜¯ä¸ä¸€å®šèƒ½workçš„</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯</span></span><br><span class="line">sudo nginx -t  </span><br><span class="line"><span class="comment"># é‡æ–°åŠ è½½é…ç½®</span></span><br><span class="line">sudo systemctl reload nginx  </span><br><span class="line"><span class="comment"># å¦‚æœé‡æ–°åŠ è½½é…ç½®åæ— æ•ˆï¼Œå¯ä»¥å°è¯•é‡å¯nginx</span></span><br><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-5-éªŒè¯-https">æ­¥éª¤ 5: éªŒè¯ HTTPS</h2><p>åœ¨æµè§ˆå™¨ä¸­è®¿é—® <code>https://gallery.lthero.top</code> æ¥æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸã€‚ä½ åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°ä¸€ä¸ªå®‰å…¨é”æ ‡å¿—ï¼Œè¡¨æ˜è¿æ¥æ˜¯é€šè¿‡ HTTPS åŠ å¯†çš„ã€‚</p><h2 id="æ­¥éª¤-6-è‡ªåŠ¨ç»­è®¢è¯ä¹¦">æ­¥éª¤ 6: è‡ªåŠ¨ç»­è®¢è¯ä¹¦</h2><p>Letâ€™s Encrypt çš„è¯ä¹¦æœ‰æ•ˆæœŸä¸º90å¤©ï¼Œå› æ­¤å»ºè®®è®¾ç½®è‡ªåŠ¨ç»­è®¢ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot renew</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šæµ‹è¯•è¯ä¹¦ç»­è®¢è¿‡ç¨‹ã€‚å¦‚æœè¿™ä¸ªæµ‹è¯•æˆåŠŸï¼Œæ·»åŠ å®šæ—¶ä»»åŠ¡<code>crontab</code>ï¼š</p><p><code>crontab -e</code>å†å¡«å†™ä¸‹é¢å†…å®¹ï¼Œè¡¨ç¤ºæ¯æœˆç¬¬ä¸€å¤©ä¼šè‡ªåŠ¨æ‰§è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 0 1 * * /usr/local/bin/certbot renew --manual --preferred-challenges dns --manual-auth-hook <span class="string">&quot;alidns&quot;</span> --manual-cleanup-hook <span class="string">&quot;alidns clean&quot;</span> --deploy-hook <span class="string">&quot;nginx -s reload&quot;</span></span><br></pre></td></tr></table></figure><p>ç»­ç­¾çš„è¯ä¹¦ä½ç½®<code>/etc/letsencrypt/renewal</code></p><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ çš„ç«™ç‚¹ <code>gallery.lthero.top</code> ç°åœ¨åº”è¯¥èƒ½å¤Ÿå®‰å…¨åœ°ä½¿ç”¨ HTTPS è¿›è¡Œé€šä¿¡äº†ã€‚</p><p>å¦‚æœè¦æ¢ç¼–è¾‘å™¨ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select-editor</span><br></pre></td></tr></table></figure><h1 id="é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜</h1><p>è¾“å…¥äº†è¿™æ¡å‘½ä»¤å<code>sudo nginx -t</code>ï¼Œå‘ç°å­˜åœ¨warn</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-sf:~/zfile<span class="comment"># sudo nginx -t</span></span><br><span class="line">nginx: [warn] conflicting server name <span class="string">&quot;gallery.lthero.top&quot;</span> on 0.0.0.0:80, ignored</span><br><span class="line">nginx: [warn] conflicting server name <span class="string">&quot;gallery.lthero.top&quot;</span> on 0.0.0.0:443, ignored</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successfu</span><br></pre></td></tr></table></figure><blockquote><p>é—®é¢˜åŸå› ï¼Œcertbotè‡ªåŠ¨ä¿®æ”¹äº†/etc/nginx/sites-available/defaultæ–‡ä»¶</p></blockquote><p>è§£å†³æ–¹æ³•ï¼š<a href="https://stackoverflow.com/questions/11426087/nginx-error-conflicting-server-name-ignored">https://stackoverflow.com/questions/11426087/nginx-error-conflicting-server-name-ignored</a></p><p>æˆ‘çš„è§£å†³æ–¹æ³•ï¼š</p><p>è¿›å…¥<code>sites-available</code>ç›®å½•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/nginx/sites-available</span><br></pre></td></tr></table></figure><p>éšåæ‰§è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -rnw . -e gallery.lthero.top</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šè¾“å‡ºå½“å‰ç›®å½•ä¸‹ï¼Œæ‰€æœ‰åŒ…å«â€œgallery.lthero.topâ€å­—æ®µçš„æ–‡ä»¶ï¼Œä»¥åŠå‡ºç°çš„è¡Œæ•°ï¼Œå¦‚ä¸‹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-sf:/etc/nginx/sites-available<span class="comment"># grep -rnw . -e gallery.lthero.top</span></span><br><span class="line">./default:115:    server_name gallery.lthero.top; <span class="comment"># managed by Certbot</span></span><br><span class="line">./default:145:    ssl_certificate /etc/letsencrypt/live/gallery.lthero.top/fullchain.pem; <span class="comment"># managed by Certbot</span></span><br><span class="line">./default:146:    ssl_certificate_key /etc/letsencrypt/live/gallery.lthero.top/privkey.pem; <span class="comment"># managed by Certbot</span></span><br><span class="line">./default:152:    <span class="keyword">if</span> (<span class="variable">$host</span> = gallery.lthero.top) &#123;</span><br><span class="line">./default:159:    server_name gallery.lthero.top;</span><br><span class="line">./gallery.lthero.top:3:    server_name gallery.lthero.top;</span><br><span class="line">./gallery.lthero.top:10:    server_name gallery.lthero.top;</span><br></pre></td></tr></table></figure><p>å‡ºç°çš„é—®é¢˜æ˜¯åœ¨defaultä¸­å‡ºæ¥äº†<code>gallery.lthero.top</code>ç›¸å…³çš„å†…å®¹</p><p>éšåï¼Œæˆ‘æŠŠdefaultæ›¿æ¢æˆåŸæ¥çš„å†…å®¹ï¼Œå¦‚ä¸‹</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment"># You should look at the following URL&#x27;s in order to grasp a solid understanding</span></span><br><span class="line"><span class="comment"># of Nginx configuration files in order to fully unleash the power of Nginx.</span></span><br><span class="line"><span class="comment"># https://www.nginx.com/resources/wiki/start/</span></span><br><span class="line"><span class="comment"># https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/</span></span><br><span class="line"><span class="comment"># https://wiki.debian.org/Nginx/DirectoryStructure</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># In most cases, administrators will remove this file from sites-enabled/ and</span></span><br><span class="line"><span class="comment"># leave it as reference inside of sites-available where it will continue to be</span></span><br><span class="line"><span class="comment"># updated by the nginx packaging team.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># This file will automatically load configuration files provided by other</span></span><br><span class="line"><span class="comment"># applications, such as Drupal or Wordpress. These applications will be made</span></span><br><span class="line"><span class="comment"># available underneath a path with that package name, such as /drupal8.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Default server configuration</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"><span class="attribute">listen</span> <span class="number">80</span> default_server;</span><br><span class="line"><span class="attribute">listen</span> [::]:<span class="number">80</span> default_server;</span><br><span class="line"></span><br><span class="line"><span class="comment"># SSL configuration</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># listen 443 ssl default_server;</span></span><br><span class="line"><span class="comment"># listen [::]:443 ssl default_server;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Note: You should disable gzip for SSL traffic.</span></span><br><span class="line"><span class="comment"># See: https://bugs.debian.org/773332</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Read up on ssl_ciphers to ensure a secure configuration.</span></span><br><span class="line"><span class="comment"># See: https://bugs.debian.org/765782</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Self signed certs generated by the ssl-cert package</span></span><br><span class="line"><span class="comment"># Don&#x27;t use them in a production server!</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># include snippets/snakeoil.conf;</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">root</span> /var/www/html;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add index.php to the list if you are using PHP</span></span><br><span class="line"><span class="attribute">index</span> index.html index.htm index.nginx-debian.html;</span><br><span class="line"></span><br><span class="line"><span class="attribute">server_name</span> _;</span><br><span class="line"></span><br><span class="line"><span class="section">location</span> / &#123;</span><br><span class="line"><span class="comment"># First attempt to serve request as file, then</span></span><br><span class="line"><span class="comment"># as directory, then fall back to displaying a 404.</span></span><br><span class="line"><span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ =<span class="number">404</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># pass PHP scripts to FastCGI server</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line"><span class="comment">#include snippets/fastcgi-php.conf;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">## With php-fpm (or other unix sockets):</span></span><br><span class="line"><span class="comment">#fastcgi_pass unix:/run/php/php7.4-fpm.sock;</span></span><br><span class="line"><span class="comment">## With php-cgi (or other tcp sockets):</span></span><br><span class="line"><span class="comment">#fastcgi_pass 127.0.0.1:9000;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># deny access to .htaccess files, if Apache&#x27;s document root</span></span><br><span class="line"><span class="comment"># concurs with nginx&#x27;s one</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#location ~ /\.ht &#123;</span></span><br><span class="line"><span class="comment">#deny all;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Virtual Host configuration for example.com</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># You can move that to a different file under sites-available/ and symlink that</span></span><br><span class="line"><span class="comment"># to sites-enabled/ to enable it.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#server &#123;</span></span><br><span class="line"><span class="comment">#listen 80;</span></span><br><span class="line"><span class="comment">#listen [::]:80;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#server_name example.com;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#root /var/www/example.com;</span></span><br><span class="line"><span class="comment">#index index.html;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#location / &#123;</span></span><br><span class="line"><span class="comment">#try_files $uri $uri/ =404;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br></pre></td></tr></table></figure><p>å†æ‰§è¡Œreloadå’Œrestartå°±å¥½äº†</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl reload nginx  <span class="comment"># é‡æ–°åŠ è½½é…ç½®</span></span><br><span class="line"><span class="comment"># å¦‚æœé‡æ–°åŠ è½½é…ç½®åæ— æ•ˆï¼Œå¯ä»¥å°è¯•é‡å¯nginx</span></span><br><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è‡ªå»ºç”»å»Š&quot;&gt;è‡ªå»ºç”»å»Š&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;home-galleryé¡¹ç›®ï¼š&lt;a href=&quot;https://docs.home-gallery.org/install/&quot;&gt;https://docs.home-gallery.org/instal</summary>
      
    
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>Rclone æŒ‚è½½ OneDrive ä¸ºæœ¬åœ°ç¡¬ç›˜</title>
    <link href="https://blog.lthero.cn/2024/05/12/MountOneDriveUsingRclone/"/>
    <id>https://blog.lthero.cn/2024/05/12/MountOneDriveUsingRclone/</id>
    <published>2024-05-12T11:49:42.000Z</published>
    <updated>2024-07-21T06:25:15.382Z</updated>
    
    <content type="html"><![CDATA[<h1 id="windowså¹³å°ä¸‹ä½¿ç”¨-rclone-æŒ‚è½½-onedrive-ä¸ºæœ¬åœ°ç¡¬ç›˜">Windowså¹³å°ä¸‹ä½¿ç”¨ Rclone æŒ‚è½½ OneDrive ä¸ºæœ¬åœ°ç¡¬ç›˜</h1><blockquote><p>å‚è€ƒï¼š<a href="https://zhuanlan.zhihu.com/p/139200172">https://zhuanlan.zhihu.com/p/139200172</a></p></blockquote><p>Rclone (rsync for cloud storage) æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œç¨‹åº,ç”¨äºåŒæ­¥æ–‡ä»¶å’Œç›®å½•ï¼Œæ”¯æŒå¸¸è§çš„ Amazon Drive ã€Google Drive ã€OneDrive ã€Dropbox ç­‰äº‘å­˜å‚¨ã€‚æœ¬æ–‡å°†æ¼”ç¤ºåœ¨ Windows å¹³å°ä¸‹å°† OneDrive æŒ‚è½½ä¸ºæœ¬åœ°ç¡¬ç›˜ï¼Œå¹¶ä½¿ç”¨è·¨å¹³å°çš„ Rclone GUI è¿æ¥åˆ°äº‘ç›˜ã€‚</p><h2 id="rcloneä¸‹è½½åœ°å€">rcloneä¸‹è½½åœ°å€</h2><p>é¦–å…ˆä¸‹è½½é€‚ç”¨äº Windows çš„ rclone</p><p>å®˜ç½‘ä¸‹è½½ï¼š</p><p><a href="https://rclone.org/downloads/">Rclone downloadsrclone.org/downloads/</a></p><p>GitHubä¸‹è½½ï¼š</p><p><a href="https://github.com/ncw/rclone">rclone/rclonegithub.com/ncw/rclone</a></p><p>åœ¨<a href="https://rclone.org/downloads/">rcloneå®˜ç½‘</a>ä¸­ï¼ŒWindows å¹³å°ä¸‹é€‰æ‹©ä¸‹è½½ AMD64 - 64 Bit</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/v2-dba90fa9447c3ce0c59cd628b099f89a_r.jpg" alt="img"></p><p>æˆ–è€…åœ¨<a href="https://github.com/rclone/rclone/releases">github</a>ä¸‹è½½ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/v2-6fe076f9b3c1b74e59bafcc454b2457e_r.jpg" alt="img"></p><p>ä¸‹è½½åè§£å‹åˆ°ä¸€ä¸ªè‹±æ–‡è·¯å¾„ä¸­ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/v2-2c598f613124fd234541d5b64bd5cd35_r.jpg" alt="img"></p><h2 id="å¿…å®‰è£…">å¿…å®‰è£…</h2><p>å¦å¤–åœ¨Windowså¹³å°ä½¿ç”¨rcloneè¿˜éœ€è¦å¦ä¸€ä¸ªä¾èµ–å·¥å…·<code>winfsp</code>ï¼Œä¸‹è½½åœ°å€ï¼š</p><p><a href="http://www.secfs.net/winfsp/download/">http://www.secfs.net/winfsp/download/www.secfs.net/winfsp/download/</a></p><p>ä¸‹è½½åä¸€è·¯å®‰è£…å³å¯ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/v2-185ca574a84e6ddab1639bc10788db20_r.jpg" alt="img"></p><h2 id="rcloneé…ç½®ç¯å¢ƒå˜é‡">rcloneé…ç½®ç¯å¢ƒå˜é‡</h2><ol><li>åœ¨ç”µè„‘æ¡Œé¢å³é”®ç‚¹å‡»â€œæ­¤ç”µè„‘â€çš„â€œå±æ€§â€é€‰é¡¹</li><li>é€‰æ‹©â€œé«˜çº§ç³»ç»Ÿè®¾ç½®â€é€‰é¡¹</li><li>åœ¨ç³»ç»Ÿå˜é‡ä¸­æ‰¾åˆ°pathï¼Œæ·»åŠ åˆšæ‰è§£å‹åçš„è·¯å¾„</li></ol><p><img src="https://cdn.lthero.cn/post_images/course/ML/v2-3f0af66bf0619eaa28ffc968c41548f7_r.jpg" alt="img"></p><h2 id="æ£€æŸ¥rcloneæ˜¯å¦é…ç½®æˆåŠŸ">æ£€æŸ¥rcloneæ˜¯å¦é…ç½®æˆåŠŸ</h2><p>æŒ‰<code>win</code>+<code>X</code>ï¼Œç„¶åæŒ‰<code>A</code> æ‰“å¼€ <code>powershell</code> ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å»æ‰“å¼€ <code>cmd</code> ï¼Œè¾“å…¥<code>rclone --version</code>ï¼Œå¦‚æœå‡ºç°ä¸‹é¢çš„è¾“å‡ºåˆ™å®‰è£…æˆåŠŸï¼Œå¦åˆ™æ£€æŸ¥ä¸Šé¢æ­¥éª¤çš„ç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®æ­£ç¡®ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/v2-c8592fd9860d57cd2b88c60ecb932f6c_r.jpg" alt="img"></p><h2 id="å¼€å§‹é…ç½®rclone">å¼€å§‹é…ç½®rclone</h2><p>åœ¨ç»ˆç«¯ä¸­ä¾æ¬¡è¾“å…¥ä»¥ä¸‹å‘½ä»¤è¡Œï¼Œè¯·æ ¹æ®ä¸‹çš„æ­¥éª¤è¿›æ“ä½œã€‚</p><p>ç¬¬ä¸€æ­¥åœ¨ç»ˆç«¯è¾“å…¥ rclone config</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ rclone config</span><br><span class="line"></span><br><span class="line">n) New remote</span><br><span class="line">d) Delete remote</span><br><span class="line">r) <span class="built_in">Rename</span> remote</span><br><span class="line">c) <span class="built_in">Copy</span> remote</span><br><span class="line">s) <span class="built_in">Set</span> configuration password</span><br><span class="line">q) Quit config</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥è¾“å…¥nåˆ›å»ºæ–°çš„é…ç½®</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ e/n/d/r/c/s/q&gt; n</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰æ­¥ è¾“å…¥ä¸€ä¸ªè‹±æ–‡åç§°ï¼Œç”¨æ¥è¡¨ç¤ºï¼Œä¸­é—´ä¹Ÿä¸è¦æœ‰ç©ºæ ¼</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ name&gt; OneDriveLocal</span><br></pre></td></tr></table></figure><p>ç¬¬å››æ­¥ è¾“å…¥è¦é…ç½®çš„ç½‘ç›˜ç±»å‹ å› ä¸ºæˆ‘ä»¬è¦<strong>é…ç½®Microsoft OneDrive å› æ­¤è¾“å…¥5</strong>ï¼ˆå…·ä½“é—®é¢˜å…·ä½“åˆ†æï¼‰</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Type</span> of storage to configure.</span><br><span class="line">Enter a string value. Press Enter <span class="keyword">for</span> the default (&quot;&quot;).</span><br><span class="line">Choose a number from below, or <span class="built_in">type</span> <span class="keyword">in</span> your own value</span><br><span class="line"> <span class="number">1</span> / <span class="number">1</span>Fichier</span><br><span class="line"> \ &quot;fichier&quot;</span><br><span class="line"> <span class="number">2</span> / Alias <span class="keyword">for</span> an existing remote</span><br><span class="line"> \ &quot;alias&quot;</span><br><span class="line"> <span class="number">3</span> / Amazon Drive</span><br><span class="line"> \ &quot;amazon cloud drive&quot;</span><br><span class="line"> <span class="number">4</span> / Amazon S3 Compliant Storage Provider (AWS, Alibaba, Ceph, Digital Ocean, Dreamhost, IBM COS, Minio, etc)</span><br><span class="line"> \ &quot;s3&quot;</span><br><span class="line"> <span class="number">5</span> / Microsoft OneDrive</span><br><span class="line"> \ &quot;onedrive&quot;</span><br><span class="line"> Storage&gt; <span class="number">5</span></span><br></pre></td></tr></table></figure><p>ç¬¬äº”æ­¥ è¦è¾“å…¥ client_id æ—¶ç›´æ¥å›è½¦</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">** See <span class="built_in">help</span> <span class="keyword">for</span> onedrive backend <span class="built_in">at</span>: https://rclone.org/onedrive/ **</span><br><span class="line">Microsoft App Client Id</span><br><span class="line">Leave blank normally.</span><br><span class="line">Enter a string value. Press Enter <span class="keyword">for</span> the default (&quot;&quot;).</span><br><span class="line">client_id&gt; </span><br></pre></td></tr></table></figure><p>ç¬¬å…­æ­¥ è¦è¾“å…¥ client_secret æ—¶ç›´æ¥å›è½¦</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Microsoft App Client Secret                                  </span><br><span class="line">Leave blank normally.                                        </span><br><span class="line">Enter a string value. Press Enter <span class="keyword">for</span> the default (&quot;&quot;).      </span><br><span class="line">client_secret&gt;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸ƒæ­¥ è¾“å…¥n ä¸è¿›è¡Œé«˜çº§é…ç½®</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Edit advanced config? (y/n)                                  </span><br><span class="line">y) Yes </span><br><span class="line">n) No (default)                                              </span><br><span class="line">y/n&gt; n </span><br></pre></td></tr></table></figure><p>ç¬¬å…«æ­¥ è¾“å…¥y ä½¿ç”¨è‡ªåŠ¨é…ç½®æˆæƒ</p><blockquote><p>è¾“å…¥yåä¼šæ‰“å¼€é»˜è®¤æµè§ˆå™¨ ç™»å½•Microsoftè´¦å·å é€‰æ‹© æ˜¯ å³å¯</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Remote config                                                </span><br><span class="line">Use auto config? </span><br><span class="line"> * Say Y if not sure </span><br><span class="line"> * Say N if you are working on a remote or headless machine</span><br><span class="line">y) Yes (default) </span><br><span class="line">n) No                                                        </span><br><span class="line">y/n&gt; y </span><br></pre></td></tr></table></figure><p>ç¬¬ä¹æ­¥ è¾“å…¥1 å› ä¸ºç°åœ¨æˆ‘é…ç½®çš„æ˜¯ OneDrive Personal or Business ç±»å‹çš„ç½‘ç›˜</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">If</span> your browser doesn&#x27;t open automatically go to the following link: http://<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">53682</span>/auth?state=sUuYaGWtxruA81JiCokJGg</span><br><span class="line">Log <span class="keyword">in</span> and authorize rclone <span class="keyword">for</span> access</span><br><span class="line">Waiting <span class="keyword">for</span> code...</span><br><span class="line">Got code</span><br><span class="line">Choose a number from below, or <span class="built_in">type</span> <span class="keyword">in</span> an existing value</span><br><span class="line"> <span class="number">1</span> / OneDrive Personal or Business</span><br><span class="line"> \ &quot;onedrive&quot;</span><br><span class="line"> <span class="number">2</span> / Root Sharepoint site</span><br><span class="line"> \ &quot;sharepoint&quot;</span><br><span class="line"> <span class="number">3</span> / <span class="built_in">Type</span> <span class="keyword">in</span> driveID</span><br><span class="line"> \ &quot;driveid&quot;</span><br><span class="line"> <span class="number">4</span> / <span class="built_in">Type</span> <span class="keyword">in</span> SiteID</span><br><span class="line"> \ &quot;siteid&quot;</span><br><span class="line"> <span class="number">5</span> / Search a Sharepoint site</span><br><span class="line"> \ &quot;search&quot;</span><br><span class="line">Your choice&gt;<span class="number">1</span>                            </span><br></pre></td></tr></table></figure><p>ç¬¬åæ­¥ è¾“å…¥0</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Found <span class="number">1</span> drives, please select the one you want to use:</span><br><span class="line"><span class="number">0</span>: OneDrive (business) id=b!qDQvcsZUTU-<span class="number">8</span>eoYyKmtyyP1Jc0D8urZLlkATnfH1nWdJ1kkbrLsvQZLzVUTpeTrc</span><br><span class="line">Chose drive to use:&gt; <span class="number">0</span>    </span><br></pre></td></tr></table></figure><p>ç¬¬åä¸€æ­¥ è¾“å…¥y</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Found drive &#x27;root&#x27; of type &#x27;business&#x27;, URL: https://pmjs-my.sharepoint.com/personal/wld_365_w/Documents</span><br><span class="line">Is that okay?</span><br><span class="line">y) Yes (default)</span><br><span class="line">n) No</span><br><span class="line">y/n&gt; y   </span><br></pre></td></tr></table></figure><p>ç¬¬åäºŒæ­¥ è¾“å…¥y</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[OneDrive_local]</span><br><span class="line">type = onedrive</span><br><span class="line">token = &#123;<span class="string">&quot;access_token&quot;</span>:<span class="string">&quot;eyJ0UxjTLIAA&quot;</span>,<span class="string">&quot;expiry&quot;</span>:<span class="string">&quot;2020-02-10T11:32:10.852646+08:00&quot;</span>&#125;</span><br><span class="line">drive_id = b!qDvcsZUTU8eoYyKmtyyP1Jc0D8urZLlkTnH1nWdJ1kbrLsvQZLzVUTpeTrc</span><br><span class="line">drive_type = business</span><br><span class="line">--------------------</span><br><span class="line">y) Yes <span class="keyword">this</span> is <span class="built_in">OK</span> (<span class="keyword">default</span>)</span><br><span class="line">e) Edit <span class="keyword">this</span> remote</span><br><span class="line">d) Delete <span class="keyword">this</span> remote</span><br><span class="line">y/e/d&gt;y</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå°±ä¼šå‡ºç°åˆšåˆšé…ç½®å¥½çš„ç½‘ç›˜åç§°äº†</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/v2-422d8ec8d0f2041097092c7b04847554_r.jpg" alt="img"></p><p>æœ€åè¾“å…¥qé€€å‡ºé…ç½®å³å¯</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">e) Edit existing remote</span><br><span class="line">n) New remote</span><br><span class="line">d) Delete remote</span><br><span class="line">r) Rename remote</span><br><span class="line">c) Copy remote</span><br><span class="line">s) Set configuration password</span><br><span class="line">q) Quit config</span><br><span class="line">e/n/d/r/c/s/q&gt; q </span><br></pre></td></tr></table></figure><p>åœ¨ <code>C:\Users\ä½ çš„ç”¨æˆ·å\.config\rclone</code>æ–‡ä»¶å¤¹ä¸‹å°±å¯ä»¥çœ‹è§é…ç½®æ–‡ä»¶ rclone.conf å•¦ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/v2-4263f860072c3db97a3a96c28fb30aa0_r.jpg" alt="img"></p><h3 id="5-æŒ‚è½½onedriveä¸ºæœ¬åœ°ç¡¬ç›˜"><strong>5ã€æŒ‚è½½OneDriveä¸ºæœ¬åœ°ç¡¬ç›˜</strong></h3><p>åœ¨ <code>git bash</code> æˆ– <code>cmd</code> ä¸­è¾“å…¥ä»¥ä¸‹æŒ‚è½½å‘½ä»¤ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone mount OneDriveLocal:/  Q: --cache-dir E:\OneDrive --vfs-cache-mode writes &amp;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><p><code>OneDriveLocal</code> æ›¿æ¢ä¸ºä½ è‡ªå·±å‰é¢è®¾ç½®çš„åç§° ã€‚</p><p><code>Q:</code> æ›¿æ¢ä¸ºä½ æƒ³è¦æŒ‚è½½åç¡¬ç›˜çš„ç›˜ç¬¦åç§°å³å¯ï¼Œè®°å¾—ä¸è¦å’Œæœ¬åœ°çš„Cç›˜ã€Dç›˜ç­‰é‡å¤ã€‚</p><p><code>E:\OneDrive</code> ä¸ºæœ¬åœ°ç¼“å­˜ç›®å½•ï¼Œå¯è‡ªè¡Œè®¾ç½® ã€‚</p><p>å‡ºç°ï¼š<code>The service rclone has been started</code> åˆ™è¯´æ˜æŒ‚è½½æˆåŠŸã€‚</p><p>ç„¶åè¾“å…¥ <code>exit</code> é€€å‡ºç»ˆç«¯å³å¯ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/v2-51fc3c785cb9cd4fa0db4ef98a9358a8_r.jpg" alt="img"></p><p>ç„¶åå°±å¯ä»¥çœ‹è§æœ¬åœ°å¤šäº†ä¸€ä¸ªç›˜ï¼Œå¾€é‡Œé¢å¤åˆ¶æ–‡ä»¶å°±æ˜¯ä¸Šä¼ ï¼Œä»é‡Œé¢å¤åˆ¶æ–‡ä»¶åˆ°å…¶å®ƒç›˜å°±æ˜¯ä¸‹è½½ã€‚</p><h3 id="6-è®¾ç½®å¼€æœºè‡ªå¯åŠ¨æŒ‚è½½">6ã€è®¾ç½®å¼€æœºè‡ªå¯åŠ¨æŒ‚è½½</h3><p>è¿›å…¥<code>C:\Users\ç”¨æˆ·å\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup</code> ä¸­</p><blockquote><p>è¿è¡Œä¸­è¾“å…¥%<strong>appdata</strong>% åç‚¹å‡»ç¡®å®šå³å¯è¿›å…¥</p></blockquote><p>åˆ›å»ºä¸€ä¸ªåç§°ä¸º <code>startup_rclone.txt</code> çš„æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CreateObject(&quot;WScript.Shell&quot;).Run &quot;rclone mount OneDriveLocal:/  Q: --cache-dir E:\OneDriveLocalCache --vfs-cache-mode writes &quot;,0</span><br></pre></td></tr></table></figure><p>ä¿å­˜åæ”¹æ–‡ä»¶åç¼€.txtä¸º.vbså³å¯ï¼Œä»…éœ€è¦ä¿®æ”¹&quot;&quot;å†…çš„ä¸œè¥¿ï¼Œæœ€åæ²¡æœ‰â€™&amp;â€™</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/v2-8489b2b53a47c3d5e8f2b29cea9aee79_r.jpg" alt="img"></p><h1 id="linuxå¹³å°ä¸‹ä½¿ç”¨rclon-æŒ‚è½½-onedrive-ä¸ºæœ¬åœ°ç¡¬ç›˜">Linuxå¹³å°ä¸‹ä½¿ç”¨Rclon æŒ‚è½½ OneDrive ä¸ºæœ¬åœ°ç¡¬ç›˜</h1><blockquote><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_46264836/article/details/131964857">https://blog.csdn.net/qq_46264836/article/details/131964857</a></p><p>å‚è€ƒï¼š<a href="https://blog.xms.su/archives/91">https://blog.xms.su/archives/91</a></p></blockquote><h2 id="ç”³è¯·onedrive-api">ç”³è¯·OneDrive API</h2><p>å‰å¾€<a href="https://portal.azure.com/">Microsoft Azureç®¡ç†ç•Œé¢</a>ï¼Œç™»å½•ä½ çš„å¾®è½¯è´¦å·ï¼Œæ‰“å¼€â€œåº”ç”¨æ³¨å†Œâ€æœåŠ¡ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/44bc2f6f5f7246b39dc4c2f14121fd61.png" alt="img"></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/ffde0f48ab52424e84dd95009357d614.png" alt="img"></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/81398282bc8540d0a95836556f02c6a6.png" alt="img"></p><p>æ³¨å†ŒæˆåŠŸåä¼šè·³è½¬åˆ°åº”ç”¨é¦–é¡µé¢ï¼Œè®°ä¸‹å›¾ä¸­æ‰€ç¤ºçš„â€œåº”ç”¨ç¨‹åº(å®¢æˆ·ç«¯) IDâ€ï¼Œä¾›å°†æ¥æŒ‚è½½ä½¿ç”¨ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/6486d810e6ba48819517b84803fdb67b.png" alt="img"></p><p>ç„¶åå†ç‚¹å‡»â€œè¯ä¹¦ä¸å¯†ç â€â†’â€œç”Ÿæˆå®¢æˆ·ç«¯å¯†ç â€ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/2a933656469e40b8b99152cea7165e10.png" alt="img"></p><p>æ·»åŠ å¯†ç åï¼Œè®°å½•æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„å¯†ç å€¼ï¼Œä¾›å°†æ¥æŒ‚è½½ä½¿ç”¨ã€‚<strong>æ³¨æ„è¿™é‡Œä¸€å®šè¦å°†å¯†ç è®°å½•ä¸‹æ¥ï¼Œå› ä¸ºå®ƒåªæ˜¾ç¤ºä¸€æ¬¡ã€‚</strong></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/b7bedf0bbb9f44b68e246ea58c38afda.png" alt="img"></p><p>æ¥ä¸‹æ¥ï¼Œç‚¹å‡»â€œAPIæƒé™â€ï¼Œä¸ºæˆ‘ä»¬çš„APIè·å–æƒé™ã€‚Filesä¸­çš„æƒé™å…¨éƒ¨å‹¾é€‰å°±å¯ä»¥äº†ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/e91181b1d152472bad89dd8f050a70f3.png" alt="img"></p><p>è¿™ä¸€æ­¥åšå®Œæˆ‘ä»¬å°±è·å¾—äº†OneDriveçš„APIï¼Œä»¥åŠ<strong>å®¢æˆ·ç«¯ID</strong>ä»¥åŠ<strong>å¯†ç å€¼</strong>ã€‚</p><h2 id="è‡ªå¯åŠ¨æŒ‚è½½onedriveç½‘ç›˜">è‡ªå¯åŠ¨æŒ‚è½½OneDriveç½‘ç›˜</h2><h3 id="è·å–è®¤è¯token">è·å–è®¤è¯token</h3><p>å¯ä»¥æŒ‚è½½Windowsä»¥åŠLinuxã€‚ä»¥ä¸‹æ¼”ç¤ºLinuxï¼ˆUbuntuç³»ç»Ÿï¼‰æŒ‚è½½OneDrive</p><p>åœ¨<a href="https://rclone.org/downloads/">rcloneä¸‹è½½</a>å¯¹åº”æ“ä½œç³»ç»Ÿå®‰è£…åŒ…ï¼Œåé¢éœ€è¦ç™»å½•è·å–tokenæˆ‘<a href="https://so.csdn.net/so/search?q=VPS&amp;spm=1001.2101.3001.7020">VPS</a>æ²¡æœ‰æµè§ˆå™¨å› æ­¤éœ€è¦ä¸‹è½½å®‰è£…Windowsç‰ˆæœ¬çš„rcloneã€‚</p><ol><li>ä¸‹è½½windowsç³»ç»Ÿä¸‹çš„rcloneå¹¶è§£å‹ï¼ŒæŒ‰win+Rè°ƒå‡ºè¿è¡Œï¼Œè¾“å…¥â€œcmdâ€ã€‚</li><li>è¾“å…¥cd + è§£å‹çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œè¿›å…¥rcloneæ–‡ä»¶å¤¹ä¸‹ï¼Œå†è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¼€å§‹æˆæƒã€‚ï¼ˆå¦‚æœæ˜¯win11ï¼Œè¿›å…¥ç›®å½•å³é”®åœ¨ç»ˆç«¯æ‰“å¼€ï¼‰</li></ol><blockquote><p>IDå’Œå¯†ç æ›¿æ¢æˆä½ è‡ªå·±çš„<br>rclone.exe æˆ–è€…ï¼ˆ .\rclone.exe ï¼‰ authorize â€œonedriveâ€ â€œå®¢æˆ·ç«¯IDâ€ â€œå¯†ç å€¼â€</p></blockquote><p>æ­¤æ—¶ï¼Œæµè§ˆå™¨å°†ä¼šè‡ªåŠ¨æ‰“å¼€ï¼Œç„¶åç™»å½•ä¼šä¸ºæˆ‘ä»¬ä¸ºåˆšæ‰åˆ›å»ºçš„apiæˆæƒã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/9c7760dc77754c3fa98226a1ed967182.png" alt="img"></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/c2a46c369d924b438b6ff037233aec5d.png" alt="img"></p><p>æ¥å—åé¡µé¢è¿”å›è¿™ä¸ªå°±è¯´æ˜æˆåŠŸäº†ï¼Œæ§åˆ¶å°ä¼šè¿”å›tokenã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/23589553ad9e4159baa31079fcc5ce1a.png" alt="img"></p><p>tokenå…ˆä¿ç•™ï¼Œåé¢ç»‘å®šä¼šç”¨åˆ°ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/43557fb6dff943a0bf622c1639556c11.png" alt="img"></p><h3 id="å®‰è£…rclone">å®‰è£…rclone</h3><p>åœ¨Ubuntuå®‰è£…rcloneï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install curl &amp;&amp; apt install fuse3</span><br><span class="line">curl https://rclone.org/install.sh | sudo bash</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåï¼Œå‘½ä»¤è¡Œè¾“å…¥<code>rclone config</code>æŒ‚è½½OneDriveç½‘ç›˜ï¼Œè¾“å…¥â€œnâ€æ–°å»ºä¸€ä¸ªäº‘ç›˜ï¼Œå¹¶è¾“å…¥åç§°ã€‚</p><p>è¿™ä¸ªåç§°å°±æ˜¯æŒ‚è½½åç£ç›˜çš„åç§°ï¼Œæˆ‘èµ·çš„æ˜¯â€œOneDriveâ€ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/912888440d2f4e4780a95c9355f10a50.png" alt="img"></p><p>æ¥ä¸‹æ¥æ‰¾å¯¹åº”OneDriveçš„åºå·ï¼Œè¿™ä¸ªéšç€ç‰ˆæœ¬æ›´æ–°åºå·å¯èƒ½ä¼šå˜åŠ¨ï¼Œæ³¨æ„çœ‹æ¸…æ¥šã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/2d445310342b463cb5cdae5d419bf9dd.png" alt="img"></p><p>è¾“å…¥åºå·åï¼Œå°±ç”¨åˆ°å‰é¢ä¿å­˜çš„å®¢æˆ·ç«¯ID(client ID)ã€å¯†ç å€¼(Value)ï¼Œä¸æ˜¯SecretIDã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/00920eb3af674714b9d6faea934bd696.png" alt="img"></p><p>ç„¶åæ˜¯ç½‘ç›˜ç±»å‹ã€‚<strong>æ­¤å¤„æ³¨æ„åŒºåˆ†ä½ çš„ç½‘ç›˜æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå›½å†…å¤§éƒ¨åˆ†éƒ½æ˜¯(1)ï¼Œéƒ¨åˆ†é«˜æ ¡æ˜¯ä¸–çºªäº’è”ç‰ˆ(4)ã€‚</strong></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/6f7034ca06e345839fb56cab4b83a56a.png" alt="img"></p><p>æ¥ä¸‹æ¥ä¸è¿›è¡Œé«˜çº§é…ç½®(n)ï¼Œä¹Ÿä¸è¿›è¡Œè‡ªåŠ¨é…ç½®(n)ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/5913d1f159f94fe48f33023c48dee26d.png" alt="img"></p><p>ç„¶åå°±ç”¨åˆ°æˆ‘ä»¬ä¸Šé¢è·å–çš„tokenäº†ï¼Œæˆ‘ä»¬å°†æ•´ä¸ªå¤§æ‹¬å·å¤åˆ¶å¡«å…¥ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/b53ab2f1b4b44ad49ddca160e88abbb0.png" alt="img"></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/02628bc90ced440289a7b73576e3a789.png" alt="img"></p><p>é…ç½®å®Œæˆåï¼Œæˆ‘ä»¬é€‰æ‹©ç±»å‹ä¸ºOneDrive Personal or Business(1)ã€‚å†é€‰æ‹©OneDrive(1)æ­¤æ—¶ç³»ç»Ÿä¼šè¯»å–ç½‘ç›˜è·¯å¾„ï¼Œæˆ‘ä»¬è¾“å…¥yç¡®è®¤ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/ea340a3586774cc6bc9486f1b62e2504.png" alt="img"></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/33c73efa3bbc454abb69824189c21396.png" alt="img"></p><p>æœ€åï¼Œç¨‹åºè¿˜ä¼šåˆ—å‡ºä¸»è¦ä¿¡æ¯è®©ä½ å†æ¬¡ç¡®è®¤ï¼š</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/31df4ab0288f43a6a8bd0b4a1b48ae6c.png" alt="img"></p><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ª&quot;onedrive&quot;ç±»å‹çš„ã€åä¸ºâ€œOneDriveâ€çš„ç½‘ç›˜å·²ç»åˆ›å»ºå¥½ï¼Œæˆ‘ä»¬è¾“å…¥qé€€å‡ºç¨‹åºï¼Œå‡†å¤‡å°†è¿™å—ç½‘ç›˜æŒ‚è½½åˆ°æœ¬åœ°ç›®å½•ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/922554eb940041c086e99788443aefbb.png" alt="img"></p><h5 id="2-3ä¸‹è½½rcloneè‡ªå¯åŠ¨æŒ‚è½½è„šæœ¬">2.3ä¸‹è½½rcloneè‡ªå¯åŠ¨æŒ‚è½½è„šæœ¬</h5><ul><li>ä¸‹è½½å¹¶ç¼–è¾‘è‡ªå¯è„šæœ¬</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget -N git.io/rcloned </span><br><span class="line"></span><br><span class="line">vim rcloned</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹å†…å®¹ï¼š</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NAME=<span class="string">&quot;OneDrive&quot;</span>  <span class="comment">#rclone é…ç½®æ—¶å¡«å†™çš„name</span></span><br><span class="line">REMOTE=<span class="string">&#x27;/VPS&#x27;</span>  <span class="comment">#è¿œç¨‹æ–‡ä»¶å¤¹ï¼Œç½‘ç›˜é‡Œçš„æŒ‚è½½çš„ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç•™ç©ºä¸ºæ•´ä¸ªç½‘ç›˜</span></span><br><span class="line">LOCAL=<span class="string">&#x27;/home/OneDrive&#x27;</span>  <span class="comment">#æŒ‚è½½åœ°å€ï¼ŒVPSæœ¬åœ°æŒ‚è½½ç›®å½•</span></span><br></pre></td></tr></table></figure><ul><li>è®¾ç½®å¼€æœºè‡ªå¯</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> rcloned /etc/init.d/rcloned</span><br><span class="line"></span><br><span class="line"><span class="built_in">chmod</span> +x /etc/init.d/rcloned</span><br><span class="line"></span><br><span class="line">update-rc.d -f rcloned defaults <span class="comment"># Debian/Ubuntu</span></span><br><span class="line"></span><br><span class="line">chkconfig rcloned on <span class="comment"># CentOS</span></span><br><span class="line"></span><br><span class="line">bash /etc/init.d/rcloned start</span><br></pre></td></tr></table></figure><p>çœ‹åˆ° <code>[ä¿¡æ¯] rclone å¯åŠ¨æˆåŠŸ !</code> å³å¯ã€‚</p><p>æŸ¥çœ‹æŒ‚è½½ç£ç›˜</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure><p><img src="https://cdn.lthero.cn/post_images/course/ML/581b051a9464410ea74de7f7a99a76bc.png" alt="img"></p><p><strong>è¿™æ ·å°±å¯ä»¥äº†ï¼Œé‡åˆ°é—®é¢˜å¯ä»¥ç•™è¨€è¯„è®ºçœ‹åˆ°å°±ä¼šå›å¤ï¼</strong></p><h5 id="ç®¡ç†">ç®¡ç†</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¼€å§‹æŒ‚è½½ </span></span><br><span class="line">bash /etc/init.d/rcloned start</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœæ­¢æŒ‚è½½</span></span><br><span class="line">bash /etc/init.d/rcloned stop</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡æ–°æŒ‚è½½ </span></span><br><span class="line">bash /etc/init.d/rcloned restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ—¥å¿— </span></span><br><span class="line"><span class="built_in">tail</span> -f /<span class="variable">$HOME</span>/.rclone/rcloned.log</span><br></pre></td></tr></table></figure><h5 id="å¸è½½è‡ªå¯æŒ‚è½½">å¸è½½è‡ªå¯æŒ‚è½½</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bash /etc/init.d/rcloned stop</span><br><span class="line"></span><br><span class="line">update-rc.d -f rcloned remove <span class="comment"># Debian/Ubuntu</span></span><br><span class="line"></span><br><span class="line">chkconfig rcloned off <span class="comment"># CentOS</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">rm</span> -f /etc/init.d/rcloned</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;windowså¹³å°ä¸‹ä½¿ç”¨-rclone-æŒ‚è½½-onedrive-ä¸ºæœ¬åœ°ç¡¬ç›˜&quot;&gt;Windowså¹³å°ä¸‹ä½¿ç”¨ Rclone æŒ‚è½½ OneDrive ä¸ºæœ¬åœ°ç¡¬ç›˜&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;å‚è€ƒï¼š&lt;a href=&quot;https://zhuanlan.zhihu</summary>
      
    
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>æœåŠ¡å™¨å®‰è£…é›†æˆäº‘ç›˜</title>
    <link href="https://blog.lthero.cn/2024/05/11/How2install-zfile/"/>
    <id>https://blog.lthero.cn/2024/05/11/How2install-zfile/</id>
    <published>2024-05-11T14:38:48.000Z</published>
    <updated>2024-07-21T06:09:37.026Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸‹è½½å®‰è£…zfile">ä¸‹è½½å®‰è£…zfile</h1><blockquote><p>é¡¹ç›®ï¼š<a href="https://docs.zfile.vip/install/os-linux">https://docs.zfile.vip/install/os-linux</a></p></blockquote><h2 id="å®‰è£…ä¾èµ–">å®‰è£…ä¾èµ–</h2><p>é¦–æ¬¡éƒ¨ç½²æ‰éœ€è¦å®‰è£…ä¾èµ–ï¼Œæ›´æ–°éƒ¨ç½²è§ä¸‹æ–¹ï¼šæ›´æ–°ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install -y openjdk-8-jre-headless unzip</span><br></pre></td></tr></table></figure><h2 id="ä¸‹è½½å¹¶è§£å‹">ä¸‹è½½å¹¶è§£å‹</h2><p>å®‰è£…è¯´æ˜</p><p>ä¸‹é¢å‘½ä»¤ä¸­ç¬¬ä¸€è¡Œè¡¨ç¤ºé»˜è®¤å®‰è£…åˆ°ç”¨æˆ·ç›®å½•ä¸‹: <code>~/zfile</code> ä¸‹ã€‚</p><p>å¯¹äº <code>root</code> ç”¨æˆ·, <code>~</code> = <code>/root</code>, <code>~/zfile</code> è¡¨ç¤ºåœ¨ <code>/root/zfile</code> è·¯å¾„ä¸‹ã€‚</p><p>å¯¹äºå…¶ä»–ç”¨æˆ·, <code>~</code> = <code>/home/ç”¨æˆ·å</code> è¡¨ç¤ºåœ¨ <code>/home/ç”¨æˆ·å/</code> è·¯å¾„ä¸‹ã€‚å¦‚å¯¹äº <code>oracle</code> ç”¨æˆ·, <code>~/zfile</code> åˆ™è¡¨ç¤ºå®‰è£…åœ¨ <code>/home/oracle/zfile</code> ä¸‹ã€‚</p><p>å¦‚éœ€æ›´æ”¹å®‰è£…è·¯å¾„, è¯·è‡ªè¡Œä¿®æ”¹ï¼Œå¦‚ <code>export ZFILE_INSTALL_PATH=/data/zfile</code>ï¼Œè¡¨ç¤ºå®‰è£…åœ¨ <code>/data/zfile</code> è·¯å¾„ä¸‹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ZFILE_INSTALL_PATH=~/zfile</span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$ZFILE_INSTALL_PATH</span> &amp;&amp; <span class="built_in">cd</span> <span class="variable">$ZFILE_INSTALL_PATH</span></span><br><span class="line">wget --no-check-certificate https://c.jun6.net/ZFILE/zfile-release.war</span><br><span class="line">unzip zfile-release.war &amp;&amp; <span class="built_in">rm</span> -rf zfile-release.war</span><br><span class="line"><span class="built_in">chmod</span> +x <span class="variable">$ZFILE_INSTALL_PATH</span>/bin/*.sh</span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨é¡¹ç›®">å¯åŠ¨é¡¹ç›®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/zfile/bin/start.sh</span><br></pre></td></tr></table></figure><p>å¯åŠ¨åæµè§ˆå™¨è®¿é—® <strong><code>http://ip:8080</code></strong> å³å¯ï¼Œå¦‚å¯åŠ¨åæ— æ³•è®¿é—®ï¼Œè¯·æ£€æŸ¥ <strong><code>ç«¯å£æ˜¯å¦å†²çª</code></strong> æˆ– <strong><code>é˜²ç«å¢™/å®‰å…¨ç»„æ˜¯å¦å¼€å¯</code></strong>ã€‚</p><p>ç®€å•æ£€æŸ¥æ–¹å¼ä¸ºåœ¨æœåŠ¡å™¨æ‰§è¡Œ <code>curl http://127.0.0.1:8080</code></p><ul><li>å¦‚è¿”å› <code>curl: (7) Failed connect to 127.0.0.1:8080; Connection refused</code> è¡¨ç¤ºæœªå¯åŠ¨æˆåŠŸã€‚</li><li>å¦‚è¿”å› <code>&lt;!DOCTYPE html&gt; &lt;html lang=&quot;zh-CN&quot;&gt;â€¦â€¦</code> ç­‰å­—æ ·è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼Œå¦‚å¯åŠ¨æˆåŠŸä½†é€šè¿‡æœåŠ¡å™¨ IP æ— æ³•è®¿é—®ï¼Œé‚£ä¸€èˆ¬å°±æ˜¯é˜²ç«å¢™/å®‰å…¨ç»„æœªæ”¾è¡Œç«¯å£é—®é¢˜ã€‚</li></ul><h2 id="å…¶ä»–å‘½ä»¤">å…¶ä»–å‘½ä»¤</h2><p>ä»¥ä¸‹ä¸ºé»˜è®¤æœªä¿®æ”¹å®‰è£…è·¯å¾„ä¸‹çš„æƒ…å†µï¼Œ<strong>å¦‚ä¿®æ”¹äº†å®‰è£…è·¯å¾„è¯·è‡ªè¡Œæ›´æ”¹å‘½ä»¤æ‰€åœ¨è·¯å¾„</strong>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨</span></span><br><span class="line">~/zfile/bin/start.sh   </span><br><span class="line"><span class="comment"># åœæ­¢</span></span><br><span class="line">~/zfile/bin/stop.sh        </span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶è·¯å¾„">é…ç½®æ–‡ä»¶è·¯å¾„</h2><p>å¦‚éœ€ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶è·¯å¾„ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/zfile/WEB-INF/classes/application.properties</span><br></pre></td></tr></table></figure><h2 id="æ›´æ–°ç‰ˆæœ¬">æ›´æ–°ç‰ˆæœ¬</h2><p>è­¦å‘Š</p><p>æ›´æ–°ç¨‹åºå‰åŠ¡å¿…åœæ­¢ç¨‹åºå†è¿›è¡Œæ“ä½œï¼Œå‘½ä»¤è§ä¸‹æ–¹é»„è‰²é«˜äº®éƒ¨åˆ†ã€‚</p><p>å¦‚æœæ²¡ä¿®æ”¹è¿‡å®‰è£…è·¯å¾„ï¼Œåˆ™åœæ­¢ç¨‹åºåï¼Œåˆ é™¤å®‰è£…æ–‡ä»¶å¤¹å³å¯ï¼Œé»˜è®¤å‘½ä»¤ä¸ºï¼š</p><p>å¦‚ä¿®æ”¹è¿‡å®‰è£…è·¯å¾„ï¼Œåˆ™æ›¿æ¢ä¸‹æ–¹å‘½ä»¤ä¸­çš„ <code>~/zfile</code> éƒ¨åˆ†ä¸ºä½ çš„å®‰è£…è·¯å¾„å³å¯ï¼Œè§ä¸‹æ–¹è“è‰²é«˜äº®éƒ¨åˆ†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">~/zfile/bin/stop.sh                                                 <span class="comment"># åœæ­¢ç¨‹åº</span></span><br><span class="line"><span class="built_in">rm</span> -rf ~/zfile                                                      <span class="comment"># åˆ é™¤å®‰è£…æ–‡ä»¶å¤¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°ä¸‹è½½å®‰è£…æœ€æ–°ç‰ˆ</span></span><br><span class="line"><span class="built_in">export</span> ZFILE_INSTALL_PATH=~/zfile                                   <span class="comment"># å£°æ˜å®‰è£…åˆ°çš„è·¯å¾„</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$ZFILE_INSTALL_PATH</span> &amp;&amp; <span class="built_in">cd</span> <span class="variable">$ZFILE_INSTALL_PATH</span>              <span class="comment"># åˆ›å»ºæ–‡ä»¶å¤¹å¹¶è¿›å…¥</span></span><br><span class="line">wget --no-check-certificate https://c.jun6.net/ZFILE/zfile-release.war                     <span class="comment"># ä¸‹è½½ zfile æœ€æ–°ç‰ˆ</span></span><br><span class="line">unzip zfile-release.war &amp;&amp; <span class="built_in">rm</span> -rf zfile-release.war                 <span class="comment"># è§£å‹å¹¶åˆ é™¤å‹ç¼©åŒ…</span></span><br><span class="line"><span class="built_in">chmod</span> +x <span class="variable">$ZFILE_INSTALL_PATH</span>/bin/*.sh                               <span class="comment"># æˆæƒå¯åŠ¨åœæ­¢è„šæœ¬</span></span><br><span class="line"></span><br><span class="line">~/zfile/bin/start.sh                                                <span class="comment"># å¯åŠ¨é¡¹ç›®</span></span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨httpè®¿é—®">ä½¿ç”¨HTTPè®¿é—®</h1><p>è¦å°†è¿è¡Œåœ¨Dockerå®¹å™¨ä¸­çš„æœåŠ¡é€šè¿‡åŸŸåè®¿é—®ï¼Œå¹¶ä½¿ç”¨Nginxä½œä¸ºåå‘ä»£ç†æ¥è½¬å‘åˆ°å®¿ä¸»æœºçš„8080ç«¯å£ï¼Œä½ éœ€è¦å®Œæˆå‡ ä¸ªæ­¥éª¤ã€‚è¿™åŒ…æ‹¬è®¾ç½®DNSè®°å½•ã€é…ç½®Nginxä»¥åŠç¡®ä¿ç½‘ç»œå®‰å…¨ã€‚ä¸‹é¢æ˜¯å…·ä½“æ­¥éª¤ï¼š</p><h2 id="æ­¥éª¤-1-è®¾ç½®dnsè®°å½•">æ­¥éª¤ 1: è®¾ç½®DNSè®°å½•</h2><p>ç¡®ä¿ä½ çš„åŸŸå <code>drive.lthero.top</code> çš„DNSè®°å½•æŒ‡å‘æ‰˜ç®¡Nginxçš„æœåŠ¡å™¨çš„IPåœ°å€ã€‚è¿™é€šå¸¸åœ¨ä½ çš„åŸŸåæ³¨å†Œå•†å¤„è¿›è¡Œè®¾ç½®ï¼š</p><ul><li><strong>Aè®°å½•</strong>ï¼šå°†åŸŸåæŒ‡å‘IPv4åœ°å€ã€‚</li><li><strong>AAAAè®°å½•</strong>ï¼šå°†åŸŸåæŒ‡å‘IPv6åœ°å€ï¼ˆå¦‚æœé€‚ç”¨ï¼‰ã€‚</li></ul><h2 id="æ­¥éª¤-2-å®‰è£…å¹¶å¯åŠ¨nginx">æ­¥éª¤ 2: å®‰è£…å¹¶å¯åŠ¨Nginx</h2><p>æ­¥éª¤ 1: æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨</p><p>æ‰“å¼€ç»ˆç«¯ï¼Œé¦–å…ˆä½¿ç”¨<code>apt</code>å‘½ä»¤æ›´æ–°ä½ çš„åŒ…åˆ—è¡¨ï¼Œä»¥ç¡®ä¿ä½ å®‰è£…çš„æ˜¯æœ€æ–°ç‰ˆæœ¬çš„Nginxã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><p>æ­¥éª¤ 2: å®‰è£…Nginx</p><p>ä½¿ç”¨<code>apt</code>å®‰è£…Nginxã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install nginx</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-3-é…ç½®nginx">æ­¥éª¤ 3: é…ç½®Nginx</h2><p>ä½ éœ€è¦åœ¨Nginxä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æœåŠ¡å™¨å—ï¼ˆserver blockï¼‰ï¼Œæˆ–è€…åœ¨å·²æœ‰çš„é»˜è®¤é…ç½®ä¸­ä¿®æ”¹ï¼Œä»¥è®¾ç½®åå‘ä»£ç†ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„Nginxé…ç½®ç¤ºä¾‹ï¼Œå°†ä¼šæŠŠæ‰€æœ‰åˆ° <code>drive.lthero.top</code> çš„è¯·æ±‚è½¬å‘åˆ°æœ¬åœ°çš„8080ç«¯å£ï¼š</p><ol><li><p>æ‰“å¼€æˆ–åˆ›å»ºä¸€ä¸ªæ–°çš„Nginxé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/nginx/sites-available/drive.lthero.top</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> drive.lthero.top;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://localhost:8080;</span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">&#x27;upgrade&#x27;</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_cache_bypass</span> <span class="variable">$http_upgrade</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé…ç½®åšäº†ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li><code>listen 80;</code> å‘Šè¯‰Nginxç›‘å¬80ç«¯å£ï¼ˆHTTPæ ‡å‡†ç«¯å£ï¼‰ã€‚</li><li><code>server_name drive.lthero.top;</code> è®¾ç½®è¿™ä¸ªå—åº”å½“å“åº”çš„åŸŸåã€‚</li><li><code>proxy_pass http://localhost:8080;</code> æŒ‡å®šæ‰€æœ‰ä¼ å…¥çš„è¯·æ±‚è½¬å‘åˆ°æœ¬åœ°çš„8080ç«¯å£ã€‚</li><li><code>proxy_set_header</code> æŒ‡ä»¤å°†é‡è¦çš„HTTPå¤´ä¿¡æ¯è½¬å‘ç»™åç«¯åº”ç”¨ã€‚</li></ul></li><li><p>å¯ç”¨é…ç½®æ–‡ä»¶é€šè¿‡åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥(ä¸€å®šè¦åš)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">ln</span> -s /etc/nginx/sites-available/drive.lthero.top /etc/nginx/sites-enabled/</span><br></pre></td></tr></table></figure></li><li><p>æ£€æŸ¥Nginxé…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -t</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œé‡å¯Nginxä»¥åº”ç”¨é…ç½®(ä¸€å®šè¦åš)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure></li></ol><h2 id="æ­¥éª¤-4-è°ƒæ•´é˜²ç«å¢™è§„åˆ™">æ­¥éª¤ 4: è°ƒæ•´é˜²ç«å¢™è§„åˆ™</h2><p>ç¡®ä¿ä½ çš„æœåŠ¡å™¨çš„é˜²ç«å¢™è§„åˆ™å…è®¸HTTPï¼ˆç«¯å£80ï¼‰å’ŒHTTPSï¼ˆç«¯å£443ï¼Œå¦‚æœä½ ä½¿ç”¨SSLï¼‰çš„æµé‡ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨<code>ufw</code>ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow <span class="string">&#x27;Nginx Full&#x27;</span></span><br><span class="line">sudo ufw reload</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-5-æµ‹è¯•é…ç½®">æ­¥éª¤ 5: æµ‹è¯•é…ç½®</h2><p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>http://drive.lthero.top</code> æˆ–ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·å¦‚ <code>curl</code> æ¥æµ‹è¯•ä½ çš„é…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://drive.lthero.top</span><br></pre></td></tr></table></figure><p>ä½ åº”è¯¥èƒ½çœ‹åˆ°ä»Dockerå®¹å™¨ä¸­è¿è¡Œçš„æœåŠ¡å“åº”çš„å†…å®¹ã€‚</p><p>è¿™æ ·ï¼Œä½ å°±é…ç½®å¥½äº†Nginxä½œä¸ºåå‘ä»£ç†ï¼Œå°†åŸŸå <code>drive.lthero.top</code> çš„æµé‡è½¬å‘åˆ°å®¿ä¸»æœºçš„8080ç«¯å£ä¸Šçš„æœåŠ¡ã€‚å¦‚æœä½ å¸Œæœ›ä½¿ç”¨HTTPSï¼Œä½ è¿˜éœ€è¦è®¾ç½®SSLè¯ä¹¦ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨Letâ€™s Encryptå…è´¹è¯ä¹¦å¹¶é…ç½®HTTPSã€‚</p><h1 id="ä½¿ç”¨httpsè®¿é—®">ä½¿ç”¨HTTPSè®¿é—®</h1><p>è¦è®©ä½ çš„åŸŸå <code>drive.lthero.top</code> ä½¿ç”¨ HTTPSï¼Œä½ éœ€è¦è·å– SSL/TLS è¯ä¹¦ï¼Œå¹¶é…ç½® Nginx ä»¥ä½¿ç”¨è¿™äº›è¯ä¹¦æ¥åŠ å¯†ç½‘é¡µå†…å®¹ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„æ­¥éª¤ï¼ŒåŒ…æ‹¬å¦‚ä½•ä½¿ç”¨ Letâ€™s Encrypt æä¾›çš„å…è´¹è¯ä¹¦è‡ªåŠ¨åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚</p><h2 id="æ­¥éª¤-1-å®‰è£…-certbot">æ­¥éª¤ 1: å®‰è£… Certbot</h2><p>Certbot æ˜¯ä¸€ä¸ªè‡ªåŠ¨è·å–å¹¶å®‰è£… Letâ€™s Encrypt è¯ä¹¦çš„å®¢æˆ·ç«¯ã€‚åœ¨ Ubuntu ä¸Šå®‰è£… Certbot åŠå…¶ Nginx æ’ä»¶éå¸¸ç®€å•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install certbot python3-certbot-nginx</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-2-è·å–å’Œå®‰è£…è¯ä¹¦">æ­¥éª¤ 2: è·å–å’Œå®‰è£…è¯ä¹¦</h2><p>ä½¿ç”¨ Certbot è·å–å¹¶ä¸ºä½ çš„åŸŸåå®‰è£…è¯ä¹¦ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot --nginx -d drive.lthero.top</span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤ä¼šè‡ªåŠ¨ä¸ºæŒ‡å®šçš„åŸŸå <code>drive.lthero.top</code> é…ç½® SSL è¯ä¹¦ï¼Œå¹¶æ›´æ–° Nginx é…ç½®ä»¥ä½¿ç”¨è¿™äº›è¯ä¹¦ã€‚Certbot ä¼šè¯¢é—®ä½ ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ç”µå­é‚®ä»¶åœ°å€ï¼ˆç”¨äºç´§æ€¥è”ç³»å’Œè¯ä¹¦ç»­è®¢æé†’ï¼‰ï¼Œä»¥åŠæ˜¯å¦é‡å®šå‘æ‰€æœ‰ HTTP è¯·æ±‚åˆ° HTTPSï¼ˆå¼ºçƒˆå»ºè®®å¯ç”¨ï¼‰ã€‚</p><p>ç”Ÿæˆçš„è¯ä¹¦ä½ç½®<code>/etc/letsencrypt/live/</code></p><h2 id="æ­¥éª¤-3-æ›´æ–°-nginx-é…ç½®">æ­¥éª¤ 3: æ›´æ–° Nginx é…ç½®</h2><p>å¦‚æœä½ æƒ³æ‰‹åŠ¨ç¼–è¾‘ Nginx é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼é…ç½®ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/nginx/sites-available/drive.lthero.top</span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> drive.lthero.top;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$server_name</span><span class="variable">$request_uri</span>;  <span class="comment"># å¼ºåˆ¶é‡å®šå‘æ‰€æœ‰ HTTP è¯·æ±‚åˆ° HTTPS</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl http2;</span><br><span class="line">    <span class="attribute">server_name</span> drive.lthero.top;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /etc/letsencrypt/live/drive.lthero.top/fullchain.pem;  <span class="comment"># è¯ä¹¦æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /etc/letsencrypt/live/drive.lthero.top/privkey.pem;  <span class="comment"># ç§é’¥æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_session_timeout</span> <span class="number">1d</span>;</span><br><span class="line">    <span class="attribute">ssl_session_cache</span> shared:MozSSL:<span class="number">10m</span>;  <span class="comment"># ç¼“å­˜ SSL ä¼šè¯ä»¥æå‡æ€§èƒ½</span></span><br><span class="line">    <span class="attribute">ssl_session_tickets</span> <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç°ä»£åŠ å¯†å¥—ä»¶é…ç½®</span></span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> <span class="string">&#x27;ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384&#x27;</span>;</span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å…¶ä»– SSL ä¼˜åŒ–è®¾ç½®</span></span><br><span class="line">    <span class="attribute">ssl_stapling</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">ssl_stapling_verify</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å…è®¸æœ€å¤§è¯·æ±‚ä½“å¤§å°ä¸º 1000MB</span></span><br><span class="line">    <span class="attribute">client_max_body_size</span> <span class="number">1000m</span>;  </span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://localhost:8080;</span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">&#x27;upgrade&#x27;</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_cache_bypass</span> <span class="variable">$http_upgrade</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé…ç½®ä¸ä»…å¯ç”¨äº† HTTPSï¼Œè¿˜åŒ…æ‹¬äº†ä¸€äº›ç°ä»£çš„å®‰å…¨å®è·µï¼Œå¦‚å¯ç”¨ HTTP/2ï¼Œé…ç½®åŠ å¯†å¥—ä»¶å’Œåè®®ç­‰ã€‚</p><h2 id="æ­¥éª¤-4-é‡æ–°åŠ è½½-nginx">æ­¥éª¤ 4: é‡æ–°åŠ è½½ Nginx</h2><p>å¯ç”¨é…ç½®æ–‡ä»¶é€šè¿‡åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">ln</span> -s /etc/nginx/sites-available/gallery.lthero.top /etc/nginx/sites-enabled/</span><br></pre></td></tr></table></figure><p>æ›´æ”¹é…ç½®åï¼Œéœ€è¦é‡æ–°åŠ è½½ Nginx ä»¥åº”ç”¨æ–°çš„é…ç½®ï¼š</p><blockquote><p>æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼Œå¦‚æœæœ‰warn!ç›´æ¥çœ‹â€œé‡åˆ°çš„é—®é¢˜â€éƒ¨åˆ†ï¼Œé‡æ–°åŠ è½½é…ç½®æ˜¯ä¸ä¸€å®šèƒ½workçš„</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯</span></span><br><span class="line">sudo nginx -t  </span><br><span class="line"><span class="comment"># é‡æ–°åŠ è½½é…ç½®</span></span><br><span class="line">sudo systemctl reload nginx  </span><br><span class="line"><span class="comment"># å¦‚æœé‡æ–°åŠ è½½é…ç½®åæ— æ•ˆï¼Œå¯ä»¥å°è¯•é‡å¯nginx</span></span><br><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-5-éªŒè¯-https">æ­¥éª¤ 5: éªŒè¯ HTTPS</h2><p>åœ¨æµè§ˆå™¨ä¸­è®¿é—® <code>https://drive.lthero.top</code> æ¥æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸã€‚ä½ åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°ä¸€ä¸ªå®‰å…¨é”æ ‡å¿—ï¼Œè¡¨æ˜è¿æ¥æ˜¯é€šè¿‡ HTTPS åŠ å¯†çš„ã€‚</p><h2 id="æ­¥éª¤-6-è‡ªåŠ¨ç»­è®¢è¯ä¹¦">æ­¥éª¤ 6: è‡ªåŠ¨ç»­è®¢è¯ä¹¦</h2><p>Letâ€™s Encrypt çš„è¯ä¹¦æœ‰æ•ˆæœŸä¸º90å¤©ï¼Œå› æ­¤å»ºè®®è®¾ç½®è‡ªåŠ¨ç»­è®¢ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot renew</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šæµ‹è¯•è¯ä¹¦ç»­è®¢è¿‡ç¨‹ã€‚å¦‚æœè¿™ä¸ªæµ‹è¯•æˆåŠŸï¼Œæ·»åŠ å®šæ—¶ä»»åŠ¡<code>crontab</code>ï¼š</p><p><code>crontab -e</code>å†å¡«å†™ä¸‹é¢å†…å®¹ï¼Œè¡¨ç¤ºæ¯æœˆç¬¬ä¸€å¤©ä¼šè‡ªåŠ¨æ‰§è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 0 1 * * /usr/local/bin/certbot renew --manual --preferred-challenges dns --manual-auth-hook <span class="string">&quot;alidns&quot;</span> --manual-cleanup-hook <span class="string">&quot;alidns clean&quot;</span> --deploy-hook <span class="string">&quot;nginx -s reload&quot;</span></span><br></pre></td></tr></table></figure><p>ç»­ç­¾çš„è¯ä¹¦ä½ç½®<code>/etc/letsencrypt/renewal</code></p><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ çš„ç«™ç‚¹ <code>drive.lthero.top</code> ç°åœ¨åº”è¯¥èƒ½å¤Ÿå®‰å…¨åœ°ä½¿ç”¨ HTTPS è¿›è¡Œé€šä¿¡äº†ã€‚</p><p>å¦‚æœè¦æ¢ç¼–è¾‘å™¨ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select-editor</span><br></pre></td></tr></table></figure><h1 id="é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜</h1><p>è¾“å…¥äº†è¿™æ¡å‘½ä»¤å<code>sudo nginx -t</code>ï¼Œå‘ç°å­˜åœ¨warn</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-sf:~/zfile<span class="comment"># sudo nginx -t</span></span><br><span class="line">nginx: [warn] conflicting server name <span class="string">&quot;drive.lthero.top&quot;</span> on 0.0.0.0:80, ignored</span><br><span class="line">nginx: [warn] conflicting server name <span class="string">&quot;drive.lthero.top&quot;</span> on 0.0.0.0:443, ignored</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successfu</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•ï¼š<a href="https://stackoverflow.com/questions/11426087/nginx-error-conflicting-server-name-ignored">https://stackoverflow.com/questions/11426087/nginx-error-conflicting-server-name-ignored</a></p><p>æˆ‘çš„è§£å†³æ–¹æ³•ï¼š</p><p>è¿›å…¥<code>sites-available</code>ç›®å½•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/nginx/sites-available</span><br></pre></td></tr></table></figure><p>éšåæ‰§è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -rnw . -e drive.lthero.top</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šè¾“å‡ºå½“å‰ç›®å½•ä¸‹ï¼Œæ‰€æœ‰åŒ…å«â€œdrive.lthero.topâ€å­—æ®µçš„æ–‡ä»¶ï¼Œä»¥åŠå‡ºç°çš„è¡Œæ•°ï¼Œå¦‚ä¸‹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-sf:/etc/nginx/sites-available<span class="comment"># grep -rnw . -e drive.lthero.top</span></span><br><span class="line">./default:115:    server_name drive.lthero.top; <span class="comment"># managed by Certbot</span></span><br><span class="line">./default:145:    ssl_certificate /etc/letsencrypt/live/drive.lthero.top/fullchain.pem; <span class="comment"># managed by Certbot</span></span><br><span class="line">./default:146:    ssl_certificate_key /etc/letsencrypt/live/drive.lthero.top/privkey.pem; <span class="comment"># managed by Certbot</span></span><br><span class="line">./default:152:    <span class="keyword">if</span> (<span class="variable">$host</span> = drive.lthero.top) &#123;</span><br><span class="line">./default:159:    server_name drive.lthero.top;</span><br><span class="line">./drive.lthero.top:3:    server_name drive.lthero.top;</span><br><span class="line">./drive.lthero.top:10:    server_name drive.lthero.top;</span><br></pre></td></tr></table></figure><p>å‡ºç°çš„é—®é¢˜æ˜¯åœ¨defaultä¸­å‡ºæ¥äº†<code>drive.lthero.top</code>ç›¸å…³çš„å†…å®¹</p><p>éšåï¼Œæˆ‘æŠŠdefaultæ›¿æ¢æˆåŸæ¥çš„å†…å®¹ï¼Œå¦‚ä¸‹</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment"># You should look at the following URL&#x27;s in order to grasp a solid understanding</span></span><br><span class="line"><span class="comment"># of Nginx configuration files in order to fully unleash the power of Nginx.</span></span><br><span class="line"><span class="comment"># https://www.nginx.com/resources/wiki/start/</span></span><br><span class="line"><span class="comment"># https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/</span></span><br><span class="line"><span class="comment"># https://wiki.debian.org/Nginx/DirectoryStructure</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># In most cases, administrators will remove this file from sites-enabled/ and</span></span><br><span class="line"><span class="comment"># leave it as reference inside of sites-available where it will continue to be</span></span><br><span class="line"><span class="comment"># updated by the nginx packaging team.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># This file will automatically load configuration files provided by other</span></span><br><span class="line"><span class="comment"># applications, such as Drupal or Wordpress. These applications will be made</span></span><br><span class="line"><span class="comment"># available underneath a path with that package name, such as /drupal8.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Default server configuration</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"><span class="attribute">listen</span> <span class="number">80</span> default_server;</span><br><span class="line"><span class="attribute">listen</span> [::]:<span class="number">80</span> default_server;</span><br><span class="line"></span><br><span class="line"><span class="comment"># SSL configuration</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># listen 443 ssl default_server;</span></span><br><span class="line"><span class="comment"># listen [::]:443 ssl default_server;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Note: You should disable gzip for SSL traffic.</span></span><br><span class="line"><span class="comment"># See: https://bugs.debian.org/773332</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Read up on ssl_ciphers to ensure a secure configuration.</span></span><br><span class="line"><span class="comment"># See: https://bugs.debian.org/765782</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Self signed certs generated by the ssl-cert package</span></span><br><span class="line"><span class="comment"># Don&#x27;t use them in a production server!</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># include snippets/snakeoil.conf;</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">root</span> /var/www/html;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add index.php to the list if you are using PHP</span></span><br><span class="line"><span class="attribute">index</span> index.html index.htm index.nginx-debian.html;</span><br><span class="line"></span><br><span class="line"><span class="attribute">server_name</span> _;</span><br><span class="line"></span><br><span class="line"><span class="section">location</span> / &#123;</span><br><span class="line"><span class="comment"># First attempt to serve request as file, then</span></span><br><span class="line"><span class="comment"># as directory, then fall back to displaying a 404.</span></span><br><span class="line"><span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ =<span class="number">404</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># pass PHP scripts to FastCGI server</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line"><span class="comment">#include snippets/fastcgi-php.conf;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">## With php-fpm (or other unix sockets):</span></span><br><span class="line"><span class="comment">#fastcgi_pass unix:/run/php/php7.4-fpm.sock;</span></span><br><span class="line"><span class="comment">## With php-cgi (or other tcp sockets):</span></span><br><span class="line"><span class="comment">#fastcgi_pass 127.0.0.1:9000;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># deny access to .htaccess files, if Apache&#x27;s document root</span></span><br><span class="line"><span class="comment"># concurs with nginx&#x27;s one</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#location ~ /\.ht &#123;</span></span><br><span class="line"><span class="comment">#deny all;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Virtual Host configuration for example.com</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># You can move that to a different file under sites-available/ and symlink that</span></span><br><span class="line"><span class="comment"># to sites-enabled/ to enable it.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#server &#123;</span></span><br><span class="line"><span class="comment">#listen 80;</span></span><br><span class="line"><span class="comment">#listen [::]:80;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#server_name example.com;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#root /var/www/example.com;</span></span><br><span class="line"><span class="comment">#index index.html;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#location / &#123;</span></span><br><span class="line"><span class="comment">#try_files $uri $uri/ =404;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br></pre></td></tr></table></figure><p>å†æ‰§è¡Œreloadå’Œrestartå°±å¥½äº†</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl reload nginx  <span class="comment"># é‡æ–°åŠ è½½é…ç½®</span></span><br><span class="line"><span class="comment"># å¦‚æœé‡æ–°åŠ è½½é…ç½®åæ— æ•ˆï¼Œå¯ä»¥å°è¯•é‡å¯nginx</span></span><br><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä¸‹è½½å®‰è£…zfile&quot;&gt;ä¸‹è½½å®‰è£…zfile&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;é¡¹ç›®ï¼š&lt;a href=&quot;https://docs.zfile.vip/install/os-linux&quot;&gt;https://docs.zfile.vip/install/os-lin</summary>
      
    
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>è®°å½•ä¸€ä¸ªCondaç¯å¢ƒé—®é¢˜</title>
    <link href="https://blog.lthero.cn/2024/04/15/SetBashProfile/"/>
    <id>https://blog.lthero.cn/2024/04/15/SetBashProfile/</id>
    <published>2024-04-15T09:33:56.000Z</published>
    <updated>2024-04-15T09:44:32.185Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èµ·å› ">èµ·å› </h1><blockquote><p>æœ€è¿‘å‘ç°condaç¯å¢ƒä¸­ï¼Œä¸è®ºä»€ä¹ˆç¯å¢ƒï¼Œéƒ½ä½¿ç”¨çš„/home/.local/lib/python3.10/site-packagesä¸‹çš„åŒ…</p></blockquote><p>è€Œç†è®ºä¸ŠCondaçš„è™šæ‹Ÿç¯å¢ƒåº”è¯¥ä¼˜å…ˆä½¿ç”¨è™šæ‹Ÿç¯å¢ƒä¸­çš„åŒ…ï¼Œæ¯”å¦‚é€šè¿‡æŸ¥è¯¢<code>which pip</code>å¯ä»¥å‘ç°å…¶ä½ç½®åœ¨<code>/opt/anaconda3/bin/pip</code>ã€æ­£ç¡®çš„ã€‘</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(base) xxx@xxx-2:~$ <span class="built_in">which</span> pip</span><br><span class="line">/opt/anaconda3/bin/pip</span><br></pre></td></tr></table></figure><p>è€Œä¸‹é¢çš„ç»“æœæ˜¯ã€é”™è¯¯çš„ã€‘</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(base) xxx@xxx-2:~$ <span class="built_in">which</span> pip</span><br><span class="line">/home/dongli911/.local/bin/pip</span><br></pre></td></tr></table></figure><h1 id="åŸå› ">åŸå› </h1><blockquote><p>åŸå› æ˜¯PATHçš„ä¼˜å…ˆçº§é—®é¢˜</p></blockquote><p><strong>ä¼˜å…ˆçº§</strong>ï¼šåº”è¯¥å°†Condaç¯å¢ƒçš„<code>bin</code>ç›®å½•ç½®äº<code>PATH</code>çš„æœ€å‰é¢ï¼Œæ„å‘³ç€ä½ åœ¨ä½¿ç”¨ä»»ä½•å‘½ä»¤æ—¶ï¼ˆå¦‚<code>python</code>ï¼Œ<code>pip</code>ç­‰ï¼‰ï¼Œç³»ç»Ÿéƒ½ä¼šé¦–å…ˆåœ¨ä½ å½“å‰æ¿€æ´»çš„Condaç¯å¢ƒä¸­å¯»æ‰¾ã€‚</p><p>ä½†å®é™…ä¸Šçš„$PATHè¾“å‡ºå¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/home/dongli911/.local/bin:/opt/anaconda3/bin:/opt/anaconda3/condabin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin</span><br></pre></td></tr></table></figure><p>å³/home/dongli911/.local/binè¢«å†™åœ¨äº†/opt/anaconda3/binå‰é¢ï¼Œ<strong>æˆ‘ä»¬è¦åšçš„æ˜¯æŠŠ$PATHé‡å†™</strong></p><h1 id="è§£å†³">è§£å†³</h1><blockquote><p>éšåå‘ç°ï¼Œä¸è®ºåœ¨<code>~/.bashrc</code>æ€ä¹ˆä¿®æ”¹<code>$PATH</code>ï¼Œ/home/dongli911/.local/binè¿˜æ˜¯ä¼šåœ¨æœ€å‰é¢ï¼Œéšåå‘ç°</p></blockquote><p>å¯¹äºç™»å½• shellï¼Œ<code>~/.bash_profile</code>ï¼ˆæˆ–åœ¨æŸäº›ç³»ç»Ÿä¸Šæ˜¯ <code>~/.profile</code>ï¼‰ä¼šåœ¨æ¯æ¬¡ç™»å½•æ—¶æ‰§è¡Œã€‚å¦‚æœ <code>.bashrc</code> ä¸­çš„è®¾ç½®è¢«è¦†ç›–äº†ï¼Œå¯èƒ½æ˜¯å› ä¸ºè¿™äº›æ–‡ä»¶ä¸­æœ‰è¿›ä¸€æ­¥çš„ä¿®æ”¹ã€‚</p><p>æŸ¥çœ‹<code>~/.profile</code>ï¼Œå‘ç°åˆ°$PATHç¡®å®è¢«é‡å†™äº†ï¼ˆå¦‚ä¸‹ï¼‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># set PATH so it includes user&#x27;s private bin if it exists</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">&quot;<span class="variable">$HOME</span>/.local/bin&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">    PATH=<span class="string">&quot;<span class="variable">$HOME</span>/.local/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç åé¢æ·»åŠ <code>export PATH=&quot;/opt/anaconda3/bin:$PATH&quot;</code>å³å¯</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># set PATH so it includes user&#x27;s private bin if it exists</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">&quot;<span class="variable">$HOME</span>/.local/bin&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">    PATH=<span class="string">&quot;<span class="variable">$HOME</span>/.local/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;/opt/anaconda3/bin:<span class="variable">$PATH</span>&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;èµ·å› &quot;&gt;èµ·å› &lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ€è¿‘å‘ç°condaç¯å¢ƒä¸­ï¼Œä¸è®ºä»€ä¹ˆç¯å¢ƒï¼Œéƒ½ä½¿ç”¨çš„/home/.local/lib/python3.10/site-packagesä¸‹çš„åŒ…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è€Œç†è®ºä¸ŠCondaçš„è™šæ‹Ÿç¯å¢ƒ</summary>
      
    
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨çº¿å‰ªè´´æ¿|æ–‡ä»¶ä¼ è¾“</title>
    <link href="https://blog.lthero.cn/2024/04/11/OnlineClipBoard/"/>
    <id>https://blog.lthero.cn/2024/04/11/OnlineClipBoard/</id>
    <published>2024-04-11T12:21:43.000Z</published>
    <updated>2024-07-21T06:07:01.682Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åœ¨çº¿å‰ªè´´æ¿-æ–‡ä»¶ä¼ è¾“">åœ¨çº¿å‰ªè´´æ¿|æ–‡ä»¶ä¼ è¾“</h1><blockquote><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/TransparentLC/cloud-clipboard">https://github.com/TransparentLC/cloud-clipboard</a></p></blockquote><h1 id="ä¸‹è½½é¡¹ç›®">ä¸‹è½½é¡¹ç›®</h1><h2 id="ä½¿ç”¨-docker-è¿è¡Œ">ä½¿ç”¨ Docker è¿è¡Œ</h2><blockquote><p>Docker Hub ä¸Šçš„é•œåƒæ˜¯ç”±ä»–äººæ‰“åŒ…çš„ï¼Œä»…ä¸ºæ–¹ä¾¿ä½¿ç”¨è€Œåœ¨è¿™é‡Œç»™å‡ºï¼Œç‰ˆæœ¬å¯èƒ½ä¼šæ»åäº repo å†…çš„æºä»£ç ã€‚</p></blockquote><h3 id="ä»-docker-hub-æ‹‰å–">ä» Docker Hub æ‹‰å–</h3><p>å¦‚æœä½ åœ¨ä½¿ç”¨æ—¶é‡åˆ°äº†é—®é¢˜ï¼Œè¯·å…ˆç¡®è®¤è¿™ä¸ªé—®é¢˜åœ¨ repo å†…çš„æœ€æ–°çš„æºä»£ç ä¸­æ˜¯å¦ä»ç„¶å­˜åœ¨ã€‚</p><p><code>lthero1/lthero-onlineclip</code> æ˜¯æœ¬äººç¨å¾®ä¿®æ”¹åå¹¶æ‰“åŒ…çš„ï¼Œé™åˆ¶å®¹é‡1GBï¼Œæ— å¯†ç ï¼Œæ”¯æŒMarkdowné¢„è§ˆï¼Œæ”¯æŒå¤šæ–‡ä»¶åŒæ—¶ä¸Šä¼ ï¼Œä¸Šä¼ é€Ÿåº¦å¿«</p><p><code>chenqiyux/lan-clip:latest</code> æ˜¯åŸReadmeä¸­çš„ï¼Œç‰ˆæœ¬è½åï¼Œä¸æ”¯æŒå¤šæ–‡ä»¶åŒæ—¶ä¸Šä¼ </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull lthero1/lthero-onlineclip:latest</span><br><span class="line">docker container run -d -p 9501:9501 lthero1/lthero-onlineclip</span><br></pre></td></tr></table></figure><h3 id="è‡ªå·±æ‰“åŒ…">è‡ªå·±æ‰“åŒ…</h3><p>å…ˆä¸‹è½½é¡¹ç›®<code>git clone https://github.com/TransparentLC/cloud-clipboard.git</code>ï¼Œéšåè‡ªå·±æ‰“åŒ…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker image build -t myclip .</span><br><span class="line">docker container run -d --<span class="built_in">rm</span> -p 9501:9501 myclip</span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶è¯´æ˜">é…ç½®æ–‡ä»¶è¯´æ˜</h2><p><code>//</code> å¼€å¤´çš„éƒ¨åˆ†æ˜¯æ³¨é‡Šï¼Œ<strong>å¹¶ä¸éœ€è¦å†™å…¥é…ç½®æ–‡ä»¶ä¸­</strong>ï¼Œå¦åˆ™ä¼šå¯¼è‡´è¯»å–å¤±è´¥ã€‚</p><blockquote><p>è¿™ä¸ªé…ç½®æ–‡ä»¶<strong>åœ¨server-node/app/config.jsç›´æ¥ä¿®æ”¹</strong>ï¼Œåœ¨server/config.jsonä¸­ä¿®æ”¹ä¸ä¸€å®šç”Ÿæ•ˆï¼</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;host&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">9501</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;cert&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;forceWss&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;history&quot;</span><span class="punctuation">:</span> <span class="number">30</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;auth&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;limit&quot;</span><span class="punctuation">:</span> <span class="number">40960</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;file&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;expire&quot;</span><span class="punctuation">:</span> <span class="number">864000</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;chunk&quot;</span><span class="punctuation">:</span> <span class="number">12582912</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;limit&quot;</span><span class="punctuation">:</span> <span class="number">1073741824</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>HTTPS çš„è¯´æ˜ï¼š</p><p>å¦‚æœåŒæ—¶è®¾å®šäº†ç§é’¥å’Œè¯ä¹¦è·¯å¾„ï¼Œåˆ™ä¼šä½¿ç”¨ HTTPS åè®®è®¿é—®å‰ç«¯ç•Œé¢ï¼Œæœªè®¾å®šåˆ™ä¼šä½¿ç”¨ HTTP åè®®ã€‚ è‡ªç”¨çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://mkcert.dev/">mkcert</a> è‡ªè¡Œç”Ÿæˆè¯ä¹¦ï¼Œå¹¶å°†æ ¹è¯ä¹¦æ·»åŠ åˆ°ç³»ç»Ÿ/æµè§ˆå™¨çš„ä¿¡ä»»åˆ—è¡¨ä¸­ã€‚ å¦‚æœä½¿ç”¨äº† Nginx ç­‰è½¯ä»¶çš„åå‘ä»£ç†ï¼Œä¸”è¿™äº›è½¯ä»¶å·²ç»æä¾›äº† HTTPS è¿æ¥ï¼Œåˆ™æ— éœ€åœ¨è¿™é‡Œè®¾å®šã€‚</p><p>â€œå¯†ç è®¤è¯â€çš„è¯´æ˜ï¼š</p><p>å¦‚æœå¯ç”¨â€œå¯†ç è®¤è¯â€ï¼Œåªæœ‰è¾“å…¥æ­£ç¡®çš„å¯†ç æ‰èƒ½è¿æ¥åˆ°æœåŠ¡ç«¯å¹¶æŸ¥çœ‹å‰ªè´´æ¿å†…å®¹ã€‚ å¯ä»¥å°† <code>server.auth</code> å­—æ®µè®¾ä¸º <code>true</code>ï¼ˆéšæœºç”Ÿæˆå…­ä½å¯†ç ï¼‰æˆ–å­—ç¬¦ä¸²ï¼ˆè‡ªå®šä¹‰å¯†ç ï¼‰â€œauthâ€: â€œ123456â€ æ¥å¯ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œå¯åŠ¨æœåŠ¡ç«¯åç»ˆç«¯ä¼šä»¥ <code>Authorization code: ******</code> çš„æ ¼å¼è¾“å‡ºå½“å‰ä½¿ç”¨çš„å¯†ç ã€‚</p></blockquote><p><code>åœ¨server-node/app/config.jsç›´æ¥ä¿®æ”¹</code>æˆ–è€…åœ¨æœåŠ¡å™¨åˆ›å»ºä¸ªclip-config.jsï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">import crypto from &#x27;node<span class="punctuation">:</span>crypto&#x27;;</span><br><span class="line">import fs from &#x27;node<span class="punctuation">:</span>fs&#x27;;</span><br><span class="line">import path from &#x27;node<span class="punctuation">:</span>path&#x27;;</span><br><span class="line"></span><br><span class="line">const defaultConfigPath = path.join(process.cwd()<span class="punctuation">,</span> &#x27;config.json&#x27;);</span><br><span class="line"></span><br><span class="line">if (!process.argv<span class="punctuation">[</span><span class="number">2</span><span class="punctuation">]</span> &amp;&amp; !fs.existsSync(defaultConfigPath)) <span class="punctuation">&#123;</span></span><br><span class="line">    console.log(`\x1b<span class="punctuation">[</span><span class="number">93</span>mConfig file <span class="string">&quot;$&#123;defaultConfigPath&#125;&quot;</span> does not exist.\x1b<span class="punctuation">[</span><span class="number">39</span>m`);</span><br><span class="line">    console.log(&#x27;\x1b<span class="punctuation">[</span><span class="number">93</span>mA default config file is created and used. Check the descriptions in the repository\&#x27;s README.md to modify it.\x1b<span class="punctuation">[</span><span class="number">39</span>m&#x27;);</span><br><span class="line">    fs.writeFileSync(defaultConfigPath<span class="punctuation">,</span> JSON.stringify(<span class="punctuation">&#123;</span></span><br><span class="line">        server<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            host<span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            port<span class="punctuation">:</span> <span class="number">9501</span><span class="punctuation">,</span></span><br><span class="line">            key<span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">            cert<span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">            forceWss<span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">            history<span class="punctuation">:</span> <span class="number">30</span><span class="punctuation">,</span></span><br><span class="line">            auth<span class="punctuation">:</span> <span class="string">&quot;Www_159159&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        text<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            limit<span class="punctuation">:</span> <span class="number">40960</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        file<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            expire<span class="punctuation">:</span> <span class="number">864000</span><span class="punctuation">,</span></span><br><span class="line">            chunk<span class="punctuation">:</span> <span class="number">12582912</span><span class="punctuation">,</span></span><br><span class="line">            limit<span class="punctuation">:</span> <span class="number">1073741824</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">,</span> <span class="number">4</span>));</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">const config = JSON.parse(fs.readFileSync(process.argv<span class="punctuation">[</span><span class="number">2</span><span class="punctuation">]</span> || defaultConfigPath));</span><br><span class="line"></span><br><span class="line">if (config.server.auth === <span class="keyword">true</span>) <span class="punctuation">&#123;</span></span><br><span class="line">    config.server.auth = &#x27;&#x27;;</span><br><span class="line">    for (let i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) <span class="punctuation">&#123;</span></span><br><span class="line">        config.server.auth += &#x27;<span class="number">0123456789</span>ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&#x27;<span class="punctuation">[</span>crypto.randomInt(<span class="number">62</span>)<span class="punctuation">]</span>;</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">if (config.server.auth) <span class="punctuation">&#123;</span></span><br><span class="line">    config.server.auth = config.server.auth.toString();</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">export default config;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œä¸éœ€è¦é‡æ–°æ‰“åŒ…ï¼Œä½¿ç”¨-væ˜ å°„å³å¯</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker container run -d -p 9501:9501 --<span class="built_in">rm</span> -v ~/clip-config.js:/app/server-node/app/config.js lthero1/lthero-onlineclip</span><br><span class="line"></span><br><span class="line"><span class="comment"># -v ~/clip-config.json:/app/server/config.json</span></span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨httpè®¿é—®">ä½¿ç”¨HTTPè®¿é—®</h1><p>è¦å°†è¿è¡Œåœ¨Dockerå®¹å™¨ä¸­çš„æœåŠ¡é€šè¿‡åŸŸåè®¿é—®ï¼Œå¹¶ä½¿ç”¨Nginxä½œä¸ºåå‘ä»£ç†æ¥è½¬å‘åˆ°å®¿ä¸»æœºçš„9501ç«¯å£ï¼Œä½ éœ€è¦å®Œæˆå‡ ä¸ªæ­¥éª¤ã€‚è¿™åŒ…æ‹¬è®¾ç½®DNSè®°å½•ã€é…ç½®Nginxä»¥åŠç¡®ä¿ç½‘ç»œå®‰å…¨ã€‚ä¸‹é¢æ˜¯å…·ä½“æ­¥éª¤ï¼š</p><h2 id="æ­¥éª¤-1-è®¾ç½®dnsè®°å½•">æ­¥éª¤ 1: è®¾ç½®DNSè®°å½•</h2><p>ç¡®ä¿ä½ çš„åŸŸå <code>clip.lthero.top</code> çš„DNSè®°å½•æŒ‡å‘æ‰˜ç®¡Nginxçš„æœåŠ¡å™¨çš„IPåœ°å€ã€‚è¿™é€šå¸¸åœ¨ä½ çš„åŸŸåæ³¨å†Œå•†å¤„è¿›è¡Œè®¾ç½®ï¼š</p><ul><li><strong>Aè®°å½•</strong>ï¼šå°†åŸŸåæŒ‡å‘IPv4åœ°å€ã€‚</li><li><strong>AAAAè®°å½•</strong>ï¼šå°†åŸŸåæŒ‡å‘IPv6åœ°å€ï¼ˆå¦‚æœé€‚ç”¨ï¼‰ã€‚</li></ul><h2 id="æ­¥éª¤-2-å®‰è£…å¹¶å¯åŠ¨nginx">æ­¥éª¤ 2: å®‰è£…å¹¶å¯åŠ¨Nginx</h2><p>æ­¥éª¤ 1: æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨</p><p>æ‰“å¼€ç»ˆç«¯ï¼Œé¦–å…ˆä½¿ç”¨<code>apt</code>å‘½ä»¤æ›´æ–°ä½ çš„åŒ…åˆ—è¡¨ï¼Œä»¥ç¡®ä¿ä½ å®‰è£…çš„æ˜¯æœ€æ–°ç‰ˆæœ¬çš„Nginxã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><p>æ­¥éª¤ 2: å®‰è£…Nginx</p><p>ä½¿ç”¨<code>apt</code>å®‰è£…Nginxã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install nginx</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-3-é…ç½®nginx">æ­¥éª¤ 3: é…ç½®Nginx</h2><p>ä½ éœ€è¦åœ¨Nginxä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æœåŠ¡å™¨å—ï¼ˆserver blockï¼‰ï¼Œæˆ–è€…åœ¨å·²æœ‰çš„é»˜è®¤é…ç½®ä¸­ä¿®æ”¹ï¼Œä»¥è®¾ç½®åå‘ä»£ç†ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„Nginxé…ç½®ç¤ºä¾‹ï¼Œå°†ä¼šæŠŠæ‰€æœ‰åˆ° <code>clip.lthero.top</code> çš„è¯·æ±‚è½¬å‘åˆ°æœ¬åœ°çš„9501ç«¯å£ï¼š</p><ol><li><p>æ‰“å¼€æˆ–åˆ›å»ºä¸€ä¸ªæ–°çš„Nginxé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/nginx/sites-available/clip.lthero.top</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> clip.lthero.top;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://localhost:9501;</span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">&#x27;upgrade&#x27;</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_cache_bypass</span> <span class="variable">$http_upgrade</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé…ç½®åšäº†ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li><code>listen 80;</code> å‘Šè¯‰Nginxç›‘å¬80ç«¯å£ï¼ˆHTTPæ ‡å‡†ç«¯å£ï¼‰ã€‚</li><li><code>server_name clip.lthero.top;</code> è®¾ç½®è¿™ä¸ªå—åº”å½“å“åº”çš„åŸŸåã€‚</li><li><code>proxy_pass http://localhost:9501;</code> æŒ‡å®šæ‰€æœ‰ä¼ å…¥çš„è¯·æ±‚è½¬å‘åˆ°æœ¬åœ°çš„9501ç«¯å£ã€‚</li><li><code>proxy_set_header</code> æŒ‡ä»¤å°†é‡è¦çš„HTTPå¤´ä¿¡æ¯è½¬å‘ç»™åç«¯åº”ç”¨ã€‚</li></ul></li><li><p>å¯ç”¨é…ç½®æ–‡ä»¶é€šè¿‡åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">ln</span> -s /etc/nginx/sites-available/clip.lthero.top /etc/nginx/sites-enabled/</span><br></pre></td></tr></table></figure></li><li><p>æ£€æŸ¥Nginxé…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -t</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œé‡å¯Nginxä»¥åº”ç”¨é…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure></li></ol><h2 id="æ­¥éª¤-4-è°ƒæ•´é˜²ç«å¢™è§„åˆ™">æ­¥éª¤ 4: è°ƒæ•´é˜²ç«å¢™è§„åˆ™</h2><p>ç¡®ä¿ä½ çš„æœåŠ¡å™¨çš„é˜²ç«å¢™è§„åˆ™å…è®¸HTTPï¼ˆç«¯å£80ï¼‰å’ŒHTTPSï¼ˆç«¯å£443ï¼Œå¦‚æœä½ ä½¿ç”¨SSLï¼‰çš„æµé‡ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨<code>ufw</code>ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow <span class="string">&#x27;Nginx Full&#x27;</span></span><br><span class="line">sudo ufw reload</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-5-æµ‹è¯•é…ç½®">æ­¥éª¤ 5: æµ‹è¯•é…ç½®</h2><p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>http://clip.lthero.top</code> æˆ–ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·å¦‚ <code>curl</code> æ¥æµ‹è¯•ä½ çš„é…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://clip.lthero.top</span><br></pre></td></tr></table></figure><p>ä½ åº”è¯¥èƒ½çœ‹åˆ°ä»Dockerå®¹å™¨ä¸­è¿è¡Œçš„æœåŠ¡å“åº”çš„å†…å®¹ã€‚</p><p>è¿™æ ·ï¼Œä½ å°±é…ç½®å¥½äº†Nginxä½œä¸ºåå‘ä»£ç†ï¼Œå°†åŸŸå <code>clip.lthero.top</code> çš„æµé‡è½¬å‘åˆ°å®¿ä¸»æœºçš„9501ç«¯å£ä¸Šçš„æœåŠ¡ã€‚å¦‚æœä½ å¸Œæœ›ä½¿ç”¨HTTPSï¼Œä½ è¿˜éœ€è¦è®¾ç½®SSLè¯ä¹¦ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨Letâ€™s Encryptå…è´¹è¯ä¹¦å¹¶é…ç½®HTTPSã€‚</p><h1 id="ä½¿ç”¨httpsè®¿é—®">ä½¿ç”¨HTTPSè®¿é—®</h1><p>è¦è®©ä½ çš„åŸŸå <code>clip.lthero.top</code> ä½¿ç”¨ HTTPSï¼Œä½ éœ€è¦è·å– SSL/TLS è¯ä¹¦ï¼Œå¹¶é…ç½® Nginx ä»¥ä½¿ç”¨è¿™äº›è¯ä¹¦æ¥åŠ å¯†ç½‘é¡µå†…å®¹ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„æ­¥éª¤ï¼ŒåŒ…æ‹¬å¦‚ä½•ä½¿ç”¨ Letâ€™s Encrypt æä¾›çš„å…è´¹è¯ä¹¦è‡ªåŠ¨åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚</p><h2 id="æ­¥éª¤-1-å®‰è£…-certbot">æ­¥éª¤ 1: å®‰è£… Certbot</h2><p>Certbot æ˜¯ä¸€ä¸ªè‡ªåŠ¨è·å–å¹¶å®‰è£… Letâ€™s Encrypt è¯ä¹¦çš„å®¢æˆ·ç«¯ã€‚åœ¨ Ubuntu ä¸Šå®‰è£… Certbot åŠå…¶ Nginx æ’ä»¶éå¸¸ç®€å•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install certbot python3-certbot-nginx -y</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-2-è·å–å’Œå®‰è£…è¯ä¹¦">æ­¥éª¤ 2: è·å–å’Œå®‰è£…è¯ä¹¦</h2><p>ä½¿ç”¨ Certbot è·å–å¹¶ä¸ºä½ çš„åŸŸåå®‰è£…è¯ä¹¦ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot --nginx -d clip.lthero.top</span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤ä¼šè‡ªåŠ¨ä¸ºæŒ‡å®šçš„åŸŸå <code>clip.lthero.top</code> é…ç½® SSL è¯ä¹¦ï¼Œå¹¶æ›´æ–° Nginx é…ç½®ä»¥ä½¿ç”¨è¿™äº›è¯ä¹¦ã€‚Certbot ä¼šè¯¢é—®ä½ ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ç”µå­é‚®ä»¶åœ°å€ï¼ˆç”¨äºç´§æ€¥è”ç³»å’Œè¯ä¹¦ç»­è®¢æé†’ï¼‰ï¼Œä»¥åŠæ˜¯å¦é‡å®šå‘æ‰€æœ‰ HTTP è¯·æ±‚åˆ° HTTPSï¼ˆå¼ºçƒˆå»ºè®®å¯ç”¨ï¼‰ã€‚</p><p>ç”Ÿæˆçš„è¯ä¹¦ä½ç½®<code>/etc/letsencrypt/live/</code></p><h2 id="æ­¥éª¤-3-æ›´æ–°-nginx-é…ç½®">æ­¥éª¤ 3: æ›´æ–° Nginx é…ç½®</h2><p>å¦‚æœä½ æƒ³æ‰‹åŠ¨ç¼–è¾‘ Nginx é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼é…ç½®ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/nginx/sites-available/clip.lthero.top</span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> clip.lthero.top;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$server_name</span><span class="variable">$request_uri</span>;  <span class="comment"># å¼ºåˆ¶é‡å®šå‘æ‰€æœ‰ HTTP è¯·æ±‚åˆ° HTTPS</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl http2;</span><br><span class="line">    <span class="attribute">server_name</span> clip.lthero.top;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /etc/letsencrypt/live/clip.lthero.top/fullchain.pem;  <span class="comment"># è¯ä¹¦æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /etc/letsencrypt/live/clip.lthero.top/privkey.pem;  <span class="comment"># ç§é’¥æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_session_timeout</span> <span class="number">1d</span>;</span><br><span class="line">    <span class="attribute">ssl_session_cache</span> shared:MozSSL:<span class="number">10m</span>;  <span class="comment"># ç¼“å­˜ SSL ä¼šè¯ä»¥æå‡æ€§èƒ½</span></span><br><span class="line">    <span class="attribute">ssl_session_tickets</span> <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç°ä»£åŠ å¯†å¥—ä»¶é…ç½®</span></span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> <span class="string">&#x27;ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384&#x27;</span>;</span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å…¶ä»– SSL ä¼˜åŒ–è®¾ç½®</span></span><br><span class="line">    <span class="attribute">ssl_stapling</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">ssl_stapling_verify</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å…è®¸æœ€å¤§è¯·æ±‚ä½“å¤§å°ä¸º 1000MB</span></span><br><span class="line">    <span class="attribute">client_max_body_size</span> <span class="number">1000m</span>;  </span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://localhost:9501;</span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">&#x27;upgrade&#x27;</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_cache_bypass</span> <span class="variable">$http_upgrade</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé…ç½®ä¸ä»…å¯ç”¨äº† HTTPSï¼Œè¿˜åŒ…æ‹¬äº†ä¸€äº›ç°ä»£çš„å®‰å…¨å®è·µï¼Œå¦‚å¯ç”¨ HTTP/2ï¼Œé…ç½®åŠ å¯†å¥—ä»¶å’Œåè®®ç­‰ã€‚</p><blockquote><p>å…è®¸æœ€å¤§è¯·æ±‚ä½“å¤§å°ä¸º 1000MB</p><p>client_max_body_size 1000m;</p><p>è¿™è¡Œæœ€å¥½ä¸config.jsä¸­ä¿æŒä¸€è‡´ï¼Œå¦‚æœ<strong>nginxè®¾ç½®å°äº†ï¼Œä¼šå‡ºç°â€œä¸Šä¼ å¤±è´¥â€çš„ç»“æœï¼</strong></p></blockquote><h2 id="æ­¥éª¤-4-é‡æ–°åŠ è½½-nginx">æ­¥éª¤ 4: é‡æ–°åŠ è½½ Nginx</h2><p>å¯ç”¨é…ç½®æ–‡ä»¶é€šè¿‡åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">ln</span> -s /etc/nginx/sites-available/clip.lthero.top /etc/nginx/sites-enabled/</span><br></pre></td></tr></table></figure><p>æ›´æ”¹é…ç½®åï¼Œéœ€è¦é‡æ–°åŠ è½½ Nginx ä»¥åº”ç”¨æ–°çš„é…ç½®ï¼š</p><blockquote><p>æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼Œå¦‚æœæœ‰warn!ç›´æ¥çœ‹â€œé‡åˆ°çš„é—®é¢˜â€éƒ¨åˆ†ï¼Œé‡æ–°åŠ è½½é…ç½®æ˜¯ä¸ä¸€å®šèƒ½workçš„</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -t  <span class="comment"># æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯</span></span><br><span class="line">sudo systemctl reload nginx  <span class="comment"># é‡æ–°åŠ è½½é…ç½®</span></span><br><span class="line"><span class="comment"># å¦‚æœé‡æ–°åŠ è½½é…ç½®åæ— æ•ˆï¼Œå¯ä»¥å°è¯•é‡å¯nginx</span></span><br><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-5-éªŒè¯-https">æ­¥éª¤ 5: éªŒè¯ HTTPS</h2><p>åœ¨æµè§ˆå™¨ä¸­è®¿é—® <code>https://clip.lthero.top</code> æ¥æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸã€‚ä½ åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°ä¸€ä¸ªå®‰å…¨é”æ ‡å¿—ï¼Œè¡¨æ˜è¿æ¥æ˜¯é€šè¿‡ HTTPS åŠ å¯†çš„ã€‚</p><h2 id="æ­¥éª¤-6-è‡ªåŠ¨ç»­è®¢è¯ä¹¦">æ­¥éª¤ 6: è‡ªåŠ¨ç»­è®¢è¯ä¹¦</h2><p>Letâ€™s Encrypt çš„è¯ä¹¦æœ‰æ•ˆæœŸä¸º90å¤©ï¼Œå› æ­¤å»ºè®®è®¾ç½®è‡ªåŠ¨ç»­è®¢ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot renew</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šæµ‹è¯•è¯ä¹¦ç»­è®¢è¿‡ç¨‹ã€‚å¦‚æœè¿™ä¸ªæµ‹è¯•æˆåŠŸï¼Œæ·»åŠ å®šæ—¶ä»»åŠ¡<code>crontab</code>ï¼š</p><p><code>crontab -e</code>å†å¡«å†™ä¸‹é¢å†…å®¹ï¼Œè¡¨ç¤ºæ¯æœˆç¬¬ä¸€å¤©ä¼šè‡ªåŠ¨æ‰§è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 0 1 * * /usr/local/bin/certbot renew --deploy-hook <span class="string">&quot;nginx -s reload&quot;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡<code>which certbot</code>æŸ¥çœ‹å…·ä½“ç¨‹åºä½ç½®<code>/usr/local/bin/certbot</code></p><p>ç»­ç­¾çš„è¯ä¹¦ä½ç½®<code>/etc/letsencrypt/renewal</code></p><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ çš„ç«™ç‚¹ <code>clip.lthero.top</code> ç°åœ¨åº”è¯¥èƒ½å¤Ÿå®‰å…¨åœ°ä½¿ç”¨ HTTPS è¿›è¡Œé€šä¿¡äº†ã€‚</p><p>å¦‚æœè¦æ¢crontabç¼–è¾‘å™¨ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select-editor</span><br></pre></td></tr></table></figure><h2 id="è§£æåˆ°é˜¿é‡Œäº‘dnsçš„ç”³è¯·æ–¹æ³•">è§£æåˆ°é˜¿é‡Œäº‘DNSçš„ç”³è¯·æ–¹æ³•</h2><blockquote><p>å¦‚æœåŸŸåè§£æåœ¨é˜¿é‡Œäº‘ï¼Œå¯ä»¥å®‰è£…è¿™ä¸ªæ’ä»¶ä»è€Œå®Œæˆè¯ä¹¦ç”³è¯·ï¼Œ<a href="https://github.com/tengattack/certbot-dns-aliyun">https://github.com/tengattack/certbot-dns-aliyun</a></p></blockquote><h3 id="credentials-file">Credentials File</h3><p>åœ¨æŸä¸ªç†Ÿæ‚‰çš„ç›®å½•ä¸‹ï¼ŒæŠŠä¸‹é¢çš„å†…å®¹å†™å…¥<code>credentials.ini</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dns_aliyun_access_key = 12345678</span><br><span class="line">dns_aliyun_access_key_secret = 1234567890abcdef1234567890abcdef</span><br></pre></td></tr></table></figure><p>dns_aliyun_access_keyæ˜¯é˜¿é‡Œäº‘è´¦å·çš„AccessKey ID</p><p>dns_aliyun_access_key_secretæ˜¯é˜¿é‡Œäº‘è´¦å·çš„AccessKey Secret</p><p>è¿™ä¸¤ä¸ªå€¼å¯ä»¥åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°-&gt;ç”¨æˆ·å¤´åƒ-&gt;accesskeysæŒ‰æŒ‡å¼•è·å–AccessKey/SecretKey</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 600 /path/to/credentials.ini</span><br></pre></td></tr></table></figure><h3 id="obtain-certificates">Obtain Certificates</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">certbot certonly \</span><br><span class="line">    --authenticator=dns-aliyun \</span><br><span class="line">    --dns-aliyun-credentials=<span class="string">&#x27;/path/to/credentials.ini&#x27;</span> \</span><br><span class="line">    -d <span class="string">&quot;*.example.com,example.com&quot;</span></span><br></pre></td></tr></table></figure><p>ç”³è¯·ä¸‹æ¥çš„è¯ä¹¦ä½ç½®</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/letsencrypt/archive/</span><br></pre></td></tr></table></figure><p>é€‚åˆé˜¿é‡Œäº‘çš„è‡ªåŠ¨å‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 0 1 * * /usr/local/bin/certbot renew --manual --preferred-challenges dns --manual-auth-hook <span class="string">&quot;alidns&quot;</span> --manual-cleanup-hook <span class="string">&quot;alidns clean&quot;</span> --deploy-hook <span class="string">&quot;nginx -s reload&quot;</span></span><br></pre></td></tr></table></figure><hr><h1 id="å¯†ç è®¤è¯">å¯†ç è®¤è¯</h1><p>è¦æ±‚ç”¨æˆ·åœ¨è®¿é—® <code>clip.lthero.top</code> åŸŸåæ—¶è¾“å…¥å¯†ç ï¼Œå¯ä»¥é€šè¿‡åœ¨ Nginx æœåŠ¡å™¨ä¸Šé…ç½®åŸºæœ¬çš„ HTTP è®¤è¯æ¥å®ç°ã€‚è¿™éœ€è¦è®¾ç½®ç”¨æˆ·åå’Œå¯†ç ï¼Œä»¥åŠä¿®æ”¹ Nginx çš„é…ç½®æ–‡ä»¶æ¥è¦æ±‚è®¤è¯ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†æ­¥éª¤ï¼š</p><h2 id="æ­¥éª¤-1-åˆ›å»ºå¯†ç æ–‡ä»¶">æ­¥éª¤ 1: åˆ›å»ºå¯†ç æ–‡ä»¶</h2><p>é¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªå¯†ç æ–‡ä»¶æ¥å­˜å‚¨ç”¨æˆ·åå’Œç»è¿‡åŠ å¯†çš„å¯†ç ã€‚è¿™é€šå¸¸ä½¿ç”¨ <code>htpasswd</code> å·¥å…·å®Œæˆï¼Œè¯¥å·¥å…·éš Apache æä¾›çš„ <code>apache2-utils</code> åŒ…ä¸€èµ·å®‰è£…ã€‚å¦‚æœä½ çš„ç³»ç»Ÿä¸Šè¿˜æ²¡æœ‰å®‰è£…è¿™ä¸ªåŒ…ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install apache2-utils</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œåˆ›å»ºå¯†ç æ–‡ä»¶å¹¶æ·»åŠ ç”¨æˆ·ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>clipadmin</code> çš„ç”¨æˆ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo htpasswd -c /etc/nginx/.htpasswd clipadmin</span><br></pre></td></tr></table></figure><p>ç³»ç»Ÿä¼šæç¤ºä½ è¾“å…¥å¹¶ç¡®è®¤å¯†ç ã€‚<code>-c</code> é€‰é¡¹ç”¨äºåˆ›å»ºæ–°æ–‡ä»¶ï¼Œå¦‚æœå·²ç»æœ‰æ–‡ä»¶å­˜åœ¨ä¸”ä»…éœ€è¦æ·»åŠ æˆ–æ›´æ–°ç”¨æˆ·ï¼Œä¸è¦ä½¿ç”¨ <code>-c</code> é€‰é¡¹ã€‚</p><h2 id="æ­¥éª¤-2-é…ç½®-nginx-ä»¥è¦æ±‚è®¤è¯">æ­¥éª¤ 2: é…ç½® Nginx ä»¥è¦æ±‚è®¤è¯</h2><p>ç¼–è¾‘ä½ çš„ Nginx é…ç½®æ–‡ä»¶ï¼Œé€šå¸¸ä½äº <code>/etc/nginx/sites-available/clip.lthero.top</code>ï¼Œåœ¨é€‚å½“çš„ <code>location</code> æˆ– <code>server</code> å—ä¸­æ·»åŠ è®¤è¯é…ç½®ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl http2;</span><br><span class="line">    <span class="attribute">server_name</span> clip.lthero.top;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /etc/letsencrypt/live/clip.lthero.top/fullchain.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /etc/letsencrypt/live/clip.lthero.top/privkey.pem;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">auth_basic</span> <span class="string">&quot;Restricted Content&quot;</span>;</span><br><span class="line">        <span class="attribute">auth_basic_user_file</span> /etc/nginx/.htpasswd;  <span class="comment"># æŒ‡å‘ä½ çš„å¯†ç æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://localhost:9501;</span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">&#x27;upgrade&#x27;</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_cache_bypass</span> <span class="variable">$http_upgrade</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>auth_basic</code> æŒ‡ä»¤å¯ç”¨åŸºæœ¬è®¤è¯ï¼Œå¹¶è®¾ç½®æç¤ºä¿¡æ¯ä¸º â€œRestricted Contentâ€ã€‚<code>auth_basic_user_file</code> æŒ‡å®šäº†åŒ…å«ç”¨æˆ·åå’Œå¯†ç çš„æ–‡ä»¶è·¯å¾„ã€‚</p><h2 id="æ­¥éª¤-3-é‡æ–°åŠ è½½-nginx">æ­¥éª¤ 3: é‡æ–°åŠ è½½ Nginx</h2><p>æ›´æ”¹é…ç½®åï¼Œç¡®ä¿æµ‹è¯• Nginx é…ç½®æ–‡ä»¶æ²¡æœ‰é”™è¯¯ï¼Œç„¶åé‡æ–°åŠ è½½ Nginx ä½¿é…ç½®ç”Ÿæ•ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -t</span><br><span class="line">sudo systemctl reload nginx</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-4-æµ‹è¯•è®¤è¯åŠŸèƒ½">æ­¥éª¤ 4: æµ‹è¯•è®¤è¯åŠŸèƒ½</h2><p>ç°åœ¨ï¼Œå½“ä½ è®¿é—® <code>https://clip.lthero.top</code> æ—¶ï¼Œæµè§ˆå™¨åº”è¯¥ä¼šå¼¹å‡ºä¸€ä¸ªç™»å½•å¯¹è¯æ¡†è¦æ±‚è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚åªæœ‰æ­£ç¡®è¾“å…¥è®¤è¯ä¿¡æ¯åï¼Œç”¨æˆ·æ‰èƒ½è®¿é—®ç«™ç‚¹å†…å®¹ã€‚</p><p>è¿™æ ·ä½ å°±å®Œæˆäº†ä¸º <code>clip.lthero.top</code> é…ç½®åŸºæœ¬ HTTP è®¤è¯çš„æ‰€æœ‰æ­¥éª¤ï¼Œå¢åŠ äº†ä¸€ä¸ªè®¿é—®è¯¥ç«™ç‚¹çš„å®‰å…¨å±‚ã€‚</p><h2 id="ä¿®æ”¹ç”¨æˆ·å">ä¿®æ”¹ç”¨æˆ·å</h2><p>å¯¹äºä¿®æ”¹ç”¨æˆ·åï¼Œ<code>htpasswd</code> å·¥å…·æœ¬èº«ä¸æä¾›ç›´æ¥ä¿®æ”¹ç”¨æˆ·åçš„é€‰é¡¹ã€‚ä½ éœ€è¦å…ˆåˆ é™¤æ—§çš„ç”¨æˆ·åï¼Œç„¶åæ·»åŠ æ–°çš„ç”¨æˆ·åä¸å¯†ç ã€‚è¿™é‡Œæ˜¯å¦‚ä½•æ“ä½œçš„ï¼š</p><ol><li><p><strong>åˆ é™¤æ—§ç”¨æˆ·å</strong>:<br>ä½¿ç”¨ <code>htpasswd</code> å‘½ä»¤åˆ é™¤æ—§çš„ç”¨æˆ·å <code>clipadmin</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo htpasswd -D /etc/nginx/.htpasswd clipadmin</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šä»æŒ‡å®šçš„å¯†ç æ–‡ä»¶ä¸­åˆ é™¤ <code>clipadmin</code> ç”¨æˆ·ã€‚</p></li><li><p><strong>æ·»åŠ æ–°ç”¨æˆ·å</strong>:<br>ç°åœ¨ï¼Œä½ å¯ä»¥æ·»åŠ æ–°çš„ç”¨æˆ·å <code>lthero</code>ï¼Œå¹¶ä¸ºå…¶è®¾ç½®å¯†ç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo htpasswd -b /etc/nginx/.htpasswd lthero æ–°å¯†ç </span><br></pre></td></tr></table></figure><p><code>-b</code> å‚æ•°å…è®¸ä½ ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­æä¾›å¯†ç ï¼Œè¿™å¯ä»¥ç®€åŒ–è„šæœ¬ä¸­çš„ä½¿ç”¨ã€‚ä½†è¯·æ³¨æ„ï¼Œè¿™ç§æ–¹å¼å¯èƒ½ä¼šå¯¼è‡´å¯†ç æš´éœ²åœ¨å†å²è®°å½•ä¸­ã€‚å¦‚æœå®‰å…¨æ˜¯ä¸€ä¸ªå…³æ³¨ç‚¹ï¼Œåº”è¯¥çœç•¥ <code>-b</code> å‚æ•°ï¼Œå‘½ä»¤å°†æç¤ºä½ è¾“å…¥å¯†ç ã€‚</p></li></ol><h3 id="ç¡®ä¿-nginx-ä½¿ç”¨æ›´æ–°çš„å¯†ç æ–‡ä»¶">ç¡®ä¿ Nginx ä½¿ç”¨æ›´æ–°çš„å¯†ç æ–‡ä»¶</h3><p>å®Œæˆç”¨æˆ·åæ›´æ–°åï¼Œæ— éœ€ä¿®æ”¹ Nginx çš„é…ç½®ï¼Œåªè¦ç¡®ä¿ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ª <code>.htpasswd</code> æ–‡ä»¶ã€‚ä½ å¯ä»¥é€šè¿‡é‡è½½ Nginx æ¥ç¡®ä¿æ‰€æœ‰è®¾ç½®éƒ½æ˜¯æœ€æ–°çš„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -t  <span class="comment"># æ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">sudo systemctl reload nginx  <span class="comment"># åº”ç”¨æ›´æ”¹</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å®Œæˆäº†ç”¨æˆ·åçš„æ›´æ”¹ï¼Œç”¨æˆ·åœ¨è®¿é—® <code>clip.lthero.top</code> æ—¶ç°åœ¨éœ€è¦ä½¿ç”¨æ–°çš„ç”¨æˆ·å <code>lthero</code> å’Œå…¶å¯†ç è¿›è¡Œè®¤è¯ã€‚</p><hr><h1 id="å‘½ä»¤è¡Œä¸Šä¼ æ–‡ä»¶-ä¸Šä¼ å†…å®¹">å‘½ä»¤è¡Œä¸Šä¼ æ–‡ä»¶|ä¸Šä¼ å†…å®¹</h1><h2 id="curl-ä¸Šä¼ æ–‡å­—å†…å®¹">ã€curlã€‘ä¸Šä¼ æ–‡å­—å†…å®¹</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST -H <span class="string">&quot;Content-Type: text/plain&quot;</span> -d <span class="string">&quot;è¿™é‡Œæ˜¯æ‚¨è¦å‘é€çš„æ–‡æœ¬&quot;</span> https://clip.lthero.top/text?room=<span class="built_in">test</span></span><br></pre></td></tr></table></figure><ul><li><code>?room</code>å‚æ•°ä¸€å®šè¦æœ‰</li><li><code>?room=</code> è¡¨ç¤ºå…¬å…±æˆ¿é—´</li><li><code>?room=test</code>åˆ™æ˜¯ä¸Šä¼ åˆ°testæˆ¿é—´</li></ul><h2 id="python-ä¸Šä¼ æ–‡å­—å†…å®¹">ã€pythonã€‘ä¸Šä¼ æ–‡å­—å†…å®¹</h2><p><code>upload_text.py</code></p><blockquote><p>æ”¯æŒåŒæ—¶ä¸Šä¼ å¤šæ®µå†…å®¹ï¼Œæ”¯æŒä¸­æ–‡ï¼Œæ”¯æŒä»æ ‡å‡†è¾“å…¥æµä½œå‚æ•°å¦‚echo, cat</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_text</span>(<span class="params">text_url, data, room</span>):</span><br><span class="line">    text_url += <span class="string">f&quot;?room=<span class="subst">&#123;room&#125;</span>&quot;</span></span><br><span class="line">    headers = &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain; charset=utf-8&#x27;</span>&#125;</span><br><span class="line">    response = requests.post(text_url, data=data.encode(<span class="string">&#x27;utf-8&#x27;</span>), headers=headers)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    parser = argparse.ArgumentParser(description=<span class="string">&#x27;Send text to a specified room via the web API.&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;data&#x27;</span>, nargs=<span class="string">&#x27;*&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">&#x27;The text data to send directly as arguments.&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--room&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="string">&quot;&quot;</span>, <span class="built_in">help</span>=<span class="string">&#x27;The name of the room (optional).&#x27;</span>)</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line">upload_url = <span class="string">&#x27;https://clip.lthero.top&#x27;</span></span><br><span class="line">    text_url = upload_url+<span class="string">&#x27;/text&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Handle multiple command-line arguments or single stdin input</span></span><br><span class="line">    <span class="keyword">if</span> args.data:</span><br><span class="line">        <span class="comment"># If data arguments are provided, send each one</span></span><br><span class="line">        <span class="keyword">for</span> data <span class="keyword">in</span> args.data:</span><br><span class="line">            response = send_text(text_url, data, args.room)</span><br><span class="line">            <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;å‘é€æˆåŠŸ: <span class="subst">&#123;data&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;å‘é€å¤±è´¥ï¼ŒçŠ¶æ€ç  <span class="subst">&#123;response.status_code&#125;</span>: <span class="subst">&#123;response.text&#125;</span>, å†…å®¹: <span class="subst">&#123;data&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">elif</span> <span class="keyword">not</span> sys.stdin.isatty():</span><br><span class="line">        <span class="comment"># If no data arguments but stdin has data</span></span><br><span class="line">        data = sys.stdin.read().strip()</span><br><span class="line">        <span class="comment">#for data in datas:</span></span><br><span class="line">        <span class="keyword">if</span> data:</span><br><span class="line">            response = send_text(text_url, data, args.room)</span><br><span class="line">            <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;å‘é€æˆåŠŸ: <span class="subst">&#123;data&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;å‘é€å¤±è´¥ï¼ŒçŠ¶æ€ç  <span class="subst">&#123;response.status_code&#125;</span>: <span class="subst">&#123;response.text&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æœªæ¥æ”¶åˆ°å¾…å‘é€çš„æ•°æ®ï¼Œè¯·ä»æ ‡å‡†è¾“å…¥æµæˆ–ä»å‚æ•°ä¼ å…¥æ•°æ®.&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨å‘½ä»¤ï¼š</li><li><code>python upload_text.py 1234 </code> ä¸Šä¼ 1234åˆ°å…¬å…±æˆ¿é—´</li><li><code>python upload_text.py  &quot;è¿™æ˜¯ç¬¬ä¸€æ¡æ¶ˆæ¯&quot; &quot;è¿™æ˜¯ç¬¬äºŒæ¡æ¶ˆæ¯&quot; --room test</code>   ä¸Šä¼ &quot;<strong>è¿™æ˜¯ç¬¬ä¸€æ¡æ¶ˆæ¯</strong>&quot; &quot;<strong>è¿™æ˜¯ç¬¬äºŒæ¡æ¶ˆæ¯</strong>&quot;åˆ°testæˆ¿é—´</li><li><code>echo &quot;11111111&quot; &quot;22222&quot;| python upload_text.py</code> ä»echoä¼ è¾“å¤šæ¬¡æ•°æ®åˆ°upload_text.py</li><li><code>cat upload_text.py | python upload_text.py --room lthero</code> ä»catä¼ è¾“æ•°æ®åˆ°upload_text.py</li></ul><h2 id="python-ä¸Šä¼ æ–‡ä»¶">ã€pythonã€‘ä¸Šä¼ æ–‡ä»¶</h2><p><code>upload_file.py</code></p><h3 id="æ— è¿›åº¦æ¡ç‰ˆæœ¬">æ— è¿›åº¦æ¡ç‰ˆæœ¬</h3><blockquote><p>æ”¯æŒåŒæ—¶ä¸Šä¼ å¤šä¸ªæ–‡ä»¶</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">upload_file</span>(<span class="params">url, file_paths, room</span>):</span><br><span class="line">    <span class="keyword">for</span> file_path <span class="keyword">in</span> file_paths:</span><br><span class="line">        file_name = os.path.basename(file_path)</span><br><span class="line">        file_size = os.path.getsize(file_path)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–ä¸Šä¼ </span></span><br><span class="line">        init_response = requests.post(<span class="string">f&#x27;<span class="subst">&#123;url&#125;</span>/upload&#x27;</span>, data=file_name, headers=&#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span>&#125;)</span><br><span class="line">        <span class="keyword">if</span> init_response.status_code != <span class="number">200</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;åˆå§‹åŒ–å¤±è´¥: <span class="subst">&#123;file_name&#125;</span>, <span class="subst">&#123;init_response.text&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        </span><br><span class="line">        uuid = init_response.json()[<span class="string">&#x27;result&#x27;</span>][<span class="string">&#x27;uuid&#x27;</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åˆ†å—ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">        chunk_size = <span class="number">12582912</span>  <span class="comment"># 12MB</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            uploaded_size = <span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> uploaded_size &lt; file_size:</span><br><span class="line">                chunk = f.read(chunk_size)</span><br><span class="line">                chunk_response = requests.post(<span class="string">f&#x27;<span class="subst">&#123;url&#125;</span>/upload/chunk/<span class="subst">&#123;uuid&#125;</span>&#x27;</span>, data=chunk, headers=&#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/octet-stream&#x27;</span>&#125;)</span><br><span class="line">                <span class="keyword">if</span> chunk_response.status_code != <span class="number">200</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;ä¸Šä¼ å—å¤±è´¥: <span class="subst">&#123;file_name&#125;</span>, <span class="subst">&#123;chunk_response.text&#125;</span>&quot;</span>)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                uploaded_size += <span class="built_in">len</span>(chunk)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å®Œæˆä¸Šä¼ </span></span><br><span class="line">        finish_response = requests.post(<span class="string">f&#x27;<span class="subst">&#123;url&#125;</span>/upload/finish/<span class="subst">&#123;uuid&#125;</span>&#x27;</span>, params=&#123;<span class="string">&#x27;room&#x27;</span>: room&#125;)</span><br><span class="line">        <span class="keyword">if</span> finish_response.status_code != <span class="number">200</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;å®Œæˆä¸Šä¼ å¤±è´¥: <span class="subst">&#123;file_name&#125;</span>, <span class="subst">&#123;finish_response.text&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;æ–‡ä»¶ä¸Šä¼ æˆåŠŸ: <span class="subst">&#123;file_name&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    parser = argparse.ArgumentParser(description=<span class="string">&#x27;File Upload Script&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;file_paths&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, nargs=<span class="string">&#x27;+&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;Path(s) to the files to be uploaded&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--room&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="string">&#x27;&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;Room name for the upload context (optional)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    upload_url = <span class="string">&#x27;https://clip.lthero.top&#x27;</span></span><br><span class="line">    upload_file(upload_url, args.file_paths, args.room)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨å‘½ä»¤ï¼š</li><li><code>python upload_file.py /media/Stuff/config.json</code> ä¸Šä¼ config.jsonæ–‡ä»¶åˆ°å…¬å…±æˆ¿é—´</li><li><code>python upload_file.py /media/Stuff/config.json --room test </code> ä¸Šä¼ config.jsonæ–‡ä»¶åˆ°testæˆ¿é—´</li><li><code>python upload_file.py file1.txt file2.jpg file3.pdf --room test </code> ä¸Šä¼ å¤šä¸ªæ–‡ä»¶åˆ°testæˆ¿é—´</li><li><code>python upload_file.py file* --room test </code> æ”¯æŒ<strong>ç¬¦å·å†™æ³•</strong>ï¼Œä¸Šä¼ å¤šä¸ªæ–‡ä»¶ï¼ˆfile1.txt file2.jpg file3.pdfï¼‰åˆ°testæˆ¿é—´</li></ul><h3 id="æœ‰è¿›åº¦æ¡ç‰ˆæœ¬">æœ‰è¿›åº¦æ¡ç‰ˆæœ¬</h3><blockquote><p>å¿…é¡»åœ¨pythonå®‰è£…tqdmï¼Œå‘½ä»¤ï¼š<code>pip3 install tqdm</code>æˆ–<code>pip install tqdm</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">upload_file</span>(<span class="params">url, file_paths, room</span>):</span><br><span class="line">    <span class="keyword">for</span> file_path <span class="keyword">in</span> file_paths:</span><br><span class="line">        file_name = os.path.basename(file_path)</span><br><span class="line">        file_size = os.path.getsize(file_path)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–ä¸Šä¼ </span></span><br><span class="line">        init_response = requests.post(<span class="string">f&#x27;<span class="subst">&#123;url&#125;</span>/upload&#x27;</span>, data=file_name, headers=&#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span>&#125;)</span><br><span class="line">        <span class="keyword">if</span> init_response.status_code != <span class="number">200</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;åˆå§‹åŒ–å¤±è´¥: <span class="subst">&#123;file_name&#125;</span>, <span class="subst">&#123;init_response.text&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        </span><br><span class="line">        uuid = init_response.json()[<span class="string">&#x27;result&#x27;</span>][<span class="string">&#x27;uuid&#x27;</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åˆ†å—ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">        chunk_size = <span class="number">12582912</span>  <span class="comment"># 12MB</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f, tqdm(total=file_size, unit=<span class="string">&#x27;B&#x27;</span>, unit_scale=<span class="literal">True</span>, desc=file_name) <span class="keyword">as</span> progress:</span><br><span class="line">            uploaded_size = <span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> uploaded_size &lt; file_size:</span><br><span class="line">                chunk = f.read(chunk_size)</span><br><span class="line">                chunk_response = requests.post(<span class="string">f&#x27;<span class="subst">&#123;url&#125;</span>/upload/chunk/<span class="subst">&#123;uuid&#125;</span>&#x27;</span>, data=chunk, headers=&#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/octet-stream&#x27;</span>&#125;)</span><br><span class="line">                <span class="keyword">if</span> chunk_response.status_code != <span class="number">200</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;ä¸Šä¼ å—å¤±è´¥: <span class="subst">&#123;file_name&#125;</span>, <span class="subst">&#123;chunk_response.text&#125;</span>&quot;</span>)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                chunk_size = <span class="built_in">len</span>(chunk)</span><br><span class="line">                uploaded_size += chunk_size</span><br><span class="line">                progress.update(chunk_size)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å®Œæˆä¸Šä¼ </span></span><br><span class="line">        finish_response = requests.post(<span class="string">f&#x27;<span class="subst">&#123;url&#125;</span>/upload/finish/<span class="subst">&#123;uuid&#125;</span>&#x27;</span>, params=&#123;<span class="string">&#x27;room&#x27;</span>: room&#125;)</span><br><span class="line">        <span class="keyword">if</span> finish_response.status_code != <span class="number">200</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;å®Œæˆä¸Šä¼ å¤±è´¥: <span class="subst">&#123;file_name&#125;</span>, <span class="subst">&#123;finish_response.text&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;æ–‡ä»¶ä¸Šä¼ æˆåŠŸ: <span class="subst">&#123;file_name&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    parser = argparse.ArgumentParser(description=<span class="string">&#x27;File Upload Script&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;file_paths&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, nargs=<span class="string">&#x27;+&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;Path(s) to the files to be uploaded&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--room&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="string">&#x27;&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;Room name for the upload context (optional)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    upload_url = <span class="string">&#x27;https://clip.lthero.top&#x27;</span></span><br><span class="line">    upload_file(upload_url, args.file_paths, args.room)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å…¨å±€ä½¿ç”¨">å…¨å±€ä½¿ç”¨</h2><p>è¦åœ¨å…¨å±€ä»»æ„è·¯å¾„éƒ½å¯ä»¥ä½¿ç”¨ <code>upload_file.py</code> å’Œ <code>upload_text.py</code> è¿™ä¸¤ä¸ªè„šæœ¬ï¼Œæ¶‰åŠåˆ°ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><h3 id="1-å°†è„šæœ¬ç§»åŠ¨åˆ°å…¨å±€å¯è®¿é—®çš„è·¯å¾„">1. å°†è„šæœ¬ç§»åŠ¨åˆ°å…¨å±€å¯è®¿é—®çš„è·¯å¾„</h3><p>å°†è„šæœ¬æ”¾åœ¨ä¸€ä¸ªæ‰€æœ‰ç”¨æˆ·éƒ½èƒ½è®¿é—®çš„ç›®å½•ä¸­ï¼Œå¦‚ <code>/usr/local/bin</code>ã€‚è¿™ä¸ªç›®å½•é€šå¸¸å·²ç»åœ¨å¤§å¤šæ•° Linux å‘è¡Œç‰ˆçš„ç¯å¢ƒå˜é‡ <code>$PATH</code> ä¸­ï¼Œæ‰€ä»¥æ”¾åœ¨è¿™é‡Œçš„ç¨‹åºå¯ä»¥è¢«å…¨å±€è°ƒç”¨ã€‚</p><p>é¦–å…ˆï¼Œç¡®ä¿è„šæœ¬å…·æœ‰å¯æ‰§è¡Œæƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x upload_file.py</span><br><span class="line"><span class="built_in">chmod</span> +x upload_text.py</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå°†å®ƒä»¬ç§»åŠ¨åˆ° <code>/usr/local/bin</code> ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">cp</span> upload_file.py /usr/local/bin/upf</span><br><span class="line">sudo <span class="built_in">cp</span> upload_text.py /usr/local/bin/upt</span><br></pre></td></tr></table></figure><h3 id="2-ä¿®æ”¹è„šæœ¬çš„é¦–è¡Œ-shebang">2. ä¿®æ”¹è„šæœ¬çš„é¦–è¡Œï¼ˆShebangï¼‰</h3><p>ä¿®æ”¹<code>/usr/local/bin/upf</code>å’Œ<code>/usr/local/bin/upt</code></p><p>ç¡®ä¿è„šæœ¬çš„ç¬¬ä¸€è¡ŒæŒ‡å‘ Python è§£é‡Šå™¨çš„æ­£ç¡®è·¯å¾„ã€‚è¿™è¢«ç§°ä¸º â€œshebangâ€ è¡Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä¸çŸ¥é“pythonè·¯å¾„ï¼Œä½¿ç”¨<code>which python</code>å¯ä»¥æŸ¥è¯¢å‡ºæ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">which</span> python</span><br><span class="line">/opt/anaconda3/bin/python</span><br></pre></td></tr></table></figure><p>åˆ™éœ€è¦æ·»åŠ <code>#!/opt/anaconda3/bin/python</code>åœ¨<code>/usr/local/bin/upt</code>é¦–è¡Œ</p><h3 id="3-æ›´æ–°ç¯å¢ƒå˜é‡-å¦‚æœéœ€è¦">3. æ›´æ–°ç¯å¢ƒå˜é‡ï¼ˆå¦‚æœéœ€è¦ï¼‰</h3><p>å¦‚æœå°†è„šæœ¬æ”¾åœ¨é™¤äº† <code>/usr/local/bin</code> ä¹‹å¤–çš„ç›®å½•ï¼Œå¯èƒ½éœ€è¦å°†è¯¥ç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ <code>$PATH</code> ä¸­ã€‚ç¼–è¾‘ shell é…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚ <code>~/.bashrc</code> æˆ– <code>~/.zshrc</code>ï¼‰ï¼Œæ·»åŠ ä»¥ä¸‹è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;<span class="variable">$PATH</span>:/path/to/your/script_directory&quot;</span></span><br></pre></td></tr></table></figure><p>ä¹‹åï¼Œè¿è¡Œ <code>source ~/.bashrc</code> ï¼ˆæˆ–å¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼‰ï¼Œä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆã€‚</p><h3 id="4-ç›´æ¥è°ƒç”¨è„šæœ¬">4. ç›´æ¥è°ƒç”¨è„šæœ¬</h3><p>å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œåº”è¯¥èƒ½å¤Ÿä»ä»»ä½•ç›®å½•ç›´æ¥è°ƒç”¨ <code>upload_file</code> å’Œ <code>upload_text</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><h4 id="ä¸Šä¼ æ–‡ä»¶">ä¸Šä¼ æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">upf somefile.txt --room <span class="string">&quot;test&quot;</span></span><br><span class="line">upf --room <span class="string">&quot;lthero&quot;</span> somefile.txt</span><br><span class="line">upf --room <span class="string">&quot;lthero&quot;</span> file*</span><br></pre></td></tr></table></figure><ul><li><code>file*</code>: æ”¯æŒé€šç¬¦å·</li><li><strong>ä¸æ”¯æŒ</strong>æ•´ä¸ªæ–‡ä»¶å¤¹ä¸Šä¼ </li></ul><h4 id="ä¸Šä¼ æ–‡å­—">ä¸Šä¼ æ–‡å­—</h4><p>æ”¯æŒå¤šç§å†™æ³•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">upt <span class="string">&quot;Here is some text&quot;</span> --room <span class="string">&quot;test&quot;</span></span><br><span class="line">upt --room <span class="string">&quot;test&quot;</span> <span class="string">&quot;Here is some text&quot;</span> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;11111111&quot;</span> <span class="string">&quot;22222&quot;</span> | upt</span><br><span class="line"><span class="built_in">cat</span> upload_file.py | upt</span><br></pre></td></tr></table></figure><hr><h1 id="å¾®ä¿¡">å¾®ä¿¡</h1><blockquote><p>é¡¹ç›®ï¼š<a href="https://github.com/wangrongding/wechat-bot">https://github.com/wangrongding/wechat-bot</a></p></blockquote><p>æŠŠ<code>config.js</code>ä¿®æ”¹æˆè¿™æ ·</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æœºå™¨äººçš„åç§°ï¼Œè¿™é‡Œæ˜¯ä¸ºäº†é˜²æ­¢ç¾¤èŠæ¶ˆæ¯å¤ªå¤šï¼Œæ‰€ä»¥åªæœ‰è‰¾ç‰¹æœºå™¨äººæ‰ä¼šå›å¤ï¼Œ</span></span><br><span class="line"><span class="comment">// è¿™é‡Œä¸è¦æŠŠ@å»æ‰ï¼Œåœ¨@åé¢åŠ ä¸Šä½ å¯åŠ¨æœºå™¨äººè´¦å·çš„å¾®ä¿¡åç§°</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> botName = <span class="string">&#x27;@Lthero&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> uploadTextURL=<span class="string">&#x27;https://clip.lthero.top/text&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> uploadFileURL=<span class="string">&#x27;https://clip.lthero.top&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¾¤èŠç™½åå•ï¼Œç™½åå•å†…çš„ç¾¤èŠæ‰ä¼šè‡ªåŠ¨å›å¤</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> roomWhiteList = [<span class="string">&#x27;LtheroG&#x27;</span>, <span class="string">&#x27;YesRight&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// è”ç³»äººç™½åå•ï¼Œç™½åå•å†…çš„è”ç³»äººæ‰ä¼šè‡ªåŠ¨å›å¤</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> aliasWhiteList = [<span class="string">&#x27;lthero&#x27;</span>,<span class="string">&#x27;Lthero_&#x27;</span>,<span class="string">&#x27;Jntm&#x27;</span>,<span class="string">&#x27;zbter&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®uptçš„åå­—ï¼Œå¦‚æœè®¾ç½®ä¸ºç©ºï¼Œåˆ™å‘é€ä»»æ„å†…å®¹éƒ½ä¼šè¢«ä¸Šä¼ ï¼Œå¦åˆ™ä»¥&quot;upt&quot;å¼€å¤´çš„æ–‡å­—æ‰ä¼šè¢«ä¸Šä¼ </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> uptName = <span class="string">&#x27;upt&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®ä¸Šä¼ åˆ°çš„roomçš„å‚æ•°åï¼Œupt --room test </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> up2roomName = <span class="string">&#x27;--room&#x27;</span></span><br></pre></td></tr></table></figure><p>æŠŠ<code>sendMessage.js</code>ä¿®æ”¹æˆè¿™æ ·</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; botName, roomWhiteList, aliasWhiteList, uploadTextURL,uploadFileURL,uptName,up2roomName&#125; <span class="keyword">from</span> <span class="string">&#x27;../../config.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; getServe &#125; <span class="keyword">from</span> <span class="string">&#x27;./serve.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">&#x27;fs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; promises &#125; <span class="keyword">from</span> <span class="string">&#x27;fs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Uploads text to a specified URL.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">text_url</span> - Base URL for the text upload.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">data</span> - Text data to be uploaded.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">cliproom</span> - The room parameter to be appended to the URL.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Promise</span>&#125; The HTTP response.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">send_text</span>(<span class="params">text_url, data, cliproom = <span class="string">&#x27;&#x27;</span></span>) &#123;</span><br><span class="line">  text_url += <span class="string">`?room=<span class="subst">$&#123;cliproom&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">post</span>(text_url, data, &#123;</span><br><span class="line">          <span class="attr">headers</span>: &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain; charset=utf-8&#x27;</span>&#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span> response;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;HTTP request failed:&#x27;</span>, error);</span><br><span class="line">      <span class="keyword">throw</span> error; <span class="comment">// Rethrow to handle it in the calling function</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">upText2ClipBoard</span>(<span class="params">uploadURL, isRoom, content ,remarkName=<span class="string">&quot;&quot;</span></span>)&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">let</span> args = content.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">    <span class="comment">// const cliproomIndex = args.indexOf(&#x27;--room&#x27;);</span></span><br><span class="line">    <span class="keyword">const</span> cliproomIndex = args.<span class="title function_">indexOf</span>(up2roomName);</span><br><span class="line">    <span class="keyword">let</span> data, cliproom;</span><br><span class="line">    cliproom=<span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (cliproomIndex &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">        cliproom = args[cliproomIndex + <span class="number">1</span>];</span><br><span class="line">        <span class="comment">// Combine all elements after &quot;--room &lt;roomname&gt;&quot; into the data string</span></span><br><span class="line">        data = args.<span class="title function_">slice</span>(cliproomIndex + <span class="number">2</span>).<span class="title function_">join</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// If there is no &quot;--room&quot;, treat all arguments after &quot;upt&quot; as data</span></span><br><span class="line">        data = args.<span class="title function_">slice</span>(<span class="number">1</span>).<span class="title function_">join</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">        cliproom = remarkName; <span class="comment">// Use a remarkName room if none specified</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">send_text</span>(uploadURL, data, cliproom);</span><br><span class="line">        <span class="keyword">if</span> (response.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(isRoom)&#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="string">`å†…å®¹ä¸Šä¼ æˆåŠŸ`</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="string">`å†…å®¹ä¸Šä¼ æˆåŠŸ, æˆ¿é—´: <span class="subst">$&#123;cliproom&#125;</span>`</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">`å†…å®¹ä¸Šä¼ å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š<span class="subst">$&#123;response.status&#125;</span>`</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`å‡ºé”™å•¦ï¼š<span class="subst">$&#123;error.message&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">checkAndUploadFile</span>(<span class="params">uploadURL, isRoom,filePath,remarkName=<span class="string">&#x27;&#x27;</span></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">      <span class="keyword">await</span> promises.<span class="title function_">access</span>(filePath);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ğŸŒ¸ğŸŒ¸ğŸŒ¸ æ–‡ä»¶æ”¶åˆ°ï¼Œå‡†å¤‡ä¸Šä¼ ï¼š<span class="subst">$&#123;filePath&#125;</span>`</span>);</span><br><span class="line">      <span class="comment">// å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ä¸Šä¼ </span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">await</span> <span class="title function_">uploadFile2ClipBoard</span>(uploadURL, isRoom, filePath,remarkName);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`æ–‡ä»¶æ£€æŸ¥å¤±è´¥æˆ–ä¸å­˜åœ¨: <span class="subst">$&#123;error&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">uploadFile2ClipBoard</span>(<span class="params">uploadUrl, isRoom, filePath,room=<span class="string">&#x27;&#x27;</span></span>) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> fileName = path.<span class="title function_">basename</span>(filePath);</span><br><span class="line">    <span class="comment">// console.log(&#x27;ğŸŒ¸ğŸŒ¸ğŸŒ¸ filePath: &#x27;, filePath)</span></span><br><span class="line">    <span class="comment">// console.log(&#x27;ğŸŒ¸ğŸŒ¸ğŸŒ¸ fileName: &#x27;, fileName)</span></span><br><span class="line">    <span class="keyword">const</span> fileSize = fs.<span class="title function_">statSync</span>(filePath).<span class="property">size</span>;</span><br><span class="line">    <span class="comment">// console.log(&#x27;ğŸŒ¸ğŸŒ¸ğŸŒ¸ fileSize: &#x27;, fileSize)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// Initialize upload</span></span><br><span class="line">        <span class="keyword">const</span> initUrl = <span class="string">`<span class="subst">$&#123;uploadUrl&#125;</span>/upload`</span>;</span><br><span class="line">        <span class="comment">// console.log(&#x27;ğŸŒ¸ğŸŒ¸ğŸŒ¸ initUrl: &#x27;, initUrl)</span></span><br><span class="line">        <span class="keyword">const</span> initResponse = <span class="keyword">await</span> axios.<span class="title function_">post</span>(initUrl, fileName, &#123;</span><br><span class="line">            <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span> &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// console.log(&#x27;ğŸŒ¸ğŸŒ¸ğŸŒ¸ initResponse: &#x27;, initResponse)</span></span><br><span class="line">        <span class="keyword">if</span> (initResponse.<span class="property">status</span> !== <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`åˆå§‹åŒ–å¤±è´¥: <span class="subst">$&#123;initResponse.data&#125;</span>_<span class="subst">$&#123;initResponse.status&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> uuid = initResponse.<span class="property">data</span>.<span class="property">result</span>.<span class="property">uuid</span>;</span><br><span class="line">        <span class="keyword">const</span> chunkSize = <span class="number">12582912</span>; <span class="comment">// 12 MB</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Read and upload the file in chunks</span></span><br><span class="line">        <span class="keyword">const</span> stream = fs.<span class="title function_">createReadStream</span>(filePath, &#123; <span class="attr">highWaterMark</span>: chunkSize &#125;);</span><br><span class="line">        <span class="keyword">let</span> uploadedSize = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> chunk <span class="keyword">of</span> stream) &#123;</span><br><span class="line">            <span class="keyword">const</span> chunkUrl = <span class="string">`<span class="subst">$&#123;uploadUrl&#125;</span>/upload/chunk/<span class="subst">$&#123;uuid&#125;</span>`</span>;</span><br><span class="line">            <span class="keyword">const</span> chunkResponse = <span class="keyword">await</span> axios.<span class="title function_">post</span>(chunkUrl, chunk, &#123;</span><br><span class="line">                <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/octet-stream&#x27;</span> &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">if</span> (chunkResponse.<span class="property">status</span> !== <span class="number">200</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`åˆ†å—ä¸Šä¼ å¤±è´¥: <span class="subst">$&#123;chunkResponse.data&#125;</span>`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            uploadedSize += chunk.<span class="property">length</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Complete the upload</span></span><br><span class="line">        <span class="keyword">const</span> finishUrl = <span class="string">`<span class="subst">$&#123;uploadUrl&#125;</span>/upload/finish/<span class="subst">$&#123;uuid&#125;</span>`</span>;</span><br><span class="line">        <span class="keyword">const</span> finishParams = &#123; <span class="attr">params</span>: &#123; room &#125; &#125;;</span><br><span class="line">        <span class="keyword">const</span> finishResponse = <span class="keyword">await</span> axios.<span class="title function_">post</span>(finishUrl, <span class="literal">null</span>, finishParams);</span><br><span class="line">        <span class="keyword">if</span> (finishResponse.<span class="property">status</span> !== <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`Finish upload failed: <span class="subst">$&#123;finishResponse.data&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">await</span> promises.<span class="title function_">unlink</span>(filePath);</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ğŸŒ¸ğŸŒ¸ğŸŒ¸ æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼æˆ¿é—´: <span class="subst">$&#123;room&#125;</span>`</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ğŸŒ¸ğŸŒ¸ğŸŒ¸ æœ¬åœ°æ–‡ä»¶åˆ é™¤æˆåŠŸï¼&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span>(isRoom)&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">`æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼ <span class="subst">$&#123;fileName&#125;</span>`</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼ <span class="subst">$&#123;fileName&#125;</span> , æˆ¿é—´: <span class="subst">$&#123;room&#125;</span>`</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Error uploading file: <span class="subst">$&#123;fileName&#125;</span>, <span class="subst">$&#123;error&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`Error uploading file: <span class="subst">$&#123;fileName&#125;</span>, <span class="subst">$&#123;error&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Unknown = 0,</span></span><br><span class="line"><span class="comment">// Attachment = 1, // Attach(6),</span></span><br><span class="line"><span class="comment">// Audio = 2, // Audio(1), Voice(34)</span></span><br><span class="line"><span class="comment">// Contact = 3, // ShareCard(42)</span></span><br><span class="line"><span class="comment">// ChatHistory = 4, // ChatHistory(19)</span></span><br><span class="line"><span class="comment">// Emoticon = 5, // Sticker: Emoticon(15), Emoticon(47)</span></span><br><span class="line"><span class="comment">// Image = 6, // Img(2), Image(3)</span></span><br><span class="line"><span class="comment">// Text = 7, // Text(1)</span></span><br><span class="line"><span class="comment">// Location = 8, // Location(48)</span></span><br><span class="line"><span class="comment">// MiniProgram = 9, // MiniProgram(33)</span></span><br><span class="line"><span class="comment">// GroupNote = 10, // GroupNote(53)</span></span><br><span class="line"><span class="comment">// Transfer = 11, // Transfers(2000)</span></span><br><span class="line"><span class="comment">// RedEnvelope = 12, // RedEnvelopes(2001)</span></span><br><span class="line"><span class="comment">// Recalled = 13, // Recalled(10002)</span></span><br><span class="line"><span class="comment">// Url = 14, // Url(5)</span></span><br><span class="line"><span class="comment">// Video = 15, // Video(4), Video(43)</span></span><br><span class="line"><span class="comment">// Post = 16, // Moment, Channel, Tweet, etc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é»˜è®¤æ¶ˆæ¯å‘é€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">msg</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">bot</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ServiceType æœåŠ¡ç±»å‹ &#x27;GPT&#x27; | &#x27;Kimi&#x27;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;void&gt;</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">defaultMessage</span>(<span class="params">msg, bot, ServiceType = <span class="string">&#x27;GPT&#x27;</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> getReply = <span class="title function_">getServe</span>(<span class="title class_">ServiceType</span>)</span><br><span class="line">  <span class="keyword">const</span> contact = msg.<span class="title function_">talker</span>() <span class="comment">// å‘æ¶ˆæ¯äºº</span></span><br><span class="line">  <span class="keyword">const</span> receiver = msg.<span class="title function_">to</span>() <span class="comment">// æ¶ˆæ¯æ¥æ”¶äºº</span></span><br><span class="line">  <span class="keyword">const</span> content = msg.<span class="title function_">text</span>() <span class="comment">// æ¶ˆæ¯å†…å®¹</span></span><br><span class="line">  <span class="keyword">const</span> room = msg.<span class="title function_">room</span>() <span class="comment">// æ˜¯å¦æ˜¯ç¾¤æ¶ˆæ¯</span></span><br><span class="line">  <span class="keyword">const</span> roomName = (<span class="keyword">await</span> room?.<span class="title function_">topic</span>()) || <span class="literal">null</span> <span class="comment">// ç¾¤åç§°</span></span><br><span class="line">  <span class="keyword">const</span> alias = (<span class="keyword">await</span> contact.<span class="title function_">alias</span>()) || (<span class="keyword">await</span> contact.<span class="title function_">name</span>()) <span class="comment">// å‘æ¶ˆæ¯äººæ˜µç§°</span></span><br><span class="line">  <span class="keyword">const</span> remarkName = <span class="keyword">await</span> contact.<span class="title function_">alias</span>() <span class="comment">// å¤‡æ³¨åç§°</span></span><br><span class="line">  <span class="keyword">const</span> name = <span class="keyword">await</span> contact.<span class="title function_">name</span>() <span class="comment">// å¾®ä¿¡åç§°</span></span><br><span class="line">  <span class="keyword">const</span> isText = msg.<span class="title function_">type</span>() === bot.<span class="property">Message</span>.<span class="property">Type</span>.<span class="property">Text</span> <span class="comment">// æ¶ˆæ¯ç±»å‹æ˜¯å¦ä¸ºæ–‡æœ¬</span></span><br><span class="line">  <span class="keyword">const</span> isRoom = roomWhiteList.<span class="title function_">includes</span>(roomName) &amp;&amp; content.<span class="title function_">includes</span>(<span class="string">`<span class="subst">$&#123;botName&#125;</span>`</span>) <span class="comment">// æ˜¯å¦åœ¨ç¾¤èŠç™½åå•å†…å¹¶ä¸”è‰¾ç‰¹äº†æœºå™¨äºº</span></span><br><span class="line">  <span class="keyword">const</span> isAlias = aliasWhiteList.<span class="title function_">includes</span>(remarkName) || aliasWhiteList.<span class="title function_">includes</span>(name) <span class="comment">// å‘æ¶ˆæ¯çš„äººæ˜¯å¦åœ¨è”ç³»äººç™½åå•å†…</span></span><br><span class="line">  <span class="keyword">const</span> isBotSelf = botName === remarkName || botName === name <span class="comment">// æ˜¯å¦æ˜¯æœºå™¨äººè‡ªå·±</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// TODO ä½ ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ä¿®æ”¹è¿™é‡Œçš„é€»è¾‘</span></span><br><span class="line">  <span class="keyword">if</span> (isBotSelf) <span class="keyword">return</span> <span class="comment">// å¦‚æœæ˜¯æœºå™¨äººè‡ªå·±å‘é€çš„æ¶ˆæ¯</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ğŸŒ¸ğŸŒ¸ğŸŒ¸ / msg_type: &#x27;</span>, msg.<span class="title function_">type</span>())</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if (content.startsWith(&#x27;/upf&#x27;)) &#123;</span></span><br><span class="line">    <span class="comment">//   console.log(&#x27;ğŸŒ¸ğŸŒ¸ğŸŒ¸ / msg_type: &#x27;, msg.type())</span></span><br><span class="line">    <span class="comment">//   console.log(&#x27;ğŸŒ¸ğŸŒ¸ğŸŒ¸ / upf: &#x27;, msg)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> ( isAlias &amp;&amp; msg.<span class="title function_">type</span>() === bot.<span class="property">Message</span>.<span class="property">Type</span>.<span class="property">Attachment</span> || msg.<span class="title function_">type</span>()===<span class="number">6</span> ||msg.<span class="title function_">type</span>()===<span class="number">2</span> ||msg.<span class="title function_">type</span>()===<span class="number">15</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ğŸŒ¸ğŸŒ¸ğŸŒ¸ æ”¶åˆ°æ–‡ä»¶æ¶ˆæ¯ï¼Œå‡†å¤‡ä¸‹è½½...&#x27;</span>);</span><br><span class="line">      <span class="comment">// åˆ›å»ºæ–‡ä»¶æµ</span></span><br><span class="line">      <span class="keyword">const</span> fileBox = <span class="keyword">await</span> msg.<span class="title function_">toFileBox</span>();</span><br><span class="line">      <span class="keyword">const</span> path = <span class="string">&quot;/app/src/TempFiles/&quot;</span></span><br><span class="line">      <span class="keyword">const</span> fileName = path+fileBox.<span class="property">name</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ä¿å­˜æ–‡ä»¶åˆ°æœ¬åœ°</span></span><br><span class="line">      <span class="keyword">await</span> fileBox.<span class="title function_">toFile</span>(fileName, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ£€æŸ¥æ–‡ä»¶å­˜åœ¨å¹¶ä¸Šä¼ </span></span><br><span class="line">      <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">checkAndUploadFile</span>(uploadFileURL,room,fileName,remarkName);</span><br><span class="line">      <span class="keyword">if</span> (room)&#123;</span><br><span class="line">        <span class="keyword">await</span> room.<span class="title function_">say</span>(response);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">await</span> contact.<span class="title function_">say</span>(response);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="comment">// åŒºåˆ†ç¾¤èŠå’Œç§èŠ</span></span><br><span class="line">    <span class="keyword">if</span> (isText &amp;&amp; isRoom &amp;&amp; room ) &#123;</span><br><span class="line">      <span class="keyword">const</span> question = <span class="keyword">await</span> msg.<span class="title function_">mentionText</span>() || content.<span class="title function_">replace</span>(<span class="string">`<span class="subst">$&#123;botName&#125;</span>`</span>, <span class="string">&#x27;&#x27;</span>) <span class="comment">// å»æ‰è‰¾ç‰¹çš„æ¶ˆæ¯ä¸»ä½“</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ğŸŒ¸ğŸŒ¸ğŸŒ¸ / question: &#x27;</span>, question)</span><br><span class="line">      <span class="comment">// ä½¿ç”¨uptä¸Šä¼ æ–‡å­—ï¼Œç§èŠå›å¤</span></span><br><span class="line">      <span class="comment">// if (question.startsWith(&#x27;upt&#x27;)) &#123;</span></span><br><span class="line">      <span class="keyword">if</span> (question.<span class="title function_">startsWith</span>(uptName)) &#123;</span><br><span class="line">        <span class="comment">// æ— contract</span></span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">upText2ClipBoard</span>(uploadTextURL,room, question, remarkName)</span><br><span class="line">        <span class="keyword">await</span> room.<span class="title function_">say</span>(response)</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨gpt</span></span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">getReply</span>(question,<span class="string">&quot;gpt3&quot;</span>)</span><br><span class="line">        <span class="keyword">await</span> room.<span class="title function_">say</span>(response)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç§äººèŠå¤©ï¼Œç™½åå•å†…çš„ç›´æ¥å‘é€</span></span><br><span class="line">    <span class="keyword">if</span> (isText &amp;&amp; isAlias &amp;&amp; !room ) &#123;</span><br><span class="line">      <span class="comment">// ç”¨gpt</span></span><br><span class="line">      <span class="keyword">if</span>(content.<span class="title function_">startsWith</span>(<span class="string">&#x27;gpt&#x27;</span>))&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ğŸŒ¸ğŸŒ¸ğŸŒ¸ / content: &#x27;</span>, content)</span><br><span class="line">        <span class="keyword">let</span> args = content.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">getReply</span>(content,args[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">await</span> contact.<span class="title function_">say</span>(response)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// ä½¿ç”¨uptå‘½ä»¤ä¸Šä¼ æ–‡å­—</span></span><br><span class="line">      <span class="comment">// if (question.startsWith(&#x27;upt&#x27;)) &#123;</span></span><br><span class="line">      <span class="keyword">if</span> (content.<span class="title function_">startsWith</span>(uptName)) &#123;</span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">upText2ClipBoard</span>(uploadTextURL,room, content , remarkName);</span><br><span class="line">        <span class="keyword">await</span> contact.<span class="title function_">say</span>(response);</span><br><span class="line">      &#125;      </span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(e)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†ç‰‡æ¶ˆæ¯å‘é€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">message</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">bot</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;void&gt;</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">shardingMessage</span>(<span class="params">message, bot</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> talker = message.<span class="title function_">talker</span>()</span><br><span class="line">  <span class="keyword">const</span> isText = message.<span class="title function_">type</span>() === bot.<span class="property">Message</span>.<span class="property">Type</span>.<span class="property">Text</span> <span class="comment">// æ¶ˆæ¯ç±»å‹æ˜¯å¦ä¸ºæ–‡æœ¬</span></span><br><span class="line">  <span class="keyword">if</span> (talker.<span class="title function_">self</span>() || message.<span class="title function_">type</span>() &gt; <span class="number">10</span> || (talker.<span class="title function_">name</span>() === <span class="string">&#x27;å¾®ä¿¡å›¢é˜Ÿ&#x27;</span> &amp;&amp; isText)) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> text = message.<span class="title function_">text</span>()</span><br><span class="line">  <span class="keyword">const</span> room = message.<span class="title function_">room</span>()</span><br><span class="line">  <span class="keyword">if</span> (!room) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Chat GPT Enabled User: <span class="subst">$&#123;talker.name()&#125;</span>`</span>)</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">getChatGPTReply</span>(text)</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">trySay</span>(talker, response)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> realText = <span class="title function_">splitMessage</span>(text)</span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯ç¾¤èŠä½†ä¸æ˜¯æŒ‡å®šè‰¾ç‰¹äººé‚£ä¹ˆå°±ä¸è¿›è¡Œå‘é€æ¶ˆæ¯</span></span><br><span class="line">  <span class="keyword">if</span> (text.<span class="title function_">indexOf</span>(<span class="string">`<span class="subst">$&#123;botName&#125;</span>`</span>) === -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  realText = text.<span class="title function_">replace</span>(<span class="string">`<span class="subst">$&#123;botName&#125;</span>`</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> topic = <span class="keyword">await</span> room.<span class="title function_">topic</span>()</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">getChatGPTReply</span>(realText)</span><br><span class="line">  <span class="keyword">const</span> result = <span class="string">`<span class="subst">$&#123;realText&#125;</span>\n ---------------- \n <span class="subst">$&#123;response&#125;</span>`</span></span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">trySay</span>(room, result)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ†ç‰‡é•¿åº¦</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">SINGLE_MESSAGE_MAX_SIZE</span> = <span class="number">500</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‘é€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> talker å‘é€å“ªä¸ª  roomä¸ºç¾¤èŠç±» textä¸ºå•äºº</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">msg</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;void&gt;</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">trySay</span>(<span class="params">talker, msg</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> messages = []</span><br><span class="line">  <span class="keyword">let</span> message = msg</span><br><span class="line">  <span class="keyword">while</span> (message.<span class="property">length</span> &gt; <span class="variable constant_">SINGLE_MESSAGE_MAX_SIZE</span>) &#123;</span><br><span class="line">    messages.<span class="title function_">push</span>(message.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="variable constant_">SINGLE_MESSAGE_MAX_SIZE</span>))</span><br><span class="line">    message = message.<span class="title function_">slice</span>(<span class="variable constant_">SINGLE_MESSAGE_MAX_SIZE</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  messages.<span class="title function_">push</span>(message)</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> msg <span class="keyword">of</span> messages) &#123;</span><br><span class="line">    <span class="keyword">await</span> talker.<span class="title function_">say</span>(msg)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†ç»„æ¶ˆæ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">text</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;*&gt;</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">splitMessage</span>(<span class="params">text</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> realText = text</span><br><span class="line">  <span class="keyword">const</span> item = text.<span class="title function_">split</span>(<span class="string">&#x27;- - - - - - - - - - - - - - -&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (item.<span class="property">length</span> &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    realText = item[item.<span class="property">length</span> - <span class="number">1</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> realText</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨.envæ–‡ä»¶ä¸­</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># .env</span><br><span class="line"></span><br><span class="line"># é€‰æ‹©model</span><br><span class="line">model=<span class="string">&quot;gpt-3&quot;</span></span><br><span class="line"># OpenAi çš„api key<span class="punctuation">,</span> å» https<span class="punctuation">:</span><span class="comment">//beta.openai.com/account/api-keys ä¸­ç”Ÿæˆä¸€ä¸ªå³å¯</span></span><br><span class="line">OPENAI_API_KEY=&#x27;sk-xxxxxxx&#x27;</span><br><span class="line"># endpointé»˜è®¤ç”¨https<span class="punctuation">:</span><span class="comment">//api.openai.com</span></span><br><span class="line"># API_ENDPOINT=&#x27;https<span class="punctuation">:</span><span class="comment">//api.openai.com&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Kimi çš„api key<span class="punctuation">,</span> å» https<span class="punctuation">:</span><span class="comment">//platform.moonshot.cn/console/api-keys</span></span><br><span class="line">KIMI_API_KEY=&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># ç§‘å¤§è®¯é£<span class="punctuation">,</span> å» https<span class="punctuation">:</span><span class="comment">//console.xfyun.cn/services</span></span><br><span class="line">XUNFEI_APP_ID=&#x27;&#x27;</span><br><span class="line">XUNFEI_API_KEY=&#x27;&#x27;</span><br><span class="line">XUNFEI_API_SECRET=&#x27;&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨openaiç›®å½•ä¸‹çš„index.jsä¿®æ”¹æˆ</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">import <span class="punctuation">&#123;</span> remark <span class="punctuation">&#125;</span> from &#x27;remark&#x27;</span><br><span class="line">import stripMarkdown from &#x27;strip-markdown&#x27;</span><br><span class="line">import <span class="punctuation">&#123;</span> Configuration<span class="punctuation">,</span> OpenAIApi <span class="punctuation">&#125;</span> from &#x27;openai&#x27;</span><br><span class="line">import axios from &#x27;axios&#x27;  <span class="comment">// å¼•å…¥axiosè¿›è¡ŒHTTPè¯·æ±‚</span></span><br><span class="line"></span><br><span class="line">import dotenv from &#x27;dotenv&#x27;</span><br><span class="line">const env = dotenv.config().parsed <span class="comment">// ç¯å¢ƒå‚æ•°</span></span><br><span class="line">const models=<span class="punctuation">&#123;</span><span class="attr">&quot;gpt4a&quot;</span><span class="punctuation">:</span><span class="string">&quot;gpt-4-all&quot;</span><span class="punctuation">,</span><span class="attr">&quot;gpt3&quot;</span><span class="punctuation">:</span><span class="string">&quot;gpt-3.5-turbo&quot;</span><span class="punctuation">,</span><span class="attr">&quot;gpt4t&quot;</span><span class="punctuation">:</span><span class="string">&quot;gpt-4-turbo-2024-04-09&quot;</span><span class="punctuation">,</span><span class="attr">&quot;gpt4&quot;</span><span class="punctuation">:</span><span class="string">&quot;gpt-4-0613&quot;</span><span class="punctuation">,</span><span class="attr">&quot;gpt&quot;</span><span class="punctuation">:</span><span class="string">&quot;gpt-3.5-turbo&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">const configuration = new Configuration(<span class="punctuation">&#123;</span></span><br><span class="line">  apiKey<span class="punctuation">:</span> env.OPENAI_API_KEY<span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span>)</span><br><span class="line">const openai = new OpenAIApi(configuration)</span><br><span class="line"></span><br><span class="line">export async function getGptReply(prompt<span class="punctuation">,</span>model=<span class="string">&quot;&quot;</span>) <span class="punctuation">&#123;</span></span><br><span class="line">  console.log(&#x27;ğŸš€ğŸš€ğŸš€ / prompt&#x27;<span class="punctuation">,</span> prompt)</span><br><span class="line">  <span class="comment">//let chosen_model = &#x27;text-davinci-003&#x27;</span></span><br><span class="line">  let chosen_model</span><br><span class="line">  if(model==<span class="string">&quot;&quot;</span>)<span class="punctuation">&#123;</span></span><br><span class="line">    chosen_model = env.model</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line">  else<span class="punctuation">&#123;</span></span><br><span class="line">    chosen_model = models<span class="punctuation">[</span>model<span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line">  let reply = &#x27;&#x27;</span><br><span class="line">  if (chosen_model == &#x27;text-davinci<span class="number">-003</span>&#x27;) <span class="punctuation">&#123;</span></span><br><span class="line">    console.log(&#x27;ğŸš€ğŸš€ğŸš€ / Using model&#x27;<span class="punctuation">,</span> chosen_model)</span><br><span class="line">    const response = await openai.createCompletion(<span class="punctuation">&#123;</span></span><br><span class="line">      model<span class="punctuation">:</span> chosen_model<span class="punctuation">,</span></span><br><span class="line">      prompt<span class="punctuation">:</span> prompt<span class="punctuation">,</span></span><br><span class="line">      temperature<span class="punctuation">:</span> <span class="number">0.8</span><span class="punctuation">,</span> <span class="comment">// æ¯æ¬¡è¿”å›çš„ç­”æ¡ˆçš„ç›¸ä¼¼åº¦0-1ï¼ˆ0ï¼šæ¯æ¬¡éƒ½ä¸€æ ·ï¼Œ1ï¼šæ¯æ¬¡éƒ½ä¸ä¸€æ ·ï¼‰</span></span><br><span class="line">      max_tokens<span class="punctuation">:</span> <span class="number">4</span>_000<span class="punctuation">,</span></span><br><span class="line">      top_p<span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      frequency_penalty<span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">      presence_penalty<span class="punctuation">:</span> <span class="number">0.6</span><span class="punctuation">,</span></span><br><span class="line">      stop<span class="punctuation">:</span> <span class="punctuation">[</span>&#x27; Human<span class="punctuation">:</span>&#x27;<span class="punctuation">,</span> &#x27; AI<span class="punctuation">:</span>&#x27;<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span>)</span><br><span class="line"></span><br><span class="line">    reply = markdownToText(response.data.choices<span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span>.text)</span><br><span class="line">  <span class="punctuation">&#125;</span> else if (chosen_model == &#x27;gpt<span class="number">-3.5</span>-turbo&#x27;) <span class="punctuation">&#123;</span></span><br><span class="line">    console.log(&#x27;ğŸš€ğŸš€ğŸš€ / Using model&#x27;<span class="punctuation">,</span> chosen_model)</span><br><span class="line">    const response = await openai.createChatCompletion(<span class="punctuation">&#123;</span></span><br><span class="line">      model<span class="punctuation">:</span> chosen_model<span class="punctuation">,</span></span><br><span class="line">      messages<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;system&quot;</span><span class="punctuation">,</span> content<span class="punctuation">:</span> <span class="string">&quot;You are a personal assistant.&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user&quot;</span><span class="punctuation">,</span> content<span class="punctuation">:</span> prompt <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span>)</span><br><span class="line"></span><br><span class="line">    reply = markdownToText(response.data.choices<span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span>.message.content)</span><br><span class="line">  <span class="punctuation">&#125;</span>else<span class="punctuation">&#123;</span></span><br><span class="line">    console.log(&#x27;ğŸš€ğŸš€ğŸš€ / Using model&#x27;<span class="punctuation">,</span> chosen_model)</span><br><span class="line"></span><br><span class="line">    const response = await axios.post(env.API_ENDPOINT<span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">      model<span class="punctuation">:</span> chosen_model<span class="punctuation">,</span></span><br><span class="line">      messages<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;system&quot;</span><span class="punctuation">,</span> content<span class="punctuation">:</span> <span class="string">&quot;You are a helpful assistant.&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user&quot;</span><span class="punctuation">,</span> content<span class="punctuation">:</span> prompt <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      max_tokens<span class="punctuation">:</span> <span class="number">1500</span><span class="punctuation">,</span></span><br><span class="line">      temperature<span class="punctuation">:</span> <span class="number">0.7</span><span class="punctuation">,</span></span><br><span class="line">      top_p<span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      frequency_penalty<span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">      presence_penalty<span class="punctuation">:</span> <span class="number">0.6</span><span class="punctuation">,</span></span><br><span class="line">      stop<span class="punctuation">:</span> <span class="punctuation">[</span>&#x27; Human<span class="punctuation">:</span>&#x27;<span class="punctuation">,</span> &#x27; AI<span class="punctuation">:</span>&#x27;<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">      headers<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        &#x27;Authorization&#x27;<span class="punctuation">:</span> `Bearer $<span class="punctuation">&#123;</span>env.OPENAI_API_KEY<span class="punctuation">&#125;</span>`<span class="punctuation">,</span> <span class="comment">// Make sure your API key is correctly set</span></span><br><span class="line">        &#x27;Content-Type&#x27;<span class="punctuation">:</span> &#x27;application/json&#x27;</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span>);</span><br><span class="line">    <span class="comment">// Extract and clean the markdown response</span></span><br><span class="line">    reply = markdownToText(response.data.choices<span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span>.message.content);</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line">  console.log(&#x27;ğŸš€ğŸš€ğŸš€ / reply&#x27;<span class="punctuation">,</span> reply)</span><br><span class="line">  return `$<span class="punctuation">&#123;</span>reply<span class="punctuation">&#125;</span>\nVia $<span class="punctuation">&#123;</span>chosen_model<span class="punctuation">&#125;</span>`</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">function markdownToText(markdown) <span class="punctuation">&#123;</span></span><br><span class="line">  return remark()</span><br><span class="line">    .use(stripMarkdown)</span><br><span class="line">    .processSync(markdown ?? &#x27;&#x27;)</span><br><span class="line">    .toString()</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œåœ¨src/wechaty/index.jsä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼Œä»è€Œåªä½¿ç”¨ChatGPTï¼Œä»¥é¿å…è¦ç”¨æˆ·é€‰æ‹©</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">  inquirer</span><br><span class="line">    <span class="title function_">handleStart</span>(<span class="string">&#x27;ChatGPT&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å®Œæˆåï¼Œè¿›è¡Œdockeræ‰“åŒ…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker build . -t wechat-bot</span><br></pre></td></tr></table></figure><p>è¿è¡Œdockerå®¹å™¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -d -it --<span class="built_in">rm</span> --name wechat-bot -v $(<span class="built_in">pwd</span>)/config.js:/app/config.js -v $(<span class="built_in">pwd</span>)/.env:/app/.env wechat-bot</span><br></pre></td></tr></table></figure><ul><li>è¿™é‡Œçš„-itä¸€å®šè¦åŠ ï¼Œå¦åˆ™è¿è¡Œåå¯èƒ½ä¼šè‡ªåŠ¨åœæ­¢</li></ul><p>éšåï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹æ—¥å¿—ï¼Œ<strong>è¿è¡Œæ—¶ä¼šè·³å‡ºæ¥äºŒç»´ç ï¼Œæ‰«ç ç™»å½•å³å¯</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker logs -f wechat-bot</span><br></pre></td></tr></table></figure><p>æˆ–ç”¨æˆ‘æ‰“åŒ…çš„é•œåƒ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³¨æ„ï¼Œè¿™é‡Œçš„latestä¸ä¸€å®šæ˜¯æœ€æ–°çš„</span></span><br><span class="line">sudo docker pull lthero1/wechat-bot-lthero:latest</span><br><span class="line"><span class="comment"># lthero1/wechat-bot-lthero:1.6   æ˜¯æœ€æ–°ç‰ˆæœ¬</span></span><br><span class="line">sudo docker run -d -it --<span class="built_in">rm</span> --name wechat-bot -v $(<span class="built_in">pwd</span>)/config.js:/app/config.js -v $(<span class="built_in">pwd</span>)/.env:/app/.env lthero1/wechat-bot-lthero:latest</span><br></pre></td></tr></table></figure><p>è¿è¡Œåæ•ˆæœ</p><ol><li>ç»™æœºå™¨äººå¾®ä¿¡è´¦å·å‘é€æ–‡ä»¶ã€å›¾åƒç­‰ä¼šç›´æ¥ä¸Šä¼ åˆ°<code>å¾®ä¿¡å¤‡æ³¨çš„</code>æˆ¿é—´</li><li>ä½¿ç”¨<code>upt --room test xxxxxxxxx</code> å¯ä»¥å°†å†…å®¹å‘é€åˆ°testæˆ¿é—´</li><li>ä½¿ç”¨<code>upt  xxxxxxxxx</code> å¯ä»¥å°†å†…å®¹å‘é€åˆ°å…¬å…±æˆ¿é—´</li><li>ç›´æ¥å‘é€å†…å®¹ä¼šä½¿ç”¨chatgpt3.5</li></ol><h1 id="ä»£ç çš„ä¿®æ”¹">ä»£ç çš„ä¿®æ”¹</h1><blockquote><p>åœ¨åŸä»£ç åŸºç¡€ä¸Šæ·»åŠ äº†æ”¯æŒmarkdownè¯­æ³•çš„åŠŸèƒ½</p></blockquote><p>SendText.vue</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;headline text--primary mb-4&quot;</span>&gt;å‘é€æ–‡æœ¬&lt;/div&gt;</span><br><span class="line">        &lt;v-textarea</span><br><span class="line">            outlined</span><br><span class="line">            dense</span><br><span class="line">            rows=<span class="string">&quot;6&quot;</span></span><br><span class="line">            :counter=<span class="string">&quot;<span class="variable">$root</span>.config.text.limit&quot;</span></span><br><span class="line">            placeholder=<span class="string">&quot;è¯·è¾“å…¥éœ€è¦å‘é€çš„æ–‡æœ¬&quot;</span></span><br><span class="line">            v-model=<span class="string">&quot;<span class="variable">$root</span>.send.text&quot;</span></span><br><span class="line">        &gt;&lt;/v-textarea&gt;</span><br><span class="line">        &lt;div v-html=<span class="string">&quot;renderedContent&quot;</span> class=<span class="string">&quot;rendered-markdown&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;text-right&quot;</span>&gt;</span><br><span class="line">            &lt;v-btn</span><br><span class="line">                color=<span class="string">&quot;primary&quot;</span></span><br><span class="line">                :block=<span class="string">&quot;<span class="variable">$vuetify</span>.breakpoint.smAndDown&quot;</span></span><br><span class="line">                :disabled=<span class="string">&quot;!<span class="variable">$root</span>.send.text || !<span class="variable">$root</span>.websocket || <span class="variable">$root</span>.send.text.length &gt; <span class="variable">$root</span>.config.text.limit&quot;</span></span><br><span class="line">                @click=<span class="string">&quot;send&quot;</span></span><br><span class="line">            &gt;å‘é€&lt;/v-btn&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.rendered-markdown &#123;</span><br><span class="line">    max-height: 300px; /* è®¾ç½®æœ€å¤§é«˜åº¦ï¼Œè¶…è¿‡è¿™ä¸ªé«˜åº¦çš„å†…å®¹å°†é€šè¿‡æ»šåŠ¨æ¡æ˜¾ç¤º */</span><br><span class="line">    overflow-y: auto; /* å‚ç›´æ–¹å‘ä¸Šï¼Œå¦‚æœå†…å®¹è¶…å‡ºåˆ™æ˜¾ç¤ºæ»šåŠ¨æ¡ */</span><br><span class="line">    padding: 10px; /* å¯é€‰ï¼Œä¸ºå†…å®¹æ·»åŠ ä¸€äº›å†…è¾¹è· */</span><br><span class="line">    border: 1px solid <span class="comment">#ccc; /* å¯é€‰ï¼Œä¸ºå®¹å™¨æ·»åŠ è¾¹æ¡†ï¼Œä½¿ä¹‹æ›´æ¸…æ™° */</span></span><br><span class="line">    background-color: <span class="comment">#f9f9f9; /* å¯é€‰ï¼Œè®¾ç½®èƒŒæ™¯é¢œè‰² */</span></span><br><span class="line">    margin-bottom: 10px; /* å¯é€‰ï¼Œä¸ºå®¹å™¨æ·»åŠ ä¸‹å¤–è¾¹è· */</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MarkdownIt from <span class="string">&#x27;markdown-it&#x27;</span>;</span><br><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">    name: <span class="string">&#x27;send-text&#x27;</span>,</span><br><span class="line">    <span class="function"><span class="title">data</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> &#123;</span><br><span class="line">            md: new MarkdownIt(),</span><br><span class="line">            renderedContent: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line">        // å½“æ–‡æœ¬å˜åŒ–æ—¶ï¼Œé‡æ–°æ¸²æŸ“ Markdown</span><br><span class="line">        <span class="string">&#x27;$root.send.text&#x27;</span>: <span class="keyword">function</span>(newVal) &#123;</span><br><span class="line">            this.renderedContent = this.md.render(newVal);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="function"><span class="title">send</span></span>() &#123;</span><br><span class="line">            this.<span class="variable">$http</span>.post(</span><br><span class="line">                <span class="string">&#x27;/text&#x27;</span>,</span><br><span class="line">                this.<span class="variable">$root</span>.send.text,</span><br><span class="line">                &#123;</span><br><span class="line">                    params: new URLSearchParams([[<span class="string">&#x27;room&#x27;</span>, this.<span class="variable">$root</span>.room]]),</span><br><span class="line">                    headers: &#123;</span><br><span class="line">                        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            ).<span class="keyword">then</span>(response =&gt; &#123;</span><br><span class="line">                this.<span class="variable">$toast</span>(<span class="string">&#x27;å‘é€æˆåŠŸ&#x27;</span>);</span><br><span class="line">                this.<span class="variable">$root</span>.send.text = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            &#125;).catch(error =&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (error.response &amp;&amp; error.response.data.msg) &#123;</span><br><span class="line">                    this.<span class="variable">$toast</span>(`å‘é€å¤±è´¥ï¼š<span class="variable">$&#123;error.response.data.msg&#125;</span>`);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    this.<span class="variable">$toast</span>(<span class="string">&#x27;å‘é€å¤±è´¥&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>Text.vue</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;v-hover</span><br><span class="line">        v-slot:default=<span class="string">&quot;&#123; hover &#125;&quot;</span></span><br><span class="line">    &gt;</span><br><span class="line">        &lt;v-card :elevation=<span class="string">&quot;hover ? 6 : 2&quot;</span> class=<span class="string">&quot;mb-2 transition-swing&quot;</span>&gt;</span><br><span class="line">            &lt;v-card-text&gt;</span><br><span class="line">                &lt;div class=<span class="string">&quot;d-flex flex-row align-center&quot;</span>&gt;</span><br><span class="line">                    &lt;div class=<span class="string">&quot;flex-grow-1 mr-2&quot;</span> style=<span class="string">&quot;min-width: 0&quot;</span>&gt;</span><br><span class="line">                        &lt;div class=<span class="string">&quot;title text-truncate text--primary&quot;</span> @click=<span class="string">&quot;expand = !expand&quot;</span>&gt;</span><br><span class="line">                            æ–‡æœ¬æ¶ˆæ¯&lt;v-icon&gt;&#123;&#123;<span class="built_in">expand</span> ? mdiChevronUp : mdiChevronDown&#125;&#125;&lt;/v-icon&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;div class=<span class="string">&quot;text-truncate&quot;</span> @click=<span class="string">&quot;expand = !expand&quot;</span> v-html=<span class="string">&quot;meta.content.trim()&quot;</span> v-linkified&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;div class=<span class="string">&quot;align-self-center text-no-wrap&quot;</span>&gt;</span><br><span class="line">                        &lt;v-tooltip bottom&gt;</span><br><span class="line">                            &lt;template v-slot:activator=<span class="string">&quot;&#123; on &#125;&quot;</span>&gt;</span><br><span class="line">                                &lt;v-btn v-on=<span class="string">&quot;on&quot;</span> icon color=<span class="string">&quot;grey&quot;</span> @click=<span class="string">&quot;copyText&quot;</span>&gt;</span><br><span class="line">                                    &lt;v-icon&gt;&#123;&#123;mdiContentCopy&#125;&#125;&lt;/v-icon&gt;</span><br><span class="line">                                &lt;/v-btn&gt;</span><br><span class="line">                            &lt;/template&gt;</span><br><span class="line">                            &lt;span&gt;å¤åˆ¶&lt;/span&gt;</span><br><span class="line">                        &lt;/v-tooltip&gt;</span><br><span class="line">                        &lt;v-tooltip bottom&gt;</span><br><span class="line">                            &lt;template v-slot:activator=<span class="string">&quot;&#123; on &#125;&quot;</span>&gt;</span><br><span class="line">                                &lt;v-btn v-on=<span class="string">&quot;on&quot;</span> icon color=<span class="string">&quot;grey&quot;</span> @click=<span class="string">&quot;deleteItem&quot;</span>&gt;</span><br><span class="line">                                    &lt;v-icon&gt;&#123;&#123;mdiClose&#125;&#125;&lt;/v-icon&gt;</span><br><span class="line">                                &lt;/v-btn&gt;</span><br><span class="line">                            &lt;/template&gt;</span><br><span class="line">                            &lt;span&gt;åˆ é™¤&lt;/span&gt;</span><br><span class="line">                        &lt;/v-tooltip&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;v-expand-transition&gt;</span><br><span class="line">                    &lt;div v-show=<span class="string">&quot;expand&quot;</span>&gt;</span><br><span class="line">                        &lt;v-divider class=<span class="string">&quot;my-2&quot;</span>&gt;&lt;/v-divider&gt;</span><br><span class="line">                        &lt;div ref=<span class="string">&quot;content&quot;</span> v-html=<span class="string">&quot;renderMarkdown(meta.content)&quot;</span> v-linkified&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/v-expand-transition&gt;</span><br><span class="line">            &lt;/v-card-text&gt;</span><br><span class="line">        &lt;/v-card&gt;</span><br><span class="line">    &lt;/v-hover&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MarkdownIt from <span class="string">&#x27;markdown-it&#x27;</span>;</span><br><span class="line">import &#123;</span><br><span class="line">    mdiChevronUp,</span><br><span class="line">    mdiChevronDown,</span><br><span class="line">    mdiContentCopy,</span><br><span class="line">    mdiClose,</span><br><span class="line">&#125; from <span class="string">&#x27;@mdi/js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">    name: <span class="string">&#x27;received-text&#x27;</span>,</span><br><span class="line">    props: &#123;</span><br><span class="line">        meta: &#123;</span><br><span class="line">            <span class="built_in">type</span>: Object,</span><br><span class="line">            <span class="function"><span class="title">default</span></span>() &#123;</span><br><span class="line">                <span class="built_in">return</span> &#123;&#125;;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">data</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> &#123;</span><br><span class="line">            <span class="built_in">expand</span>: <span class="literal">false</span>,</span><br><span class="line">            mdiChevronUp,</span><br><span class="line">            mdiChevronDown,</span><br><span class="line">            mdiContentCopy,</span><br><span class="line">            mdiClose,</span><br><span class="line">            md: new MarkdownIt(),  // Markdown è§£æå™¨å®ä¾‹</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        renderMarkdown(text) &#123;</span><br><span class="line">            <span class="built_in">return</span> this.md.render(text);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">copyText</span></span>() &#123;</span><br><span class="line">            <span class="built_in">let</span> el = document.createElement(<span class="string">&#x27;textarea&#x27;</span>);</span><br><span class="line">            el.value = new DOMParser().parseFromString(this.meta.content, <span class="string">&#x27;text/html&#x27;</span>).documentElement.textContent;</span><br><span class="line">            el.style.cssText = <span class="string">&#x27;top:0;left:0;position:fixed&#x27;</span>;</span><br><span class="line">            document.body.appendChild(el);</span><br><span class="line">            el.focus();</span><br><span class="line">            el.select();</span><br><span class="line">            document.execCommand(<span class="string">&#x27;copy&#x27;</span>);</span><br><span class="line">            document.body.removeChild(el);</span><br><span class="line">            this.<span class="variable">$toast</span>(<span class="string">&#x27;å¤åˆ¶æˆåŠŸ&#x27;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">deleteItem</span></span>() &#123;</span><br><span class="line">            this.<span class="variable">$http</span>.delete(`/revoke/<span class="variable">$&#123;this.meta.id&#125;</span>`, &#123;</span><br><span class="line">                params: new URLSearchParams([[<span class="string">&#x27;room&#x27;</span>, this.<span class="variable">$root</span>.room]]),</span><br><span class="line">            &#125;).<span class="keyword">then</span>(() =&gt; &#123;</span><br><span class="line">                this.<span class="variable">$toast</span>(<span class="string">&#x27;å·²åˆ é™¤æ–‡æœ¬æ¶ˆæ¯&#x27;</span>);</span><br><span class="line">            &#125;).catch(error =&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (error.response &amp;&amp; error.response.data.msg) &#123;</span><br><span class="line">                    this.<span class="variable">$toast</span>(`æ¶ˆæ¯åˆ é™¤å¤±è´¥ï¼š<span class="variable">$&#123;error.response.data.msg&#125;</span>`);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    this.<span class="variable">$toast</span>(<span class="string">&#x27;æ¶ˆæ¯åˆ é™¤å¤±è´¥&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åœ¨çº¿å‰ªè´´æ¿-æ–‡ä»¶ä¼ è¾“&quot;&gt;åœ¨çº¿å‰ªè´´æ¿|æ–‡ä»¶ä¼ è¾“&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;é¡¹ç›®åœ°å€ï¼š&lt;a href=&quot;https://github.com/TransparentLC/cloud-clipboard&quot;&gt;https://github.com/Trans</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ã€Hysteria2ã€‘å®‰è£…</title>
    <link href="https://blog.lthero.cn/2024/04/03/Hysteria2Installion/"/>
    <id>https://blog.lthero.cn/2024/04/03/Hysteria2Installion/</id>
    <published>2024-04-03T13:43:50.000Z</published>
    <updated>2024-06-08T14:10:34.044Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç›¸å…³é“¾æ¥">ç›¸å…³é“¾æ¥</h2><p>v2rayN ä¸‹è½½ï¼š<a href="https://github.com/2dust/v2rayN/releases/latest">https://github.com/2dust/v2rayN/releases/latest</a></p><p>Hysteria 2ä¸‹è½½ï¼š<a href="https://github.com/apernet/hysteria/releases">https://github.com/apernet/hysteria/releases</a></p><p>Hysteria 2æ–‡æ¡£ï¼š<a href="https://v2.hysteria.network/zh/">https://v2.hysteria.network/zh/</a></p><p>sing-boxæ–‡æ¡£ï¼š<a href="https://sing-box.sagernet.org/zh/">https://sing-box.sagernet.org/zh/</a></p><p>Androidå®¢æˆ·ç«¯ï¼ˆSFAï¼‰ï¼š<a href="https://install.appcenter.ms/users/nekohasekai/apps/sfa/distribution_groups/publictest">https://install.appcenter.ms/users/nekohasekai/apps/sfa/distribution_groups/publictest</a></p><p>IOSå®¢æˆ·ç«¯ï¼ˆTestFlightï¼‰ï¼š<a href="https://testflight.apple.com/join/AcqO44FH">https://testflight.apple.com/join/AcqO44FH</a> ï¼ˆ1.5.0 betaç‰ˆæ”¯æŒHysteria 2ï¼‰</p><p>IOSå®¢æˆ·ç«¯ï¼ˆAppStoreï¼‰ï¼š<a href="https://apps.apple.com/us/app/sing-box/id6451272673">https://apps.apple.com/us/app/sing-box/id6451272673</a> ï¼ˆæš‚ä¸æ”¯æŒHysteria 2ï¼‰</p><h2 id="æœåŠ¡å™¨ç›¸å…³æŒ‡ä»¤">æœåŠ¡å™¨ç›¸å…³æŒ‡ä»¤</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸€é”®å®‰è£…Hysteria2</span></span><br><span class="line">bash &lt;(curl -fsSL https://get.hy2.sh/)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç”Ÿæˆè‡ªç­¾è¯ä¹¦</span></span><br><span class="line">openssl req -x509 -nodes -newkey ec:&lt;(openssl ecparam -name prime256v1) -keyout /etc/hysteria/server.key -out /etc/hysteria/server.crt -subj <span class="string">&quot;/CN=bing.com&quot;</span> -days 36500 &amp;&amp; sudo <span class="built_in">chown</span> hysteria /etc/hysteria/server.key &amp;&amp; sudo <span class="built_in">chown</span> hysteria /etc/hysteria/server.crt</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨Hysteria2</span></span><br><span class="line">systemctl start hysteria-server.service</span><br><span class="line"><span class="comment">#é‡å¯Hysteria2</span></span><br><span class="line">systemctl restart hysteria-server.service</span><br><span class="line"><span class="comment">#æŸ¥çœ‹Hysteria2çŠ¶æ€</span></span><br><span class="line">systemctl status hysteria-server.service</span><br><span class="line"><span class="comment">#åœæ­¢Hysteria2</span></span><br><span class="line">systemctl stop hysteria-server.service</span><br><span class="line"><span class="comment">#è®¾ç½®å¼€æœºè‡ªå¯</span></span><br><span class="line">systemctl <span class="built_in">enable</span> hysteria-server.service</span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ—¥å¿—</span></span><br><span class="line">journalctl -u hysteria-server.service</span><br></pre></td></tr></table></figure><h2 id="æœåŠ¡å™¨é…ç½®æ–‡ä»¶">æœåŠ¡å™¨é…ç½®æ–‡ä»¶</h2><p>ç¼–è¾‘æœåŠ¡å™¨é…ç½®æ–‡ä»¶<code>vim /etc/hysteria/config.yaml</code>ï¼Œå¡«å†™ä¸‹é¢çš„å†…å®¹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">listen: :6688 <span class="comment">#ç›‘å¬ç«¯å£</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨CAè¯ä¹¦</span></span><br><span class="line">acme:</span><br><span class="line">  domains:</span><br><span class="line">    - xx.lthero.xx <span class="comment">#ä½ çš„åŸŸåï¼Œéœ€è¦å…ˆè§£æåˆ°æœåŠ¡å™¨ip</span></span><br><span class="line">  email: 8622215@gmail.com</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨è‡ªç­¾è¯ä¹¦</span></span><br><span class="line"><span class="comment">#tls:</span></span><br><span class="line"><span class="comment">#  cert: /etc/hysteria/server.crt</span></span><br><span class="line"><span class="comment">#  key: /etc/hysteria/server.key</span></span><br><span class="line"></span><br><span class="line">auth:</span><br><span class="line">  <span class="built_in">type</span>: password</span><br><span class="line">  password: xxxxxx   <span class="comment"># è¾“å…¥å¯†ç </span></span><br><span class="line"></span><br><span class="line">masquerade:</span><br><span class="line">  <span class="built_in">type</span>: proxy</span><br><span class="line">  proxy:</span><br><span class="line">    url: https://bing.com <span class="comment">#ä¼ªè£…ç½‘å€</span></span><br><span class="line">    rewriteHost: <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶">å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">server: xx.xx.xx.xx:6688 <span class="comment"># æœåŠ¡å™¨ipå’Œç«¯å£</span></span><br><span class="line">auth: xxxxxx  <span class="comment"># è¾“å…¥å¯†ç </span></span><br><span class="line"></span><br><span class="line">bandwidth:</span><br><span class="line">  up: 100 mbps  </span><br><span class="line">  down: 200 mbps</span><br><span class="line">  </span><br><span class="line">tls:</span><br><span class="line">  sni: xx.lthero.xx <span class="comment">#ä½ çš„åŸŸåï¼Œéœ€è¦å…ˆè§£æåˆ°æœåŠ¡å™¨ip</span></span><br><span class="line">  insecure: <span class="literal">false</span> <span class="comment">#ä½¿ç”¨è‡ªç­¾æ—¶éœ€è¦æ”¹æˆtrue</span></span><br><span class="line"></span><br><span class="line">socks5:</span><br><span class="line">  listen: 127.0.0.1:1080</span><br><span class="line">http:</span><br><span class="line">  listen: 127.0.0.1:8080</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="sing-boxé…ç½®æ–‡ä»¶-android-ios">sing-boxé…ç½®æ–‡ä»¶(Android/IOS)</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;dns&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;servers&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cf&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://1.1.1.1/dns-query&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;local&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;223.5.5.5&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;detour&quot;</span><span class="punctuation">:</span> <span class="string">&quot;direct&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;block&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rcode://success&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;geosite&quot;</span><span class="punctuation">:</span> <span class="string">&quot;category-ads-all&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;block&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;disable_cache&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;outbound&quot;</span><span class="punctuation">:</span> <span class="string">&quot;any&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;local&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;geosite&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;local&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;strategy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ipv4_only&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;inbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tun&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;inet4_address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;172.19.0.1/30&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;auto_route&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;strict_route&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;sniff&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;outbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hysteria2&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;proxy&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ip&quot;</span><span class="punctuation">,</span> #å¡«å†™ip</span><br><span class="line">      <span class="attr">&quot;server_port&quot;</span><span class="punctuation">:</span> <span class="number">443</span><span class="punctuation">,</span>#å¡«å†™ç«¯å£</span><br><span class="line">      <span class="attr">&quot;up_mbps&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span>#å¡«å†™ä¸Šè¡Œ</span><br><span class="line">      <span class="attr">&quot;down_mbps&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span> #å¡«å†™ä¸‹è¡Œ</span><br><span class="line">      <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;123456&quot;</span><span class="punctuation">,</span>#å¡«å†™å¯†ç </span><br><span class="line">      <span class="attr">&quot;tls&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;enabled&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;server_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xx.lthero.xx&quot;</span><span class="punctuation">,</span> #å¡«å†™è‡ªå·±çš„åŸŸå</span><br><span class="line">        <span class="attr">&quot;insecure&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;direct&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;direct&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;block&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;block&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dns&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dns-out&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;route&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;protocol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dns&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;outbound&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dns-out&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;geosite&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;geoip&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">          <span class="string">&quot;private&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="string">&quot;cn&quot;</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;outbound&quot;</span><span class="punctuation">:</span> <span class="string">&quot;direct&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;geosite&quot;</span><span class="punctuation">:</span> <span class="string">&quot;category-ads-all&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;outbound&quot;</span><span class="punctuation">:</span> <span class="string">&quot;block&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;auto_detect_interface&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="bbrå®‰è£…è„šæœ¬">BBRå®‰è£…è„šæœ¬</h1><blockquote><p>æ¥æºï¼š<a href="https://teddysun.com/489.html">ç§‹æ°´é€¸å†°</a></p></blockquote><h3 id="å…³äºæœ¬è„šæœ¬">å…³äºæœ¬è„šæœ¬</h3><p>1ã€æœ¬è„šæœ¬å·²åœ¨ <a href="https://qiu.sh/vultr"><strong>Vultr</strong></a> ä¸Šçš„ VPS å…¨éƒ¨æµ‹è¯•é€šè¿‡ã€‚</p><p>2ã€å½“è„šæœ¬æ£€æµ‹åˆ° VPS çš„è™šæ‹Ÿæ–¹å¼ä¸º OpenVZ æ—¶ï¼Œä¼šæç¤ºé”™è¯¯ï¼Œå¹¶è‡ªåŠ¨é€€å‡ºå®‰è£…ã€‚</p><p>3ã€è„šæœ¬è¿è¡Œå®Œé‡å¯å‘ç°å¼€ä¸äº†æœºçš„ï¼Œæ‰“å¼€ VPS åå°æ§åˆ¶é¢æ¿çš„ VNC, å¼€æœºå¡åœ¨ grub å¼•å¯¼, æ‰‹åŠ¨é€‰æ‹©å†…æ ¸å³å¯ã€‚</p><p>4ã€ç”±äºæ˜¯ä½¿ç”¨æœ€æ–°ç‰ˆç³»ç»Ÿå†…æ ¸ï¼Œæœ€å¥½è¯·å‹¿åœ¨ç”Ÿäº§ç¯å¢ƒå®‰è£…ï¼Œä»¥å…äº§ç”Ÿä¸å¯é¢„æµ‹ä¹‹åæœã€‚</p><h3 id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•</h3><p>ä½¿ç”¨rootç”¨æˆ·ç™»å½•ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O /opt/bbr.sh https://github.com/teddysun/across/raw/master/bbr.sh</span><br><span class="line">chmod 755 /opt/bbr.sh</span><br><span class="line">/opt/bbr.sh</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œè„šæœ¬ä¼šæç¤ºéœ€è¦é‡å¯ VPSï¼Œè¾“å…¥ y å¹¶å›è½¦åé‡å¯ã€‚<br>é‡å¯å®Œæˆåï¼Œè¿›å…¥ VPSï¼ŒéªŒè¯ä¸€ä¸‹æ˜¯å¦æˆåŠŸå®‰è£…æœ€æ–°å†…æ ¸å¹¶å¼€å¯ TCP BBRï¼Œè¾“å…¥ä»¥ä¸‹æ£€æŸ¥ï¼š<br>No.1</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ï¼Œæ˜¾ç¤ºä¸ºæ–°ç‰ˆå†…æ ¸å°±è¡¨ç¤º OK äº†ã€‚<br>No.2</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.ipv4.tcp_available_congestion_control</span><br></pre></td></tr></table></figure><p>è¿”å›å€¼ä¸€èˆ¬ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.tcp_available_congestion_control = bbr cubic reno</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.tcp_available_congestion_control = reno cubic bbr</span><br></pre></td></tr></table></figure><p>No.3</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.ipv4.tcp_congestion_control</span><br></pre></td></tr></table></figure><p>è¿”å›å€¼ä¸€èˆ¬ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.tcp_congestion_control = bbr</span><br></pre></td></tr></table></figure><p>No.4</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.core.default_qdisc</span><br></pre></td></tr></table></figure><p>è¿”å›å€¼ä¸€èˆ¬ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.core.default_qdisc = fq</span><br></pre></td></tr></table></figure><p>No.5</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep bbr</span><br></pre></td></tr></table></figure><p>è¿”å›å€¼æœ‰ tcp_bbr æ¨¡å—å³è¯´æ˜ bbr å·²å¯åŠ¨ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcp_bbr                20480  3</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¹¶ä¸æ˜¯æ‰€æœ‰çš„ VPS éƒ½ä¼šæœ‰æ­¤è¿”å›å€¼ï¼Œè‹¥æ²¡æœ‰ä¹Ÿå±æ­£å¸¸ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç›¸å…³é“¾æ¥&quot;&gt;ç›¸å…³é“¾æ¥&lt;/h2&gt;
&lt;p&gt;v2rayN ä¸‹è½½ï¼š&lt;a href=&quot;https://github.com/2dust/v2rayN/releases/latest&quot;&gt;https://github.com/2dust/v2rayN/releases/late</summary>
      
    
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
    <category term="ä»£ç†" scheme="https://blog.lthero.cn/tags/%E4%BB%A3%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>VPSè§£é”æµåª’ä½“|æµ‹é€Ÿå·¥å…·</title>
    <link href="https://blog.lthero.cn/2024/04/03/RegionRestrictionCheck/"/>
    <id>https://blog.lthero.cn/2024/04/03/RegionRestrictionCheck/</id>
    <published>2024-04-03T13:29:17.000Z</published>
    <updated>2024-06-01T10:09:24.848Z</updated>
    
    <content type="html"><![CDATA[<p>1</p><h1 id="æµåª’ä½“è§£é”æ£€æµ‹">æµåª’ä½“è§£é”æ£€æµ‹</h1><h2 id="è„šæœ¬ä¸€ï¼šregionrestrictioncheck">è„šæœ¬ä¸€ï¼šRegionRestrictionCheck</h2><p>RegionRestrictionCheck æ£€æµ‹è„šæœ¬æ£€æµ‹é¡¹ç›®æ¯”è¾ƒå…¨é¢ï¼Œä¸”æ”¯æŒDockerè¿è¡Œï¼Œæœç»æ±¡æŸ“VPSæœåŠ¡å™¨ï¼Œæ£€æµ‹æµåª’ä½“é™¤äº†ä¸»æµçš„Netflixã€Disney+ã€YouTube Premiumï¼Œè¿˜å¯ä»¥æ”¯æŒæ£€æµ‹Daznã€Viu TVã€4GTVå’ŒKKTVç­‰æ¯”è¾ƒå†·é—¨çš„æµåª’ä½“æœåŠ¡ã€‚</p><blockquote><p>æ”¯æŒOS/Platformï¼šCentOS 6+, Ubuntu 14.04+, Debian 8+, MacOS, Android with Termux</p></blockquote><h3 id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s check.unlock.media)</span><br><span class="line"></span><br><span class="line">bash &lt;(curl -L -s check.unlock.media)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åªæ£€æµ‹IPv4ç»“æœ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s check.unlock.media) -M 4</span><br><span class="line"></span><br><span class="line">bash &lt;(curl -L -s check.unlock.media) -M 4</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åªæ£€æµ‹IPv6ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s check.unlock.media) -M 6</span><br><span class="line"></span><br><span class="line">bash &lt;(curl -L -s check.unlock.media) -M 6</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æŒ‡å®šæ£€æµ‹çš„ç½‘å¡åç§°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s check.unlock.media) -I eth0</span><br><span class="line"></span><br><span class="line">bash &lt;(curl -L -s check.unlock.media) -I eth0</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€‰æ‹©è„šæœ¬è¯­è¨€ä¸ºè‹±æ–‡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s check.unlock.media) -E</span><br><span class="line"></span><br><span class="line">bash &lt;(curl -L -s check.unlock.media) -E</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ–è€…ç›´æ¥è¿è¡Œä»¥ä¸‹Dockerå‘½ä»¤ (å…¼å®¹ARMæ¶æ„)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -ti --net=host lmc999/regioncheck &amp;&amp; docker rmi lmc999/regioncheck</span><br><span class="line"></span><br><span class="line">docker run --rm -ti --net=host lmc999/regioncheck &amp;&amp; docker rmi lmc999/regioncheck</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¾‹å­ï¼š">ä¾‹å­ï¼š</h3><p><img src="https://cdn.lthero.cn/post_images/course/ML/20221113-001.png.webp" alt="RegionRestrictionCheck è„šæœ¬æµ‹è¯•ç»“æœ"></p><h2 id="è„šæœ¬äºŒï¼šmediaunlocktest">è„šæœ¬äºŒï¼šMediaUnlockTest</h2><p>MediaUnlockTest æ£€æµ‹ä¸ RegionRestrictionCheck ä¸ä¸€æ ·ï¼ŒMediaUnlockTest å¹¶ébashè„šæœ¬ï¼Œè€Œæ˜¯ä½¿ç”¨golangï¼Œæ£€æµ‹é¡¹ç›®ä¸ RegionRestrictionCheck å·®ä¸å¤šã€‚</p><h3 id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -Ls unlock.moe)</span><br><span class="line"></span><br><span class="line">bash &lt;(curl -Ls unlock.moe)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åªæ£€æµ‹IPv4ç»“æœ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -Ls unlock.moe) -m 4</span><br><span class="line"></span><br><span class="line">bash &lt;(curl -Ls unlock.moe) -m 4</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åªæ£€æµ‹IPv6ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -Ls unlock.moe) -m 6</span><br><span class="line"></span><br><span class="line">bash &lt;(curl -Ls unlock.moe) -m 6</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¾‹å­ï¼š">ä¾‹å­ï¼š</h3><p><img src="https://cdn.lthero.cn/post_images/course/ML/20221113-002.png.webp" alt="MediaUnlockTest è„šæœ¬æµ‹è¯•ç»“æœ"></p><h2 id="geositeåª’ä½“">Geositeåª’ä½“</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">geosite:apple</span><br><span class="line">geosite:bahamut</span><br><span class="line">geosite:hulu</span><br><span class="line">geosite:hbo</span><br><span class="line">geosite:disney</span><br><span class="line">geosite:bbc</span><br><span class="line">geosite:4chan</span><br><span class="line">geosite:fox</span><br><span class="line">geosite:abema</span><br><span class="line">geosite:dmm</span><br><span class="line">geosite:niconico</span><br><span class="line">geosite:pixiv</span><br><span class="line">geosite:bilibili</span><br><span class="line">geosite:viu</span><br><span class="line">domain:apple.com</span><br><span class="line">domain:paypal.com</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">geoip:paypal</span><br><span class="line">geoip:google</span><br></pre></td></tr></table></figure><h1 id="å…¶å®ƒå·¥å…·">å…¶å®ƒå·¥å…·</h1><h2 id="æœåŠ¡å™¨æµ‹é€Ÿ">æœåŠ¡å™¨æµ‹é€Ÿ</h2><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/ztelliot/taierspeed-cli/releases">https://github.com/ztelliot/taierspeed-cli/releases</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/ztelliot/taierspeed-cli/releases/download/v1.7.0/taierspeed-cli_1.7.0_linux_amd64</span><br><span class="line"><span class="built_in">mv</span> taierspeed-cli_1.7.0_linux_amd64 taierspeed-cli</span><br><span class="line"><span class="comment"># ä»…æ£€æµ‹ipv4</span></span><br><span class="line">taierspeed-cli --ipv4</span><br><span class="line"><span class="comment"># æ£€æµ‹ipv4å’Œipv6</span></span><br><span class="line">taierspeed-cli</span><br></pre></td></tr></table></figure><h2 id="ip-ä½“æ£€">IP ä½“æ£€</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -Ls IP.Check.Place)</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œæ¼”ç¤ºï¼š</strong></p><p><img src="https://bigdata.icu/ip-desi-sj.jpg" alt="img"></p><h2 id="è·¯ç”±è¿½è¸ª">è·¯ç”±è¿½è¸ª</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl nxtrace.org/nt |bash</span><br></pre></td></tr></table></figure><h2 id="dd-ç£ç›˜è¯»å†™æµ‹è¯•">DD ç£ç›˜è¯»å†™æµ‹è¯•</h2><p>æ³¨æ„</p><p>ç›®å‰ä½ æ‰€æ¥è§¦åˆ°ç»¼åˆæµ‹è¯•è„šæœ¬ï¼Œç£ç›˜è¯»å†™åŸºæœ¬éƒ½æ˜¯å¨±ä¹æ€§çš„ã€‚å¦‚æœç¡®å®æƒ³å¥½å¥½çš„æµ‹è¯•ç£ç›˜çš„ IO æ€§èƒ½ï¼Œå¯ä»¥ä½¿ç”¨æˆ‘å†™çš„ <a href="https://github.com/bihell/fio">FIO</a> è„šæœ¬ã€‚<br>ä¸è¿‡è¯è¯´å›æ¥ï¼Œå°é¸¡æµ‹è¯• IO å¤šæ•°æ—¶å€™ä¹Ÿåªæ˜¯é¡ºå¸¦è€Œå·²ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥ç”¨ DD å§ï¼Œä¸ä¾èµ–ä»»ä½•è„šæœ¬ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># ç”Ÿæˆ 5G æ–‡ä»¶ï¼Œé¡ºåº</span><br><span class="line">dd if=/dev/zero of=5GB_file bs=1M count=5120</span><br><span class="line"></span><br><span class="line"># ç”Ÿæˆ 5G æ–‡ä»¶ï¼Œéšæœº</span><br><span class="line">dd if=/dev/urandom of=5GB_file bs=1M count=5120</span><br></pre></td></tr></table></figure><h2 id="å•çº¿ç¨‹ä¸‹è½½æµ‹è¯•">å•çº¿ç¨‹ä¸‹è½½æµ‹è¯•</h2><p>æ³¨æ„</p><p>æ—¢ç„¶ä¸Šé¢ç”Ÿæˆäº†æ–‡ä»¶ï¼Œé‚£æˆ‘ä»¬å°±ç”¨ç°ä»£ç³»ç»Ÿéƒ½å¸¦çš„ Python3 å¼€ä¸ªHTTP æœåŠ¡ç›´æ¥ä¸‹è½½ä»–ä»¬æµ‹è¯•é€Ÿåº¦ã€‚</p><p>éƒ¨åˆ†æ“ä½œç³»ç»Ÿæˆ–è€…æµè§ˆå™¨ä¼šé’ˆå¯¹åŒå†…å®¹æ–‡ä»¶åšä¸‹è½½ä¼˜åŒ–ï¼ˆä¾‹å¦‚ä¸Šé¢é¡ºåºç”Ÿæˆçš„æ–‡ä»¶å…¶å®å†…å®¹æ˜¯ä¸€æ ·çš„ï¼‰ï¼Œå¦‚æœä½ çš„ä¸‹è½½æ•°æ®è¿œè¶…é¢„è®¡ï¼Œé‚£ä¹ˆè€ƒè™‘ç”¨éšæœºç”Ÿæˆçš„æ–‡ä»¶ä¸‹è½½å§ï¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># å¯åŠ¨ç®€æ˜“ http æœåŠ¡</span><br><span class="line">python3 -m http.server</span><br><span class="line"></span><br><span class="line"># å®¢æˆ·ç«¯</span><br><span class="line"># ç›´æ¥ç”¨æµè§ˆå™¨ä¸‹è½½æˆ–å…¶ä»–å·¥å…·ä¸‹è½½</span><br><span class="line">wget http://ä½ æœåŠ¡å™¨çš„IP:8000/5GB_file</span><br></pre></td></tr></table></figure><h2 id="èåˆæ€ª">èåˆæ€ª</h2><blockquote><p>å¦‚æœ<strong>åªè¦æµ‹è¯• IP ä½“æ£€</strong>ï¼Œè¿è¡Œè„šæœ¬ä¹‹å<strong>é€‰4å†é€‰2</strong>ã€‚è¿è¡Œå®Œæ•´è„šæœ¬ä¼š<strong>æ¶ˆè€—æµé‡</strong>ï¼Œè¯·æ³¨æ„é€€æ¬¾æ”¿ç­–ï¼Œåˆ«åˆ°æ—¶å€™æµé‡è¶…äº†<strong>æ— æ³•é€€æ¬¾</strong>ã€‚</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ä½¿ç”¨å‘½ä»¤</span><br><span class="line">curl -L https://gitlab.com/spiritysdx/za/-/raw/main/ecs.sh -o ecs.sh &amp;&amp; chmod +x ecs.sh &amp;&amp; bash ecs.sh</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œæ¼”ç¤ºï¼š</strong></p><p><img src="https://bigdata.icu/ip-V2-TWLite-One.jpg" alt="img"></p><h2 id="æŸ¥çœ‹-kvm-æœåŠ¡å™¨å†…å­˜æ˜¯å¦è¶…å”®">æŸ¥çœ‹ KVM æœåŠ¡å™¨å†…å­˜æ˜¯å¦è¶…å”®</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep virtio_balloon</span><br></pre></td></tr></table></figure><p><strong>å·¥ä½œåŸç†</strong></p><p><code>virtio_balloon</code> æ˜¯ä¸€ç§ç”¨äºè™šæ‹ŸåŒ–ç¯å¢ƒä¸­çš„å†…å­˜ç®¡ç†æŠ€æœ¯ï¼Œç‰¹åˆ«æ˜¯ç”¨äºåŠ¨æ€è°ƒæ•´è™šæ‹Ÿæœº (VM) å†…å­˜ä½¿ç”¨çš„æœºåˆ¶ã€‚å®ƒç”± Virtio æä¾›ï¼Œä¸»è¦ç”¨äº KVM (Kernel-based Virtual Machine) å’Œ QEMU ç­‰è™šæ‹ŸåŒ–å¹³å°ã€‚ä¸‹é¢æ˜¯å¯¹ <code>virtio_balloon</code> æœºåˆ¶çš„è¯¦ç»†è§£é‡Šï¼š</p><ol><li><strong>æ°”çƒè†¨èƒ€</strong>ï¼š<ul><li>å½“ç‰©ç†ä¸»æœºéœ€è¦å›æ”¶å†…å­˜æ—¶ï¼Œè™šæ‹Ÿæœºç®¡ç†ç¨‹åºï¼ˆHypervisorï¼‰ä¼šè¯·æ±‚è™šæ‹Ÿæœºé‡Šæ”¾ä¸€äº›å†…å­˜ã€‚</li><li>è™šæ‹Ÿæœºå†…çš„ <code>virtio_balloon</code> é©±åŠ¨ç¨‹åºä¼šåˆ†é…ä¸€å—å†…å­˜ï¼Œå¹¶å°†å…¶â€œè†¨èƒ€â€ï¼Œå³å°†è¿™å—å†…å­˜æ ‡è®°ä¸ºä¸å¯ç”¨ï¼Œç„¶åé€šçŸ¥è™šæ‹Ÿæœºç®¡ç†ç¨‹åºã€‚</li><li>è¿™å—å†…å­˜å®é™…ä¸Šå˜æˆäº†ç©ºé—²å†…å­˜ï¼Œä¾›ç‰©ç†ä¸»æœºä¸Šçš„å…¶ä»–è™šæ‹Ÿæœºæˆ–è¿›ç¨‹ä½¿ç”¨ã€‚</li></ul></li><li><strong>æ°”çƒæ”¶ç¼©</strong>ï¼š<ul><li>å½“ç‰©ç†ä¸»æœºå†…å­˜å‹åŠ›å‡å°æˆ–è™šæ‹Ÿæœºéœ€è¦æ›´å¤šå†…å­˜æ—¶ï¼Œè™šæ‹Ÿæœºç®¡ç†ç¨‹åºä¼šè¯·æ±‚è™šæ‹Ÿæœºæ¢å¤éƒ¨åˆ†è¢«é‡Šæ”¾çš„å†…å­˜ã€‚</li><li><code>virtio_balloon</code> é©±åŠ¨ç¨‹åºä¼šâ€œæ”¶ç¼©â€è¿™å—å†…å­˜ï¼Œå°†å…¶é‡æ–°æ ‡è®°ä¸ºå¯ç”¨ã€‚</li><li>è¿™å—å†…å­˜å†æ¬¡å˜å¾—å¯ä¾›è™šæ‹Ÿæœºä½¿ç”¨ã€‚</li></ul></li></ol><h2 id="vps-æº¢ä»·è®¡ç®—å™¨">VPS æº¢ä»·è®¡ç®—å™¨</h2><p>è¯·ç‚¹å‡»<a href="https://oto.deno.dev/">ä¼ é€é—¨</a></p><h2 id="ip-æ£€æµ‹">IP æ£€æµ‹</h2><p>æç¤º</p><p>å¯ç›´æ¥è®¿é—®æˆ‘çš„ IP æ£€æµ‹ç«™ç‚¹<a href="https://ip.bigdata.icu/">ip.bigdata.icu</a>,è½»æ¾æ£€æŸ¥ä½ çš„ IPï¼ŒIP åœ°ç†ä½ç½®ï¼Œæ£€æŸ¥DNSæ³„æ¼ï¼Œæ£€æŸ¥ WebRTC è¿æ¥ï¼Œé€Ÿåº¦æµ‹è¯•ï¼Œping æµ‹è¯•ï¼ŒMTRæµ‹è¯•ï¼Œæ£€æŸ¥ç½‘ç«™å¯ç”¨æ€§ç­‰ç­‰ã€‚æ„Ÿè°¢<a href="https://github.com/jason5ng32/MyIP">Jason Ng &amp; Seven Yu</a>å¼€æº</p><h3 id="å…¶ä»–-ip-æ£€æµ‹å·¥å…·">å…¶ä»– IP æ£€æµ‹å·¥å…·</h3><p>å…¶ä»–-ip-æ£€æµ‹å·¥å…·</p><ul><li><a href="https://dnschecker.org/">DNSCHECKER</a></li><li><a href="https://ipapi.is/">ipapi.is</a></li><li><a href="https://ip-api.com/">ip-api</a></li><li><a href="https://ipdata.co/">ipdata</a></li><li><a href="https://ipinfo.io/">ipinfo.io</a></li><li><a href="https://ipinsight.io/">IPinsight</a></li><li><a href="https://www.ipip.net/">IPIP</a></li><li><a href="https://ping.pe/">ping.pe</a></li><li><a href="https://scamalytics.com/">SCAMALYTICS</a></li><li><a href="https://browserleaks.com/webrtc">WebRTC Leak Test</a></li><li><a href="https://boce.aliyun.com/detect/ping">é˜¿é‡Œäº‘ç½‘ç«™è¿ç»´æ£€æµ‹å¹³å°</a></li></ul><h2 id="æœåŠ¡å™¨ç›‘æ§-å“ªå’">æœåŠ¡å™¨ç›‘æ§-å“ªå’</h2><blockquote><p>å¼€æºã€è½»é‡ã€æ˜“ç”¨çš„æœåŠ¡å™¨ç›‘æ§ã€è¿ç»´å·¥å…·</p></blockquote><p>æç¤º</p><p><a href="https://bigdata.icu/tools/soft/nezha.html">å“ªå’ç›‘æ§</a>çš„è¯¦ç»†ä½¿ç”¨è§†é¢‘å’Œæ–‡æ¡£å·²æ’°å†™å®Œæ¯•ï¼Œè¯·ç‚¹å‡»<a href="https://bigdata.icu/tools/soft/nezha.html">ä¼ é€é—¨</a>æŸ¥çœ‹ã€‚<br>å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨TrueNASï¼Œæƒ³æŠŠ<a href="https://bigdata.icu/tools/soft/nezha.html">å“ªå’ç›‘æ§</a>å®‰è£…åˆ°APPé‡Œé¢ï¼Œå¯ä»¥æŸ¥çœ‹æˆ‘çš„<a href="https://www.bilibili.com/cheese/play/ep525309">ã€ŠTrueNAS Scaleç»ˆææ•™ç¨‹ã€‹</a>ã€‚</p><h2 id="å„åœ°åŒºå»¶è¿Ÿç›‘æ§-ip">å„åœ°åŒºå»¶è¿Ÿç›‘æ§ IP</h2><p><a href="https://bigdata.icu/tools/soft/nezha.html#_0x05-%E5%BB%B6%E8%BF%9F%E7%9B%91%E6%8E%A7">ä¼ é€é—¨</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;1&lt;/p&gt;
&lt;h1 id=&quot;æµåª’ä½“è§£é”æ£€æµ‹&quot;&gt;æµåª’ä½“è§£é”æ£€æµ‹&lt;/h1&gt;
&lt;h2 id=&quot;è„šæœ¬ä¸€ï¼šregionrestrictioncheck&quot;&gt;è„šæœ¬ä¸€ï¼šRegionRestrictionCheck&lt;/h2&gt;
&lt;p&gt;RegionRestrictionCheck æ£€æµ‹è„šæœ¬æ£€æµ‹é¡¹</summary>
      
    
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
    <category term="æµåª’ä½“" scheme="https://blog.lthero.cn/tags/%E6%B5%81%E5%AA%92%E4%BD%93/"/>
    
  </entry>
  
  <entry>
    <title>ã€DDPMã€‘DiffusionModelåŸç†</title>
    <link href="https://blog.lthero.cn/2024/03/28/DDPM/"/>
    <id>https://blog.lthero.cn/2024/03/28/DDPM/</id>
    <published>2024-03-28T15:45:07.000Z</published>
    <updated>2024-06-07T13:57:57.243Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æŒç»­æ–½å·¥ä¸­</p><p>Iâ€™m still working on it.</p><p>æœ¬æ–‡æ˜¯æ ¹æ®æ²¹ç®¡è§†é¢‘æ•´ç†çš„ç¬”è®°ï¼ŒåŸè§†é¢‘ä¸­å°†DDPMå’ŒDDIMéƒ½æœ‰è®²åˆ°ï¼Œæ‰€ä»¥æˆ‘ä¼šç©¿æ’ä¸€äº›DDIMçš„ä¸œè¥¿</p></blockquote><h1 id="å¯¼å…¥">å¯¼å…¥</h1><p>è§†é¢‘ï¼š<a href="https://www.youtube.com/watch?v=ifCDXFdeaaM">https://www.youtube.com/watch?v=ifCDXFdeaaM</a></p><h2 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h2><blockquote><p>è®­ç»ƒè¿‡ç¨‹â€“Forward Process</p><p>é€æ­¥æ·»åŠ é«˜æ–¯å™ªå£°ï¼Œç›´åˆ°å˜æˆçº¯é«˜æ–¯å™ªå£°</p><p>ç”Ÿæˆè¿‡ç¨‹â€“Denoise Process</p><p>é€æ­¥å»é™¤å™ªå£°ï¼Œç›´åˆ°å˜æˆå›¾åƒ</p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329232228525.png" alt="image-20240329232228525"></p><h2 id="è®­ç»ƒè¿‡ç¨‹">è®­ç»ƒè¿‡ç¨‹</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹DDPMä¸­çš„ç®—æ³•æ˜¯æ€ä¹ˆè¯´çš„</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329234016489.png" alt="image-20240329234016489"></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub><mo>âˆ¼</mo><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x_0 \sim q(x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>è¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯ä¸€å¼ å¹²å‡€çš„å›¾åƒï¼ˆæ ·æœ¬é›†ä¸­çš„ï¼‰</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>âˆ¼</mo><mi>U</mi><mi>n</mi><mi>i</mi><mi>f</mi><mi>o</mi><mi>r</mi><mi>m</mi><mo stretchy="false">(</mo><mrow><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>T</mi></mrow><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">t\sim Uniform({1,...,T})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mord mathdefault">n</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">m</span><span class="mopen">(</span><span class="mord"><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span></span><span class="mclose">)</span></span></span></span></span></p><p>ä»å‡åŒ€åˆ†å¸ƒä¸­é‡‡æ ·ä¸€ä¸ªt</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi><mo>âˆ¼</mo><mi>N</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mi>I</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\epsilon \sim N(0,I)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mclose">)</span></span></span></span></span></p><p>å†ä»å‡å€¼æ˜¯0ï¼Œæ–¹å·®æ˜¯1çš„æ ‡å‡†é«˜æ–¯åˆ†å¸ƒé‡‡æ ·ä¸€ä¸ªå™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span>ï¼Œè¿™ä¸ªå™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span>çš„å°ºå¯¸å¤§å°å’Œå›¾åƒä¸€æ ·å¤§ï¼Œä½†é‡Œé¢å…¨æ˜¯å™ªå£°</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329234637266.png" alt="image-20240329234637266"></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>Ïµ</mi><mo>âˆ’</mo><msub><mi>Ïµ</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msqrt><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub></msqrt><msub><mi>x</mi><mn>0</mn></msub><mo>+</mo><msqrt><mrow><mn>1</mn><mo>âˆ’</mo><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub></mrow></msqrt><mi>Ïµ</mi><mo separator="true">,</mo><mi>t</mi><mo stretchy="false">)</mo><mi mathvariant="normal">âˆ£</mi><msup><mi mathvariant="normal">âˆ£</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">||\epsilon-\epsilon_\theta(\sqrt{\bar{\alpha}_t}x_0+\sqrt{1-\bar{\alpha}_t}\epsilon,t)||^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£</span><span class="mord">âˆ£</span><span class="mord mathdefault">Ïµ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.092765em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.842765em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.802765em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19723500000000005em;"><span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1310950000000002em;vertical-align:-0.25em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8810950000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.841095em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15890499999999996em;"><span></span></span></span></span></span><span class="mord mathdefault">Ïµ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mord">âˆ£</span><span class="mord"><span class="mord">âˆ£</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p><ul><li>è¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\bar{\alpha}_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.71778em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯é¢„å…ˆ<strong>äººä¸ºå®šä¹‰å¥½çš„ä¸œè¥¿</strong>ï¼Œå¹¶ä¸”éšç€tå¢åŠ ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\bar{\alpha}_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.71778em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¼šå˜å°ï¼›å³tè¶Šå¤§ï¼ŒåŸæ¥å›¾å çš„æ¯”ä¾‹è¶Šå°ï¼Œå™ªå£°å æ¯”è¶Šå¤§</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\epsilon_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯æ¨¡å‹é¢„æµ‹å‡ºæ¥çš„å™ªå£°ï¼Œé¢„æµ‹å‡ºæ¥çš„å™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\epsilon_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯è¦å’ŒåŸå™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span>è¿›è¡Œæ¯”è¾ƒ</li></ul><h3 id="å…³äºè¿™é‡Œçš„å™ªå£°çš„è®¨è®º">å…³äºè¿™é‡Œçš„å™ªå£°çš„è®¨è®º</h3><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">Ïµ_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¹‹é—´ä¸æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ¯ä¸€æ­¥çš„å™ªå£° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">Ïµ_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯åŸºäºå‰ä¸€çŠ¶æ€ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>å’ŒåŸå§‹å›¾åƒ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„åå·®è®¡ç®—å¾—å‡ºçš„</p><p>ç”±äºæ¯ä¸ª <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>éƒ½æ˜¯ç”±å‰ä¸€ä¸ªæ—¶é—´æ­¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>åŠ ä¸Šä¸€äº›å™ªå£°å¾—åˆ°çš„ï¼Œè¿™æ„å‘³ç€æ¯ä¸ª <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">Ïµ_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> å®é™…ä¸Šæ˜¯åŒ…å«äº†ä» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">t=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> åˆ°å½“å‰æ—¶é—´æ­¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span></span></span></span> æ‰€æœ‰å™ªå£°çš„ç´¯ç§¯ã€‚</p><p>å°½ç®¡æ¯ä¸€æ­¥åŠ å…¥çš„å™ªå£°æ˜¯ç‹¬ç«‹çš„ï¼Œä½†æ¯ä¸ªæ—¶é—´æ­¥ç”Ÿæˆçš„$ Ïµ_t$åŒ…å«äº†æ‰€æœ‰ä¹‹å‰æ­¥éª¤çš„å™ªå£°ç´¯ç§¯ï¼Œ<strong>å› æ­¤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">Ïµ_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">Ïµ_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>åœ¨æ•°å­¦ä¸Šæ˜¯ç›¸å…³çš„</strong>ã€‚</p><p>è®­ç»ƒè¿‡ç¨‹</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328232931426.png" alt="image-20240328232931426"></p><p>åœ¨æƒ³è±¡ä¸­ï¼Œæˆ‘ä»¬çš„è®­ç»ƒè¿‡ç¨‹æ˜¯ä¸‹å›¾è¿™æ ·çš„</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328232950947.png" alt="image-20240328232950947"></p><h2 id="ç”Ÿæˆè¿‡ç¨‹">ç”Ÿæˆè¿‡ç¨‹</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹DDPMä¸­çš„ç®—æ³•æ˜¯æ€ä¹ˆè¯´çš„</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329235405739.png" alt="image-20240329235405739"></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>T</mi></msub><mo>âˆ¼</mo><mi>N</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mi>I</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x_T \sim N(0,I)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mclose">)</span></span></span></span></span></p><p>ä»æ ‡å‡†é«˜æ–¯åˆ†å¸ƒé‡‡æ ·å‡ºä¸€ä¸ªå™ªå£°çŸ©é˜µ</p><p>ç„¶åè¿›è¡ŒTæ­¥çš„å¾ªç¯ï¼Œæ¯æ¬¡å¾ªç¯ä¸­è¦é‡‡æ ·ä¸€ä¸ªå™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span>â€‹</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>=</mo><mfrac><mn>1</mn><msub><msqrt><mi>Î±</mi></msqrt><mi>t</mi></msub></mfrac><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mo>âˆ’</mo><mfrac><mrow><mn>1</mn><mo>âˆ’</mo><msub><mi>Î±</mi><mi>t</mi></msub></mrow><msqrt><mrow><mn>1</mn><mo>âˆ’</mo><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub></mrow></msqrt></mfrac><msub><mi>Ïµ</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><mi>t</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>+</mo><msub><mi>Ïƒ</mi><mi>t</mi></msub><mi>z</mi></mrow><annotation encoding="application/x-tex">x_{t-1}=\frac{1}{\sqrt{\alpha}_t}(x_t-\frac{1-\alpha_t}{\sqrt{1-\bar{\alpha}_t}}\epsilon_\theta(x_t,t))+\sigma_tz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.30114em;vertical-align:-0.9797000000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.3097199999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.14113599999999993em;"><span style="top:-2.4105800000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.28942em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9797000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.25144em;vertical-align:-0.93em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.27778em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8322200000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.79222em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.20777999999999996em;"><span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span></span></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïƒ</mi><mi>t</mi></msub><mo>=</mo><mi>Î·</mi><msub><mi>Î²</mi><mi>t</mi></msub><mfrac><mrow><mn>1</mn><mo>âˆ’</mo><msub><mi>Î±</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><mrow><mn>1</mn><mo>âˆ’</mo><msub><mi>Î±</mi><mi>t</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\sigma_t = \eta \beta_t \frac{1 - \alpha_{t-1}}{1 - \alpha_t} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.1574400000000002em;vertical-align:-0.8360000000000001em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">Î·</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><ul><li>Î· = 1 æ—¶ï¼Œæ–¹å·® <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïƒ</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\sigma_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> å®Œå…¨ç”± <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î²</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\beta_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î±</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\alpha_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> çš„å€¼ç¡®å®šï¼Œå¯¹åº”åŸå§‹çš„DDPMå·¥ä½œï¼Œå…¶ä¸­å™ªå£°æ·»åŠ æ˜¯éšæœºçš„ï¼Œæ¨¡æ‹Ÿäº†æ­£å‘æ‰©æ•£è¿‡ç¨‹çš„é€†è¿‡ç¨‹ã€‚</li><li>Î· = 0 æ—¶ï¼Œæ–¹å·® <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïƒ</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\sigma_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ä¸ºé›¶ï¼Œè¿™æ„å‘³ç€åœ¨é€†å‘ç”Ÿæˆè¿‡ç¨‹ä¸­æ²¡æœ‰é¢å¤–å™ªå£°è¢«æ·»åŠ ï¼Œæ­¤æ—¶çš„æ¨¡å‹å˜æˆäº†ç¡®å®šæ€§çš„ï¼Œå¯¹åº”DDIMï¼ˆå»å™ªæ‰©æ•£éšå¼æ¨¡å‹ï¼‰æ–¹æ¡ˆï¼Œè¿™æ˜¯ä¸€ç§æ›´åŠ ç¨³å®šå’Œå¯é¢„æµ‹çš„ç”Ÿæˆæ–¹å¼ã€‚</li></ul><p>é€šè¿‡è°ƒæ•´ Î· çš„å€¼ï¼Œç ”ç©¶äººå‘˜å¯ä»¥åœ¨éšæœºæ€§å’Œç¡®å®šæ€§ä¹‹é—´è¿›è¡Œæƒè¡¡ï¼Œä»è€Œæ§åˆ¶<strong>ç”Ÿæˆè¿‡ç¨‹</strong>ä¸­å™ªå£°çš„å½±å“ç¨‹åº¦</p><p>çœ‹ç€å¾ˆå¤æ‚ï¼Œä¸æ€¥ï¼Œåé¢ä¼šæ…¢æ…¢è§£æ</p><blockquote><p>ä½†ï¼Œè¿™å„¿æœ‰ä¸ªé—®é¢˜ï¼š<strong>åœ¨ç”Ÿæˆè¿‡ç¨‹</strong>ä¸­ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆè¦å†é‡‡æ ·å¹¶åŠ å…¥ä¸€ä¸ªå™ªå£°zï¼Ÿï¼Ÿï¼Ÿã€åé¢æœ‰è§£é‡Šã€‘</p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240330000026098.png" alt="image-20240330000026098"></p><h1 id="ddpmå’Œddimåœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­çš„åŒºåˆ«">DDPMå’ŒDDIMåœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­çš„åŒºåˆ«</h1><blockquote><p>å‚è€ƒï¼š<a href="https://ucladeepvision.github.io/CS188-Projects-2023Winter/2022/03/27/team27-ddim-inversion.html#implementing-ddims">https://ucladeepvision.github.io/CS188-Projects-2023Winter/2022/03/27/team27-ddim-inversion.html#implementing-ddims</a></p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240504200530272.png" alt="image-20240504200530272"></p><p>å·®å¼‚ä¸»è¦ä½“ç°åœ¨çŠ¶æ€è½¬ç§»å’Œå™ªå£°å¤„ç†ä¸Šï¼Œæˆ‘å°†é€šè¿‡å¯¹æ¯”è¿™ä¸¤ç§æ¨¡å‹çš„å»å™ªè¿‡ç¨‹å…¬å¼æ¥è¯´æ˜è¿™ä¸€ç‚¹ã€‚</p><h3 id="ddpmçš„å»å™ªè¿‡ç¨‹">DDPMçš„å»å™ªè¿‡ç¨‹</h3><p>åœ¨DDPMä¸­ï¼Œå»å™ªè¿‡ç¨‹æ˜¯ä¸€ä¸ªéšæœºè¿‡ç¨‹ï¼Œæ¯ä¸€æ­¥éƒ½ä¾èµ–äºå‰ä¸€æ­¥çš„è¾“å‡ºå’Œæ–°æ·»åŠ çš„å™ªå£°ã€‚å»å™ªå…¬å¼å¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>$ x_{t-1} = \frac{1}{\sqrt{\alpha_t}} \left(x_t - \frac{1-\alpha_t}{\sqrt{1-\bar{\alpha}<em>t}} \epsilon</em>\theta(x_t, t)\right) + \sigma_t z $<br>å…¶ä¸­ï¼š</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> æ˜¯å½“å‰æ­¥çš„å›¾åƒã€‚</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\epsilon_\theta(x_t, t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span> æ˜¯å­¦ä¹ å¾—åˆ°çš„å™ªå£°é¢„æµ‹ã€‚</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î±</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\alpha_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\bar{\alpha}_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.71778em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> æ˜¯é¢„å®šçš„æ–¹å·®è°ƒåº¦å‚æ•°ã€‚</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïƒ</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\sigma_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> æ˜¯æ ¹æ® <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î·</mi></mrow><annotation encoding="application/x-tex">\eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">Î·</span></span></span></span> è°ƒæ•´çš„å™ªå£°çº§åˆ«ï¼Œå½“ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î·</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\eta = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">Î·</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> æ—¶ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïƒ</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\sigma_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> æœ€å¤§ï¼Œæ·»åŠ æœ€å¤šå™ªå£°ã€‚</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span> æ˜¯æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„éšæœºå˜é‡ã€‚</li></ul><p>è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸€ä¸ª<strong>å…¸å‹çš„é©¬å°”å¯å¤«é“¾è¿‡ç¨‹</strong>ï¼Œå› ä¸ºæ¯ä¸€æ­¥çš„è¾“å‡ºä¾èµ–äºå‰ä¸€æ­¥çš„çŠ¶æ€å’Œ<strong>æ–°å¼•å…¥çš„éšæœºå™ªå£°</strong>ã€‚</p><h3 id="ddimçš„å»å™ªè¿‡ç¨‹">DDIMçš„å»å™ªè¿‡ç¨‹</h3><p>DDIMçš„è®¾è®¡ç›®æ ‡æ˜¯åœ¨ä¸ç‰ºç‰²å¤ªå¤šç”Ÿæˆè´¨é‡çš„æƒ…å†µä¸‹ï¼ŒåŠ å¿«ç”Ÿæˆé€Ÿåº¦å¹¶æé«˜ç¡®å®šæ€§ã€‚å…¶å»å™ªè¿‡ç¨‹å»é™¤äº†é¢å¤–å™ªå£°çš„æ·»åŠ ï¼Œå…¬å¼å¦‚ä¸‹ï¼š<br>$ x_{t-1} = \frac{1}{\sqrt{\alpha_t}} \left(x_t - \frac{1-\alpha_t}{\sqrt{1-\bar{\alpha}<em>t}} \epsilon</em>\theta(x_t, t)\right) $<br>æ³¨æ„ï¼Œè¿™é‡Œæ²¡æœ‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïƒ</mi><mi>t</mi></msub><mi>z</mi></mrow><annotation encoding="application/x-tex">\sigma_t z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span> é¡¹ï¼Œè¿™æ„å‘³ç€ï¼š</p><ul><li>è¿‡ç¨‹æ˜¯ç¡®å®šæ€§çš„ï¼Œ<strong>ä¸€æ—¦ç¡®å®šäº†å¼€å§‹çš„å™ªå£°ï¼Œæ•´ä¸ªé€†è¿‡ç¨‹å¯ä»¥ç²¾ç¡®åœ°é‡ç°</strong>ï¼Œæ— éœ€ä¾èµ–äºéšæœºå™ªå£°ã€‚</li><li>å› ä¸º<strong>å»é™¤äº†éšæœºå™ªå£°çš„å¼•å…¥</strong>ï¼Œæ¯ä¸€æ­¥çš„çŠ¶æ€å®Œå…¨ç”±å‰ä¸€æ­¥çš„çŠ¶æ€å’Œæ¨¡å‹é¢„æµ‹çš„å™ªå£°ç¡®å®šï¼Œ<strong>ä¸å†æ˜¯ä¸€ä¸ªé©¬å°”å¯å¤«è¿‡ç¨‹</strong>ã€‚</li></ul><blockquote><p>è™½ç„¶è¿™ä¸¤ä¸ªå…¬å¼ï¼Œç›®å‰çœ‹ç€åªå·®äº†ä¸€ä¸ªå™ªå£°é¡¹ï¼Œä½†ä»–ä»¬çš„æ¨å¯¼è¿‡ç¨‹ä¸å¤§ä¸ä¸€æ ·ï¼å…·ä½“æ¨å¯¼åœ¨åé¢</p></blockquote><p>DDIMé€šè¿‡ä½¿ç”¨ä¸€ä¸ª<strong>ç¡®å®šæ€§çš„é‡‡æ ·è·¯</strong>å¾„ï¼Œå³åœ¨é€†å‘è¿‡ç¨‹ä¸­ï¼Œä¸å†éšæœºé‡‡æ ·å™ªå£°ã€‚è¿™ä½¿å¾—DDIMåœ¨æ¢å¤æ•°æ®æ—¶æ›´åŠ é«˜æ•ˆä¸”ç¨³å®šã€‚</p><p>DDIMçš„å…³é”®åœ¨äºå®ƒåˆ©ç”¨äº†ä¸€ä¸ªè¢«ç§°ä¸ºâ€œimplicit samplingâ€çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸éœ€è¦åœ¨æ¯ä¸€æ­¥æ˜ç¡®åœ°å‘æ•°æ®æ·»åŠ å™ªå£°ã€‚ç›¸åï¼Œå®ƒç›´æ¥è®¡ç®—ä»å½“å‰å™ªå£°çŠ¶æ€åˆ°ä¸‹ä¸€ä¸ªè¾ƒå°‘å™ªå£°çŠ¶æ€çš„æœ€ä¼˜è·¯å¾„ã€‚è¿™ç§æ–¹å¼å‡å°‘äº†éšæœºæ€§ï¼Œä½¿å¾—ç”Ÿæˆçš„è¿‡ç¨‹æ›´åŠ å¿«é€Ÿä¸”å…·æœ‰æ›´å°‘çš„éšæœºå˜åŒ–ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240504200110623.png" alt="image-20240504200110623"></p><p>å¦‚ä¸Šå›¾ï¼Œå‡å¦‚å½“å‰æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œè€Œå½“å‰çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å®ƒä¼šé¢„è®¡æœ€ç»ˆèµ°åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>x</mi><mn>0</mn></msub><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{x_0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span>ï¼Œä½†å¦‚æœç›´æ¥åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>x</mi><mn>0</mn></msub><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{x_0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span>ï¼Œå¾—åˆ°çš„ç»“æœå°±å’Œå®é™…çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æœ‰ä¸€å®šå·®è·ï¼Œæ‰€ä»¥å®ƒå¹¶ä¸ä¼šä¸€å¤§æ­¥çš„ç›´æ¥åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>x</mi><mn>0</mn></msub><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{x_0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span>ï¼Œè€Œæ˜¯é€‰æ‹©æ¯æ¬¡èµ°ä¸€å°æ­¥ï¼ˆå»é™¤ä¸€äº›å™ªå£°ï¼‰ï¼Œç„¶ååœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>é‡æ–°é¢„æµ‹æœ€ç»ˆèµ°åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>x</mi><mn>0</mn></msub><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{x_0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span>ï¼Œä¹Ÿè®¸è¿™ä¸ªæ–°çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>x</mi><mn>0</mn></msub><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{x_0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span>ä¼šç¦»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>â€‹æ›´è¿‘ä¸€äº›ï¼Œç„¶åå®ƒå°±å†èµ°ä¸€å°æ­¥</p><blockquote><p>å°±æ˜¯æ¯æ¬¡å»é™¤ä¸€ç‚¹ç„¶åå†çŸ«æ­£å†å»ä¸€ç‚¹</p></blockquote><h3 id="å¯¹æ¯”å’Œæ•ˆç‡">å¯¹æ¯”å’Œæ•ˆç‡</h3><ul><li><strong>éšæœºæ€§å’Œæ•ˆç‡</strong>ï¼šDDPMé€šè¿‡å¼•å…¥éšæœºå™ªå£°ä¿æŒäº†é«˜åº¦çš„éšæœºæ€§ï¼Œè¿™å¯¹äºç”Ÿæˆå¤šæ ·åŒ–çš„å›¾åƒå¾ˆæœ‰å¸®åŠ©ï¼Œä½†è¿™ç§éšæœºæ€§ä¹Ÿå¯¼è‡´äº†ç”Ÿæˆè¿‡ç¨‹çš„ä¸ç¡®å®šæ€§å’Œè¾ƒæ…¢çš„æ”¶æ•›é€Ÿåº¦ã€‚DDIMé€šè¿‡å»é™¤éšæœºå™ªå£°ï¼Œå‡å°‘äº†è¿™ç§ä¸ç¡®å®šæ€§ï¼Œä½¿å¾—ç”Ÿæˆè¿‡ç¨‹æ›´å¿«ï¼Œæ›´å¯æ§ã€‚</li><li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šDDPMé€‚ç”¨äºéœ€è¦å›¾åƒå¤šæ ·æ€§çš„åœºæ™¯ï¼Œå¦‚è‰ºæœ¯åˆ›ä½œã€æ ·æœ¬å¢å¼ºç­‰ï¼›è€ŒDDIMåˆ™æ›´é€‚ç”¨äºéœ€è¦å¿«é€Ÿã€å¯é‡ç°ç»“æœçš„åœºæ™¯ï¼Œå¦‚å†…å®¹è¿‡æ»¤ã€ç‰¹å®šå›¾åƒä¿®å¤ç­‰ã€‚</li></ul><h1 id="å›¾åƒç”Ÿæˆæ¨¡å‹çš„ç›®æ ‡">å›¾åƒç”Ÿæˆæ¨¡å‹çš„ç›®æ ‡</h1><p><a href="https://www.youtube.com/watch?v=73qwu77ZsTM">https://www.youtube.com/watch?v=73qwu77ZsTM</a></p><blockquote><p>æ±‚å‡ºâ€œ<strong>çœŸå®å›¾åƒçš„åˆ†å¸ƒ</strong>â€</p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328233137012.png" alt="image-20240328233137012"></p><p>è€Œåœ¨å¦‚ä»Šçš„ç”Ÿæˆå›¾åƒä¸­ï¼Œä¸ä»…ä»…è¦ç”Ÿæˆå‡ºå›¾åƒï¼Œè€Œæ˜¯è¦<strong>æ·»åŠ â€œæ¡ä»¶â€</strong></p><p>ä»¥å‰æ˜¯åªè®©ç”Ÿæˆçš„å›¾åƒè¿˜åŸçœŸå®å›¾åƒï¼ˆç”Ÿæˆä¸€åªç‹—ï¼‰ï¼Œç°åœ¨æ˜¯è¦â€œä¸€åªåœ¨å¥”è·‘çš„ç‹—â€</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328233303280.png" alt="image-20240328233303280"></p><p>ä½†ä¸è®ºæ€ä¹ˆè¯´ï¼Œæˆ‘ä»¬çš„ç›®æ ‡ï¼Œè¿˜æ˜¯æ±‚å‡ºâ€œ<strong>çœŸå®å›¾åƒçš„åˆ†å¸ƒ</strong>â€</p><blockquote><p>ä¹Ÿå°±æ˜¯<strong>æ¨¡æ‹Ÿä¸€ä¸ªåˆ†å¸ƒ</strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">P_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œè¿™ä¸ª<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">P_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>è¦å’ŒåŸæ¥çš„åˆ†å¸ƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi></mrow></msub></mrow><annotation encoding="application/x-tex">P_{data}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">a</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>è¶Šæ¥è¿‘è¶Šå¥½</p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328233538360.png" alt="image-20240328233538360"></p><p>é‚£ä¹ˆï¼Œæ€ä¹ˆæ¥<strong>è¡¡é‡â€œæ¥æ¥è¿‘è¶Šå¥½â€</strong>ï¼Ÿ</p><blockquote><p>å‡è®¾ï¼Œæˆ‘ä»¬ç°åœ¨æœ‰ä¸ªåˆ†å¸ƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">P_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œç°åœ¨<strong>ä»»æ„</strong>ä»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi></mrow></msub></mrow><annotation encoding="application/x-tex">P_{data}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">a</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„æ ·æœ¬é›†ä¸­æ‹¿ä¸€å¼ å›¾ï¼Œæˆ‘ä»¬ç…§æ ·å¯ä»¥ç”¨æ¨¡å‹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">Î¸</span></span></span></span>æ¥è¿˜åŸå‡ºè¿™å¼ å›¾ï¼Œé‚£è¿™ä¹ˆæ¨¡å‹å°±æ˜¯<strong>å®Œç¾è¿˜åŸ</strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi></mrow></msub></mrow><annotation encoding="application/x-tex">P_{data}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">a</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p></blockquote><p>ä½†å®é™…ä¸Šï¼Œä¸å¤§å¯èƒ½ï¼›</p><p>ä¸è¿‡ï¼Œæˆ‘ä»¬å¦‚æœè®©æ¨¡å‹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">Î¸</span></span></span></span>æ¥<strong>å°½é‡</strong>è¿˜åŸå‡º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi></mrow></msub></mrow><annotation encoding="application/x-tex">P_{data}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">a</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„æ ·æœ¬é›†çš„å›¾ï¼Œ<strong>ä¹Ÿå°±æ˜¯è®©<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">P_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ç”Ÿæˆå‡º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi></mrow></msub></mrow><annotation encoding="application/x-tex">P_{data}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">a</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„å›¾çš„æ¦‚ç‡æœ€å¤§åŒ–</strong></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Î¸</mi><mo>âˆ—</mo></msup><mo>=</mo><mi>a</mi><mi>r</mi><mi>g</mi><munder><mo><mi>max</mi><mo>â¡</mo></mo><mi>Î¸</mi></munder><munderover><mo>âˆ</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msup><mi>x</mi><mi>i</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta^*=arg\max_\theta\prod_{i=1}^mP_\theta(x^i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.738696em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.738696em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.43055999999999994em;"><span style="top:-2.347892em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">max</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.752108em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8746639999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>ä¸åŒçš„å›¾åƒç”Ÿæˆæ¨¡å‹ï¼Œ<strong>æœ€ç»ˆç›®æ ‡éƒ½æ˜¯è®©<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Î¸</mi><mo>âˆ—</mo></msup></mrow><annotation encoding="application/x-tex">\theta^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span></span></span></span>æœ€å¤§åŒ–ï¼ˆä¼¼ç„¶æœ€å¤§åŒ–ï¼‰</strong></p><hr><p>æœ€ç»ˆç›®æ ‡éƒ½æ˜¯è®©<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Î¸</mi><mo>âˆ—</mo></msup></mrow><annotation encoding="application/x-tex">\theta^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span></span></span></span>æœ€å¤§åŒ–ï¼ˆä¼¼ç„¶æœ€å¤§åŒ–ï¼‰ï¼Œå…·ä½“æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿ</p><p>ä¸‹é¢æ˜¯å°†<code>ä¼¼ç„¶æœ€å¤§åŒ–</code>æ¨å¯¼æˆ<code>æœ€å°åŒ–KLæ•£åº¦çš„å…¬å¼</code>ï¼Œ<strong>KLæ•£åº¦ç”¨æ¥åº¦é‡ä¸¤ä¸ªåˆ†å¸ƒçš„è·ç¦»</strong></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328234216622.png" alt="image-20240328234216622"></p><hr><h1 id="å›é¡¾vae">å›é¡¾VAE</h1><blockquote><p>ä¸ºä»€ä¹ˆè¦å…ˆè®²VAEï¼Œå› ä¸ºVAEå¾ˆå¤šä¸œè¥¿å’ŒDMéå¸¸ç±»ä¼¼</p></blockquote><p>VAEçš„å…¨ç§°æ˜¯(Variational Autoencoders) å®ƒå®šä¹‰äº†ä¸€ä¸ª<strong>è¿ç»­çš„ã€ä¸æ˜“å¤„ç†çš„å¯†åº¦å‡½æ•°</strong>ï¼Œæ˜¯é€šè¿‡ä¼˜åŒ–ä¼¼ç„¶çš„ä¸‹ç•Œ(lower bound)æ¥é€¼è¿‘æå¤§ä¼¼ç„¶çš„æ–¹æ³•.å› æ­¤ï¼Œè¿™é‡Œè¦æ˜¯ç”¨ç§¯åˆ†æ¥å®šä¹‰å…¬å¼</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo>âˆ«</mo><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">âˆ£</mi><mi>z</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">p(x)=\int p(z)p(x|z)dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.22225em;vertical-align:-0.86225em;"></span><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span></span></p><h2 id="è‡ªç¼–ç å™¨-autoencoders">è‡ªç¼–ç å™¨-Autoencoders</h2><p>é‚£ä¹ˆè¦äº†è§£VAEï¼Œé¦–å…ˆè¦å¯¹è‡ªç¼–ç å™¨(Autoencoders ,AE) æœ‰ä¸€å®šçš„äº†è§£ã€‚è‡ªç¼–ç å™¨æ˜¯ä¸€ç§é€šè¿‡æ— ç›‘ç£çš„æ–¹å¼å»å­¦ä¹ æ•°æ®å†…åœ¨è¡¨å¾(é™ç»´)çš„ç¥ç»ç½‘ç»œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/10.png" alt="img"></p><p>å·¦ä¾§æ˜¯PCAçš„æ–¹æ³•è¿›è¡Œä¸€ä¸ªé™ç»´ï¼Œå³ä¾§æ˜¯é€šè¿‡è‡ªç¼–ç å™¨æ–¹æ³•å¯¹å›¾ç‰‡è¿›è¡Œä¸€ä¸ªé™ç»´ã€‚å®ƒä»¬çš„åŒºåˆ«æ˜¯ï¼š</p><ul><li>PCAæ˜¯å°†çŸ©é˜µç»è¿‡sigmoidæ¿€æ´»åä¿ç•™ä¸»æˆåˆ†è¾¾åˆ°é™ç»´çš„ç›®çš„ï¼Œç„¶åé€šè¿‡å’ŒWTç›¸ä¹˜è·å¾—æ–°çš„å‹ç¼©åçš„å›¾ç‰‡</li><li>è‡ªç¼–ç å™¨åˆ™æ˜¯é€šè¿‡ä¸€ç³»åˆ—ç¥ç»ç½‘ç»œ(ç¼–ç å™¨)å°†å›¾ç‰‡å˜æˆä¸€ä¸ªå‘é‡ï¼Œç„¶åå†é€šè¿‡ä¸€äº›åˆ—ç¥ç»ç½‘ç»œ(è§£ç å™¨)å°†è¿™ä¸ªå‘é‡å¤åŸæˆä¸€å¼ å›¾ç‰‡</li></ul><p>ä»–ä»¬çš„æ•ˆæœå¯¹æ¯”å¦‚ä¸‹ï¼Œæˆ‘ä»¬çœ‹åˆ°è‡ªç¼–ç å™¨ç›¸å¯¹äºPCAæœ‰æ›´å¤šçš„å‚æ•°ï¼Œä½†å¤åŸåçš„å›¾ç‰‡ä¹Ÿæ›´åŠ æ¸…æ™°</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/11.png" alt="img"></p><h2 id="è‡ªç¼–ç å™¨è¿›è¡Œé¢„è®­ç»ƒ">è‡ªç¼–ç å™¨è¿›è¡Œé¢„è®­ç»ƒ</h2><p>è‡ªç¼–ç å™¨æœ‰ä»€ä¹ˆåº”ç”¨åœºæ™¯å‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œè®­ç»ƒä¸€ä¸ªèƒ½å¤Ÿç”¨äºé‡æ„è¾“å…¥çš„éšå±‚å‘é‡è¡¨ç¤ºï¼š</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/12.png" alt="img"></p><p>ç„¶åï¼Œè®­ç»ƒå®Œæ¯•åï¼Œéšå±‚ç‰¹å¾å°±å¯ä»¥ç”¨äºå…¶ä»–æœ‰ç›‘ç£è®­ç»ƒä»»åŠ¡(ä¾‹å¦‚æœ‰å¤§é‡æ•°æ®ï¼Œå´åªæœ‰å°‘é‡æ ‡ç­¾)</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/13.png" alt="img"></p><p>é‚£ä¹ˆæˆ‘ä»¬å¯ä¸å¯ä»¥éšæœºåˆå§‹åŒ–ä¸€ä¸ªéšå±‚å‘é‡ï¼Œç„¶åé€šè¿‡decoderæ¥ç”Ÿæˆå›¾åƒå‘¢ï¼Ÿè¿™æ˜¯æ¯”è¾ƒå›°éš¾çš„ã€‚å› ä¸ºç”¨å›ºå®šçš„è‡ªç¼–ç å™¨å»ç”Ÿæˆå›¾ç‰‡çš„æ—¶å€™ï¼Œè™½ç„¶éšå±‚å‘é‡ç©ºé—´æ˜¯è¿ç»­çš„ï¼Œä½†æ˜¯æ¯å¼ å›¾ç‰‡ç”Ÿæˆçš„å‘é‡æ˜¯ç¦»æ•£çš„ã€‚å¤„äºç¦»æ•£å‘é‡ä¹‹å¤–çš„å…¶ä»–å‘é‡ï¼Œä¸ä¸€å®šèƒ½ç”Ÿæˆå›¾ç‰‡ã€‚</p><p>å°±å¦‚åŒä¸‹å›¾ï¼Œè™½ç„¶è‡ªç¼–ç å™¨å¯ä»¥å‹ç¼©é»‘ç‹—è¿˜åŸé»‘ç‹—ï¼Œå‹ç¼©ç™½ç‹—è¿˜åŸç™½ç‹—ï¼Œä½†æ˜¯å¤„äºé»‘ç‹—å’Œç™½ç‹—ä¹‹é—´çš„é‚£éƒ¨åˆ†å‘é‡ï¼Œæ˜¯ä¸ä¸€å®šèƒ½ç”Ÿæˆæ–‘ç‚¹ç‹—çš„</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/14.png" alt="img"></p><h2 id="vaeçš„åŸç†">VAEçš„åŸç†</h2><p>ç”±æ­¤ï¼Œæˆ‘ä»¬æå‡ºï¼Œåœ¨è‡ªç¼–ç å™¨çš„éšå±‚å‘é‡ç©ºé—´ä¸­åŠ å…¥ä¸€äº›å™ªéŸ³ï¼Œä½¿å¾—è‡ªç¼–ç å™¨ä¹Ÿèƒ½å¤Ÿç”Ÿæˆæ–‘ç‚¹ç‹—çš„ç…§ç‰‡ï¼š</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/15.png" alt="img"></p><p>é‚£ä¹ˆæ—¢ç„¶æˆ‘ä»¬<strong>å®šä¹‰åœ¨è¿ç»­ç©ºé—´ä¸Š</strong>ï¼Œå› æ­¤<strong>VAEçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä¹Ÿå¾—æ˜¯è¿ç»­</strong>çš„ï¼Œç”±æ­¤å¾—åˆ°äº†å…¬å¼</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo>âˆ«</mo><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">âˆ£</mi><mi>z</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">p(x)=\int p(z)p(x|z)dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.22225em;vertical-align:-0.86225em;"></span><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span></span></p><p>å…¶ä¸­ï¼šxæ˜¯å›¾åƒï¼Œè€Œzæ˜¯å¯ä»¥æ˜¯éšå±‚å‘é‡ç©ºé—´é‡Œé¢çš„ä¸€ä¸ªéšæœºå‘é‡(è¿ç»­å˜é‡)ã€‚æ‰€ä»¥å¯¹äºæ¯ä¸€ä¸ªzå¯èƒ½ä¼šç”Ÿæˆä¸€å¼ å›¾ç‰‡ã€‚</p><h2 id="ç”¨vaeæ¨¡å‹ç”Ÿæˆå›¾åƒ">ç”¨VAEæ¨¡å‹ç”Ÿæˆå›¾åƒ</h2><p>VAEæ¨¡å‹æ€ä¹ˆå»ç”Ÿæˆä¸€å¼ å›¾åƒï¼Ÿ</p><ul><li>é¦–å…ˆï¼Œä»é«˜æ–¯åˆ†å¸ƒä¸­ç”Ÿæˆä¸€ä¸ªéšæœºå˜é‡zï¼Œä½¿å¾— $z \sim N(0,I) $</li><li>è®©æ¯ä¸ªz å»ç”Ÿæˆä»¤ä¸€ä¸ªæ­£æ€åˆ†å¸ƒ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo stretchy="false">(</mo><mi>Î¼</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>Ïƒ</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">N(Î¼(z),Ïƒ(z))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathdefault">Î¼</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></li><li>è®© <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi mathvariant="normal">âˆ£</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">x|z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span>æœä»æ­£æ€åˆ†å¸ƒ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo stretchy="false">(</mo><mi>Î¼</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>Ïƒ</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">N(Î¼(z),Ïƒ(z))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathdefault">Î¼</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¼</mi><mo separator="true">,</mo><mi>Ïƒ</mi></mrow><annotation encoding="application/x-tex">Î¼,Ïƒ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Î¼</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span></span></span></span> ä¸¤ä¸ªå‡½æ•°å¯ä»¥ç”¨ç¥ç»ç½‘ç»œè¡¨ç¤º</li><li>å› ä¸ºzå¯ä»¥ä¸€ç›´ç”Ÿæˆï¼Œå› æ­¤ç†è®ºä¸Š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>å¯ä»¥è¡¨ç¤ºæˆæ— ç©·å¤šä¸ªæ­£æ€åˆ†å¸ƒçš„mixture(å³ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo>âˆ«</mo><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">âˆ£</mi><mi>z</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">p(x)=âˆ«p(z)p(x|z)dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.11112em;vertical-align:-0.30612em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">âˆ«</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span>ï¼‰ã€‚ä½†äº‹å®ä¸Šè®­ç»ƒçš„å›¾ç‰‡æ˜¯æœ‰é™çš„ï¼Œå› æ­¤, è®­ç»ƒç›®æ ‡ä¸ºæœ€å¤§åŒ–<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ</mo><mi>x</mi><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">âˆxp(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>æˆ–<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ‘</mo><mi>x</mi><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">âˆ‘xlog(p(x))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></li></ul><p><img src="https://cdn.lthero.cn/post_images/course/ML/17.png" alt="img"></p><p>ä½†äº‹å®ä¸Šzä¸å¯èƒ½éšæœºç”Ÿæˆçš„ï¼Œè€Œæ˜¯è¦æ ¹æ®æˆ‘ä»¬çš„è¾“å…¥å›¾ç‰‡å­¦ä¹ è€Œæ¥çš„(å·§å¦‡éš¾ä¸ºæ— ç±³ä¹‹ç‚Š)ã€‚æ”¾åœ¨æ•°å­¦å±‚é¢ä¸Šè§£é‡Šï¼Œå°±æ˜¯æˆ‘ä»¬è¦å»å¯»æ‰¾åéªŒæ¦‚ç‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(z|x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span> .è¿™éƒ¨åˆ†ï¼Œå°±æ˜¯è‡ªç¼–ç å™¨ä¸­ <strong>decoder</strong> çš„éƒ¨åˆ†</p><hr><p>åœ¨VAEä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P_\theta(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329211444989.png" alt="image-20240329211444989"></p><blockquote><p>å¦‚ä¸Šå›¾æ‰€ç¤º</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P_\theta(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>æ˜¯ä¸€ä¸ªåˆ†å¸ƒï¼›</li><li>ç½‘ç»œGä½œç”¨ï¼šä»â€œé«˜æ–¯åˆ†å¸ƒâ€é‡‡æ ·å‡ºæ¥çš„å¼ é‡Zï¼Œç»è¿‡ç½‘ç»œGç”ŸæˆæŸä¸ªå†…å®¹</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">Î¸</span></span></span></span>:æ³›æŒ‡ç½‘ç»œGçš„å„ç§å‚æ•°</li></ul></blockquote><p>æ‰€ä»¥ï¼ŒæŒ‰ç†æ¥è¯´ï¼Œå¦‚æœè¦å®šä¹‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P_\theta(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>,å…¶å…¬å¼ä¸º</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo>âˆ«</mo><mi>z</mi></msub><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">âˆ£</mi><mi>z</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">P_\theta(x)=\int_zP(z)P_\theta(x|z)dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.27195em;vertical-align:-0.9119499999999999em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.6105579999999999em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119499999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span></span></p><p>å³ï¼šæ¯ä¸ª<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span>è¢«é‡‡æ ·å‡ºçš„æ¦‚ç‡*ç”±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span>äº§ç”Ÿå‡º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>çš„æ¦‚ç‡ï¼Œå†å¯¹æ‰€æœ‰çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span>åšç§¯åˆ†</p><p>å…¶ä¸­ï¼Œ</p><ul><li><p>æ¯ä¸ª<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span>æ˜¯ä»é«˜æ–¯åˆ†å¸ƒè¢«é‡‡æ ·å‡ºçš„ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span>â€‹æ˜¯å·²çŸ¥çš„</p></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">âˆ£</mi><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P_\theta(x|z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span>â€‹æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><ul><li><p>ä¸€ä¸ªç®€å•çš„æƒ³æ³•æ˜¯ï¼šå¦‚æœG(z)ç”Ÿæˆçš„ä¸œè¥¿å’Œæ ·æœ¬ä¸­çš„xä¸€æ ·ï¼Œå°±è¾“å…¥1ï¼›å¦åˆ™è¾“å‡º0;å¦‚ä¸‹é¢å…¬å¼æ‰€ç¤º</p></li><li><p>ä½†è¿™æ ·çš„ç»“æœæ˜¯ï¼š<strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">âˆ£</mi><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P_\theta(x|z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span>å…¨æ˜¯é›¶ï¼Œæ¯•ç«Ÿä¸å¯èƒ½ç”Ÿæˆçš„ä¸œè¥¿å’Œæ ·æœ¬å®Œå…¨ä¸€æ ·</strong></p></li></ul></li></ul><p class='katex-block katex-error' title='ParseError: KaTeX parse error: Got function &#039;\newline&#039; with no arguments as argument to &#039;\begin{array}&#039; at position 1: \Ì²nÌ²eÌ²wÌ²lÌ²iÌ²nÌ²eÌ²'>P_\theta(x|z)=\left\{\begin{array}\\1, G(z)=x &amp;  \\    0, G(z)\neq x\end{array}  \right.</p><p>è€Œå®é™…ä¸Šå‘¢ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">âˆ£</mi><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P_\theta(x|z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span>ç”¨çš„æ˜¯ä¸‹é¢çš„å…¬å¼</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329213958194.png" alt="image-20240329213958194"></p><p>è¿™é‡Œè¾“å‡ºçš„<code>G(z)</code>æ˜¯ä¸€ä¸ª<code>é«˜æ–¯åˆ†å¸ƒçš„å‡å€¼</code>ï¼Œæ‰€ä»¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">âˆ£</mi><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P_\theta(x|z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span>å°±æ­£æ¯”äº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy="false">(</mo><mo>âˆ’</mo><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>G</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo>âˆ’</mo><mi>x</mi><mi mathvariant="normal">âˆ£</mi><msub><mi mathvariant="normal">âˆ£</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">exp(-||G(z)-x||_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord">âˆ£</span><span class="mord">âˆ£</span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mord">âˆ£</span><span class="mord"><span class="mord">âˆ£</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><blockquote><p>å¹¶ä¸”å¾ˆç›´è§‚çš„ï¼Œå¦‚æœ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span>ä¸<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>è¶Šæ¥è¿‘ï¼Œåˆ™è¯´æ˜<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">âˆ£</mi><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P_\theta(x|z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span>åº”è¯¥è¶Šå¤§</p></blockquote><hr><p>åœ¨å®é™…ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¦ä¼˜åŒ–ï¼š<strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">logP(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>â€‹çš„ä¸‹ç•Œ</strong></p><blockquote><p>è¿™é‡Œå–<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi></mrow><annotation encoding="application/x-tex">log</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span>æ˜¯ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œè®©ç´¯ä¹˜è¿‡ç¨‹å˜æˆç´¯åŠ </p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329215025833.png" alt="image-20240329215025833"></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo>âˆ«</mo><mi>z</mi></msub><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">logP(x)=\int_zq(z|x)logP(x)dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.27195em;vertical-align:-0.9119499999999999em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.6105579999999999em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119499999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span></span></p><p>è¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(z|x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>å¯ä»¥æ˜¯<strong>ä»»æ„çš„åˆ†å¸ƒ</strong>ï¼Œå…ˆä¸ç®¡å®ƒï¼Œè€ŒP(x)åˆå¯ä»¥è¡¨ç¤ºä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">P(x)=\frac{P(z,x)}{P(z|x)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mord mtight">âˆ£</span><span class="mord mathdefault mtight">x</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><p>æ‰€ä»¥ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">logP(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>å¯ä»¥è¡¨ç¤ºä¸º</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo>âˆ«</mo><mi>z</mi></msub><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">logP(x)=\int_zq(z|x)log(\frac{P(z,x)}{P(z|x)})dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.6105579999999999em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119499999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span></span></p><p>éšååœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">log(\frac{P(z,x)}{P(z|x)})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mord mtight">âˆ£</span><span class="mord mathdefault mtight">x</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span>ä¸­ï¼Œåˆ†å­åˆ†æ¯åŒæ—¶ä¹˜ä»¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(z|x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo>âˆ«</mo><mi>z</mi></msub><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">logP(x)=\int_zq(z|x)log(\frac{P(z,x)q(z|x)}{P(z|x)q(z|x)})dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.6105579999999999em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119499999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span></span></p><p>è¿™ç›®çš„æ˜¯ä¸ºäº†ä½¿ç”¨logçš„ç‰¹æ€§ï¼Œå°†ä¹˜æ³•å˜æˆåŠ æ³•ï¼Œä»è€Œå¾—åˆ°ä¸‹é¢å…¬å¼</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo>âˆ«</mo><mi>z</mi></msub><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi><mo>+</mo><msub><mo>âˆ«</mo><mi>z</mi></msub><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">logP(x)=\int_zq(z|x)log(\frac{P(z,x)}{q(z|x)})dz+\int_zq(z|x)log(\frac{q(z|x)}{P(z|x)})dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.6105579999999999em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119499999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.6105579999999999em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119499999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span></span></p><p>å…¶ä¸­ï¼Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>âˆ«</mo><mi>z</mi></msub><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">\int_zq(z|x)log(\frac{q(z|x)}{P(z|x)})dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.05442800000000003em;"><span style="top:-2.34418em;margin-left:-0.19445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35582em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mord mtight">âˆ£</span><span class="mord mathdefault mtight">x</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mord mtight">âˆ£</span><span class="mord mathdefault mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span>è¿™ç©æ„æ˜¯å•¥ï¼Ÿ<strong>å®ƒæ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(z|x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(z|x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>çš„KLæ•£åº¦</strong></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mi>L</mi><mo stretchy="false">(</mo><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">KL(q(z|x)||P(z|x))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord">âˆ£</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p><p>è€Œ<strong>KLæ•£åº¦å¿…ä¸ºæ­£å€¼</strong>ï¼Œæ‰€ä»¥å¯ä»¥æ¨å¯¼å‡ºä¸€ä¸ªä¸ç­‰å¼</p><p>å³</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>&gt;</mo><mo>=</mo><msub><mo>âˆ«</mo><mi>z</mi></msub><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi><mspace linebreak="newline"></mspace><mo>=</mo><msub><mi>E</mi><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>z</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">logP(x)&gt;= \int_zq(z|x)log(\frac{P(z,x)}{q(z|x)})dz \\  =E_{q(z|x)}[log(\frac{P(z,x)}{q(z|x)})]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.6105579999999999em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119499999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mord mtight">âˆ£</span><span class="mord mathdefault mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>è¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></msub><mo>=</mo><msub><mo>âˆ«</mo><mi>z</mi></msub><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">E_{q(z|x)}=\int_zq(z|x)dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.03853em;vertical-align:-0.3551999999999999em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mord mtight">âˆ£</span><span class="mord mathdefault mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1608200000000002em;vertical-align:-0.35582em;"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.05442800000000003em;"><span style="top:-2.34418em;margin-left:-0.19445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35582em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span>ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span>æŒ‡æœŸæœ›</p><p>ä»è€Œå¾—åˆ°äº†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>â€‹çš„<strong>lower bound</strong></p><blockquote><p>åç»­çš„ç›®æ ‡æ˜¯ä¼˜åŒ–è¿™ä¸ªlower boundï¼Œè¿™é‡Œçš„ä¼˜åŒ–æŒ‡çš„æ˜¯â€œæœ€å¤§åŒ–â€è¿™ä¸ªlower boundï¼Œä»è€Œè®©<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>èƒ½å¾—åˆ°è¾ƒå¤§çš„å€¼</p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329220517547.png" alt="VAEå®Œæ•´æ¨å¯¼"></p><hr><h1 id="vaeè¿‡æ¸¡åˆ°ddpm">VAEè¿‡æ¸¡åˆ°DDPM</h1><blockquote><p>è¯´äº†è¿™ä¹ˆå¤šVAEï¼Œé‚£è¿™å’ŒDDPMæœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿï¼Ÿï¼Ÿ</p></blockquote><p>æˆ‘ä»¬æƒ³è±¡ä¸­ï¼ŒDDPMåœ¨ç”Ÿæˆå›¾åƒè¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸æ–­å»é™¤å™ªå£°çš„----ä»çº¯é«˜æ–¯å™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">X_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>é€æ­¥åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">X_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>â€‹</p><p>æˆ‘ä»¬å¯ä»¥å°†è¿™é‡Œå»<strong>å™ªå£°ç½‘ç»œçš„ç»“</strong>æœï¼Œæƒ³è±¡æˆâ€œ<code>ä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒçš„å‡å€¼</code>â€</p><p>è€Œç”±ä¸€ä¸ªå™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">X_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œç”Ÿæˆåˆ°å›¾åƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">X_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„æ¦‚ç‡æ˜¯</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mo>âˆ«</mo><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>:</mo><msub><mi>x</mi><mi>T</mi></msub></mrow></msub><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>T</mi></msub><mo stretchy="false">)</mo><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>T</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>T</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">)</mo><msub><mi>d</mi><msub><mi>x</mi><mn>1</mn></msub></msub><mo>:</mo><msub><mi>d</mi><msub><mi>x</mi><mi>T</mi></msub></msub></mrow><annotation encoding="application/x-tex">P_\theta(x_0)=\int_{x_1:x_T}P(x_T)P_\theta(x_{T-1}|x_T)...P_\theta(x_{t-1}|x_{t})...P_\theta(x_0|x_1)d_{x_1}:d_{x_T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.372255em;vertical-align:-1.012255em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.6105579999999999em;"><span style="top:-1.7880500000000004em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mrel mtight">:</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567071428571427em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.14329285714285717em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.012255em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139199999999997em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.944745em;vertical-align:-0.250305em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139199999999997em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567071428571427em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.14329285714285717em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.250305em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>è¿™é‡Œæ˜¯å¯¹æ‰€æœ‰çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>:</mo><msub><mi>x</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">x_1:x_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ç§¯åˆ†ï¼Œè€Œç§¯åˆ†çš„å†…å®¹æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">x_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>äº§ç”Ÿ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>T</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{T-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>çš„æ¦‚ç‡ï¼Œä¹˜ä»¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>T</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{T-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>äº§ç”Ÿ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>T</mi><mo>âˆ’</mo><mn>2</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{T-2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>çš„æ¦‚ç‡ï¼Œä¸€ç›´ä¹˜åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">x_{1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>äº§ç”Ÿ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_{0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>â€‹çš„æ¦‚ç‡</p><blockquote><p>æ³¨æ„ï¼šè¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>T</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(x_T)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>æ˜¯ç›´æ¥ä»é«˜æ–¯åˆ†å¸ƒé‡‡æ ·çš„ï¼Œä¸æ˜¯æ¨¡å‹äº§ç”Ÿçš„ï¼Œæ‰€ä»¥æ²¡æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">Î¸</span></span></span></span>çš„è§’æ ‡ï¼›<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>T</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>T</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P_\theta(x_{T-1}|x_T)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>æ˜¯æ¨¡å‹äº§ç”Ÿçš„</p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329220632996.png" alt="image-20240329220632996"></p><p>ä»DDPMçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P_\theta(x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>â€‹æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒDDPMå…¶å®æ˜¯è¿›è¡Œäº†<strong>å¤šæ­¥çš„VAE</strong>ï¼Œå¦‚ä¸‹å›¾</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329232526756.png" alt="image-20240329232526756"></p><blockquote><p>æ‰€ä»¥å‘¢ï¼Œé€‚ç”¨äºVAEçš„ä¼˜åŒ–ç›®æ ‡ï¼Œå³**â€œæœ€å¤§åŒ–â€lower bound**çš„æ–¹å¼ï¼Œä¹Ÿé€‚åˆDDPMï¼Œå³ä¸‹å›¾</p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329221741161.png" alt="image-20240329221741161"></p><p>è¿™é‡Œå¼•å‡ºäº†ä¸€ä¸ª<strong>æ–°çš„é—®é¢˜</strong>ï¼Œæˆ‘ä»¬ä¹‹å‰åœ¨VAEè¯´â€œè¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(z|x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>å¯ä»¥æ˜¯<strong>ä»»æ„çš„åˆ†å¸ƒ</strong>â€</p><p>é‚£åœ¨DDPMä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>z</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(z|x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">âˆ£</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>å°±è¢«æ›¿æ¢æˆäº†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>:</mo><msub><mi>x</mi><mi>T</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_1:x_T|x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><p>é—®é¢˜æ¥äº†ï¼Œè¿™ä¸ª<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>:</mo><msub><mi>x</mi><mi>T</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_1:x_T|x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><strong>æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ€ä¹ˆæ±‚å‘¢ï¼Ÿ</strong></p><hr><h1 id="æ±‚q-åˆ†å¸ƒ">æ±‚q()åˆ†å¸ƒ</h1><p><a href="https://www.youtube.com/watch?v=m6QchXTx6wA">https://www.youtube.com/watch?v=m6QchXTx6wA</a></p><p>é¦–å…ˆï¼Œæ¥çœ‹çœ‹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_t|x_{t-1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>â€‹æ˜¯ä»€ä¹ˆï¼Ÿ</p><blockquote><p>q()æ˜¯ä¸ªåˆ†å¸ƒï¼Œå®ƒæ˜¯ç”±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>åŠ å™ªå£°å¾—åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„</p></blockquote><p>è¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_t|x_{t-1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>æ˜¯åŠ å™ªå£°è¿‡ç¨‹çš„å…¬å¼</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ€ä¹ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p><h2 id="ä¸€æ­¥åŠ å™ªå£°åˆ°x-t">ä¸€æ­¥åŠ å™ªå£°åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></h2><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub><mo>=</mo><msqrt><mrow><mn>1</mn><mo>âˆ’</mo><msub><mi>Î²</mi><mi>t</mi></msub></mrow></msqrt><mo>âˆ—</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>+</mo><msqrt><msub><mi>Î²</mi><mi>t</mi></msub></msqrt><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">x_{t}=\sqrt{1-\beta_t}*x_{t-1}+\sqrt{\beta_t}\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.25612499999999994em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.983875em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.9438750000000002em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.25612499999999994em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.791661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.25612499999999994em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.983875em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.9438750000000002em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.25612499999999994em;"><span></span></span></span></span></span><span class="mord mathdefault">Ïµ</span></span></span></span></span></p><p>å…¶ä¸­ï¼Œ</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯ä¸Šä¸€å¼ å™ªå£°</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span></span></span></span>æ˜¯äººä¸ºè®¾å®šçš„è¶…å‚æ•°ï¼Œæ˜¯ç”¨æ¥æ§åˆ¶ä¸åŒæ­¥æ•°æ·»åŠ å™ªå£°å¤šå°‘çš„</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span>ä¸€æ¬¡æ˜¯ä»é«˜æ–¯åˆ†å¸ƒé‡‡æ ·çš„å™ªå£°</li></ul><p>å®ƒçš„ç›´è§‚æ¼”ç¤ºå›¾å¦‚ä¸‹(<strong>å›¾ä¸­çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_{t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>åäº†</strong>ï¼‰</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329222320835.png" alt="image-20240329222320835"></p><blockquote><p>è¿™é‡Œçš„è¶…å‚æ•°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span></span></span></span>æ˜¯å¦å¯ä»¥è‡ªå­¦ä¹ ï¼Ÿå¯ä»¥ï¼Œä½†DDPMä½œè€…ä»¬å°è¯•è¿‡åï¼Œå‘ç°æ•ˆæœä¸å¥½</p></blockquote><p>â€‹</p><p>å³ï¼Œåœ¨åŠ å™ªå£°çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€æ­¥éƒ½è¦</p><ol><li>è®¾å®šæ­¥æ•°tçš„è¶…å‚æ•°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î²</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\beta_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li><li>ä»é«˜æ–¯åˆ†å¸ƒé‡‡ä¸€æ¬¡å™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span></li><li>åŠ ä¹˜æ³•å’ŒåŠ æ³•</li></ol><p>ä¸€æ­¥ï¼Œä¸€æ­¥ï¼Œä¸€æ­¥ï¼Œä¸€æ­¥â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦æœ€ç»ˆå¾—åˆ°çº¯é«˜æ–¯å™ªå£°å›¾åƒ</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329222827458.png" alt="image-20240329222827458"></p><blockquote><p>é‚£ï¼Œæœ‰æ²¡æœ‰ç®€å•çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥ä»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åŠ å™ªå£°åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">x_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>???</p></blockquote><p>æ¯”å¦‚ï¼Œåœ¨ä»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">x_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ—¶ï¼Œéœ€è¦é‡‡æ ·ä¸€æ¬¡é«˜æ–¯åˆ†å¸ƒçš„å™ªå£°</p><p>åœ¨ä»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">x_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>â€‹æ—¶ï¼Œéœ€è¦é‡‡æ ·ä¸€æ¬¡é«˜æ–¯åˆ†å¸ƒçš„å™ªå£°</p><blockquote><p>è¿™ä¸¤æ¬¡çš„å™ªå£°ï¼Œæ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œäº’ä¸ç›¸å¹²çš„</p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329223145789.png" alt="image-20240329223145789"></p><p>æ¥ä¸‹æ¥ï¼Œå°†ä»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">x_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„å…¬å¼ï¼Œä»£å…¥åˆ°ä»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">x_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„å…¬å¼ï¼Œé‚£ä¸å°±å¯ä»¥å¥—å¨ƒäº†å˜›ï¼Œå¦‚ä¸‹å›¾</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329223356098.png" alt="image-20240329223356098"></p><p>é‚£ä¹ˆ<strong>é—®é¢˜åˆæ¥äº†</strong></p><blockquote><p>ä¸Šå›¾ä¸­ï¼Œä¸¤ä¸ªé‡‡æ ·é«˜æ–¯åˆ†å¸ƒçš„å™ªå£°ï¼Œèƒ½å¦ç”¨ä¸€æ¬¡é‡‡æ ·æ¥ä»£æ›¿ï¼Ÿ</p><p>æ²¡é”™ï¼Œå¯ä»¥ï¼ä½†æ˜¯å…¬å¼åˆè¦ç¨å¾®å˜åŒ–ä¸‹</p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329223457730.png" alt="image-20240329223457730"></p><p>åŸæ¥å…³äºåŠ å™ªå£°çš„å…¬å¼å°±è¦å˜äº†</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mrow><mn>1</mn><mo>âˆ’</mo><msub><mi>Î²</mi><mn>2</mn></msub></mrow></msqrt><mo>âˆ—</mo><msqrt><msub><mi>Î²</mi><mn>1</mn></msub></msqrt><mo>âˆ—</mo><msub><mi>Ïµ</mi><mn>1</mn></msub><mo>+</mo><msqrt><msub><mi>Î²</mi><mn>2</mn></msub></msqrt><msub><mi>Ïµ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\sqrt{1-\beta_2}*\sqrt{\beta_1}*\epsilon_1+\sqrt{\beta_2}\epsilon_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.25612499999999994em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.983875em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.9438750000000002em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.25612499999999994em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.25612499999999994em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.983875em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.9438750000000002em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.25612499999999994em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.25612499999999994em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.983875em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.9438750000000002em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.25612499999999994em;"><span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>å˜æˆäº†</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mrow><mn>1</mn><mo>âˆ’</mo><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><msub><mi>Î²</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><msub><mi>Î²</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow></msqrt><mo>âˆ—</mo><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\sqrt{1-(1-\beta_2)(1-\beta_1)}*\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.25612499999999994em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.983875em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.9438750000000002em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.25612499999999994em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span></span></p><blockquote><p>è¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span>â€‹åªè¦é‡‡ä¸€æ¬¡é«˜æ–¯åˆ†å¸ƒå³å¯ï¼ï¼ï¼</p><p>ä¸ºä»€ä¹ˆï¼Œè¿™é‡Œå¯ä»¥ç”¨ä¸€æ¬¡åŠ å™ªå£°æ¥å¹³æ›¿å¤šæ¬¡åŠ å™ªå£°ï¼Ÿ</p><p>å¦‚æœ<strong>çœŸçš„å®Œå…¨ç›¸ç­‰</strong>ï¼Œé‚£ä¹ˆâ€œè¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span>åªè¦é‡‡ä¸€æ¬¡é«˜æ–¯åˆ†å¸ƒâ€çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span>å°±ä¸€å®šä¸<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\epsilon_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\epsilon_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>â€‹æ˜¯ç›¸å…³çš„ï¼</p><p>ä½†æ˜¯ï¼Œç”±äºæˆ‘ä»¬ä¸è¦æ±‚å®Œå…¨ç›¸ç­‰ï¼Œå› ä¸º<strong>ä¹Ÿæ²¡å¿…è¦å®Œå…¨ç›¸ç­‰</strong>ï¼Œæ¯•ç«Ÿéƒ½æ˜¯éšæœºåŠ å™ªå£°å‡ºæ¥çš„ç»“æœï¼Œä¸ç”¨é‚£ä¹ˆçº ç»“</p><p>ä»ç»“æœä¸Šæ¥è¯´ï¼Œè¿™æ ·å¹³æ›¿çš„æ–¹æ³•æ•ˆæœæ²¡å•¥æŸå¤±ï¼Œåè€Œæé«˜äº†æ•ˆç‡</p></blockquote><p>è§£é‡Šä¸‹ä¸Šé¢â€œå…¬å¼çš„å˜åŒ–â€ï¼Œæœ¬è´¨ä¸Šæ˜¯åšäº†ä¸ªæ­£åˆ™åŒ–çš„æŠ€å·§ï¼Œå½“æˆ‘ä»¬æŠŠä¸¤ä¸ªæ‹¥æœ‰ä¸åŒæ–¹å·®çš„ä¸¤ä¸ªé«˜æ–¯èåˆåœ¨ä¸€èµ·æ—¶ï¼Œèåˆåçš„æ–¹å·®å°±å•çº¯çš„æŠŠä¸¤ä¸ªæ–¹å·®ç›¸åŠ ï¼ˆå¦‚ä¸‹å›¾ï¼‰</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240506204028320.png" alt="image-20240506204028320"></p><hr><p>é‚£ä¹ˆï¼ŒæŒ‰ç…§è¿™ç§å¥—è·¯ï¼Œå°†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ç›´æ¥åŠ å™ªå£°åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„å…¬å¼å°±å˜æˆäº†</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329223826315.png" alt="image-20240329223826315"></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub><mo>=</mo><msqrt><mrow><mn>1</mn><mo>âˆ’</mo><msub><mi>Î²</mi><mn>1</mn></msub></mrow></msqrt><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msqrt><mrow><mn>1</mn><mo>âˆ’</mo><msub><mi>Î²</mi><mi>t</mi></msub></mrow></msqrt><mo>âˆ—</mo><msub><mi>x</mi><mn>0</mn></msub><mo>+</mo><msqrt><mrow><mn>1</mn><mo>âˆ’</mo><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><msub><mi>Î²</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><msub><mi>Î²</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow></msqrt><mo>âˆ—</mo><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">x_t=\sqrt{1-\beta_1}...\sqrt{1-\beta_t}*x_0+\sqrt{1-(1-\beta_1)...(1-\beta_t)}*\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.25612499999999994em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.983875em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.9438750000000002em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.25612499999999994em;"><span></span></span></span></span></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.983875em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.9438750000000002em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.25612499999999994em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.25612499999999994em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.983875em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.9438750000000002em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.25612499999999994em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span></span></p><p>åŒæ ·çš„ï¼Œè¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span>åªç”¨é‡‡æ ·ä¸€æ¬¡é«˜æ–¯åˆ†å¸ƒ</p><p>ä¸ºäº†ç®€åŒ–å…¬å¼ï¼Œè¿™é‡Œåšä¸¤ä¸ªçº¦å®š</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î±</mi><mi>t</mi></msub><mo>=</mo><mn>1</mn><mo>âˆ’</mo><msub><mi>Î²</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\alpha_t=1-\beta_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub><mo>=</mo><msub><mi>Î±</mi><mn>1</mn></msub><msub><mi>Î±</mi><mn>2</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>Î±</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\bar{\alpha}_t=\alpha_1\alpha_2...\alpha_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.71778em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li></ul><p>äºæ˜¯ï¼</p><p>æˆ‘ä»¬å¾—åˆ°äº†ï¼</p><p>å¸¸è§çš„ï¼</p><blockquote><p>æˆ‘ä»¬åœ¨å‰å‘åŠ å™ªå£°è¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰è®­ç»ƒè¿‡ç¨‹ï¼Œå¯ä»¥ç›´æ¥è·³æ­¥ï¼ä¸€æ­¥åŠ å™ªå£°åˆ°ä»»æ„çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p></blockquote><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub><mo>=</mo><msqrt><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub></msqrt><mo>âˆ—</mo><msub><mi>x</mi><mn>0</mn></msub><mo>+</mo><msqrt><mrow><mn>1</mn><mo>âˆ’</mo><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub></mrow></msqrt><mo>âˆ—</mo><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">x_t=\sqrt{\bar{\alpha}_t}*x_0+\sqrt{1-\bar{\alpha}_t}*\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.19723500000000005em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.842765em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.802765em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19723500000000005em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.15890499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8810950000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.841095em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15890499999999996em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span></span></p><h2 id="æ‰¾åˆ°ä¼˜åŒ–çš„ç›®æ ‡">æ‰¾åˆ°ä¼˜åŒ–çš„ç›®æ ‡</h2><p>ä¸ºä»€ä¹ˆè¦æ±‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å•Šï¼Œæ±‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„ç›®çš„æ˜¯ä¸ºäº†æ±‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>x</mi><mn>1</mn><mo>:</mo><msub><mi>x</mi><mi>T</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x1:x_T)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œè€Œæ±‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>:</mo><msub><mi>x</mi><mi>T</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_1:x_T|x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>æ˜¯ä¸ºäº†æ±‚</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>:</mo><msub><mi>x</mi><mi>T</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo>:</mo><msub><mi>x</mi><mi>T</mi></msub><mo stretchy="false">)</mo></mrow><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>:</mo><msub><mi>x</mi><mi>T</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">E_{q(x_1:x_T|x_0)}[log(\frac{P(x_0:x_T)}{q(x_1:x_T|x_0)})]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mrel mtight">:</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567071428571427em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.14329285714285717em;"><span></span></span></span></span></span></span><span class="mord mtight">âˆ£</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><blockquote><p>è€Œå®ƒï¼Œæ˜¯æˆ‘ä»¬è¦ä¼˜åŒ–çš„ç›®æ ‡ï¼å®ƒå«&quot;lower bound&quot;!æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä¸ºäº†<strong>è®©&quot;lower bound&quot;æœ€å¤§åŒ–</strong></p></blockquote><p>æˆ‘ä»¬ç°åœ¨å·²ç»çŸ¥é“äº†&quot;lower bound&quot;ä¸­æ¯ä¸ªç¬¦åˆçš„è¡¨è¾¾å½¢å¼ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å¼€å§‹æ±‚&quot;lower bound&quot;äº†ï¼</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240329225243278.png" alt="lower boundæ¨å¯¼ç»“æœ"></p><blockquote><p>ä¸Šå›¾çš„æ¨å¯¼ç»“æœæ¥æºï¼š<a href="https://arxiv.org/abs/2208.11970">Understanding diffusion models a unified perspective</a></p></blockquote><p>è¿‡ç¨‹å¤ªå¤æ‚äº†ï¼Œç›´æ¥çœ‹ç»“æœ</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>:</mo><msub><mi>x</mi><mi>T</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo>:</mo><msub><mi>x</mi><mi>T</mi></msub><mo stretchy="false">)</mo></mrow><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>:</mo><msub><mi>x</mi><mi>T</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mspace linebreak="newline"></mspace><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo>âˆ’</mo><mi>K</mi><mi>L</mi><mo stretchy="false">(</mo><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>T</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>T</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mo>âˆ’</mo><munderover><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>2</mn></mrow><mi>T</mi></munderover><msub><mo><mi mathvariant="normal">E</mi><mo>â¡</mo></mo><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi>K</mi><mi>L</mi><mo stretchy="false">(</mo><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">E_{q(x_1:x_T|x_0)}[log(\frac{P(x_0:x_T)}{q(x_1:x_T|x_0)})]\\=\mathbb{E}_{q(x_1|x_0)}[logP(x_0|x_1)]-KL(q(x_T|x_0)||P(x_T)) \\-\sum_{t=2}^T\operatorname{E}_{q(x_t|x_0)}[KL(q(x_{t-1}|x_t,x_0)||P(x_{t-1}|x_t))]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mrel mtight">:</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567071428571427em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.14329285714285717em;"><span></span></span></span></span></span></span><span class="mord mtight">âˆ£</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3551999999999999em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">E</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mtight">âˆ£</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">âˆ£</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:3.0954490000000003em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">2</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop"><span class="mord mathrm">E</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.29634285714285713em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mtight">âˆ£</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">âˆ£</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>ç»“æœä¸€å…±æœ‰<strong>ä¸‰é¡¹</strong></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="double-struck">E</mi><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\mathbb{E}_{q(x_1|x_0)}[logP(x_0|x_1)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3551999999999999em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">E</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mtight">âˆ£</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span>:ä¸è¦è®­ç»ƒçš„æ¨¡å‹æ— å…³ï¼</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mi>L</mi><mo stretchy="false">(</mo><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>T</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>T</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">KL(q(x_T|x_0)||P(x_T))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">âˆ£</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>è¿™ä¸€é¡¹ï¼Œä¸è¦è®­ç»ƒçš„æ¨¡å‹æ— å…³ï¼<ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>T</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(x_T)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>æ˜¯ä»é«˜æ–¯åˆ†å¸ƒé‡‡æ ·çš„åˆå§‹å™ªå£°ï¼›</li><li>è€Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>T</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_T|x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>â€‹æ˜¯å·²ç»è®¾å®šå¥½çš„ï¼Œæ˜¯åœ¨Forwarding Processä¸­ï¼ˆåŠ å™ªå£°è¿‡ç¨‹ä¸­ï¼‰ï¼Œä¹Ÿä¸æ¨¡å‹æ— å…³ï¼›<strong>æ³¨æ„ï¼šåŠ å™ªå£°è¿‡ç¨‹æ˜¯å›ºå®šçš„è¡Œä¸ºï¼Œä¸æ¶‰åŠæ¨¡å‹å­¦ä¹ </strong></li></ul></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>2</mn></mrow><mi>T</mi></msubsup><msub><mo><mi mathvariant="normal">E</mi><mo>â¡</mo></mo><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi>K</mi><mi>L</mi><mo stretchy="false">(</mo><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\sum_{t=2}^T\operatorname{E}_{q(x_t|x_0)}[KL(q(x_{t-1}|x_t,x_0)||P(x_{t-1}|x_t))]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.336431em;vertical-align:-0.3551999999999999em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">2</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop"><span class="mord mathrm">E</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.29634285714285713em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mtight">âˆ£</span><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">âˆ£</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span>:è¿™é‡Œåˆç”¨äº†KLæ•£åº¦ï¼Œæ¥è®¡ç®—ä¸¤ä¸ªåˆ†å¸ƒçš„è·ç¦»<ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼šæ˜¯ä¸æ¨¡å‹æ— å…³çš„ï¼Œæˆ‘ä»¬<strong>å¾—æƒ³åŠæ³•ç®—å‡ºæ¥</strong></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(x_{t-1}|x_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼š<strong>çœŸæ­£ä¸æ¨¡å‹ç›¸å…³çš„</strong>ï¼æœ‰å…³çš„ï¼</li></ul></li></ul><blockquote><p>ä»ç»“æœä¸­çœ‹ï¼Œæœ€é‡è¦çš„æ˜¯æœ€åä¸€é¡¹ï¼Œæˆ‘ä»¬è¦å°†&quot;lower bound&quot;æœ€å¤§åŒ–ï¼Œä¹Ÿå°±æ˜¯è¦å°†<strong>ç¬¬ä¸‰é¡¹æœ€å°åŒ–</strong>ï¼ˆå‰é¢æœ‰ä¸ªè´Ÿå·ï¼‰</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼è¦å°†<strong>ä¸¤ä¸ªåˆ†å¸ƒçš„KLæ•£åº¦</strong>æœ€å°åŒ–ï¼ï¼ï¼</p><p>æ²¡é”™ï¼Œè¿˜æ˜¯å¾ˆç›´è§‚çš„ï¼</p><p>æˆ‘ä»¬çš„æœ€ç»ˆå¤§ç›®æ ‡æ˜¯<strong>ç”Ÿæˆæ¨¡å‹è¦ç”Ÿæˆé€¼çœŸçš„å›¾åƒ</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¦æ¨¡æ‹Ÿå‡º<strong>çœŸå®å›¾åƒçš„åˆ†å¸ƒ</strong>ï¼</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„<strong>æ¨¡å‹çš„åˆ†å¸ƒ</strong>ä¸<strong>çœŸå®å›¾åƒçš„åˆ†å¸ƒ</strong>ï¼Œå®ƒä»¬çš„KLæ•£åº¦ï¼ˆåˆ†å¸ƒä¹‹é—´çš„è·ç¦»ï¼‰è¶Šå°è¶Šå¥½</p></blockquote><hr><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å…ˆä¸çœ‹å‰ä¸¤ä¸ªå¼å­ï¼Œæˆ‘ä»¬åªå…³æ³¨ç¬¬ä¸‰ä¸ªï¼Œä¸æ¨¡å‹ç›¸å…³çš„å¼å­</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328221304863.png" alt="image-20240328221304863"></p><blockquote><p>æˆ‘ä»¬è¦æ±‚ï¼šå›¾ä¸­è“è‰²æ¡†å†…çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>æ˜¯æœªçŸ¥çš„</p></blockquote><p>è¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_t|x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>è¡¨ç¤ºç”±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ<code>ä¸€ä¸ªé«˜æ–¯å™ªå£°</code>äº§ç”Ÿå‡º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>,è¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä»è‚‰çœ¼çœ‹æ˜¯ä¸ªå›¾åƒï¼Œä½†å®ƒå…¶å®æ˜¯ä¸ªæŸç§åˆ†å¸ƒ</p><blockquote><p>æˆ‘ä»¬ç›®å‰å·²çŸ¥ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_t|x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_t|x_{t-1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œä¹Ÿå°±æ˜¯è¯´ä»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œä»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œä»¥åŠç›´æ¥ä»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_{t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œè¿™ä¸‰ä¸ªè¿‡ç¨‹æˆ‘ä»¬éƒ½æ˜¯çŸ¥é“çš„</p></blockquote><p>ä½†å¦‚æœæ­¤æ—¶ï¼Œ<strong>ä¸å†ç»™é«˜æ–¯å™ªå£°</strong>ï¼Œè€Œæ˜¯ä»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>ç›´æ¥åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œæ­¤æ—¶éœ€è¦ç»è¿‡å…¬å¼è½¬æ¢ï¼Œä¹Ÿèƒ½æ±‚å‡ºæ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328222006498.png" alt="image-20240328222006498"></p><p>å…¬å¼å¦‚ä¸‹</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mo>=</mo><mfrac><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow></mfrac><mspace linebreak="newline"></mspace><mo>=</mo><mfrac><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)\\= \frac{q(x_{t-1},x_t,x_0)}{q(x_t,x_0)}=\frac{q(x_t|x_{t-1})q(x_{t-1}|x_0)q(x_0)}{q(x_t|x_0)q(x_0)}\\=\frac{q(x_t|x_{t-1})q(x_{t-1}|x_0)}{q(x_t|x_0)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¾—åˆ°äº†è½¬æ¢åçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œåœ¨å…¬å¼æ¨å¯¼ä¸‹ï¼Œæœ€ç»ˆå¾—åˆ°ä¸‹å›¾çš„å†…å®¹</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328222404191.png" alt="image-20240328222404191"></p><blockquote><p>ä¸Šå›¾æ¨å¯¼æ¥æºè®ºæ–‡ï¼š<a href="https://arxiv.org/abs/2208.11970">Understanding diffusion models a unified perspective</a></p></blockquote><p>é‚£ä¹ˆï¼Œç°åœ¨å°±çŸ¥é“äº†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>å…·ä½“çš„å€¼ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯ç¬¦åˆä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒçš„ï¼Œå…¶å‡å€¼æ˜¯ç”±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å…±åŒå†³å®šçš„</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328222833900.png" alt="image-20240328222833900"></p><p>çŸ¥é“äº†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>åå‘¢ï¼Œå°±å¯ä»¥æ±‚å‡º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(x_{t-1}|x_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>â€‹çš„KLæ•£åº¦ï¼ˆKLæ•£åº¦å³ï¼šä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´çš„è·ç¦»ï¼‰</p><hr><h1 id="æ±‚klæ•£åº¦æœ€å°å€¼">æ±‚KLæ•£åº¦æœ€å°å€¼</h1><p><a href="https://www.youtube.com/watch?v=67_M2qP5ssY">https://www.youtube.com/watch?v=67_M2qP5ssY</a></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328224901922.png" alt="image-20240328224901922"></p><p>å¯ä»¥ç”¨ä¸Šé¢è¿™ä¸ªå…¬å¼æ¥å°†ä¸¤ä¸ªåˆ†å¸ƒæ±‚ä»–ä»¬çš„æ±‚KLæ•£åº¦ï¼Œä½†<strong>å®é™…å‘¢ï¼Œæœ‰ä¸ªæ›´ç®€å•çš„æ–¹æ³•</strong></p><blockquote><p>è¦æ³¨æ„ï¼Œæˆ‘ä»¬æ±‚KLæ•£åº¦çš„ç›®æ ‡ï¼Œæ˜¯ä¸ºäº†è®©è¿™ä¸ªæ±‚KLæ•£åº¦å€¼æœ€å°ï¼Œä»è€Œè®©â€œæ•´ä¸ªå¼å­â€çš„ç»“æœæœ€å¤§ï¼ˆ<strong>æœ€å¤§åŒ–â€œä¼¼ç„¶â€</strong>ï¼‰</p></blockquote><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åˆšåˆšæ±‚å‡ºäº†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>å…·ä½“çš„å€¼ï¼Œå…¶å‡å€¼æ˜¯ç”±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å…±åŒå†³å®šçš„ï¼Œå®ƒæ˜¯ä¸€ä¸ªå›ºå®šçš„å€¼ï¼Œ<strong>è·Ÿæˆ‘ä»¬è¦è®­ç»ƒçš„ç½‘ç»œæ— å…³</strong>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ–¹å·®å’Œå‡å€¼éƒ½æ˜¯<em>fixed</em></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328225219777.png" alt="image-20240328225219777"></p><p>è€Œå¦ä¸€ä¸ªåˆ†å¸ƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(x_{t-1}|x_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>å‘¢ï¼Œ<strong>å®ƒçš„æ–¹å·®æˆ‘ä»¬å°±å½“æˆå›ºå®šçš„</strong>ï¼Œå› ä¸ºåœ¨å‰é¢çš„è®¨è®ºä¸­ï¼Œæˆ‘ä»¬åªè®©å‡å€¼æ˜¯ç¬¦åˆé«˜æ–¯åˆ†å¸ƒ</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328225305218.png" alt="image-20240328225305218"></p><blockquote><p>ç»¼ä¸Šï¼Œæˆ‘ä»¬çš„æœ€ç»ˆç›®æ ‡æ˜¯è®©KLæ•£åº¦æœ€å°ï¼Œè€Œå…¶ä¸­ä¸€ä¸ªåˆ†å¸ƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>æ˜¯å›ºå®šçš„ï¼›å¦ä¸€ä¸ªåˆ†å¸ƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(x_{t-1}|x_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>â€‹åªæœ‰<strong>å‡å€¼å¯ä»¥æ”¹å˜</strong></p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åªèƒ½<strong>è®©<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P_{\theta}(x_{t-1}|x_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>çš„å‡å€¼æ¥è¿‘<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>çš„å‡å€¼</strong>ï¼Œè¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">P_{\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>()å°±æ˜¯<code>æˆ‘ä»¬è®­ç»ƒçš„æ¨¡å‹</code></p></blockquote><hr><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹è¿™ä¸¤ä¸ªåˆ†å¸ƒçš„ä¸¤ä¸ªå‡å€¼åˆ†åˆ«æ˜¯ä»€ä¹ˆ</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>çš„å‡å€¼æ˜¯ä¸‹é¢çš„å…¬å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªå›ºå®šçš„</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><msqrt><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></msqrt><msub><mi>Î²</mi><mi>t</mi></msub><msub><mi>x</mi><mn>0</mn></msub><mo>+</mo><msqrt><msub><mi>Î±</mi><mi>t</mi></msub></msqrt><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><msub><mi>x</mi><mi>t</mi></msub></mrow><mrow><mn>1</mn><mo>âˆ’</mo><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\sqrt{\bar{\alpha}_{t-1}}\beta_tx_0+\sqrt{\alpha_t}(1-\bar{\alpha}_{t-1})x_t}{1-\bar{\alpha}_t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3054445em;vertical-align:-0.8360000000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4694445000000003em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.70472em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7647245em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.7247244999999998em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2752755em;"><span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.72528em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.68528em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.31472em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬<strong>åªèƒ½è®­ç»ƒDenoiseModel</strong>ï¼Œè®©å…¶<strong>è¾“å‡ºçš„å‡å€¼è¶Šæ¥è¿‘<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>çš„å‡å€¼è¶Šå¥½</strong></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328225626895.png" alt="image-20240328225626895"></p><hr><blockquote><p>ç›®æ ‡ï¼šè®­ç»ƒDenoiseModelï¼Œè®©å…¶è¾“å‡ºçš„å‡å€¼è¶Šæ¥è¿‘<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>çš„å‡å€¼è¶Šå¥½</p></blockquote><p>ä¸‹é¢ä¸¾ä¾‹è¯´ä¸‹ï¼Œæ€ä¹ˆè®­ç»ƒ</p><p>æ¯”å¦‚æˆ‘ä»¬çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯å·²çŸ¥çš„æ ·æœ¬å›¾ï¼Œéšåï¼Œç”¨ä¹‹å‰æåˆ°çš„æ–¹æ³•**â€œä¸€æ­¥åˆ°ä½â€åŠ å™ªå£°**ï¼Œç›´æ¥å¾—åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328230154278.png" alt="image-20240328230154278"></p><p>æˆ‘ä»¬å°†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span></span></span></span>â€‹è¾“å…¥ç»™DenoiseModelï¼Œè€ŒDenoiseModelè¦åšçš„ï¼Œå°±æ˜¯å°†è¾“å‡ºä¸€ä¸ªæ¥è¿‘ä¸‹é¢ç©æ„</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><msqrt><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></msqrt><msub><mi>Î²</mi><mi>t</mi></msub><msub><mi>x</mi><mn>0</mn></msub><mo>+</mo><msqrt><msub><mi>Î±</mi><mi>t</mi></msub></msqrt><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><msub><mi>x</mi><mi>t</mi></msub></mrow><mrow><mn>1</mn><mo>âˆ’</mo><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\sqrt{\bar{\alpha}_{t-1}}\beta_tx_0+\sqrt{\alpha_t}(1-\bar{\alpha}_{t-1})x_t}{1-\bar{\alpha}_t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3054445em;vertical-align:-0.8360000000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4694445000000003em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.70472em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7647245em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.7247244999999998em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2752755em;"><span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.72528em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.68528em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.31472em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>æˆ‘ä»¬å®é™…ä¸Šæ˜¯ç”¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ¥é¢„æµ‹å‡ºä¸Šé¢çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>çš„å‡å€¼ï¼Œè€Œè¿™ä¸ªå‡å€¼ä¸­ï¼Œç”šè‡³æ²¡æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>çš„å‚ä¸!!!</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328230426266.png" alt="image-20240328230426266"></p><p>å¦‚æœå°†ä¸Šè¿°çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>â€‹çš„å‡å€¼å†åŒ–ç®€ï¼Œå¯ä»¥å¾—åˆ°ä¸‹é¢çš„å…¬å¼</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><msqrt><msub><mi>Î±</mi><mi>t</mi></msub></msqrt></mfrac><mo stretchy="false">(</mo><msub><mi>x</mi><mi>t</mi></msub><mo>âˆ’</mo><mfrac><mrow><mn>1</mn><mo>âˆ’</mo><msub><mi>Î±</mi><mi>t</mi></msub></mrow><msqrt><mrow><mn>1</mn><mo>âˆ’</mo><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub></mrow></msqrt></mfrac><mi>Ïµ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\frac{1}{\sqrt{\alpha_t}}(x_t-\frac{1-\alpha_t}{\sqrt{1-\bar{\alpha}_t}}\epsilon)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3221600000000002em;vertical-align:-1.00072em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.72528em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.68528em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.31472em;"><span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.00072em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.25144em;vertical-align:-0.93em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.27778em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8322200000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.79222em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.20777999999999996em;"><span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault">Ïµ</span><span class="mclose">)</span></span></span></span></span></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328230859232.png" alt="image-20240328230859232"></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub><mo>=</mo><msqrt><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub></msqrt><mo>âˆ—</mo><msub><mi>x</mi><mn>0</mn></msub><mo>+</mo><msqrt><mrow><mn>1</mn><mo>âˆ’</mo><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub></mrow></msqrt><mo>âˆ—</mo><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">x_t=\sqrt{\bar{\alpha}_t}*x_0+\sqrt{1-\bar{\alpha}_t}*\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.19723500000000005em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.842765em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.802765em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19723500000000005em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.15890499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8810950000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.841095em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15890499999999996em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span></span></p><p>æˆ‘ä»¬å†æ¬å‡ºæ¥è¿™ä¸ªå…¬å¼ï¼Œä½œä¸€äº›ç§»é¡¹åï¼Œå¾—åˆ°äº†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„å…¬å¼ï¼ˆåŠ å™ªè¿‡ç¨‹ä¸­çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span>æˆ‘ä»¬ä¸å¯èƒ½çŸ¥é“äº†ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\epsilon_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯æ¨¡å‹é¢„æµ‹çš„ï¼‰</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub><mo>=</mo><mfrac><mrow><msub><mi>x</mi><mi>t</mi></msub><mo>âˆ’</mo><msqrt><mrow><mn>1</mn><mo>âˆ’</mo><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub></mrow></msqrt><mo>âˆ—</mo><msub><mi>Ïµ</mi><mi>Î¸</mi></msub></mrow><msub><msqrt><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover></msqrt><mi>t</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">x_0=\frac{x_t-\sqrt{1-\bar{\alpha}_t}*\epsilon_\theta}{\sqrt{\bar{\alpha}}_t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.4889200000000002em;vertical-align:-0.9797em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.50922em;"><span style="top:-2.24111em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.86889em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span></span></span><span style="top:-2.82889em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17110999999999998em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.20974599999999996em;"><span style="top:-2.47919em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.22080999999999998em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8322200000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.79222em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.20777999999999996em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9797em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>æˆ‘ä»¬æŠŠ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ›¿æ¢æ‰ï¼Œè®©ä¸Šé¢è¿™ä¸ªå›¾çš„å…¬å¼ä¸­ï¼Œ<strong>åªæœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>è€Œæ²¡æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></strong>ï¼Œå¹¶ä¸”ï¼ŒæˆåŠŸåœ°æŠŠ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span>å¼•å…¥åˆ°äº†å…¬å¼ä¸­</p><blockquote><p>è¿™é‡Œæ˜¯ç”¨<strong>åŠ å™ªè¿‡ç¨‹</strong>ä¸­çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„å…¬å¼ï¼Œå³ï¼Œä½¿ç”¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>x</mi><mn>0</mn></msub><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{x_0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span>ï¼ˆæŒ‡é¢„æµ‹çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)<strong>æ›¿æ¢æ‰äº†å»å™ªè¿‡ç¨‹</strong>ä¸­çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ã€å› ä¸ºæˆ‘ä»¬åœ¨å»å™ªè¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸å¯èƒ½çŸ¥é“<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„ï¼Œæ¯•ç«Ÿæˆ‘ä»¬æœ€ç»ˆè¦ç”Ÿæˆçš„å°±æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ã€‘</p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240504200530272.png" alt="image-20240504200530272"></p><p>è¿™é‡Œå°±èƒ½çœ‹å‡ºæ¥DDIMå’ŒDDPMçš„å…¬å¼åŒºåˆ«ï¼Œç®€å•æ¥è¯´ï¼Œå‡å¦‚DDIMå½“å‰æ­¥æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œæƒ³è¦å¾—åˆ°ä¸‹ä¸€æ­¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œå®ƒéœ€è¦ä¸¤ä¸ªè¾“å…¥å€¼ï¼š<strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>x</mi><mn>0</mn></msub><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{x_0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></strong>ï¼ˆæŒ‡é¢„æµ‹çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)ï¼Œè€Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>x</mi><mn>0</mn></msub><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{x_0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span>ä»å¯ä»¥ç”¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ¥è®¡ç®—å‡ºæ¥ã€‚è¿™æ ·ä¸€æ¥ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>çš„æœ€ç»ˆå…¬å¼ä¸­ï¼Œè¿˜æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>ä»…éœ€è¦<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å°±å¯ä»¥è®¡ç®—å‡ºæ¥ã€‚</p><blockquote><p>è€Œè¿™é‡Œæ›¿æ¢æ•ˆæœçš„å¥½åï¼Œå°±è¦çœ‹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\epsilon_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>äº†ï¼ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\epsilon_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯æ¨¡å‹è®­ç»ƒå‡ºæ¥çš„ï¼‰ï¼Œå¦‚æœ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\epsilon_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>éå¸¸ç‰›ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç”¨**<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>x</mi><mn>0</mn></msub><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{x_0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span>ï¼ˆæŒ‡é¢„æµ‹çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)<strong>å°±å¯ä»¥100%æ›¿æ¢æ‰</strong>å»å™ªè¿‡ç¨‹<strong>ä¸­çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œä¹Ÿå°±æ˜¯è®©</strong>ä¸Šå›¾ä¸­çš„?å®Œå…¨ç­‰äº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(x_{t-1}|x_t,x_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>çš„å‡å€¼**ï¼Œä¹Ÿå°±æ˜¯å»å™ªå£°è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€æ­¥éƒ½èƒ½100%æŠŠåŠ å™ªè¿‡ç¨‹é‚£ä¸€æ­¥å®é™…æ·»åŠ çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">Ïµ</span></span></span></span>å»æ‰ï¼ˆå°½ç®¡å®é™…ä¸Šä¸å¯èƒ½ï¼‰</p></blockquote><p>è€Œåœ¨è¿™ä¸ªå…¬å¼ä¸­ï¼Œ<strong>åªæœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\epsilon_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯çœŸæ­£éœ€è¦æ¨¡å‹æ¥é¢„æµ‹</strong>çš„ï¼Œè€Œå…¶å®ƒçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î±</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span></span>å€¼éƒ½æ˜¯äººä¸ºè®¾å®šçš„</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328231150250.png" alt="image-20240328231150250"></p><p>æ‰€ä»¥è‡³æ­¤ï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†ï¼Œè¿™ä¸ªæ¨¡å‹çš„è¾“å‡ºå€¼è™½ç„¶æ˜¯ä¸€ä¸ªå™ªå£°ï¼Œä½†æ¨¡å‹çš„ç›®æ ‡å¹¶ä¸æ˜¯ç®€å•çš„è®©æŸä¸ªå›¾åƒæŠŠå™ªå£°å‡å»åï¼Œè®©å®ƒæ›´åƒåŸå›¾</p><p>è€Œæ˜¯<strong>ä¸ºäº†è®©KLæ•£åº¦æ›´å°</strong></p><p>è€Œæ˜¯<strong>ä¸ºäº†è®©ä¼¼ç„¶æœ€å¤§åŒ–</strong></p><p>è€Œæ˜¯<strong>ä¸ºäº†è®©æˆ‘ä»¬æ¨¡æ‹Ÿçš„åˆ†å¸ƒæ›´æ¥è¿‘çœŸå®å›¾åƒåˆ†å¸ƒ</strong></p><p><code>è¿‡ç¨‹çš„ä¸€å°æ­¥ï¼Œæ¨¡å‹çš„ä¸€å¤§æ­¥</code></p><hr><p>ä½†æ˜¯ï¼ŒåŸå…¬å¼ä¸­è¿˜æœ‰<strong>æ·»åŠ äº†ä¸€ä¸ªâ€œé¢å¤–çš„å™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïƒ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span></span></span></span>â€</strong></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïƒ</mi><mi>t</mi></msub><mo>=</mo><mi>Î·</mi><msub><mi>Î²</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>t</mi></msub><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mo>=</mo><msqrt><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><msub><mi>Î±</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><msub><mi>Î±</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow></msqrt><msqrt><mrow><mn>1</mn><mo>âˆ’</mo><msub><mi>Î±</mi><mi>t</mi></msub><mi mathvariant="normal">/</mi><msub><mi>Î±</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sigma_t = \eta \beta_t(1-\bar{\alpha}_{t-1})/(1-\bar{\alpha}_{t})\\=\sqrt{(1-\alpha_{t-1})/(1-\alpha_t)} \sqrt{1-\alpha_t/\alpha_{t-1} }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">Î·</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.25612499999999994em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.983875em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.9438750000000002em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.25612499999999994em;"><span></span></span></span></span></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.983875em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.9438750000000002em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.25612499999999994em;"><span></span></span></span></span></span></span></span></span></span></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328231621337.png" alt="image-20240328231621337"></p><p>è¿™ä¸ªé—®é¢˜çš„æœ¬èº«æ˜¯**â€œä¸ºä»€ä¹ˆè¦é¢å¤–æ·»åŠ éšæœºæ€§â€**</p><hr><h1 id="ä¸ºä»€ä¹ˆè¦é¢å¤–æ·»åŠ éšæœºæ€§">ä¸ºä»€ä¹ˆè¦é¢å¤–æ·»åŠ éšæœºæ€§</h1><p>ä¸‹é¢è¿™ä¸ªå›¾ï¼Œæ˜¯ChatGPTåœ¨è¾“å‡ºæ–‡å­—æ—¶çš„ä¸€ä¸ªé€»è¾‘ï¼Œå³è¾“å‡ºå‡ ç‡æœ€å¤§çš„å¾…é€‰å­—</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328232125252.png" alt="image-20240328232125252"></p><h2 id="æ–‡å­—åˆæˆé¢†åŸŸ">æ–‡å­—åˆæˆé¢†åŸŸ</h2><p>è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/1904.09751">https://arxiv.org/abs/1904.09751</a> å¯¹æ­¤è¿›è¡Œäº†æ¢è®¨</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328231851105.png" alt="image-20240328231851105"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå·¦ä¾§æ˜¯è®©GPTæ¯æ¬¡éƒ½é€‰æ‹©å‡ ç‡æœ€å¤§çš„å¾…é€‰å­—è¿›è¡Œè¾“å‡ºï¼Œå³ä¾§æ˜¯äººå†™å‡ºæ¥çš„æ–‡ç« </p><blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œäººå†™çš„æ–‡ç« ï¼Œç”¨çš„å­—å¹¶ä¸æ˜¯é€‰æ‹©å‡ ç‡æœ€å¤§çš„é‚£ä¸ªè¯æ±‡ï¼Œè€Œæ˜¯æœ‰â€œéšæœºæ€§â€çš„è·³è·ƒçš„ï¼›å¦‚æœåªè¾“å‡ºå‡ ç‡æœ€å¤§çš„é‚£ä¸ªè¯æ±‡ï¼Œæœ€ç»ˆå¯èƒ½ä¼šåå¤å‡ºç°åŒæ ·çš„å†…å®¹</p></blockquote><h2 id="è¯­éŸ³åˆæˆé¢†åŸŸ">è¯­éŸ³åˆæˆé¢†åŸŸ</h2><p>é™¤äº†æ–‡å­—åˆæˆï¼Œåœ¨è¯­éŸ³åˆæˆé¢†åŸŸä¹Ÿæœ‰<strong>ä½¿ç”¨éšæœºæ€§å™ªå£°çš„æ¡ˆä¾‹</strong>ï¼Œåœ¨åˆæˆçš„è¿‡ç¨‹ä¸­ï¼Œ<code>éœ€è¦éšæœºdropout</code></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328232543577.png" alt="image-20240328232543577"></p><h2 id="å›¾åƒåˆæˆé¢†åŸŸ">å›¾åƒåˆæˆé¢†åŸŸ</h2><p>æ‰€ä»¥ï¼Œåœ¨å›¾åƒé¢†åŸŸDiffusionModelä¸­ï¼Œåœ¨<strong>å»å™ªå£°çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿæ·»åŠ ä¸€äº›å™ªå£°</strong></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328232408081.png" alt="image-20240328232408081"></p><blockquote><p>å¦‚æœä¸æ·»åŠ å™ªå£°ä¼šæ€æ ·ï¼Ÿ</p></blockquote><p>ä¸‹é¢æ˜¯å»å™ªå£°çš„è¿‡ç¨‹ä¸­ï¼Œå®Œå…¨ä¸æ·»åŠ å™ªå£°çš„å¯¹æ¯”å›¾</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240328232459199.png" alt="image-20240328232459199"></p><p>å®é™…é‡‡æ ·è¿‡ç¨‹ä¸­ï¼Œæ¯æ­¥éƒ½è¦åŠ å…¥æ–°çš„noiseï¼Œè¿™æ ·åšæ˜¯å› ä¸ºæ ¹æ®ç»éªŒï¼Œè¿™<strong>æœ‰åŠ©äºç¨³å®šç¥ç»ç½‘ç»œé˜²æ­¢å´©æºƒ</strong>ã€‚å¦‚æœä¸åŠ å…¥æ–°çš„noiseï¼Œé‚£ä¹ˆ<strong>ç»“æœå°†ä¼šæ›´åŠ æ¥è¿‘åŸå§‹è®­ç»ƒæ•°æ®é›†çš„å¹³å‡å€¼</strong>ï¼Œè€Œéç»“æœï¼ˆè¯´ç™½äº†ä¾æ—§æ˜¯<strong>ä¸€å †ç³ŠçŠ¶çš„å¹³å‡å€¼</strong>ï¼‰ï¼ŒåŠ å…¥ä¹‹ååˆ™ä¼šäº§ç”Ÿå…·ä½“çš„å›¾åƒ</p><h1 id="æ€»ç»“">æ€»ç»“</h1><p>å‡è®¾ï¼Œæˆ‘ä»¬æ‹¿å¾ˆå¤šæ¢µé«˜çš„ç”»ä½œä¸ºè®­ç»ƒé›†å›¾ç‰‡ï¼Œè¿™äº›å›¾æ˜¯ç¬¦åˆæŸç§åˆ†å¸ƒçš„ï¼ˆç¬¦åˆæŸç§åˆ†å¸ƒå¯ä»¥ç†è§£ä¸ºï¼Œä½ çœ‹åˆ°è¿™ä¸ªç”»å°±è§‰å¾—è¿™ä¸ªç”»æ˜¯æ¢µé«˜ç”»çš„ï¼‰ï¼›æˆ–è€…æŠŠåˆ†å¸ƒæ¯”ä½œâ€œç±»â€ï¼ŒæŠŠæ¯ä¸ªå›¾ç‰‡æ¯”ä½œâ€œå¯¹è±¡â€ï¼Œæˆ‘ä»¬ç°åœ¨æ‰‹é‡Œæœ‰å¾ˆå¤šå¾ˆå¤šâ€å›¾ç‰‡â€œè€Œæˆ‘ä»¬æ˜¯å¸Œæœ›åå‘æ¨å‡ºè¿™ä¸ªâ€åˆ†å¸ƒâ€œï¼›ä¸€æ—¦å¾—åˆ°è¿™ä¸ªåˆ†å¸ƒï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»è¿™ä¸ªåˆ†å¸ƒä¸­ï¼Œâ€ç”Ÿæˆâ€œæ–°çš„å›¾ç‰‡äº†</p><p>æˆ‘ä»¬çš„åšæ³•ï¼Œæ˜¯å…ˆå‘æ‰€æœ‰å›¾åƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">X_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼ˆæ—¶é—´æ­¥t=0ï¼‰æ·»åŠ å™ªå£°ï¼Œå‡è®¾ä¸€å…±è¦åŠ 100æ¬¡ï¼ˆT=100ï¼‰å™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\epsilon_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼ŒåŠ å™ªå£°çš„æœ€ç»ˆç›®çš„ï¼Œæ˜¯è®©å›¾åƒè½¬æˆé«˜æ–¯åˆ†å¸ƒï¼ˆå› ä¸ºé«˜æ–¯åˆ†å¸ƒæˆ‘ä»¬æ˜¯å·²çŸ¥çš„ï¼‰ï¼›è€Œæ¯ä¸€æ¬¡æ·»åŠ å™ªå£°åï¼ˆä»å®è§‚è§’åº¦çœ‹ï¼Œæˆ–ä»ç±»çš„è§’åº¦çœ‹ï¼‰ï¼Œåœ¨t=1æ—¶æ‰€æœ‰çš„çš„å›¾åƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">X_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œä¹Ÿå¯ä»¥ç¬¦åˆä¸€ç§åˆ†å¸ƒï¼ˆæˆ‘ä»¬è¿˜æ˜¯æœªçŸ¥çš„ï¼‰ï¼›ç„¶åç»§ç»­æ·»åŠ å™ªå£°ï¼Œåœ¨t=10æ—¶æ‰€æœ‰çš„å›¾åƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mn>10</mn></msub></mrow><annotation encoding="application/x-tex">X_{10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¹Ÿå¯ä»¥ç¬¦åˆä¸€ç§åˆ†å¸ƒï¼ˆæœªçŸ¥ï¼‰ã€‚éšç€tè¶Šæ¥è¶Šå¤§ï¼Œå½“t=90æ—¶çš„æ‰€æœ‰å›¾åƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mn>90</mn></msub></mrow><annotation encoding="application/x-tex">X_{90}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œå·²ç»å¾ˆæ¥è¿‘äºæˆ‘ä»¬çŸ¥é“çš„é«˜æ–¯åˆ†å¸ƒï¼ˆæ¥è¿‘å·²çŸ¥ï¼‰ï¼Œè€Œç­‰t=100æ—¶ï¼Œæ‰€æœ‰å›¾åƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mn>100</mn></msub></mrow><annotation encoding="application/x-tex">X_{100}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>éƒ½æ˜¯é«˜æ–¯åˆ†å¸ƒï¼ˆå·²çŸ¥ï¼‰ã€‚</p><p>ä»è€Œï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä»æœªçŸ¥åˆ†å¸ƒåˆ°å·²çŸ¥åˆ†å¸ƒçš„è¿‡ç¨‹ã€åŠ å™ªå£°è¿‡ç¨‹ã€‘</p><blockquote><p>åŠ å™ªå£°çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€æ­¥æ·»åŠ å¤šå°‘å™ªå£°ï¼Œæ˜¯ç”±å™ªå£°æ§åˆ¶è¡¨ï¼ˆäººä¸ºè®¾å®šçš„ï¼‰ï¼Œèƒ½å¦è®©æœºå™¨è‡ªå·±å­¦å‘¢ï¼Ÿç†è®ºä¸Šå¯ä»¥ï¼Œä½†å®è·µå‘ç°æ•ˆæœä¸å¥½</p></blockquote><p>éšåï¼Œæˆ‘ä»¬éœ€è¦ä»å·²çŸ¥åˆ†å¸ƒå¾—åˆ°æœªçŸ¥åˆ†å¸ƒã€å»å™ªå£°è¿‡ç¨‹ã€‘</p><p>æˆ‘ä»¬å¸Œæœ›çš„ç›®çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ªéå¸¸å¼ºçš„æ¨¡å‹ï¼Œè¾“å…¥ç»™ä»–ä¸€ä¸ªåœ¨æ—¶é—´æ­¥t=100çš„å›¾åƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mn>100</mn></msub></mrow><annotation encoding="application/x-tex">X_{100}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œå®ƒèƒ½è¾“å‡ºã€åŠ å™ªå£°è¿‡ç¨‹ã€‘å¯¹t=99çš„å›¾åƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mn>99</mn></msub></mrow><annotation encoding="application/x-tex">X_{99}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span><span class="mord mtight">9</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ·»åŠ äº†çš„<strong>å™ªå£°</strong>ï¼Œä¸€æ—¦æ¨¡å‹å¾—åˆ°äº†è¿™ä¸ªå™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>Ïµ</mi><mo>^</mo></mover><mn>99</mn></msub></mrow><annotation encoding="application/x-tex">\hat{\epsilon}_{99}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.19444em;"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span><span class="mord mtight">9</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹¿<strong>t=100çš„å›¾åƒ å‡å» å™ªå£° å¾—åˆ° t=99çš„å›¾åƒ</strong>ï¼Œåç»­åå¤å¦‚æ­¤ã€‚ç›´åˆ°å¾—åˆ°t=0çš„å›¾åƒï¼ˆä¹Ÿå°±æ˜¯æ¢å¤å‡ºæ¥çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>x</mi><mn>0</mn></msub><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{x_0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span>ã€‚</p><p>ç„¶è€Œï¼Œåœ¨å»å™ªå£°çš„è¿‡ç¨‹ä¸­ï¼Œæ¨¡å‹é¢„æµ‹çš„å™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>Ïµ</mi><mo>^</mo></mover><mn>99</mn></msub></mrow><annotation encoding="application/x-tex">\hat{\epsilon}_{99}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.19444em;"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span><span class="mord mtight">9</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œåœ¨t=99æ—¶æ·»åŠ çš„çœŸå®å™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mn>99</mn></msub></mrow><annotation encoding="application/x-tex">\epsilon_{99}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span><span class="mord mtight">9</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å¯èƒ½æœ‰ä¸€å®šè¯¯å·®ï¼Œæˆ‘ä»¬æ ¹æ®è¿™ä¸ªè¯¯å·®ï¼Œå¯ä»¥åå‘çš„ä¿®æ­£ç½‘ç»œçš„å‚æ•°ï¼Œç›´åˆ°å¯ä»¥æ§åˆ¶è¯¯å·®å°äºæŸä¸ªé˜ˆå€¼ã€‚æ­¤æ—¶å°±å¯ä»¥è¿‘ä¼¼è®¤ä¸ºï¼Œæ¨¡å‹å¯ä»¥99.99%çš„èƒ½åŠ›é¢„æµ‹å‡ºæ—¶é—´æ­¥tçš„å›¾åƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">x_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„å™ªå£°</p><h2 id="ä¸åŒéƒ¨ä»¶çš„åŠŸèƒ½">ä¸åŒéƒ¨ä»¶çš„åŠŸèƒ½</h2><p>åœ¨ä½¿ç”¨åƒ Stable Diffusion è¿™ç±»åŸºäºæ‰©æ•£çš„å›¾åƒç”Ÿæˆæ¨¡å‹æ—¶ï¼Œä¸€äº›å…³é”®ç»„ä»¶åŒ…æ‹¬ <strong>ckpt (checkpoint) æ¨¡å‹æ–‡ä»¶</strong>ã€<strong>é‡‡æ ·å™¨</strong>ï¼ˆå¦‚ DDPM æˆ– DDIMï¼‰ï¼Œä»¥åŠ<strong>è°ƒåº¦å™¨</strong>ã€‚è¿™äº›ç»„ä»¶å…±åŒåä½œï¼Œä½¿å¾—ä»éšæœºå™ªå£°ç”Ÿæˆç²¾ç»†å›¾åƒæˆä¸ºå¯èƒ½ã€‚æˆ‘å°†é€ä¸€è§£é‡Šå®ƒä»¬çš„ä½œç”¨å’Œç›¸äº’å…³ç³»ã€‚</p><h3 id="ckpt-æ¨¡å‹æ–‡ä»¶">CKPT æ¨¡å‹æ–‡ä»¶</h3><p>CKPT æ¨¡å‹æ–‡ä»¶æ˜¯è®­ç»ƒå¥½çš„æ¨¡å‹çš„ä¿å­˜çŠ¶æ€ï¼ŒåŒ…å«äº†æ¨¡å‹çš„æ‰€æœ‰å‚æ•°å’Œæƒé‡ã€‚è¿™äº›æ–‡ä»¶æ˜¯æœºå™¨å­¦ä¹ ä¸­çš„â€œæ£€æŸ¥ç‚¹â€ï¼Œå…è®¸ä»ç‰¹å®šçš„è®­ç»ƒé˜¶æ®µå¼€å§‹æ‰§è¡Œæˆ–ç»§ç»­è®­ç»ƒè¿‡ç¨‹ã€‚åœ¨å›¾åƒç”Ÿæˆçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™äº›æ¨¡å‹æ–‡ä»¶è¢«ç”¨æ¥ï¼š</p><ul><li><strong>é¢„æµ‹å™ªå£°</strong>ï¼šå…·ä½“æ¥è¯´ï¼Œæ¨¡å‹æ˜¯è®­ç»ƒæ¥é¢„æµ‹åœ¨ç»™å®šçš„å™ªå£°å›¾åƒä¸­çš„åŸå§‹å›¾åƒçš„å™ªå£°åˆ†å¸ƒã€‚è¿™æ ·ï¼Œå½“æˆ‘ä»¬é€æ­¥å»é™¤é¢„æµ‹çš„å™ªå£°æ—¶ï¼Œå°±èƒ½é€æ¸è¿˜åŸå‡ºåŸå§‹çš„ã€æ— å™ªå£°çš„å›¾åƒã€‚</li></ul><h3 id="é‡‡æ ·å™¨-sampler">é‡‡æ ·å™¨(Sampler)</h3><p>é‡‡æ ·å™¨ç”¨äºç®¡ç†å¦‚ä½•ä»å®Œå…¨å™ªå£°åŒ–çš„çŠ¶æ€ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒï¼‰é€†å‘ç”Ÿæˆç›®æ ‡å›¾åƒçš„è¿‡ç¨‹ã€‚å®ƒä»¬å®šä¹‰äº†é€†å‘æ­¥éª¤çš„å…·ä½“æ‰§è¡Œæ–¹å¼ï¼š</p><ul><li><strong>DDPM</strong>ï¼ˆDenoising Diffusion Probabilistic Modelsï¼‰ï¼šåœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œé‡‡æ ·è¿‡ç¨‹åŒ…æ‹¬å‘å›¾åƒä¸­æ³¨å…¥éšæœºå™ªå£°å’Œé€æ­¥å»é™¤å™ªå£°çš„æ­¥éª¤ã€‚å®ƒä¾èµ–äºæ¦‚ç‡æ¨æ–­æ¥é€æ­¥è¿˜åŸå›¾åƒï¼Œæ¯ä¸€æ­¥éƒ½æ˜¯éšæœºçš„ï¼Œè¿™æœ‰åŠ©äºæ¢ç´¢å¤šç§å¯èƒ½çš„è¾“å‡ºã€‚</li><li><strong>DDIM</strong>ï¼ˆDenoising Diffusion Implicit Modelsï¼‰ï¼šDDIM æä¾›äº†ä¸€ä¸ªæ›´å¿«å’Œæ›´ç¡®å®šçš„é€†å‘æ‰©æ•£è·¯å¾„ã€‚å®ƒé€šè¿‡è®¡ç®—ç»™å®šçš„æ‰©æ•£è·¯å¾„ä¸Šçš„å™ªå£°çŠ¶æ€ï¼Œè€Œä¸æ˜¯éšæœºåœ°é€‰æ‹©ï¼Œä»è€Œå¯ä»¥æ›´å¿«åœ°ç”Ÿæˆå›¾åƒï¼ŒåŒæ—¶ä¿æŒè¾ƒé«˜çš„è´¨é‡ã€‚</li></ul><h3 id="è°ƒåº¦å™¨-schedule">è°ƒåº¦å™¨(Schedule)</h3><p>è°ƒåº¦å™¨åˆ™æ§åˆ¶å™ªå£°çš„å¢åŠ å’Œå‡å°‘çš„æ—¶é—´è¡¨ï¼Œå³åœ¨æ‰©æ•£å’Œåå‘æ‰©æ•£è¿‡ç¨‹ä¸­çš„â€œæ­¥éª¤è®¡åˆ’â€ã€‚å®ƒä»¬ç²¾ç¡®åœ°ç®¡ç†ï¼š</p><ul><li><strong>å™ªå£°æ°´å¹³çš„è°ƒæ•´</strong>ï¼šç¡®å®šåœ¨æ¯ä¸€æ­¥ä¸­å™ªå£°åº”è¯¥è¢«åŠ å…¥æˆ–å»é™¤çš„é‡ã€‚</li><li><strong>æ­¥éª¤çš„æ•°é‡å’Œé—´éš”</strong>ï¼šå†³å®šæ•´ä¸ªç”Ÿæˆè¿‡ç¨‹ä¸­åº”è¯¥æœ‰å¤šå°‘æ­¥éª¤ï¼Œä»¥åŠè¿™äº›æ­¥éª¤ä¹‹é—´çš„æ—¶é—´é—´éš”ã€‚</li></ul><p>è°ƒåº¦å™¨ä¹Ÿæœ‰å¾ˆå¤šæ–¹æ¡ˆï¼Œå¦‚<strong>linear,cosine,karras</strong>ç­‰ï¼Œä¸åŒçš„è°ƒåº¦å™¨ä¹Ÿä¼šå½±å“ç”Ÿæˆç»“æœï¼Œä¸‹å›¾å±•ç¤ºäº†ä¸€äº›è°ƒåº¦å™¨çš„è®¡ç®—å…¬å¼</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/image-20240505170050251.png" alt="image-20240505170050251"></p><p>æ³¨æ„åœ¨cosineä¸­ï¼Œå½“tè¶Šæ¥è¿‘äºTæ—¶ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>T</mi></msub></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{\bar{\alpha}_T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.24611000000000005em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.79389em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.75389em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.24611000000000005em;"><span></span></span></span></span></span></span></span></span>å°±è¶Šæ¥è¿‘0ï¼Œæ­¤æ—¶ä¼šè®©å›¾åƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">x_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>â€‹æ›´<strong>æ¥è¿‘</strong>äºä¸€ä¸ªçº¯é«˜æ–¯å™ªå£°ã€å¹¶ä¸æ˜¯å®Œå…¨ä¸ºé«˜æ–¯å™ªå£°ã€‘</p><blockquote><p><a href="https://isamu-website.medium.com/understanding-common-diffusion-noise-schedules-and-sample-steps-are-flawed-and-offset-noise-52a73ab4fded">https://isamu-website.medium.com/understanding-common-diffusion-noise-schedules-and-sample-steps-are-flawed-and-offset-noise-52a73ab4fded</a></p><p>è¿™ç¯‡æ–‡ç« è®¨è®ºäº†è®©<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">x_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><strong>å®Œå…¨ä¸ºé«˜æ–¯å™ªå£°</strong>çš„æ•ˆæœï¼Œå³<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><msub><mover accent="true"><mi>Î±</mi><mo>Ë‰</mo></mover><mi>T</mi></msub></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{\bar{\alpha}_T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.24611000000000005em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.79389em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">Ë‰</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.75389em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.24611000000000005em;"><span></span></span></span></span></span></span></span></span>ç­‰äº0</p></blockquote><p>æ€»ç»“æ¥è¯´ï¼Œckpt æ¨¡å‹æ–‡ä»¶æä¾›äº†è®­ç»ƒå¥½çš„æ¨¡å‹å‚æ•°ï¼Œé‡‡æ ·å™¨ï¼ˆå¦‚ DDPM å’Œ DDIMï¼‰å®šä¹‰äº†å™ªå£°çš„å»é™¤è¿‡ç¨‹çš„å…·ä½“æ‰§è¡Œæ–¹å¼ï¼Œè€Œè°ƒåº¦å™¨åˆ™ä¼˜åŒ–äº†è¿™ä¸ªè¿‡ç¨‹çš„æ­¥éª¤å’Œæ—¶é—´è¡¨ã€‚è¿™äº›ç»„ä»¶å…±åŒä½œç”¨ï¼Œå®ç°äº†ä»é«˜å™ªå£°çŠ¶æ€åˆ°é«˜è´¨é‡å›¾åƒçš„è½¬å˜ã€‚</p><h2 id="å…³äºè®­ç»ƒ">å…³äºè®­ç»ƒ</h2><p>è®­ç»ƒè¿‡ç¨‹æ˜¯åŒ…å«äº†â€åŠ å™ªå£°è¿‡å’Œå»å™ªè¿‡ç¨‹â€œï¼ŒåŠ å™ªå£°è¿‡ç¨‹ï¼ŒæŠŠä¸€å¼ å›¾<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åŠ å™ªå£°ï¼Œå¾—åˆ°è¿™ä¸ªå›¾çš„çº¯å™ªå£°å›¾<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">x_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>â€‹ï¼ˆæœä»é«˜æ–¯åˆ†å¸ƒï¼‰ï¼›å»å™ªå£°è¿‡ç¨‹ï¼Œä»è¿™ä¸ªé«˜æ–¯åˆ†å¸ƒå›¾å¼€å§‹å»é™¤å™ªå£°ï¼Œä½¿ç”¨DDIMæˆ–DDPMè¿›è¡Œå»é™¤å™ªå£°ï¼Œè€Œç”Ÿæˆè¿‡ç¨‹ï¼Œå°±æ˜¯å»å™ªå£°è¿‡ç¨‹ï¼Œæ‰€ä»¥ä¹Ÿä¼šä½¿ç”¨DDIMæˆ–DDPMï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­åŒæ ·éœ€è¦DDPM,DDIMä¹‹ç±»çš„é‡‡æ ·å™¨ï¼Œè€Œä¸€æ—¦æ¨¡å‹è¢«è®­ç»ƒå¥½ï¼Œå“ªæ€•è®­ç»ƒè¿‡ç¨‹ä¸­ç”¨DDIMä½œä¸ºé‡‡æ ·å™¨å»é™¤çš„å™ªå£°ï¼Œåœ¨å®é™…ç”Ÿæˆä¸­ï¼Œå¯ä»¥ç”¨DDIMæˆ–DDPMï¼Œä½†ä»æ•ˆæœä¸Šï¼Œä¹Ÿè®¸ç”¨DDIMæ›´å¥½</p><h2 id="å®éªŒ">å®éªŒ</h2><p>åœ¨ComfyUIä¸­ï¼Œä½¿ç”¨Ksampler(Advanced)é‡‡æ ·å™¨ï¼Œ</p><ul><li>add_noise: disable</li><li>noise_seed: 42</li><li>control_after_generate: fixed</li><li>steps: 20</li><li>cfg: 8</li><li>smapler_name: ddpm</li><li>scheduler: normal</li></ul><p>å¯èƒ½æ˜¯ComfyUIçš„bugï¼Œå¦‚æœä¸å¯¹Ksamplerè¿›è¡Œä¸€äº›ä¿®æ”¹ï¼Œæ— æ³•è¿ç»­ä¸¤æ¬¡æ ¹æ®ç›¸åŒä¸€æ ·å‚æ•°ç”Ÿæˆå›¾åƒï¼›äºæ˜¯ï¼Œåœ¨ä½¿ç”¨scheduler=normalç”Ÿæˆä¸€å¼ å›¾åï¼Œå°†schedulerä¿®æ”¹æˆkarraså†ç”Ÿæˆå›¾ï¼Œå†è°ƒæ•´å›schedulerä¸ºnormalï¼Œåå¤å¦‚æ­¤</p><blockquote><p>Q1: ç›¸åŒåˆå§‹å™ªå£°ï¼Œåˆ†åˆ«ä½¿ç”¨DDPMã€DDIMï¼Œåœ¨ä½¿ç”¨ç›¸åŒçš„scheduleæ·»åŠ å™ªå£°ï¼Œèƒ½å¦å¾—åˆ°ç›¸åŒå›¾åƒï¼›</p></blockquote><p>ç»“è®º</p><p>ç»è¿‡éªŒè¯ï¼Œå½“Ksamplerä¸­çš„&quot;<code>add_noise</code>&quot;è®¾ç½®ä¸º<strong>disable</strong>ï¼Œåœ¨å…¶å®ƒå‚æ•°å…¨éƒ¨ä¸€è‡´ï¼ˆå™ªå£°ï¼Œschedulerç­‰ï¼‰ä¸‹å¤šæ¬¡è¿›è¡Œç”Ÿæˆï¼ŒDDPMç¡®å®ç”Ÿæˆäº†ä¸åŒçš„å›¾åƒï¼›ä¸åŸç‰ˆè®ºæ–‡ä¸­DDPMçš„è¡Œä¸ºç›¸ä¼¼ï¼ˆå› ä¸ºä¼šåœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­æ·»åŠ éšæœºå™ªå£°ï¼‰</p><p>åœ¨å…¶å®ƒå‚æ•°å…¨éƒ¨ä¸€è‡´ï¼ˆå™ªå£°ï¼Œschedulerç­‰ï¼‰ä¸‹å¤šæ¬¡è¿›è¡Œç”Ÿæˆï¼Œè€ŒDDIMç¡®å®åªç”Ÿæˆç›¸åŒçš„å›¾åƒ</p><p>å¦å¤–ï¼Œå½“Ksamplerä¸­çš„&quot;<code>add_noise</code>&quot;å˜æˆ<strong>enable</strong>åï¼Œ<strong>DDPMä¹Ÿå¯ä»¥å¤šæ¬¡ç”Ÿæˆç›¸åŒçš„å›¾åƒ</strong>ï¼ŒDDIMä»æ˜¯å¤šæ¬¡ç”Ÿæˆç›¸åŒçš„å›¾åƒ</p><p>çŒœæµ‹æ—¶add_noise=enableåï¼Œä¼šå¯ç”¨</p><blockquote><p>ç›¸åŒåˆå§‹å™ªå£°ï¼Œåˆ†åˆ«ä½¿ç”¨DDPMã€DDIMï¼Œä¸æ·»åŠ å™ªå£°ï¼Œèƒ½å¦å¾—åˆ°ç›¸åŒå›¾åƒ</p></blockquote><p>ç»“è®º</p><p>ä½¿ç”¨v2-1_512-ema-pruned.safetensorsï¼Œå½“Ksamplerä¸­çš„&quot;<code>add_noise</code>&quot;å˜æˆ<strong>disable</strong>åï¼Œä¸è®ºç”¨DDPM/DDIMéƒ½æ— æ³•ç”Ÿæˆå›¾åƒï¼ˆä¼šå‡ºç°å…¨éƒ¨æ˜¯çº¯è‰²å›¾åƒæˆ–åªæœ‰äººç‰©è¢–å­çš„å›¾ç‰‡ï¼‰ï¼Œæ— æ³•å®Œæˆä»»åŠ¡</p><h1 id="ç›¸å…³é“¾æ¥">ç›¸å…³é“¾æ¥</h1><p><strong>Diffusionä»ç†è®ºè§’åº¦å…¥é—¨è®²è§£</strong></p><p><a href="https://lilianweng.github.io/posts/2021-07-11-diffusion-models/#scale-up-generation-resolution-and-quality">Lilian Wengâ€™s blog on Diffusion Models</a></p><p>è¿™ç¯‡åšå®¢ç”±Lilian Wengæ’°å†™ï¼Œè¯¦ç»†ä»‹ç»äº†æ‰©æ•£æ¨¡å‹çš„ç†è®ºåŸºç¡€ï¼ŒåŒ…æ‹¬å…¶å·¥ä½œåŸç†ã€ç”Ÿæˆè´¨é‡çš„æå‡ä»¥åŠåˆ†è¾¨ç‡çš„æ‰©å±•ã€‚</p><p><strong>Diffusionä»å®æˆ˜è§’åº¦çš„å…¥é—¨è®²è§£</strong></p><p>Part I: <a href="https://isamu-website.medium.com/understanding-diffusion-models-to-generate-my-favorite-dog-part-1-4be07ec0fc29">Understanding Diffusion Models to Generate My Favorite Dog - Part 1</a></p><p>è¿™ç¯‡æ–‡ç« æ˜¯å…³äºå¦‚ä½•å®æˆ˜åº”ç”¨æ‰©æ•£æ¨¡å‹ç”Ÿæˆå›¾åƒçš„åˆå­¦è€…æŒ‡å—ï¼Œå…·ä½“å±•ç¤ºäº†ç”Ÿæˆè¿‡ç¨‹å’Œæ¨¡å‹è®­ç»ƒçš„åŸºæœ¬æ­¥éª¤ã€‚</p><p>Part II: <a href="https://isamu-website.medium.com/understanding-diffusion-models-to-generate-my-favorite-dog-part-2-4ad76a28c2a4">Understanding Diffusion Models to Generate My Favorite Dog - Part 2</a></p><p>è¿™ç¯‡æ–‡ç« æ˜¯ç¬¬ä¸€éƒ¨åˆ†çš„å»¶ç»­ï¼Œæ·±å…¥æ¢è®¨äº†æ›´å¤šé«˜çº§æŠ€å·§å’Œä¼˜åŒ–æ–¹æ³•ï¼Œå¸®åŠ©è¯»è€…æ›´å¥½åœ°æŒæ¡æ‰©æ•£æ¨¡å‹çš„åº”ç”¨ã€‚</p><p><strong>Diffusionå†å²æ¢³ç†</strong></p><p><a href="https://www.bilibili.com/video/BV1BC4y1V7u9">Bilibiliè§†é¢‘ï¼šæ‰©æ•£æ¨¡å‹çš„å†å²</a></p><p>è¿™æ®µè§†é¢‘è¯¦ç»†æ¢³ç†äº†æ‰©æ•£æ¨¡å‹çš„å‘å±•å†å²ï¼Œä»æ—©æœŸçš„ç ”ç©¶åˆ°æœ€æ–°çš„è¿›å±•ï¼Œä¸ºè¯»è€…æä¾›äº†å…¨é¢çš„å†å²èƒŒæ™¯ã€‚</p><p><strong>è¯¦è§£Classifier Guidanceä¸Classifier Free Guidance(å›¾éå¸¸å¥½)</strong></p><p><a href="https://sander.ai/2023/08/28/geometry.html">Geometry and Guidance in Diffusion Models - Sander.ai</a></p><p>è¿™ç¯‡æ–‡ç« è§£é‡Šäº†æ‰©æ•£æ¨¡å‹ä¸­çš„å‡ ä½•å­¦å’ŒæŒ‡å¯¼æŠ€æœ¯ï¼ŒåŒ…æ‹¬classifier guidanceå’Œclassifier-free guidanceï¼Œå¹¶é…æœ‰è¯¦ç»†å›¾ç¤ºå¸®åŠ©ç†è§£ã€‚</p><p><a href="https://sander.ai/2022/05/26/guidance.html">Guidance Techniques in Diffusion Models - Sander.ai</a></p><p>æœ¬æ–‡å…·ä½“æ¢è®¨äº†ä¸åŒçš„æŒ‡å¯¼æŠ€æœ¯åœ¨æ‰©æ•£æ¨¡å‹ä¸­çš„åº”ç”¨ï¼Œå¸®åŠ©è¯»è€…ç†è§£è¿™äº›æŠ€æœ¯çš„å®ç°ç»†èŠ‚å’Œæ•ˆæœã€‚</p><p><strong>StableDiffusion3è®ºæ–‡</strong></p><p><a href="https://arxiv.org/abs/2403.03206">StableDiffusion3 on arXiv</a></p><p>è¿™æ˜¯StableDiffusion3çš„åŸå§‹è®ºæ–‡é“¾æ¥ï¼Œæä¾›äº†è¯¥æ¨¡å‹çš„è¯¦ç»†ç ”ç©¶å’ŒæŠ€æœ¯å®ç°ã€‚</p><p><strong>StableDiffusion3è®ºæ–‡è®²è§£</strong></p><p><a href="https://www.youtube.com/watch?v=yTXMK2TZOZc">Stable Diffusion 3 Explained - YouTube</a></p><p>è¿™æ®µè§†é¢‘å¯¹StableDiffusion3çš„è®ºæ–‡è¿›è¡Œäº†è¯¦ç»†è®²è§£ï¼Œé€‚åˆå¸Œæœ›å¿«é€Ÿäº†è§£è¯¥è®ºæ–‡æ ¸å¿ƒå†…å®¹çš„è¯»è€…ã€‚</p><p><a href="https://www.youtube.com/watch?v=6XatajQ-ll0">Another explanation of Stable Diffusion 3 - YouTube</a></p><p>å¦ä¸€æ®µè§†é¢‘è®²è§£äº†StableDiffusion3çš„è®ºæ–‡ï¼Œä»ä¸åŒè§’åº¦åˆ†æäº†å…¶æŠ€æœ¯ç»†èŠ‚å’Œåˆ›æ–°ç‚¹ã€‚</p><p><strong>Rectified Flow</strong></p><p><a href="https://huggingface.co/blog/Isamu136/insta-rectified-flow">Understanding Rectified Flow - Hugging Face</a></p><p>è¿™ç¯‡åšå®¢æ–‡ç« ä»‹ç»äº†Rectified Flowçš„æ¦‚å¿µå’Œåº”ç”¨ï¼Œå¸®åŠ©è¯»è€…ç†è§£å…¶åœ¨ç”Ÿæˆæ¨¡å‹ä¸­çš„ä½œç”¨å’Œä¼˜åŠ¿ã€‚</p><p><strong>è‡ªå·±å®ç°DDIMåŠDDIM inversion</strong></p><p><a href="https://ucladeepvision.github.io/CS188-Projects-2023Winter/2022/03/27/team27-ddim-inversion.html#implementing-ddims">Implementing DDIM and DDIM Inversion - UCLA Deep Vision</a></p><p>è¿™ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»äº†å¦‚ä½•å®ç°DDIMåŠå…¶é€†è¿‡ç¨‹ï¼Œä¸ºè¯»è€…æä¾›äº†å®æˆ˜ä»£ç å’Œå®ç°æ­¥éª¤ã€‚</p><p><strong>ä½¿ç”¨Cross Attentionè§£é‡ŠStableDiffusion</strong></p><p><a href="https://colab.research.google.com/drive/1miGauqa07uHnDoe81NmbmtTtnupmlipv?usp=sharing">Explaining Stable Diffusion with Cross Attention - Colab</a></p><p>è¿™ç¯‡Colabç¬”è®°æœ¬é€šè¿‡Cross Attentionæœºåˆ¶è§£é‡Šäº†Stable Diffusionæ¨¡å‹çš„å·¥ä½œåŸç†ï¼Œé€‚åˆå¸Œæœ›é€šè¿‡ä»£ç å®è·µç†è§£æ¨¡å‹çš„è¯»è€…ã€‚</p><p><strong>Transformersè®²è§£</strong></p><p><a href="https://www.youtube.com/watch?v=n9TlOhRjYoc">Transformers Explained - YouTube</a></p><p>è¿™æ®µè§†é¢‘å¯¹Transformeræ¨¡å‹è¿›è¡Œäº†æ·±å…¥è®²è§£ï¼Œé€‚åˆå¯¹è¿™ä¸€åŸºç¡€æ¨¡å‹æ„Ÿå…´è¶£çš„è¯»è€…ã€‚</p><p><a href="https://www.youtube.com/watch?v=N6aRv06iv2g">Another explanation of Transformers - YouTube</a></p><p>å¦ä¸€æ®µå…³äºTransformeræ¨¡å‹çš„è®²è§£è§†é¢‘ï¼Œä»ä¸åŒè§’åº¦åˆ†æäº†å…¶å·¥ä½œæœºåˆ¶å’Œåº”ç”¨åœºæ™¯ã€‚</p><p><a href="https://towardsdatascience.com/transformers-141e32e69591">Towards Data Science: Transformers</a></p><p>è¿™ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»äº†Transformeræ¨¡å‹çš„å·¥ä½œåŸç†å’ŒæŠ€æœ¯ç»†èŠ‚ï¼Œé€‚åˆå¸Œæœ›ä»ç†è®ºè§’åº¦æ·±å…¥ç†è§£çš„è¯»è€…ã€‚</p><p><strong>Tokenizerè®¡ç®—</strong></p><p><a href="https://platform.openai.com/tokenizer">OpenAI Tokenizer</a></p><p>è¿™ä¸ªå·¥å…·ç”¨äºè®¡ç®—æ–‡æœ¬ä¸­çš„tokenæ•°é‡ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œä¼˜åŒ–æ¨¡å‹è¾“å…¥ã€‚</p><p><strong>DITæ¶æ„</strong></p><p><a href="https://encord.com/blog/diffusion-models-with-transformers/">Diffusion Transformer (DiT) Models: A Beginnerâ€™s Guide </a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æŒç»­æ–½å·¥ä¸­&lt;/p&gt;
&lt;p&gt;Iâ€™m still working on it.&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æ˜¯æ ¹æ®æ²¹ç®¡è§†é¢‘æ•´ç†çš„ç¬”è®°ï¼ŒåŸè§†é¢‘ä¸­å°†DDPMå’ŒDDIMéƒ½æœ‰è®²åˆ°ï¼Œæ‰€ä»¥æˆ‘ä¼šç©¿æ’ä¸€äº›DDIMçš„ä¸œè¥¿&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;å¯¼å…¥&quot;</summary>
      
    
    
    
    <category term="æœºå™¨å­¦ä¹ " scheme="https://blog.lthero.cn/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="Diffusion" scheme="https://blog.lthero.cn/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Diffusion/"/>
    
    
    <category term="DDPM" scheme="https://blog.lthero.cn/tags/DDPM/"/>
    
  </entry>
  
  <entry>
    <title>è‡ªå»ºRustDeskServer</title>
    <link href="https://blog.lthero.cn/2024/03/28/InstallRustDeskServerOnYourMachine/"/>
    <id>https://blog.lthero.cn/2024/03/28/InstallRustDeskServerOnYourMachine/</id>
    <published>2024-03-28T04:33:04.000Z</published>
    <updated>2024-06-05T06:36:15.529Z</updated>
    
    <content type="html"><![CDATA[<h1 id="rustdesk-serverå®‰è£…ä¸ä½¿ç”¨">Rustdesk Serverå®‰è£…ä¸ä½¿ç”¨</h1><h2 id="å®‰è£…rustdesk-server">å®‰è£…Rustdesk Server</h2><ol><li><p>åœ¨æœåŠ¡å™¨è¾“å…¥<code>lscpu</code>æˆ–<code>uname -m</code>æŸ¥çœ‹CPUæ„æ¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span> -m</span><br><span class="line"><span class="comment"># x86_64</span></span><br></pre></td></tr></table></figure></li><li><p>æ¯”å¦‚æˆ‘æ˜¯<strong>x86_64</strong>ï¼Œéšååœ¨<a href="https://github.com/rustdesk/rustdesk-server/releases">rustdesk-server/releases</a>æ‰¾åˆ°ç›¸åº”çš„ç‰ˆæœ¬åˆ™ä¸‹è½½rustdesk-server-linux-<strong>amd64</strong>.zip</p></li></ol><blockquote><p>&quot;x86_64&quot;å’Œ&quot;amd64&quot;å®é™…ä¸Šæ˜¯åŒä¸€ç§CPUæ¶æ„çš„ä¸¤ç§ä¸åŒç§°å‘¼ï¼Œéƒ½æŒ‡çš„æ˜¯64ä½çš„x86å¤„ç†å™¨æ¶æ„ã€‚</p><p>è¿™ç§<strong>æ¶æ„</strong>æœ€æ—©ç”±AMDå…¬å¸å¼•å…¥ï¼Œå› æ­¤æœ‰æ—¶è¢«ç§°ä¸º&quot;AMD64&quot;ï¼Œä½†åæ¥ä¹Ÿè¢«Intelå’Œå…¶ä»–åˆ¶é€ å•†é‡‡çº³ã€‚</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate https://github.com/rustdesk/rustdesk-server/releases/download/1.1.10-3/rustdesk-server-linux-amd64.zip</span><br></pre></td></tr></table></figure><ol start="3"><li><p>è§£å‹æ–‡ä»¶ï¼Œè¿›å…¥åˆ°è§£å‹åçš„ç›®å½•<code>amd64</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip rustdesk-server-linux-amd64.zip</span><br></pre></td></tr></table></figure></li><li><p>å°è¯•è¿è¡Œ<code>hbbs</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./hbbs</span><br></pre></td></tr></table></figure><p>ä¼šè¾“å‡ºä¸€äº›æ—¥å¿—ï¼Œéšå<code>ctrl+c</code>å…³æ‰å³å¯</p></li><li><p>å°è¯•è¿è¡Œ<code>hbbr</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./hbbs</span><br></pre></td></tr></table></figure><p>ä¼šè¾“å‡ºä¸€äº›æ—¥å¿—ï¼Œéšå<code>ctrl+c</code>å…³æ‰å³å¯</p></li></ol><p>éšåï¼Œåœ¨ç›®å½•ä¸­ï¼Œæœ‰ä¸ª<code>id_ed25519.pub</code>çš„pubæ–‡ä»¶ï¼ŒæŸ¥çœ‹id_ed25519.pubæ–‡ä»¶ï¼Œé‡Œé¢æ˜¯<strong>å¯†é’¥</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat id_ed25519.pub</span><br></pre></td></tr></table></figure><p>å°†å¯†é’¥ä¿å­˜ï¼Œåç»­ä¼šç”¨ä¸Š</p><blockquote><p>è‡³æ­¤ï¼Œå®‰è£…ä¸æµ‹è¯•RustDesk Serverå°±ç»“æŸäº†</p></blockquote><hr><h2 id="åå°è¿è¡Œä¸ç®¡ç†">åå°è¿è¡Œä¸ç®¡ç†</h2><blockquote><p>ä¸ºäº†æ›´å¥½çš„ç®¡ç†RustDesk Serverï¼Œæˆ‘ä»¬ä½¿ç”¨pm2æ¥è¿›è¡Œç®¡ç†</p><p>PM2æ˜¯ä¸€ä¸ªæµè¡Œçš„Node.jsåº”ç”¨ç¨‹åºçš„è¿›ç¨‹ç®¡ç†å™¨ï¼Œæä¾›äº†ä¸€ç³»åˆ—å¼ºå¤§çš„åŠŸèƒ½æ¥ç®¡ç†å’Œç»´æŠ¤åº”ç”¨ç¨‹åº</p></blockquote><ol><li>å®‰è£…pm2</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install npm</span><br><span class="line">sudo npm install -g pm2</span><br></pre></td></tr></table></figure><ol start="2"><li>ç”¨pm2å¯åŠ¨RustDesk Server</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pm2 start hbbs -- -r è‡ªå·±çš„æœåŠ¡å™¨IPåœ°å€ -k _</span><br><span class="line">pm2 start hbbr</span><br></pre></td></tr></table></figure><p>å‚æ•°è§£æ</p><ul><li><p>â€“  ä¸­é—´çš„è¿™ä¸¤ä¸ª-ä¸€å®šè¦æ·»åŠ ï¼Œè¿™æ˜¯pm2çš„å‚æ•°ä¼ è¾“ç»“æ„</p></li><li><p>-r Relayï¼ˆä¸­ç»§ï¼‰æœåŠ¡å™¨åœ°å€ï¼ˆå’ŒIDæœåŠ¡å™¨å¯ä»¥æ˜¯åŒä¸€ä¸ªï¼Œ<strong>IDæœåŠ¡å™¨å°±æ˜¯æ­£åœ¨å°†RustDesk Serveréƒ¨ç½²åˆ°çš„æœåŠ¡å™¨</strong>ï¼‰ï¼Œè¿™ä¸ªå‚æ•°ä¸å†™ä¹Ÿå¯ä»¥</p></li><li><p>-k _ï¼šå¿…é¡»ç”¨ä¸Šé¢æ‹¿åˆ°çš„å¯†é’¥æ‰èƒ½è®¿é—®</p></li></ul><ol start="3"><li>æœ€åï¼Œè¦æ‰“å¼€é˜²ç«å¢™ç«¯å£</li></ol><p>è¿”å›æ§åˆ¶å°ï¼Œæ‰“å¼€é˜²ç«å¢™-æ·»åŠ è§„åˆ™ï¼Œä»¥ä¸‹ç«¯å£å…¨éƒ¨å¼€æ”¾ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">21115ã€21116ï¼ˆTCP/UDPï¼‰ã€21117ã€21118ã€21119</span><br></pre></td></tr></table></figure><hr><p>ä»é”™è¯¯æ—¥å¿—ä¸­å¯ä»¥çœ‹å‡ºï¼Œ<code>pm2</code>æ­£åœ¨å°è¯•è¿è¡Œä¸€ä¸ªJavaScriptæ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªshellè„šæœ¬ã€‚è¿™æ˜¯å› ä¸º<code>pm2</code>é»˜è®¤è®¤ä¸ºæ‰€æœ‰è„šæœ¬æ˜¯Node.jsè„šæœ¬ã€‚è¦è¿è¡Œä¸€ä¸ªshellè„šæœ¬ï¼Œä½ éœ€è¦åœ¨<code>pm2</code>å‘½ä»¤ä¸­æ˜¾å¼æŒ‡å®šå®ƒæ˜¯ä¸€ä¸ªshellè„šæœ¬ã€‚</p><p>ä»¥ä¸‹æ˜¯è§£å†³æ–¹æ³•çš„æ­¥éª¤ï¼š</p><ol><li><p>ç¡®ä¿ä½ çš„è„šæœ¬æ–‡ä»¶æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„shellè„šæœ¬ï¼Œå¹¶ä¸”å·²ç»å…·æœ‰å¯æ‰§è¡Œæƒé™ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x /media/dongli911/Document/Workflow/WanLingHong/Project/AIGC/ComfyUI/runByPm2</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>pm2</code>å¯åŠ¨shellè„šæœ¬æ—¶ï¼Œä½¿ç”¨<code>--interpreter</code>å‚æ•°æŒ‡å®šä½¿ç”¨<code>bash</code>æ¥è¿è¡Œè¯¥è„šæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 start /media/dongli911/Document/Workflow/WanLingHong/Project/AIGC/ComfyUI/runByPm2 --name Comfyui --interpreter bash</span><br></pre></td></tr></table></figure></li></ol><p>è¿™æ˜¯ä½ shellè„šæœ¬çš„å¯èƒ½å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">source</span> activate sdv3</span><br><span class="line">python /path/to/your/main.py --listen 0.0.0.0</span><br></pre></td></tr></table></figure><p>å®Œæ•´çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>ç¡®ä¿<code>runByPm2</code>è„šæœ¬çš„å†…å®¹æ­£ç¡®æ— è¯¯ï¼Œå¹¶ç¡®ä¿å®ƒå…·æœ‰æ‰§è¡Œæƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">source</span> activate sdv3</span><br><span class="line">python /path/to/your/main.py --listen 0.0.0.0</span><br></pre></td></tr></table></figure></li><li><p>ç»™äºˆæ‰§è¡Œæƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x /media/dongli911/Document/Workflow/WanLingHong/Project/AIGC/ComfyUI/runByPm2</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>pm2</code>å¯åŠ¨è„šæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 start /media/dongli911/Document/Workflow/WanLingHong/Project/AIGC/ComfyUI/runByPm2 --name Comfyui --interpreter bash</span><br></pre></td></tr></table></figure></li></ol><p>é€šè¿‡è¿™æ ·è®¾ç½®ï¼Œ<code>pm2</code>å°†ä¼šä½¿ç”¨<code>bash</code>æ¥è§£é‡Šå¹¶è¿è¡Œä½ çš„è„šæœ¬ï¼Œä»è€Œé¿å…è¯­æ³•é”™è¯¯ã€‚</p><h2 id="rustdesk-å®¢æˆ·ç«¯å®‰è£…ä¸ä½¿ç”¨">RustDesk å®¢æˆ·ç«¯å®‰è£…ä¸ä½¿ç”¨</h2><p>ç°åœ¨ï¼Œæˆ‘ä½¿ç”¨ä¸€å°Linuxä¸Šå®‰è£…RustDeskï¼š</p><p>åŒç†ï¼Œå…ˆç”¨<code>lscpu</code>æˆ–<code>unmae -m</code>æŸ¥çœ‹cpuæ¶æ„ï¼Œå†ä¸‹è½½å¯¹åº”ç‰ˆæœ¬ï¼Œè¿™é‡Œç”¨x86_64ä¸¾ä¾‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„RustDesk Debianå®¢æˆ·ç«¯</span><br><span class="line">wget https://github.com/rustdesk/rustdesk/releases/download/1.2.3-1/rustdesk-1.2.3-x86_64.deb</span><br><span class="line"># ä½¿ç”¨dpkgè¿›è¡Œå®‰è£…</span><br><span class="line">sudo dpkg -i rustdesk-1.2.3-x86_64.deb</span><br></pre></td></tr></table></figure><p>éšåæ‰“å¼€rustdeskï¼Œåœ¨è®¾ç½®ä¸­å¡«å†™</p><ul><li>ID server: å†™IDæœåŠ¡å™¨IP</li><li>Relay server: å†™RelayæœåŠ¡å™¨IP</li><li>API server: ç©ºç€</li><li>Key: å†™å¯†é’¥</li></ul><p>å¦‚æœå‘½ä»¤ç”¨çš„æ˜¯<code>pm2 start hbbs -- -r è‡ªå·±çš„æœåŠ¡å™¨IPåœ°å€</code>ï¼Œå°±è¦å†™RelayæœåŠ¡å™¨</p><p>å¦‚æœå‘½ä»¤ç”¨çš„æ˜¯<code>pm2 start hbbs</code>ï¼ŒRelay serverå¯ä»¥ç©ºç€</p><hr><h1 id="é™„å½•ï¼špm2ç®¡ç†å‘½ä»¤">é™„å½•ï¼šPM2ç®¡ç†å‘½ä»¤</h1><p>è¦ç®¡ç†å’Œæ§åˆ¶ä½¿ç”¨PM2å¯åŠ¨çš„è¿›ç¨‹ï¼Œä½ å¯ä»¥ä½¿ç”¨PM2æä¾›çš„ä¸€ç³»åˆ—å‘½ä»¤è¡Œå·¥å…·ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨å‘½ä»¤ï¼ŒåŒ…æ‹¬å¦‚ä½•æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹åˆ—è¡¨å’Œå¦‚ä½•åœæ­¢ï¼ˆæ€æ‰ï¼‰è¿›ç¨‹ã€‚</p><h3 id="æŸ¥çœ‹pm2ç®¡ç†çš„è¿›ç¨‹åˆ—è¡¨">æŸ¥çœ‹PM2ç®¡ç†çš„è¿›ç¨‹åˆ—è¡¨</h3><p>è¦æŸ¥çœ‹PM2ç®¡ç†çš„æ‰€æœ‰è¿›ç¨‹åŠå…¶çŠ¶æ€ï¼Œä½ å¯ä»¥ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 list</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼Œä¸ºäº†è·å–æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¯ä¸ªè¿›ç¨‹çš„CPUå’Œå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 status</span><br></pre></td></tr></table></figure><p>è¿™äº›å‘½ä»¤ä¼šæ˜¾ç¤ºä¸€ä¸ªè¡¨æ ¼ï¼Œåˆ—å‡ºæ‰€æœ‰ç”±PM2ç®¡ç†çš„è¿›ç¨‹çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚è¿›ç¨‹IDï¼ˆPIDï¼‰ã€åç§°ã€çŠ¶æ€ã€CPUå’Œå†…å­˜ä½¿ç”¨æƒ…å†µç­‰ã€‚</p><h3 id="åœæ­¢è¿›ç¨‹">åœæ­¢è¿›ç¨‹</h3><p>å¦‚æœä½ éœ€è¦åœæ­¢ä¸€ä¸ªç”±PM2ç®¡ç†çš„è¿›ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨<code>pm2 stop</code>å‘½ä»¤ï¼Œåé¢è·Ÿä¸Šè¿›ç¨‹çš„åç§°æˆ–IDã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„è¿›ç¨‹åç§°ä¸º<code>rustdesk-server</code>ï¼Œä½ å¯ä»¥è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 stop rustdesk-server</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ çŸ¥é“è¿›ç¨‹çš„IDï¼Œå‡è®¾æ˜¯0ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 stop 0</span><br></pre></td></tr></table></figure><h3 id="é‡å¯è¿›ç¨‹">é‡å¯è¿›ç¨‹</h3><p>å¦‚æœä½ éœ€è¦é‡å¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨<code>restart</code>å‘½ä»¤ï¼Œè¿™å¯¹äºåº”ç”¨æ›´æ–°åé‡æ–°åŠ è½½æœåŠ¡ç‰¹åˆ«æœ‰ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 restart rustdesk-server</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤è¿›ç¨‹">åˆ é™¤è¿›ç¨‹</h3><p>åœæ­¢è¿›ç¨‹åï¼Œå®ƒä»ç„¶ä¼šåœ¨PM2çš„åˆ—è¡¨ä¸­æ˜¾ç¤ºï¼Œä½†çŠ¶æ€ä¼šå˜ä¸ºå·²åœæ­¢ã€‚å¦‚æœä½ æƒ³ä»PM2çš„åˆ—è¡¨ä¸­å®Œå…¨ç§»é™¤è¿™ä¸ªè¿›ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨<code>delete</code>å‘½ä»¤ï¼Œå¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 delete rustdesk-server</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨è¿›ç¨‹çš„IDï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 delete 0</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹æ—¥å¿—">æŸ¥çœ‹æ—¥å¿—</h3><p>äº†è§£å¦‚ä½•æŸ¥çœ‹PM2ç®¡ç†çš„åº”ç”¨çš„æ—¥å¿—ä¹Ÿå¾ˆé‡è¦ï¼Œç‰¹åˆ«æ˜¯åœ¨è°ƒè¯•æ—¶ã€‚ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥å®æ—¶æŸ¥çœ‹æ—¥å¿—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 logs</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ åªæƒ³æŸ¥çœ‹ç‰¹å®šè¿›ç¨‹çš„æ—¥å¿—ï¼Œå¯ä»¥åŠ ä¸Šè¿›ç¨‹çš„åç§°æˆ–IDï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 logs rustdesk-server</span><br></pre></td></tr></table></figure><p>PM2çš„è¿™äº›å‘½ä»¤æä¾›äº†å¼ºå¤§çš„è¿›ç¨‹ç®¡ç†åŠŸèƒ½ï¼Œä½¿å¾—è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„åº”ç”¨æ›´åŠ ç¨³å®šå’Œå¯é ã€‚</p><hr><h2 id="ä½¿ç”¨systemctlè¿è¡Œ">ä½¿ç”¨Systemctlè¿è¡Œ</h2><p>æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸¤ä¸ªServerï¼Œé¦–å…ˆæ˜¯<strong>hbbs</strong>:</p><p><code>vim /usr/lib/systemd/system/RustDeskHbbs.service</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=RustDesk Hbbs</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">User=mintimate</span><br><span class="line">Type=simple</span><br><span class="line"><span class="comment"># ä¿®æ”¹ç›®å½•</span></span><br><span class="line">WorkingDirectory=/home/mintimate/myApplication/RustDesk</span><br><span class="line"><span class="comment"># ä¿®æ”¹è·¯å¾„</span></span><br><span class="line">ExecStart=/home/mintimate/myApplication/RustDesk/hbbs</span><br><span class="line">ExecStop=/bin/kill -TERM <span class="variable">$MAINPID</span></span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¹‹åæ˜¯<strong>hbbr</strong>:</p><p><code>vim /usr/lib/systemd/system/RustDeskHbbr.service</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=RustDesk Hbbr</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">User=mintimate</span><br><span class="line">Type=simple</span><br><span class="line"><span class="comment"># ä¿®æ”¹ç›®å½•</span></span><br><span class="line">WorkingDirectory=/home/mintimate/myApplication/RustDesk</span><br><span class="line"><span class="comment"># ä¿®æ”¹è·¯å¾„</span></span><br><span class="line">ExecStart=/home/mintimate/myApplication/RustDesk/hbbr</span><br><span class="line">ExecStop=/bin/kill -TERM <span class="variable">$MAINPID</span></span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>éšåï¼Œè®©å…¶è‡ªå¯åŠ¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> RustDeskHbbs.service</span><br><span class="line">systemctl <span class="built_in">enable</span> RustDeskHbbr.service</span><br></pre></td></tr></table></figure><p>è®©è¿™ä¸¤ä¸ªæœåŠ¡å¯åŠ¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start RustDeskHbbs.service</span><br><span class="line">systemctl start RustDeskHbbr.service</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl status RustDeskHbbs.service</span><br><span class="line">systemctl status RustDeskHbbr.service</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;rustdesk-serverå®‰è£…ä¸ä½¿ç”¨&quot;&gt;Rustdesk Serverå®‰è£…ä¸ä½¿ç”¨&lt;/h1&gt;
&lt;h2 id=&quot;å®‰è£…rustdesk-server&quot;&gt;å®‰è£…Rustdesk Server&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;åœ¨æœåŠ¡å™¨è¾“å…¥&lt;code&gt;lscpu&lt;/co</summary>
      
    
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
    <category term="RustDesk" scheme="https://blog.lthero.cn/tags/RustDesk/"/>
    
  </entry>
  
  <entry>
    <title>N1ç›’å­é‡è£…Openwrt</title>
    <link href="https://blog.lthero.cn/2024/03/26/Install-openwrt-on-n1/"/>
    <id>https://blog.lthero.cn/2024/03/26/Install-openwrt-on-n1/</id>
    <published>2024-03-26T11:12:40.000Z</published>
    <updated>2024-05-10T05:11:50.041Z</updated>
    
    <content type="html"><![CDATA[<h1 id="n1ç›’å­é‡è£…openwrt">N1ç›’å­é‡è£…Openwrt</h1><blockquote><p>æŠ˜è…¾äº†ä¸€å¤©n1ç›’å­ï¼Œèµ·å› æ˜¯çœ‹åˆ°ä¸€ä¸ªæ–°çš„ä»£ç†åè®®&quot;Hysteria&quot;ï¼ˆå®‰è£…è§†é¢‘ï¼š<a href="https://www.youtube.com/watch?v=CXj-ID33MhU%EF%BC%89%EF%BC%8C%E5%9C%A8%E6%88%90%E5%8A%9F%E5%9C%B0%E5%9C%A8windows%E5%92%8Candroid%E4%B8%8A%E8%BF%90%E8%A1%8C%E4%BA%86Hysteria%E5%90%8E%EF%BC%8C%E6%83%B3%E5%9C%A8%E6%88%91%E7%9A%84%E6%97%A7N1%E7%9B%92%E5%AD%90%E4%B8%8A%E4%BD%BF%E7%94%A8%E8%BF%99%E4%B8%AA%E6%96%B0%E5%8D%8F%E8%AE%AE%EF%BC%8C%E4%BD%86%E5%A5%88%E4%BD%95N1%E7%9B%92%E5%AD%90%E7%9A%84passwall%E7%89%88%E6%9C%AC%E5%A4%AA%E6%97%A7%E4%BA%86%EF%BC%8C%E4%B8%8D%E6%94%AF%E6%8C%81">https://www.youtube.com/watch?v=CXj-ID33MhUï¼‰ï¼Œåœ¨æˆåŠŸåœ°åœ¨windowså’Œandroidä¸Šè¿è¡Œäº†Hysteriaåï¼Œæƒ³åœ¨æˆ‘çš„æ—§N1ç›’å­ä¸Šä½¿ç”¨è¿™ä¸ªæ–°åè®®ï¼Œä½†å¥ˆä½•N1ç›’å­çš„passwallç‰ˆæœ¬å¤ªæ—§äº†ï¼Œä¸æ”¯æŒ</a><code>Hysteria2</code>ï¼Œå³ä½¿ç›´æ¥å°†Hysteria2çš„åº”ç”¨æ›¿æ¢æ‰åŸåº”ç”¨ï¼Œpasswallå¯¹Hysteria2çš„æ”¯æŒä¹Ÿä¸å¤Ÿå¥½ã€‚</p><p>äºæ˜¯ï¼Œå°±å°è¯•å‡çº§passwallï¼Œä½†ç”±äºN1ç›’å­çš„ç³»ç»Ÿç‰ˆæœ¬å¤ªæ—§ï¼ˆ21å¹´çš„ï¼‰ï¼Œä½¿å¾—ç›´æ¥å‡çº§passwallæ–¹æ¡ˆä¹Ÿå¤±è´¥ã€‚</p><p>äºæ˜¯ä¹â€¦â€¦å°±å¼€å¯äº†ä¸€ç³»åˆ—çš„æŠ˜ç£¨ï¼Œæœ€ç»ˆçš„æ–¹æ¡ˆæ˜¯ï¼Œé‡æ–°å®‰è£…24.01.26ç‰ˆæœ¬çš„openwrtç³»ç»Ÿï¼Œå†åœ¨æ­¤ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨Passwall2</p></blockquote><hr><blockquote><p>å¦‚æœè¦æ‰¾N1é‡å¤´å¼€å§‹ç›’å­å®‰è£…Openwrtï¼Œè¯·æŸ¥çœ‹ï¼š<a href="https://www.cnblogs.com/robotpaul/p/17127387.html">https://www.cnblogs.com/robotpaul/p/17127387.html</a></p></blockquote><h2 id="openwrtç‰ˆæœ¬é€‰æ‹©">Openwrtç‰ˆæœ¬é€‰æ‹©</h2><p>ç›®å‰ä¸»æµçš„openwrtç³»ç»Ÿæœ‰éå¸¸å¤šçš„ç‰ˆæœ¬ï¼Œè€Œä¸”åˆ†ä¸ºâ€œæœªç¼–è¯‘â€å’Œâ€œå·²ç¼–è¯‘æˆé•œåƒâ€çš„ï¼Œä¸‹é¢æˆ‘åªæ‹¿å·²ç»ç¼–è¯‘å¥½é•œåƒçš„ä¸¾ä¾‹</p><ul><li>å®˜æ–¹ç‰ˆæœ¬ï¼š<a href="https://github.com/ophub/amlogic-s9xxx-openwrt/releases/tag/OpenWrt_official_save_2024.03">/OpenWrt_official_save_2024.03</a></li><li>Leaeç‰ˆæœ¬ï¼š<a href="https://github.com/ophub/amlogic-s9xxx-openwrt/releases/tag/OpenWrt_lede_save_2024.03">/OpenWrt_lede_save_2024.03</a></li><li>Immortalwrtç‰ˆæœ¬ï¼š<a href="https://github.com/ophub/amlogic-s9xxx-openwrt/releases/tag/OpenWrt_immortalwrt_save_2024.03">/OpenWrt_immortalwrt_save_2024.03</a></li><li>Flippyç‰ˆæœ¬ï¼š<a href="https://www.right.com.cn/forum/thread-4076037-1-1.html">https://www.right.com.cn/forum/thread-4076037-1-1.html</a></li><li>æ”¯æŒä¸åŒç¡¬ä»¶çš„åœ¨çº¿ç¼–è¯‘å·¥å…·ï¼š<a href="https://openwrt.ai/">https://openwrt.ai/</a></li></ul><p>å…¶ä¸­ï¼Œå®˜æ–¹ç‰ˆæœ¬çš„è½¯ä»¶è¾ƒå°‘ï¼Œè€ŒFlippyç‰ˆæœ¬è‡ªå¸¦äº†å„ç§å¸¸ç”¨çš„ä»£ç†å·¥å…·ï¼ŒFlippyç‰ˆæœ¬ä¹Ÿæ˜¯ä¹°N1ç›’å­æ—¶è‡ªå¸¦çš„ç‰ˆæœ¬ï¼Œæ¨èä½¿ç”¨Flippyç‰ˆæœ¬</p><h2 id="é•œåƒä¸‹è½½">é•œåƒä¸‹è½½</h2><p>å¦‚æœé€‰æ‹©äº†Flippyç‰ˆæœ¬ï¼Œåœ¨ <a href="https://www.right.com.cn/forum/thread-4076037-1-1.html">https://www.right.com.cn/forum/thread-4076037-1-1.html</a> ä¸­å¯ä»¥æ‰¾åˆ°ç™¾åº¦ç½‘ç›˜ä¸‹è½½åœ°å€ï¼Œåœ¨ç½‘ç›˜ä¸­æ‰¾åˆ°ä¸åŒç¡¬ä»¶å¯¹åº”çš„æ–‡ä»¶å¤¹</p><p>æ¯”å¦‚N1ç›’å­çš„æ–‡ä»¶å¤¹å«&quot;<strong>S905D_Phicomm_N1</strong>&quot;ï¼Œè¿›å…¥æ­¤æ–‡ä»¶å¤¹åï¼Œé€‰æ‹©<code>openwrt_s905d_n1_R24.01.26_k5.15.148-flippy-87+o</code>è¿™ä¸ªæ–‡ä»¶ä¸‹è½½å³å¯ï¼Œ<strong>æ–‡ä»¶ä¸ç”¨è§£å‹</strong></p><ul><li>R24.01.26è¡¨ç¤ºç¼–è¯‘çš„ç‰ˆæœ¬</li><li>k5.15.86æ˜¯å†…æ ¸ç‰ˆæœ¬ï¼Œå¦‚æœå½“å‰å†…æ ¸é«˜æˆ–ä½äº5.15ä¹Ÿæ²¡å…³ç³»ï¼Œå¯ä»¥å‡çº§æˆ–é™çº§å†…æ ¸ç‰ˆæœ¬</li><li>flippyæ˜¯ä½œè€…å</li></ul><h2 id="é•œåƒå®‰è£…">é•œåƒå®‰è£…</h2><p>ä¸‹è½½å¥½é•œåƒæ–‡ä»¶åï¼Œæ‰“å¼€å½“å‰OpenWrtçš„ç½‘é¡µç•Œé¢ï¼Œåœ¨&quot;ç³»ç»Ÿ&quot; -&gt; â€œæ™¶æ™¨å®ç›’â€ -&gt; â€œæ‰‹åŠ¨ä¸Šä¼ æ›´æ–°â€ï¼Œé€‰æ‹©åˆšåˆšä¸‹è½½çš„<code>.7z</code>æ–‡ä»¶ï¼Œç­‰ä¸Šä¼ å®Œæˆåï¼Œæœ€ä¸‹æ–¹ä¼šå‡ºç°â€œå‡çº§Openwrtå›ºä»¶â€çš„æŒ‰é’®ï¼Œç‚¹å‡»æ›´æ–°å³å¯</p><p>â€œå‡çº§Openwrtå›ºä»¶â€æŒ‰é’®æ—è¾¹ï¼Œæœ‰å®‰è£…çš„è¿›åº¦æé†’ï¼Œç­‰å¾…å‡ åˆ†é’Ÿï¼Œé‡æ–°æ‰“å¼€OpenWrtçš„ç½‘é¡µç•Œé¢ï¼Œç†è®ºä¸Šå°±å®‰è£…æˆåŠŸäº†ã€‚</p><h2 id="ä½¿ç”¨passwall2">ä½¿ç”¨Passwall2</h2><blockquote><p>å¯èƒ½æ˜¯æˆ‘é…ç½®çš„é—®é¢˜ï¼Œå¦‚æœç”¨Passwallå°±ä¼šå‡ºç°ç¿»å¢™å¤±è´¥ï¼Œè¿™é‡Œäºæ˜¯ä½¿ç”¨Passwall2ï¼Œé…ç½®åŸºæœ¬ä¸Passwallä¸€è‡´</p><p>åœ¨Passwall2ä¸­æ·»åŠ èŠ‚ç‚¹ï¼Œé€‰æ‹©Hysteria2ï¼Œä¸‹é¢æ˜¯Hysteria2çš„é…ç½®</p><p>Passwall2å…·ä½“çš„é…ç½®ï¼š</p><p><a href="https://www.right.com.cn/forum/thread-8325875-1-1.html">Openwrt|Passwall| ã€2024-1-1ã€‘Pass Wall2ï¼ˆå®Œç¾é…ç½®æ•™ç¨‹ï¼‰-OPENWRTä¸“ç‰ˆ-æ©å±±æ— çº¿è®ºå›</a></p></blockquote><p>DNSè®¾ç½®</p><p>è¿œç¨‹DNSåè®®ï¼šDoH</p><p>è¿œç¨‹DNS DoH: CloudFlare</p><p>è¿œç¨‹DNSå‡ºç«™ï¼šè¿œç¨‹</p><p>FakeDNSï¼šchecked</p><p>è¿œç¨‹æŸ¥è¯¢ç­–ç•¥ï¼šUseIPv4</p><h2 id="hysteria2çš„é…ç½®">Hysteria2çš„é…ç½®</h2><p>éšåï¼Œè¿›è¡ŒHysteria2çš„é…ç½®ï¼Œè¯¦ç»†çš„é…ç½®å‚è€ƒå®˜ç½‘ï¼š<a href="https://v2.hysteria.network/zh/docs/advanced/Full-Client-Config/">Full-Client-Config</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">**åœ°å€ï¼ˆæ”¯æŒåŸŸåï¼‰:å¡«å†™ip</span><br><span class="line"></span><br><span class="line">**ç«¯å£: å¡«å†™Hysteria2å¼€æ”¾çš„ç«¯å£</span><br><span class="line"></span><br><span class="line">**ç«¯å£è·³è·ƒé¢å¤–ç«¯å£:  20000-50000</span><br><span class="line"></span><br><span class="line">æ··æ·†å¯†ç  : å¯ä»¥ç©ºç€ä¸å†™</span><br><span class="line"></span><br><span class="line">**è®¤è¯å¯†ç : å¡«å†™Hysteria2æœåŠ¡ç«¯çš„å¯†ç </span><br><span class="line"></span><br><span class="line">å¿«é€Ÿæ‰“å¼€: ä¸é€‰</span><br><span class="line"></span><br><span class="line">**åŸŸåï¼š å¡«å†™åŸŸå</span><br><span class="line"></span><br><span class="line">å…è®¸ä¸å®‰å…¨è¿æ¥ï¼šä¸é€‰</span><br><span class="line"></span><br><span class="line">PinSHA256ï¼šä¸å†™</span><br><span class="line"></span><br><span class="line">**æœ€å¤§ä¸Šè¡Œ(Mbps)ï¼š100</span><br><span class="line"></span><br><span class="line">**æœ€å¤§ä¸‹è¡Œ(Mbps)ï¼š100</span><br><span class="line"></span><br><span class="line">**ç«¯å£è·³è·ƒæ—¶é—´ï¼š30</span><br><span class="line"></span><br><span class="line">**QUIC æµæ¥æ”¶çª—å£ï¼š26843545</span><br><span class="line"></span><br><span class="line">**QUIC è¿æ¥æ¥æ”¶çª—å£ï¼š67108864</span><br><span class="line"></span><br><span class="line">ç©ºé—²è¶…æ—¶ï¼šä¸é€‰</span><br><span class="line"></span><br><span class="line">**ç¦ç”¨ MTU æ£€æµ‹ ï¼šæ‰“é’©</span><br><span class="line"></span><br><span class="line">å»¶è¿Ÿå¯åŠ¨ï¼šä¸é€‰</span><br></pre></td></tr></table></figure><p>å…³äº<code>QUIC æµæ¥æ”¶çª—å£</code>çš„æ•°å€¼å‚è€ƒå®˜ç½‘çš„è®¾ç½®</p><blockquote><p><a href="https://v2.hysteria.network/zh/docs/advanced/Performance/">https://v2.hysteria.network/zh/docs/advanced/Performance/</a></p></blockquote><h3 id="ç³»ç»Ÿç¼“å†²åŒºå¤§å°">ç³»ç»Ÿç¼“å†²åŒºå¤§å°</h3><p>Linux</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># å°†å‘é€ã€æ¥æ”¶ä¸¤ä¸ªç¼“å†²åŒºéƒ½è®¾ç½®ä¸º 16 MB</span><br><span class="line">sysctl -w net.core.rmem_max=16777216</span><br><span class="line">sysctl -w net.core.wmem_max=16777216</span><br></pre></td></tr></table></figure><p>BSD/macOS</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sysctl -w kern.ipc.maxsockbuf=20971520</span><br><span class="line">sysctl -w net.inet.udp.recvspace=16777216</span><br><span class="line"># BSD ä¸Šä¸å­˜åœ¨ UDP å‘é€ç¼“å†²åŒºï¼Œå› æ­¤æ²¡æœ‰ &quot;sendspace&quot; å¯è®¾ç½®</span><br></pre></td></tr></table></figure><h3 id="æµæ§åˆ¶æ¥æ”¶çª—å£å¤§å°">æµæ§åˆ¶æ¥æ”¶çª—å£å¤§å°</h3><p>Hysteria åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é…ç½®ä¸­éƒ½æœ‰ä»¥ä¸‹ QUIC æµæ§åˆ¶æ¥æ”¶çª—å£å‚æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">quic:</span><br><span class="line">  initStreamReceiveWindow: 26843545 </span><br><span class="line">  maxStreamReceiveWindow: 26843545 </span><br><span class="line">  initConnReceiveWindow: 67108864 </span><br><span class="line">  maxConnReceiveWindow: 67108864 </span><br></pre></td></tr></table></figure><p>å¯ä»¥æ ¹æ®ä½ çš„ä½¿ç”¨æƒ…æ™¯æé«˜æˆ–è€…é™ä½è¿™äº›å€¼ã€‚<strong>å¼ºçƒˆå»ºè®®ä¿æŒæ¥è¿‘ 2/5 çš„æµ/è¿æ¥æ¥æ”¶çª—å£æ¯”ä¾‹ã€‚</strong> è¿™æ ·å¯ä»¥é˜²æ­¢ä¸€ä¸ªæˆ–ä¸¤ä¸ªé˜»å¡çš„æµå¡æ­»æ•´ä¸ªè¿æ¥ã€‚</p><h3 id="ç«¯å£è·³è·ƒ">ç«¯å£è·³è·ƒ</h3><blockquote><p>å…·ä½“æŸ¥çœ‹ï¼š<a href="https://v2.hysteria.network/zh/docs/advanced/Port-Hopping/">https://v2.hysteria.network/zh/docs/advanced/Port-Hopping/</a></p></blockquote><p>ä¸­å›½ç”¨æˆ·æœ‰æ—¶æŠ¥å‘Šè¿è¥å•†ä¼šé˜»æ–­æˆ–é™é€Ÿ UDP è¿æ¥ã€‚ä¸è¿‡ï¼Œè¿™äº›é™åˆ¶å¾€å¾€ä»…é™å•ä¸ªç«¯å£ã€‚ç«¯å£è·³è·ƒå¯ç”¨ä½œæ­¤æƒ…å†µçš„è§£å†³æ–¹æ³•ã€‚</p><h4 id="å®¢æˆ·ç«¯">å®¢æˆ·ç«¯</h4><p>Hysteria å®¢æˆ·ç«¯æ”¯æŒä¸€ç§ç‰¹æ®Šçš„å¤šç«¯å£åœ°å€æ ¼å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">example.com:1234,5678,9012 </span><br><span class="line">example.com:20000-50000 </span><br><span class="line">example.com:1234,5000-6000,7044,8000-9000 </span><br></pre></td></tr></table></figure><p>å¯æŒ‡å®šçš„ç«¯å£æ•°é‡æ²¡æœ‰é™åˆ¶ã€‚</p><p>å®¢æˆ·ç«¯å°†éšæœºé€‰æ‹©ä¸€ä¸ªç«¯å£è¿›è¡Œåˆå§‹è¿æ¥ï¼Œå¹¶å®šæœŸéšæœºè·³è·ƒåˆ°å¦ä¸€ä¸ªç«¯å£ã€‚ç”¨äºæ§åˆ¶æ—¶é—´é—´éš”çš„é€‰é¡¹æ˜¯ <code>transport</code> éƒ¨åˆ†ä¸­çš„ <code>hopInterval</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">transport:</span><br><span class="line">  udp:</span><br><span class="line">    hopInterval: 30s </span><br></pre></td></tr></table></figure><p>å‡è®¾æœåŠ¡å™¨ç¡®å®åœ¨æ‰€æœ‰æŒ‡å®šçš„ç«¯å£ä¸Šå¯è¾¾ï¼Œè·³è·ƒè¿‡ç¨‹å¯¹ä¸Šå±‚åº”ç”¨æ˜¯é€æ˜çš„ï¼Œä¸ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±/è¿æ¥æ–­å¼€ã€‚</p><h4 id="æœåŠ¡å™¨">æœåŠ¡å™¨</h4><p>Hysteria æœåŠ¡ç«¯å¹¶ä¸èƒ½åŒæ—¶ç›‘å¬å¤šä¸ªç«¯å£ï¼Œå› æ­¤ä¸èƒ½åœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨ä¸Šé¢çš„æ ¼å¼ä½œä¸ºç›‘å¬åœ°å€ã€‚<strong>å»ºè®®é…åˆ iptables æˆ– nftables çš„ DNAT å°†ç«¯å£è½¬å‘åˆ°æœåŠ¡å™¨çš„ç›‘å¬ç«¯å£ã€‚</strong></p><p><a href="https://v2.hysteria.network/zh/docs/advanced/Port-Hopping/#__tabbed_1_1">iptables</a><a href="https://v2.hysteria.network/zh/docs/advanced/Port-Hopping/#__tabbed_1_2">nftables</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># IPv4</span><br><span class="line">iptables -t nat -A PREROUTING -i eth0 -p udp --dport 20000:50000 -j DNAT --to-destination :443</span><br><span class="line"># IPv6</span><br><span class="line">ip6tables -t nat -A PREROUTING -i eth0 -p udp --dport 20000:50000 -j DNAT --to-destination :443</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒæœåŠ¡å™¨ç›‘å¬ 443 ç«¯å£ï¼Œä½†å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ 20000-50000 èŒƒå›´å†…çš„ä»»ä½•ç«¯å£è¿æ¥ã€‚</p><hr><blockquote><p>ä»¥ä¸‹å†…å®¹ï¼Œè¢«ä¸¢å¼ƒäº†ï¼Œä¸è¦ç”¨ï¼Œç”¨æœ€æ–°Flippyç‰ˆæœ¬çš„Openwrtç³»ç»Ÿï¼Œå¯ä»¥æ‹¥æœ‰æœ€æ–°çš„Passwallå¹¶ä¸”Hysteriaä¹Ÿæ˜¯æ¯”è¾ƒæ–°çš„ç‰ˆæœ¬</p></blockquote><h2 id="å‡çº§passwall">å‡çº§Passwall</h2><h3 id="ç¡®å®šcpuæ¶æ„">ç¡®å®šCPUæ¶æ„</h3><blockquote><p>åœ¨ä¸‹è½½å‰ï¼Œå…ˆç¡®å®šè‡ªå·±æœºå™¨çš„cpuæ¶æ„</p></blockquote><ol><li><p><strong>(æ¨è)ä½¿ç”¨ <code>lscpu</code> å‘½ä»¤</strong></p><p><code>lscpu</code> å‘½ä»¤æ˜¾ç¤º CPU æ¶æ„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¶æ„ç±»å‹ã€æ ¸å¿ƒæ•°ç­‰<strong>è¯¦ç»†ä¿¡æ¯</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lscpu</span><br></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨ <code>uname</code> å‘½ä»¤</strong></p><p><code>uname -m</code> å¯ä»¥æ˜¾ç¤ºæœºå™¨çš„ç¡¬ä»¶åç§°ã€‚å¯¹äºå¤§å¤šæ•° ARM æ¶æ„çš„è®¾å¤‡ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šè¿”å›ç±»ä¼¼ <code>armv7l</code>, <code>aarch64</code> è¿™æ ·çš„ç»“æœï¼Œè¿™è¡¨ç¤ºäº† CPU çš„æ¶æ„ç±»å‹ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span> -m</span><br></pre></td></tr></table></figure></li></ol><p>è¿™é‡Œä½¿ç”¨lscpuåï¼Œè¾“å‡ºäº†ä»¥ä¸‹å†…å®¹ï¼Œå…¶ä¸­<code>aarch64</code>å’Œ<code>Cortex-A53</code>æ˜¯è¦è®°ä½çš„åå­—</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Architecture:            aarch64</span><br><span class="line">  CPU op-mode(s):        32-bit, 64-bit</span><br><span class="line">  Byte Order:            Little Endian</span><br><span class="line">CPU(s):                  4</span><br><span class="line">  On-line CPU(s) list:   0-3</span><br><span class="line">Vendor ID:               ARM</span><br><span class="line">  Model name:            Cortex-A53</span><br></pre></td></tr></table></figure><h3 id="ä¸‹è½½æ–°ç‰ˆpasswall">ä¸‹è½½æ–°ç‰ˆPasswall</h3><p>åœ¨è½¯ä»¶åŒ…ä¸‹è½½ç½‘ç«™ï¼š<a href="https://op.dllkids.xyz/packages">https://op.dllkids.xyz/packages</a> ï¼Œå…ˆè¿›å…¥å¯¹åº”çš„æ¶æ„æ–‡ä»¶å¤¹ï¼Œå†ä¸‹è½½ä»¥ä¸‹å†…å®¹å¯¹åº”çš„ç‰ˆæœ¬</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">brook_20240404-28.ipk                          shadowsocksr-libev-ssr-local_2.5.6-13.ipk</span><br><span class="line">chinadns-ng_2023.10.28-33.ipk                  shadowsocksr-libev-ssr-nat_2.5.6-13.ipk</span><br><span class="line">dns2tcp_1.1.0-11.ipk                           shadowsocksr-libev-ssr-redir_2.5.6-13.ipk</span><br><span class="line">hysteria_2.4.0-33.ipk                          shadowsocksr-libev-ssr-server_2.5.6-13.ipk</span><br><span class="line">luci-app-passwall_git-25.079.46197-05caf0d_all.ipk                simple-obfs_0.0.5-5.ipk</span><br><span class="line">luci-i18n-passwall-zh-cn_git-23.289.45328-a953315_all.ipk         tcping_0.3-9.ipk</span><br><span class="line">luci-lua-runtime_git-23.233.52805-dae2684.ipk  trojan-plus_10.0.3-6.ipk</span><br><span class="line">microsocks_1.0.4-20.ipk                        tuic-client_1.0.0-7.ipk</span><br><span class="line">naiveproxy_122.0.6261.43-2-49.ipk              v2ray-geoip_202403210039-45_all.ipk</span><br><span class="line">shadowsocks-rust-sslocal_1.18.1-18.ipk         v2ray-geosite_20240324094850-45_all.ipk</span><br><span class="line">shadowsocks-rust-ssmanager_1.18.1-18.ipk       v2ray-plugin_5.13.0-44.ipk</span><br><span class="line">shadowsocks-rust-ssserver_1.18.1-18.ipk        xray-core_1.8.7-35.ipk</span><br><span class="line">shadowsocks-rust-ssservice_1.18.1-18.ipk       xray-plugin_1.8.7-32.ipk</span><br><span class="line">shadowsocksr-libev-ssr-check_2.5.6-13.ipk</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚<code>aarch64_cortex-A53</code>çš„cpuæ¶æ„ï¼Œå°±è¦ä¸‹è½½<strong>brook_20240404-28_aarch64_cortex-a53.ipk</strong></p><p>å¦å¤–ï¼Œå®‰è£…çš„Openwrtç‰ˆæœ¬ä½äº23.5çš„ï¼Œéœ€è¦å®‰è£…<code>luci-lua-runtime_git-23.233.52805-dae2684.ipk</code>ï¼Œå¦åˆ™åç»­å®‰è£…Passwallå¯èƒ½ä¼šå‡ºé”™</p><p>å°†è¿™äº›è½¯ä»¶åŒ…ä¸‹è½½å¥½åï¼Œå°†æ–‡ä»¶å¤¹å‹ç¼©æˆzipæ ¼å¼ï¼Œå†ç”¨scpå‘½ä»¤å¤åˆ¶åˆ°Openwrtç›®å½•ä¸­ï¼Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp passwall.zip root@192.168.6.155:/home/</span><br></pre></td></tr></table></figure><p>éšåæ‰§è¡Œå‘½ä»¤é‡è£…Passwall</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opkg install ./*.ipk --force-reinstall</span><br></pre></td></tr></table></figure><blockquote><p>ä¸ºä»€ä¹ˆè¦ä¸‹è½½è¿™ä¹ˆå¤šåŒ…ï¼Œå› ä¸ºPasswallä¾èµ–äºè¿™äº›åŒ…ï¼Œåªå®‰è£…<code>luci-app-passwall_git-25.079.46197-05caf0d_all.ipk</code>æ˜¯ä¸ä¼šå®‰è£…æˆåŠŸçš„</p></blockquote><p>é‡è£…åï¼Œåˆ·æ–°Openwrtç½‘é¡µï¼Œæ­¤æ—¶Passwallçš„Hysteria ç‰ˆæœ¬åº”è¯¥æ˜¯ã€ v2.4.0 ã€‘ï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±å†é‡æ–°å•ç‹¬å®‰è£…ä¸‹<strong>hysteria_2.4.0-33.ipk</strong></p><blockquote><p>å¦‚æœåªæƒ³å•ç‹¬å®‰è£…æŸä¸ªè½¯ä»¶ï¼Œå¯ä»¥åœ¨â€œç³»ç»Ÿâ€-&gt; &quot;æ–‡ä»¶ä¼ è¾“&quot;ä¸­ï¼Œå°†æ–‡ä»¶ä¸Šä¼ åï¼Œä¼šè·³å‡ºâ€œå®‰è£…â€çš„æŒ‰é’®</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;n1ç›’å­é‡è£…openwrt&quot;&gt;N1ç›’å­é‡è£…Openwrt&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;æŠ˜è…¾äº†ä¸€å¤©n1ç›’å­ï¼Œèµ·å› æ˜¯çœ‹åˆ°ä¸€ä¸ªæ–°çš„ä»£ç†åè®®&amp;quot;Hysteria&amp;quot;ï¼ˆå®‰è£…è§†é¢‘ï¼š&lt;a href=&quot;https://www.youtube.com/</summary>
      
    
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
    <category term="Openwrt" scheme="https://blog.lthero.cn/tags/Openwrt/"/>
    
  </entry>
  
  <entry>
    <title>ã€Ubuntuã€‘æ‰“é€ å…¨è‡ªåŠ¨è¿½å‰§å·¥å…·</title>
    <link href="https://blog.lthero.cn/2024/03/25/PersonalFilmStationOnUbuntu/"/>
    <id>https://blog.lthero.cn/2024/03/25/PersonalFilmStationOnUbuntu/</id>
    <published>2024-03-25T08:43:40.000Z</published>
    <updated>2024-07-12T11:52:29.802Z</updated>
    
    <content type="html"><![CDATA[<p>1</p><blockquote><p>éƒ¨ç½²å‚è€ƒ,ä»¥åŠéƒ¨ç½²æ•ˆæœå±•ç¤º:<a href="https://www.bilibili.com/video/BV1wD4y1B7xZ">https://www.bilibili.com/video/BV1wD4y1B7xZ</a></p></blockquote><p>åŸè§†é¢‘æ˜¯ä½¿ç”¨ç¾¤æ™–nasè¿›è¡Œéƒ¨ç½²,æœ¬æ–‡ä½¿ç”¨ubuntuä¸Šå®‰è£…</p><p>ä¸€å…±éœ€è¦å®‰è£…ä¸‰ä¸ªè½¯ä»¶:nas-tools(ç®¡ç†å™¨), Emby(åª’ä½“æ’­æ”¾å™¨), qBittorrent(ä¸‹è½½å™¨)</p><h1 id="æŒ‚è½½nasåˆ°ubuntu">æŒ‚è½½nasåˆ°ubuntu</h1><blockquote><p>æŠŠå±€åŸŸç½‘çš„Nasè®¾å¤‡æŒ‚è½½åˆ°Ubuntuç”µè„‘ä¸Š</p></blockquote><h2 id="å•æ¬¡æŒ‚è½½">å•æ¬¡æŒ‚è½½</h2><p>é¦–å…ˆåœ¨Ubuntu çš„ <code>/mnt</code> ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª NAS æŒ‚è½½ç›®å½• <code>nas</code>ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> /mnt/nas</span><br><span class="line"><span class="comment"># ä¸‹é¢è¿™ä¸ªå‘½ä»¤æ˜¯ä¸ºäº†å…±äº«æ—¶ï¼Œå…è®¸åŒ¿åç›´æ¥è®¿é—®ï¼Œè§£å†³æƒé™é—®é¢˜</span></span><br><span class="line">sudo <span class="built_in">chmod</span> 777 /mnt/nas</span><br></pre></td></tr></table></figure><p>å®‰è£… <code>cifs-utils</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install cifs-utils</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç”¨æˆ·çš„ <code>uid</code> å’Œ <code>gid</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span> root</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå®Œæˆå•æ¬¡æŒ‚è½½</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -t cifs -o uid=root,username=admin,password=xxxx,iocharset=utf8,file_mode=0777,dir_mode=0777 //192.168.6.154/public /mnt/nas/ </span><br></pre></td></tr></table></figure><ul><li>uid é€‰æ‹©<strong>ubuntuç³»ç»Ÿä¸Š</strong>æ™®é€šç”¨æˆ·æˆ–root</li><li>username æ˜¯<strong>nasä¸Š</strong>çš„ç”¨æˆ·å</li><li>password æ˜¯<strong>nasä¸Š</strong>çš„å¯†ç </li><li>iocharset=utf8 é˜²æ­¢æœ‰ä¸­æ–‡è·¯å¾„</li><li><a href="//192.168.6.154/public">//192.168.6.154/public</a> æ˜¯nasä¸‹çš„publicç›®å½•</li><li>/mnt/nas/ æŒ‚è½½åˆ°ubuntuçš„è¿™ä¸ªç›®å½•ä¸‹</li><li>file_mode=0777,dir_mode=0777  æƒé™å…¨å¼€</li></ul><h2 id="å¼€æœºè‡ªåŠ¨æŒ‚è½½">å¼€æœºè‡ªåŠ¨æŒ‚è½½</h2><p>ç¼–è¾‘å¯åŠ¨æŒ‚è½½æ–‡ä»¶ <code>fstab</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/fstab</span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶æœ€åè¿½åŠ ä¸€è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»…ç»™rootç”¨æˆ·å…¨éƒ¨æƒé™</span></span><br><span class="line">//192.168.6.154/public /mnt/nas/ cifs uid=root,username=admin,password=xxx,iocharset=utf8 0 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢è¿™è¡Œæ˜¯å°†æƒé™å…¨éƒ¨å¼€æ”¾</span></span><br><span class="line">//192.168.6.154/public /mnt/nas cifs uid=root,username=admin,password=xxxx,iocharset=utf8,file_mode=0777,dir_mode=0777 0 0</span><br></pre></td></tr></table></figure><p>åœ¨é‡å¯ä¹‹å‰ï¼Œä½ å¯ä»¥æ‰‹åŠ¨æµ‹è¯•è¿™ä¸ªé…ç½®æ˜¯å¦æœ‰æ•ˆã€‚</p><p>é¦–å…ˆï¼Œå¸è½½ä¹‹å‰å¯èƒ½å·²ç»æ‰‹åŠ¨æŒ‚è½½çš„å…±äº«ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo umount /mnt/nas/</span><br></pre></td></tr></table></figure><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æŒ‚è½½æ‰€æœ‰åœ¨<code>/etc/fstab</code>ä¸­å®šä¹‰çš„æ–‡ä»¶ç³»ç»Ÿï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -a</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰é”™è¯¯æç¤ºï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚</p><p>é‡å¯ç³»ç»Ÿï¼Œå¹¶æ£€æŸ¥CIFSå…±äº«æ˜¯å¦è‡ªåŠ¨æŒ‚è½½äº†ã€‚</p><p>é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œæ¯æ¬¡ç³»ç»Ÿå¯åŠ¨æ—¶ï¼ŒCIFSå…±äº«å°±ä¼šè‡ªåŠ¨æŒ‚è½½åˆ°æŒ‡å®šçš„æŒ‚è½½ç‚¹ã€‚å¦‚æœé‡åˆ°é—®é¢˜ï¼Œæ£€æŸ¥æ—¥å¿—æ–‡ä»¶ï¼ˆå¦‚<code>/var/log/syslog</code>ï¼‰ä¸­çš„é”™è¯¯ä¿¡æ¯</p><h1 id="ubuntuå…±äº«æ–‡ä»¶">Ubuntuå…±äº«æ–‡ä»¶</h1><blockquote><p>ubuntuå…±äº«å…¶ç›®å½•ç»™å±€åŸŸç½‘å†…çš„å…¶å®ƒè®¾å¤‡</p></blockquote><h2 id="é€šè¿‡-samba-å…±äº«ç›®å½•">é€šè¿‡ Samba å…±äº«ç›®å½•</h2><p>å®‰è£…samba</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install samba</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘ Samba é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/samba/smb.conf</span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[nas]</span><br><span class="line">    path = <span class="regexp">/mnt/</span>nas</span><br><span class="line">    browseable = yes</span><br><span class="line">    read only = no</span><br><span class="line">    guest ok = yes</span><br><span class="line">    force user = nobody</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0777</span></span><br></pre></td></tr></table></figure><h2 id="é‡å¯-samba-æœåŠ¡">é‡å¯ Samba æœåŠ¡</h2><p>æ¯æ¬¡ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œéƒ½éœ€è¦é‡å¯ Samba æœåŠ¡ä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart smbd</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•-samba-å…±äº«">æµ‹è¯• Samba å…±äº«</h2><p>ä½ ç°åœ¨å¯ä»¥ä»å…¶ä»–è®¡ç®—æœºè®¿é—®å…±äº«ç›®å½•ã€‚æ¯”å¦‚åœ¨ Windows ä¸Šï¼Œé€šè¿‡æ–‡ä»¶èµ„æºç®¡ç†å™¨è®¿é—®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\\your_ubuntu_ip\nas</span><br></pre></td></tr></table></figure><p>åœ¨ Linux ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŒ‚è½½å…±äº«ç›®å½•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -t cifs //your_ubuntu_ip/nas /path/to/mount -o guest</span><br></pre></td></tr></table></figure><h1 id="nas-toolså®‰è£…">nas-toolså®‰è£…</h1><p>nas-toolså®‰è£…å‚è€ƒï¼š<a href="https://github.com/hsuyelin/nas-tools">https://github.com/hsuyelin/nas-tools</a></p><h2 id="å®‰è£…">å®‰è£…</h2><h3 id="æ–¹å¼ä¸€ï¼šdockeræ‹‰é•œåƒå®‰è£…">æ–¹å¼ä¸€ï¼šDockeræ‹‰é•œåƒå®‰è£…</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull hsuyelin/nas-tools:latest</span><br></pre></td></tr></table></figure><p>æ•™ç¨‹è§ <a href="https://raw.githubusercontent.com/hsuyelin/nas-tools/master/docker/readme.md">è¿™é‡Œ</a> ã€‚</p><p>å¦‚æ— æ³•è¿æ¥Githubï¼Œæ³¨æ„ä¸è¦å¼€å¯è‡ªåŠ¨æ›´æ–°å¼€å…³(NASTOOL_AUTO_UPDATE=false)ï¼Œå°†NASTOOL_CN_UPDATEè®¾ç½®ä¸ºtrueå¯ä½¿ç”¨å›½å†…æºåŠ é€Ÿå®‰è£…ä¾èµ–ã€‚</p><p>æŸ¥çœ‹æ‰€æœ‰é•œåƒ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p>é•œåƒpullåå†è¿è¡Œnas-tools</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -p 3333:3000 -d \</span><br><span class="line">  -v /mnt/nas/wan/Videos/:/mnt/nas/wan/Videos \</span><br><span class="line">  -v /docker/nastools/config/:/config \</span><br><span class="line">  é•œåƒ<span class="built_in">id</span></span><br></pre></td></tr></table></figure><ul><li><code>-p 3333:3000</code>  æŠŠå®¹å™¨çš„3000ç«¯å£æ˜ å°„åˆ°å¤–é¢çš„<code>3333</code>ç«¯å£</li><li><code>-v /docker/nastools/config/:/config</code>  ä½¿ç”¨å¤–éƒ¨çš„é…ç½®æ–‡ä»¶</li><li><code>-v /mnt/nas/wan/Videos/:/mnt/nas/wan/Videos</code> å°†è§†é¢‘è·¯å¾„æ˜ å°„</li></ul><h3 id="æ–¹å¼äºŒï¼šdocker-composeç›´æ¥è¿è¡Œ">æ–¹å¼äºŒï¼šDocker-composeç›´æ¥è¿è¡Œ</h3><p>å¯ä»¥æ–°å»ºä¸€ä¸ª<code>nas-tools</code>ç›®å½•ï¼Œåœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œåˆ›å»º<code>docker-compose.yml</code>æ–‡ä»¶ï¼Œå°†ä¸‹é¢çš„å†…å®¹ä¿®æ”¹å¥½å¡«å†™è¿›å»</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&quot;3&quot;</span></span><br><span class="line">services:</span><br><span class="line">  nas-tools:</span><br><span class="line">    image: hsuyelin/nas-tools:latest</span><br><span class="line">    ports:</span><br><span class="line">      - 3333:3000        <span class="comment"># é»˜è®¤çš„webuiæ§åˆ¶ç«¯å£æ˜¯3000ï¼Œè¿™é‡Œä¿®æ”¹æˆ3333</span></span><br><span class="line">    volumes:</span><br><span class="line">      - /docker/nastools/config:/config   <span class="comment"># å†’å·å·¦è¾¹è¯·ä¿®æ”¹ä¸ºä½ æƒ³ä¿å­˜é…ç½®çš„è·¯å¾„</span></span><br><span class="line">      <span class="comment">#- /ä½ çš„åª’ä½“ç›®å½•:/ä½ æƒ³è®¾ç½®çš„å®¹å™¨å†…èƒ½è§åˆ°çš„ç›®å½•   # åª’ä½“ç›®å½•ï¼Œå¤šä¸ªç›®å½•éœ€è¦åˆ†åˆ«æ˜ å°„è¿›æ¥ï¼Œéœ€è¦æ»¡è¶³é…ç½®æ–‡ä»¶è¯´æ˜ä¸­çš„è¦æ±‚</span></span><br><span class="line">      - /home/lthero/Videos/Movies:/data/movies</span><br><span class="line">      - /home/lthero/Videos/Series:/data/series</span><br><span class="line">    environment: </span><br><span class="line">      - PUID=100    <span class="comment"># æƒ³åˆ‡æ¢ä¸ºå“ªä¸ªç”¨æˆ·æ¥è¿è¡Œç¨‹åºï¼Œè¯¥ç”¨æˆ·çš„uid</span></span><br><span class="line">      - PGID=100    <span class="comment"># æƒ³åˆ‡æ¢ä¸ºå“ªä¸ªç”¨æˆ·æ¥è¿è¡Œç¨‹åºï¼Œè¯¥ç”¨æˆ·çš„gid</span></span><br><span class="line">      - UMASK=000 <span class="comment"># æ©ç æƒé™ï¼Œé»˜è®¤000ï¼Œå¯ä»¥è€ƒè™‘è®¾ç½®ä¸º022</span></span><br><span class="line">      - NASTOOL_AUTO_UPDATE=<span class="literal">true</span>  <span class="comment"># å¦‚éœ€åœ¨å¯åŠ¨å®¹å™¨æ—¶è‡ªåŠ¨å‡çº§ç¨‹ç¨‹åºè¯·è®¾ç½®ä¸ºtrue</span></span><br><span class="line">      <span class="comment">#- REPO_URL=https://ghproxy.com/https://github.com/jxxghp/nas-tools.git  # å½“ä½ è®¿é—®githubç½‘ç»œå¾ˆå·®æ—¶ï¼Œå¯ä»¥è€ƒè™‘è§£é‡Šæœ¬è¡Œæ³¨é‡Š</span></span><br><span class="line">    restart: always</span><br><span class="line">    network_mode: bridge</span><br><span class="line">    hostname: nas-tools</span><br><span class="line">    container_name: nas-tools</span><br></pre></td></tr></table></figure><p>éšåè¿è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure><p>åœ¨æœ¬åœ°è¾“å…¥<strong>æœåŠ¡å™¨IP:ç«¯å£3333</strong>ï¼Œå°±å¯ä»¥é¡ºåˆ©ç™»å½•nas-toolsï¼Œ<strong>é»˜è®¤ç”¨æˆ·åadminï¼Œé»˜è®¤å¯†ç passwordã€‚</strong></p><h2 id="è®¾ç½®">è®¾ç½®</h2><p>å¼€å§‹åŸºç¡€è®¾ç½®ï¼Œéœ€è¦å…ˆè®¾ç½®<strong>TMDB API Key</strong>ï¼Œä¸ç„¶æœ‰æœ¬èº«åŠŸèƒ½å¯èƒ½æ— æ³•æ­£å¸¸è¿è¡Œï¼Œè¯·ä»TMDBç½‘ç«™æ³¨å†Œå¸å·ï¼Œå¹¶ç”³è¯·<a href="https://developer.themoviedb.org/reference/intro/getting-started">API</a>ï¼Œç›®å‰ç”³è¯·è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“ï¼Œä¿¡æ¯å¡«å†™å°½é‡ç”¨è‹±æ–‡ï¼Œç”¨ä¸­æ–‡å¯èƒ½ä¼šå‡ºç°é”™è¯¯ï¼Œæ— æ³•ç”³è¯·æˆåŠŸï¼Œè¿™é‡Œå°±ä¸åšæ¼”ç¤ºã€‚</p><p><img src="https://post.smzdm.com/p/aev09ngz/pic_7/" alt="TMDB API Key"></p><p>è®¾ç½®å¥½åï¼Œè¯·é‡å¯æœåŠ¡</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/62b7de693f8686220.png_e1080.jpg" alt="é‡å¯æŒ‰é”®ä½ç½®"></p><h3 id="è®¾ç½®åª’ä½“åº“">è®¾ç½®åª’ä½“åº“</h3><p>ä¾æ¬¡æ–°å¢ç›®å½•ï¼Œç›®å½•æ˜¯dockerå®¹å™¨å†…ç›®å½•ï¼Œè€Œä¸æ˜¯å®é™…è·¯å¾„</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/62b7de35d84871298.png_e1080.jpg" alt="æ–°å¢ç›®å½•"></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/62b7de35ab98a8893.png_e1080.jpg" alt="è·¯å¾„å¢åŠ "></p><h3 id="ä¸‹è½½å™¨è®¾ç½®">ä¸‹è½½å™¨è®¾ç½®</h3><p>è¿™é‡Œå°±æŒ‰ç…§qbittorrentä¸ºä¾‹</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/62b7de3f65c948492.png_e1080.jpg" alt="ä¸‹è½½å™¨è®¾ç½®"></p><p>è®¾ç½®åœ°å€ï¼Œç™»å½•å¸å·å¯†ç ï¼Œç›®å‰åº”è¯¥æœ‰bugï¼Œæ— è®ºæ€ä¹ˆè®¾ç½®åœ°å€éƒ½èƒ½æµ‹è¯•æˆåŠŸã€‚å»ºè®®è®¾ç½®IPåœ°å€ä¸ºå®é™…qbittorrentæœåŠ¡å™¨ï¼ˆä¸æ˜¯127.0.0.1ï¼‰ã€‚</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/62b7de41341286123.png_e1080.jpg" alt="è®¾ç½®qbittorrent"></p><h3 id="jellyfinè®¾ç½®">jellyfinè®¾ç½®</h3><p><strong>æœåŠ¡å™¨åœ°å€è¯·é€‰æ‹©å®é™…åª’ä½“æœåŠ¡å™¨åœ°å€</strong>ï¼Œè€Œä¸ä¸€å®š127.0.0.1</p><blockquote><p>å¦‚æœåœ¨dockerä¸­è¿è¡Œnastoolsï¼Œè¿™é‡Œè¯·å¡«å†™<strong>å®¿ä¸»æœºçš„å±€åŸŸç½‘ipåœ°å€</strong></p><p>å¦‚æœåšäº†<strong>Frpçš„æ˜ å°„</strong>ï¼Œè¿™é‡ŒJellyfinçš„ipåœ°å€å’Œç«¯å£ï¼Œå°±æ˜¯<strong>æ˜ å°„åçš„å…¬ç½‘ip:ç«¯å£</strong>ï¼Œåé¢çš„qBittrorentåŒç†</p></blockquote><p><img src="https://cdn.lthero.cn/post_images/course/ML/62b7de55461202305.png_e1080.jpg" alt="åª’ä½“æœåŠ¡å™¨è®¾ç½®"></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/62b7de4d192554376.png_e1080.jpg" alt="jellyfinè®¾ç½®"></p><p>åœ¨jellyfinä¸­æ§åˆ¶å°â€“é«˜çº§â€“APIå¯†é’¥ï¼Œè¿›è¡Œæ·»åŠ </p><p><img src="https://cdn.lthero.cn/post_images/course/ML/62b7de49be3495228.png_e1080.jpg" alt="æ·»åŠ api"></p><p><img src="https://cdn.lthero.cn/post_images/course/ML/62b7de51e84d06061.png_e1080.jpg" alt="å¤åˆ¶api"></p><p>å¤åˆ¶åˆ°nas-toolsåª’ä½“æœåŠ¡å™¨é¡µé¢å³å¯ï¼Œæµ‹è¯•æˆåŠŸåï¼Œå›åˆ°å¼€å§‹é¡µé¢ï¼Œæ—¢å¯ä»¥çœ‹åˆ°ç›¸å…³æ•°æ®äº†</p><p><img src="https://cdn.lthero.cn/post_images/course/ML/62b7de532cbe52261.png_e1080.jpg" alt="ä¿¡æ¯å…³è”"></p><p>åç»­çš„è®¾ç½®å‚è€ƒï¼š</p><p><a href="https://post.smzdm.com/p/aev09ngz/">https://post.smzdm.com/p/aev09ngz/</a></p><hr><h1 id="ä¸‹è½½å™¨å®‰è£…">ä¸‹è½½å™¨å®‰è£…</h1><p>qBittorrentå’Œtransmissionå®‰è£…ä¸€ä¸ªå³å¯ï¼Œä»åŠŸèƒ½ä¸Šæ¥è¯´ï¼ŒqBittorrentæ›´å…¨</p><h2 id="æ¨è-qbittorrentå®‰è£…ä¸é…ç½®">ï¼ˆæ¨èï¼‰qBittorrentå®‰è£…ä¸é…ç½®</h2><h3 id="å®‰è£…qbittorrent">å®‰è£…qBittorrent</h3><p>ä½¿ç”¨Ubuntuçš„å®˜æ–¹ä»“åº“å®‰è£…qBittorrent</p><p>Ubuntuçš„å®˜æ–¹ä»“åº“é€šå¸¸åŒ…å«qBittorrentçš„ç¨³å®šç‰ˆæœ¬ï¼Œåªéœ€æ‰“å¼€ç»ˆç«¯å¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install qbittorrent-nox</span><br></pre></td></tr></table></figure><h3 id="å¼€æœºè‡ªå¯qbittorrent">å¼€æœºè‡ªå¯qBittorrent</h3><p>åœ¨<code>/etc/systemd/system/qbittorrent-nox.service</code>æ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼Œä½œä¸ºå¼€æœºè‡ªåŠ¨å¯åŠ¨çš„æœåŠ¡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=qBittorrent Command Line Client</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">User=root</span><br><span class="line">ExecStart=/usr/bin/qbittorrent-nox</span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartSec=5s</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>éšåæ‰§è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> qbittorrent-nox.service</span><br><span class="line">sudo systemctl start qbittorrent-nox.service</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹qbittorrentç«¯å£">ä¿®æ”¹qBittorrentç«¯å£</h3><ol><li><p><strong>åœæ­¢qBittorrent-noxæœåŠ¡</strong>ï¼ˆå¦‚æœæ­£åœ¨è¿è¡Œï¼‰ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop qbittorrent-nox</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æ²¡æœ‰å°†qBittorrent-noxä½œä¸ºæœåŠ¡è¿è¡Œï¼Œè€Œæ˜¯ç›´æ¥åœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼Œä½ å¯ä»¥ç›´æ¥å…³é—­å®ƒã€‚</p></li><li><p><strong>ç¼–è¾‘qBittorrenté…ç½®æ–‡ä»¶</strong>ï¼š qBittorrent-noxçš„é…ç½®æ–‡ä»¶é€šå¸¸ä½äº<code>~/.config/qBittorrent/qBittorrent.conf</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.config/qBittorrent/qBittorrent.conf</span><br></pre></td></tr></table></figure><p>å¦‚æœqBittorrent-noxæ˜¯ä»¥ä¸åŒçš„ç”¨æˆ·è¿è¡Œï¼Œä½ å¯èƒ½éœ€è¦åˆ‡æ¢åˆ°ç›¸åº”ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œæˆ–è€…æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´è·¯å¾„ã€‚</p></li><li><p>åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°<code>WebUI\Port=8080</code>è¿™ä¸€è¡Œï¼ˆå¦‚æœæ²¡æœ‰è¿™ä¸€è¡Œï¼Œä½ éœ€è¦æ·»åŠ å®ƒï¼‰ï¼Œå°†<code>8080</code>æ›´æ”¹ä¸ºä½ æƒ³è¦çš„ç«¯å£å·ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³å°†ç«¯å£æ”¹ä¸º<code>9090</code>ï¼Œåˆ™ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WebUI\Port=9090</span><br></pre></td></tr></table></figure><p>ä¿å­˜å¹¶å…³é—­æ–‡ä»¶ã€‚</p></li><li><p><strong>é‡æ–°å¯åŠ¨qBittorrent-nox</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start qbittorrent-nox</span><br></pre></td></tr></table></figure></li></ol><h3 id="qbittorrentå¸¸ç”¨å‘½ä»¤">qBittorrentå¸¸ç”¨å‘½ä»¤</h3><p>å¯åŠ¨Qbittorrentï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qbittorrent-nox</span><br></pre></td></tr></table></figure><p>åœ¨åå°å¯åŠ¨Qbittorrentï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qbittorrent-nox -d</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹Qbittorrentç‰ˆæœ¬ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qbittorrent-nox -v</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ Qbittorrent å¹¶æŒ‡å®š Web é¢æ¿çš„ç«¯å£:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qbittorrent-nox --webui-port=xxxx</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å¸®åŠ©ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qbittorrent-nox -h</span><br></pre></td></tr></table></figure><h2 id="transmissionå®‰è£…">transmissionå®‰è£…</h2><h3 id="ä½¿ç”¨å®˜æ–¹ppa">ä½¿ç”¨å®˜æ–¹PPA</h3><ol><li><p>æ‰“å¼€ç»ˆç«¯ã€‚</p></li><li><p>æ·»åŠ Transmissionçš„å®˜æ–¹PPAï¼ˆè¯·åœ¨æ‰§è¡Œå‰ç¡®è®¤PPAåœ°å€æ˜¯æœ€æ–°çš„ï¼‰ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bashCopy code</span><br><span class="line">sudo add-apt-repository ppa:transmissionbt/ppa</span><br></pre></td></tr></table></figure></li><li><p>æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlCopy code</span><br><span class="line">sudo apt update</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…Transmissionï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Copy code</span><br><span class="line">sudo apt install transmission</span><br></pre></td></tr></table></figure></li></ol><p>ä½†å®‰è£…å®Œæˆåï¼Œå¯èƒ½ä¸º3.0ç‰ˆæœ¬ï¼Œå¦‚æœéœ€è¦å®‰è£…4.0ç‰ˆæœ¬ï¼Œå‚è€ƒï¼š<a href="https://launchpad.net/ubuntu/+source/transmission">https://launchpad.net/ubuntu/+source/transmission</a></p><hr><h1 id="embyå®‰è£…">Embyå®‰è£…</h1><h2 id="å®‰è£…å‚è€ƒ">å®‰è£…å‚è€ƒ</h2><p><a href="https://emby.media/linux-server.html">https://emby.media/linux-server.html</a></p><p>å®‰è£…å®Œæˆå</p><p>ä½¿ç”¨ä¸‹é¢å‘½ä»¤æ§åˆ¶<strong>emby-server</strong>çš„è¿›ç¨‹æ´»åŠ¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨</span></span><br><span class="line">systemctl start emby-server</span><br><span class="line"><span class="comment"># åœæ­¢</span></span><br><span class="line">systemctl stop emby-server</span><br><span class="line"><span class="comment"># æŸ¥çœ‹çŠ¶æ€</span></span><br><span class="line">systemctl status emby-server</span><br></pre></td></tr></table></figure><h2 id="embyè®¾ç½®è®¿é—®æƒé™">Embyè®¾ç½®è®¿é—®æƒé™</h2><h3 id="ç¡®å®šembyç”¨æˆ·">ç¡®å®šEmbyç”¨æˆ·</h3><p>Embyå¯èƒ½ä¼šä½¿ç”¨<code>emby</code>æˆ–<code>emby-server</code>ä½œä¸ºé»˜è®¤ç”¨æˆ·</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep emby</span><br></pre></td></tr></table></figure><p>è¿™æ¡å‘½ä»¤åº”è¯¥ä¼šæ˜¾ç¤ºEmbyè¿›ç¨‹ï¼Œä»¥åŠå®ƒä»¬æ˜¯ç”±å“ªä¸ªç”¨æˆ·å¯åŠ¨çš„ã€‚</p><blockquote><p>å¦‚æœEmbyæœåŠ¡æ˜¯ä»¥<code>emby</code>ç”¨æˆ·èº«ä»½è¿è¡Œçš„ã€‚è¿™æ„å‘³ç€ä¸ºäº†è®©Embyèƒ½å¤Ÿæ­£ç¡®è®¿é—®å’Œè¯»å–ä½ çš„åª’ä½“æ–‡ä»¶å­˜å‚¨ä½ç½®ï¼Œä½ éœ€è¦ç¡®ä¿<code>emby</code>ç”¨æˆ·è‡³å°‘æ‹¥æœ‰è¯»å–æƒé™ã€‚</p></blockquote><p>å‡è®¾ä½ çš„åª’ä½“æ–‡ä»¶å­˜å‚¨åœ¨æŸä¸ªç›®å½•ä¸­ï¼Œæ¯”å¦‚<code>/media/emby</code>ï¼Œä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ¥æˆäºˆ<code>emby</code>ç”¨æˆ·å¯¹è¯¥ç›®å½•çš„è®¿é—®æƒé™ã€‚</p><h3 id="æ¨è-æ–¹æ³•ä¸€ï¼šä½¿ç”¨è®¿é—®æ§åˆ¶åˆ—è¡¨-acl">ï¼ˆæ¨èï¼‰æ–¹æ³•ä¸€ï¼šä½¿ç”¨è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰</h3><p>å¦‚æœä¸æƒ³æ”¹å˜æ–‡ä»¶å’Œç›®å½•çš„æ‰€æœ‰è€…ï¼Œä½ å¯ä»¥ä½¿ç”¨ACLæ¥ä¸º<code>emby</code>ç”¨æˆ·æ·»åŠ é¢å¤–çš„æƒé™ï¼Œè€Œä¸ä¼šå½±å“å…¶ä»–ç”¨æˆ·çš„æƒé™ã€‚é¦–å…ˆï¼Œå®‰è£…ACLå·¥å…·ï¼ˆå¦‚æœä½ çš„ç³»ç»Ÿè¿˜æ²¡æœ‰å®‰è£…ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install acl</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œè®¾ç½®ACLï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo setfacl -R -m u:emby:rXw /media/emby</span><br></pre></td></tr></table></figure><p>è¿™ä¼šé€’å½’åœ°ä¸º<code>emby</code>ç”¨æˆ·æˆäºˆå¯¹<code>/media/emby</code>ç›®å½•åŠå…¶å†…å®¹çš„è¯»å†™å’Œæ‰§è¡Œæƒé™ã€‚</p><h3 id="æ–¹æ³•äºŒï¼šæˆäºˆè¯»å†™æƒé™">æ–¹æ³•äºŒï¼šæˆäºˆè¯»å†™æƒé™</h3><p>ä½ å¯ä»¥ä½¿ç”¨<code>chmod</code>å’Œ<code>chown</code>å‘½ä»¤æ¥æ›´æ”¹ç›®å½•çš„æƒé™å’Œæ‰€æœ‰æƒï¼Œä»¥ç¡®ä¿<code>emby</code>ç”¨æˆ·èƒ½å¤Ÿè®¿é—®è¯¥ç›®å½•ã€‚è€ƒè™‘åˆ°å®‰å…¨å’Œå®ç”¨æ€§ï¼Œæ¨èçš„åšæ³•æ˜¯è®©<code>emby</code>ç”¨æˆ·æˆä¸ºç›®å½•çš„æ‰€æœ‰è€…æˆ–ç¡®ä¿<code>emby</code>ç”¨æˆ·æ˜¯è®¿é—®è¯¥ç›®å½•çš„ç»„çš„ä¸€éƒ¨åˆ†ã€‚</p><p>å¦‚æœæ”¹å˜ç›®å½•çš„æ‰€æœ‰è€…å¯¹ä½ æ¥è¯´æ˜¯å¯è¡Œçš„ï¼Œä½ å¯ä»¥æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chown</span> -RW emby:emby /media/emby</span><br></pre></td></tr></table></figure><p>è¿™ä¼šå°†<code>/media/emby</code>ç›®å½•åŠå…¶å­ç›®å½•å’Œæ–‡ä»¶çš„æ‰€æœ‰æƒæ›´æ”¹ä¸º<code>emby</code>ç”¨æˆ·å’Œç»„ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œç¡®ä¿ç›®å½•å…·æœ‰æ­£ç¡®çš„æƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> -RW 755 /media/emby</span><br></pre></td></tr></table></figure><p>è¿™ä¼šè®¾ç½®ç›®å½•çš„æƒé™ï¼Œä½¿å¾—æ‰€æœ‰è€…æœ‰è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ï¼Œè€Œç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·æœ‰è¯»å’Œæ‰§è¡Œæƒé™ã€‚</p><h3 id="éªŒè¯æƒé™">éªŒè¯æƒé™</h3><p>å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œä½ å¯ä»¥ä½¿ç”¨<code>getfacl</code>å‘½ä»¤æ¥æ£€æŸ¥ç›®å½•çš„è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼Œç¡®ä¿<code>emby</code>ç”¨æˆ·å·²è¢«æ­£ç¡®æˆæƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getfacl /media/emby</span><br></pre></td></tr></table></figure><p>è¿™åº”è¯¥ä¼šæ˜¾ç¤º<code>emby</code>ç”¨æˆ·çš„æƒé™ï¼Œä»è€ŒéªŒè¯è®¾ç½®æ˜¯å¦æ­£ç¡®ã€‚</p><p>ç¡®ä¿EmbyæœåŠ¡å·²ç»é‡æ–°å¯åŠ¨ï¼Œä»¥åº”ç”¨ä»»ä½•æƒé™å˜æ›´ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart emby-server</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼ŒEmbyåº”è¯¥èƒ½å¤Ÿè®¿é—®æŒ‡å®šç›®å½•ä¸‹çš„åª’ä½“æ–‡ä»¶äº†ã€‚å¦‚æœä»ç„¶é‡åˆ°æƒé™é—®é¢˜ï¼Œç¡®ä¿æ£€æŸ¥æ‰€æœ‰ä¸Šçº§ç›®å½•ä¹Ÿå¯¹<code>emby</code>ç”¨æˆ·å¼€æ”¾äº†è‡³å°‘è¯»å–çš„æƒé™ã€‚</p><hr><p>å°†ä¸Šè¿°ä¸‰è€…å®‰è£…å¥½å,å¦‚æœéœ€è¦å°†å½±ç‰‡å­˜æ”¾åœ¨æœ¬åœ°nasä¸­,ä»…éœ€å°†å¯¹åº”çš„ç›®å½•ä¿®æ”¹æˆnasä¸­çš„ç›®å½•å³å¯</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;1&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;éƒ¨ç½²å‚è€ƒ,ä»¥åŠéƒ¨ç½²æ•ˆæœå±•ç¤º:&lt;a href=&quot;https://www.bilibili.com/video/BV1wD4y1B7xZ&quot;&gt;https://www.bilibili.com/video/BV1wD4y1B7xZ&lt;/a&gt;</summary>
      
    
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="æŠ˜è…¾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
    <category term="Nas" scheme="https://blog.lthero.cn/tags/Nas/"/>
    
  </entry>
  
</feed>
