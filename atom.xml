<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>lthero</title>
  
  <subtitle>个人博客</subtitle>
  <link href="https://blog.lthero.cn/atom.xml" rel="self"/>
  
  <link href="https://blog.lthero.cn/"/>
  <updated>2023-02-01T12:48:05.640Z</updated>
  <id>https://blog.lthero.cn/</id>
  
  <author>
    <name>lthero</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>EnglishPod</title>
    <link href="https://blog.lthero.cn/2023/02/01/Englishpod/"/>
    <id>https://blog.lthero.cn/2023/02/01/Englishpod/</id>
    <published>2023-02-01T06:19:13.000Z</published>
    <updated>2023-02-01T12:48:05.640Z</updated>
    
    <content type="html"><![CDATA[<h2 id="001-点餐"><a href="#001-点餐" class="headerlink" title="001 点餐"></a>001 点餐</h2><h3 id="would-recommend"><a href="#would-recommend" class="headerlink" title="would recommend"></a>would recommend</h3><blockquote><p>推荐</p></blockquote><p>I would recommend spaghetti and meatballs.</p><p>我推荐意大利面和肉球</p><h3 id="still-working-on-it"><a href="#still-working-on-it" class="headerlink" title="still working on it"></a>still working on it</h3><blockquote><p>已经开始做，但还没做完</p><p>&#x3D; need more time &#x3D; not yet completed</p></blockquote><p>Did you finish reading the magazine?</p><ul><li>I’m still working on it.</li></ul><p>Did you fix my car?</p><ul><li>I’m still working on it.</li></ul><p>Have you decided what to do tonight</p><ul><li>I’m still working on it.</li></ul><h3 id="working-on-it"><a href="#working-on-it" class="headerlink" title="working on it"></a>working on it</h3><blockquote><p>之前没做，最近才开始做</p></blockquote><h3 id="coke-and-fries"><a href="#coke-and-fries" class="headerlink" title="coke and fries"></a>coke and fries</h3><blockquote><p>可乐和炸鸡</p></blockquote><p>Does it come with coke and fries.</p><p>提供可乐和炸鸡嘛</p><h3 id="complimentary"><a href="#complimentary" class="headerlink" title="complimentary"></a>complimentary</h3><blockquote><p>免费的</p></blockquote><p>It comes with either soup or salad and <strong>a complimentary glass of wine</strong></p><p>提供汤或者沙拉，以及一瓶免费的酒</p><p>Would you like a <strong>complimentary dessert.</strong></p><p>你要免费的点心吗</p><h3 id="go-with"><a href="#go-with" class="headerlink" title="go with"></a>go with</h3><blockquote><p>选择 &#x3D; I’ll take ,I’ll choose</p></blockquote><p><strong>I’ll go with</strong> the spaghetti ,salad and the wine.</p><p>我选择意大利面，沙拉和酒</p><p><strong>I’ll go with</strong> the red dress instead of the blue one.</p><p>我选择红色裙子，而不是蓝色的</p><blockquote><p>与go for相似</p><p>I’m gonna <strong>go for</strong> the red dress instead of the blue one.</p></blockquote><h3 id="grab"><a href="#grab" class="headerlink" title="grab"></a>grab</h3><blockquote><p>吃东西喝东西 &#x3D; go get quickly</p></blockquote><p>grab some food 吃点东西</p><p>grab a drink 喝一口</p><p>grab some lunch 吃午饭</p><p>grab a bite 吃一口</p><p>On your way home can you <strong>grab</strong> some milk?</p><p>你能回来路上买点牛奶吗</p><blockquote><p>取，拿</p></blockquote><p>Wait for me please, I need to grab my coat.</p><p>等我一会儿，我拿件衣服</p><hr><h2 id="002-请病假"><a href="#002-请病假" class="headerlink" title="002 请病假"></a>002 请病假</h2><h3 id="quite-ill"><a href="#quite-ill" class="headerlink" title="quite ill"></a>quite ill</h3><blockquote><p>病得非常重</p><p>&#x3D; very sick</p></blockquote><p>Actually I am feeling <strong>quite ill</strong> today.</p><p>我感觉今儿病得非常重</p><p>I’m feeling <strong>quite ill</strong> today I don’t think I can go to work.</p><p>我感觉病得很重，我不觉得今儿可以上班</p><p>Andy can’t get out of bed today he must be quite ill.</p><p>安迪不能下床应该病得很重</p><p>The leason was cancelled because our teacher is quite ill.</p><p>课程取消了因为老师病得很重</p><h3 id="the-flu"><a href="#the-flu" class="headerlink" title="the flu"></a>the flu</h3><blockquote><p>流感</p><p>&#x3D; influenza</p></blockquote><p>I think I am coming down with <strong>the flu.</strong></p><p>我觉得我得了流感</p><p>You have a running nose are you coming down with <strong>the flu</strong>?</p><p>你在流鼻涕，你感冒了嘛</p><h3 id="headache"><a href="#headache" class="headerlink" title="headache"></a>headache</h3><blockquote><p>头疼</p></blockquote><p>When you drink too much you get a <strong>headache</strong>.</p><p>酒喝多了头疼</p><h3 id="sore"><a href="#sore" class="headerlink" title="sore"></a>sore</h3><blockquote><p>疼</p></blockquote><p>sore throat 咽喉痛</p><p>sore back 后背疼</p><p>sore arm 手臂疼</p><p>sore neck 脖子疼</p><h3 id="running-nose"><a href="#running-nose" class="headerlink" title="running nose"></a>running nose</h3><blockquote><p>流鼻涕</p></blockquote><p>I have a headache, sore throat, <strong>running nose</strong> and I’m feeling slightly feverish.</p><p>我头疼，嗓子疼，流鼻涕，还感觉在发烧</p><p>You have a <strong>running nose</strong> are you coming down with the flu?</p><p>你在流鼻涕，你感冒了嘛 </p><h3 id="slightly-feverish"><a href="#slightly-feverish" class="headerlink" title="slightly feverish"></a>slightly feverish</h3><blockquote><p>有发烧的<strong>感觉</strong>，但身体温度并不高</p></blockquote><h3 id="recover"><a href="#recover" class="headerlink" title="recover"></a>recover</h3><blockquote><p>休息</p></blockquote><p>I was so busy this week so I need to <strong>recover</strong> this weekends.</p><p>我这周太忙了，这周末我要好好休息</p><h3 id="coming-down-with"><a href="#coming-down-with" class="headerlink" title="coming down with"></a>coming down with</h3><blockquote><p>逐渐得了（某个病）</p></blockquote><p>I don’t feel well, I think I’m <strong>coming down with flu&#x2F;cough&#x2F;something</strong></p><p>我不太舒服，我好像得病了【不知道哪种病就说something.】</p><p>I don’t feel well, I can feel that I’m coming down with the flu.</p><p>我不太舒服，好像得病了</p><p>You have a running nose are you <strong>coming down with</strong> the flu?</p><p>你在流鼻涕，你感冒了嘛</p><p>My throat hurts I hope I’m not <strong>coming down with</strong> the flu.</p><p>我嗓子疼我希望没得流感</p><h3 id="calling-in-sick"><a href="#calling-in-sick" class="headerlink" title="calling in sick"></a>calling in sick</h3><blockquote><p>请病假</p></blockquote><p>包括：I don’t feel well, I think I’m coming down with something so I’m not going to go to work today.</p><p>Are you <strong>calling in sick</strong>?</p><p>你是在请病假吗？</p><p>Our meeting was postponed because my clients <strong>called in sick</strong>.</p><p>咱们会议推迟了，因为顾客请病假</p><p>If he <strong>calls in sick</strong> one more time will fire him.</p><p>他再请一次病假就炒了他</p><p>I almost <strong>called in sick</strong> today.</p><p>我今儿差点请病假</p><h3 id="take-the-day-off"><a href="#take-the-day-off" class="headerlink" title="take the day off"></a>take the day off</h3><blockquote><p>放一天假</p></blockquote><p>take the month off 放一天假</p><p>take the year off 放一年假</p><p>I am hoping to <strong>take the day off</strong> to recover.</p><p>我想今儿休息一天来养病</p><h3 id="How-may-x2F-can-I-help-you"><a href="#How-may-x2F-can-I-help-you" class="headerlink" title="How may&#x2F;can I help you"></a>How may&#x2F;can I help you</h3><blockquote><p>我如何帮助您</p><p>Polite offered to help.</p></blockquote><p>Sir you look lost , may I help you?</p><p>先生您好像迷路了，我能帮您吗？</p><p>May I help you find something.</p><p>我能帮您找吗？</p><p>I was wondering may I help you prepare your report.</p><p>我能帮您处理报告吗？</p><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;001-点餐&quot;&gt;&lt;a href=&quot;#001-点餐&quot; class=&quot;headerlink&quot; title=&quot;001 点餐&quot;&gt;&lt;/a&gt;001 点餐&lt;/h2&gt;&lt;h3 id=&quot;would-recommend&quot;&gt;&lt;a href=&quot;#would-recommend&quot; class</summary>
      
    
    
    
    <category term="英语口语" scheme="https://blog.lthero.cn/categories/%E8%8B%B1%E8%AF%AD%E5%8F%A3%E8%AF%AD/"/>
    
    
    <category term="英语口语" scheme="https://blog.lthero.cn/tags/%E8%8B%B1%E8%AF%AD%E5%8F%A3%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>马思瑞英语</title>
    <link href="https://blog.lthero.cn/2023/02/01/EnglishMa/"/>
    <id>https://blog.lthero.cn/2023/02/01/EnglishMa/</id>
    <published>2023-02-01T06:19:13.000Z</published>
    <updated>2023-02-01T12:47:52.800Z</updated>
    
    <content type="html"><![CDATA[<hr><h3 id="L1-拖延症的一天"><a href="#L1-拖延症的一天" class="headerlink" title="L1 拖延症的一天"></a>L1 拖延症的一天</h3><p>gotta</p><p>&#x3D;have&#x2F;has to do</p><p>You gotta go to work.</p><p>He&#x2F;She’s gotta go to work.</p><p>They’ve gotta go to work.</p><p>sec.</p><p>wait a sec.&#x2F;just a sec.等一秒</p><p>it’s time for</p><p>It’s time for bed.</p><p>It’s time for lunch.</p><p>It’s time for school.</p><p>It’s time to head to bed.</p><p>pull oneself together.&#x2F;get your shit together.</p><p><strong>to be or</strong> <a href="https://dictionary.cambridge.org/dictionary/english/become">become</a> <a href="https://dictionary.cambridge.org/dictionary/english/effective">effective</a><strong>,</strong> <a href="https://dictionary.cambridge.org/dictionary/english/organized">organized</a><strong>, and</strong> <a href="https://dictionary.cambridge.org/dictionary/english/skilful">skilful</a><strong>:</strong></p><p>It took him quite some time to pull himself together.</p><p>I really need to get my shit together&#x2F;pull myself together.</p><p>realize</p><p>I realize I need to pull myself together.</p><p>I realize that I gotta finish it&#x2F;this shit as soon as possible.</p><p>save …… from</p><p>从……拯救某人</p><p>save us from the problems.</p><p>I realize that I need to save me from myself.</p><p>我发现我需要自我拯救 </p><p>I gotta do something to save me from the pain.</p><p>She wants to pull herself together&#x2F;get her shit together,and save her from herself.</p><p>be gonna</p><p>&#x3D;be going to【与gotta不同】</p><p>I’m gonna wake up late.</p><p>Tommorrow’s gonna be different.</p><p>decide</p><p>He decided to get up early.</p><p>They decided to practice English every day.</p><p>grab</p><p>吃东西喝东西</p><p>grab some food 吃点东西</p><p>grab a drink 喝一口</p><p>grab some lunch 吃午饭</p><p>grab a bite 吃一口</p><h4 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h4><p>This is when I realize that I’m actually a procrastinator. I wake up at around 10 am. Even twenty alarms can’t <strong>save me from that</strong>. Then everything in the day <strong>has to be delayed</strong>, laundry, work, exercise, and <strong>so on</strong>. And I <strong>end up</strong> staying up late again, which is a <strong>vicious cycle</strong> because I’m gonna wake up late again. But tomorrow’s gonna be different. I’m gonna make a schedule. I decide I’m gonna <strong>get up at 8 am</strong>. Then I’m gonna <strong>grab some food</strong>. Later, I’m gonna be really productive at work. After that,  I need to do some exercise. I promise today is my last day being lazy. </p><hr><h3 id="L2-开车见朋友"><a href="#L2-开车见朋友" class="headerlink" title="L2 开车见朋友"></a>L2 开车见朋友</h3><p>2-hour drive 两小时车程</p><p>4-year program 四年制学习</p><p>3-month project 为期三个月项目</p><p>7-year-old boy 7岁男孩</p><p>buckle up&#x2F;buckle your seat belt</p><p>系上安全带</p><p>be supposed to</p><p>强调外部压力、责任</p><p>如果不这么做就会承担后果</p><p>You’re supposed to finish the presentation.</p><p>I’m supposed to pick up my kids.</p><p>Isn’t it something you are supposed to do?</p><p>should</p><p>做不做没关系</p><p>I should go back ,but it’s ok to have one more drink.</p><p>You should call her back.(不回复也没关系)</p><p>turn left onto</p><p>左转进入</p><p>turn left onto Chang’an Street</p><p>switch from …… to</p><p>变换方向，重点</p><p>She switched her study focus from math to English.</p><p>She switched from coffee to tea.</p><p>Leo has switched from freelancer to teacher.</p><p>packed</p><p>拥挤的【类似crowded】</p><p>The concert was fully packed.</p><p>Christmas market was totally packed.</p><p>The supermarket is not as packed as before.</p><p>The school opening day was not as packed as usual.</p><p>Upside and downside优点和缺点</p><h4 id="原文-1"><a href="#原文-1" class="headerlink" title="原文"></a>原文</h4><p>Today I’m gonna visit a friend. He lives outside of DC, so it’s about a 2-hour drive. Aright, First I <strong>gotta</strong> <strong>buckle up</strong>, then I <strong>gotta</strong> put the address in the GPS to <strong>make sure</strong> I don’t get lost. It says I need to <strong>go straight along</strong> Rhode Island Ave first. Then I’m supposed to turn left onto 9th St. After that I <strong>gotta</strong> head south and I’m <strong>gonna</strong> take the I-395 Express Lane because there’s less traffic. Finally , I’ll automatically <strong>switch from</strong> 395 <strong>onto</strong> the I-95 Express Lane <strong>as</strong> 395 ends there. Traffic looks so much better here than in Beijing. It easily takes me hours to drive somewhere in Beijing as it’s always <strong>so packed</strong> on the road. I’m gonna park right there. </p><hr><h3 id="L3-回忆小时候"><a href="#L3-回忆小时候" class="headerlink" title="L3 回忆小时候"></a>L3 回忆小时候</h3><h4 id="原文-2"><a href="#原文-2" class="headerlink" title="原文"></a>原文</h4><p>So this guy in the picture, is me. That’s when I was around 3 or 4 years old. In the picture,I’m wearing some traditional Chinese shirt and pants, posing in what was my own so-called version Chinese Kung Fu. That was <strong>the very first time I got to know anything about Chinese culture</strong>,and my first stories about China kind of started right from there. I remember in those clothes, I kind of felt like I was Bruce Lee practicing Jeet Kune Do, Which I also did in college. I love it! After that,I began to <strong>have a great interest in</strong> Chinese culture. So, you know my experience with Chinese culture can be traced back when I was really little and this picture is the best demonstration. Back then I didn’t speak Chinese, nor had I been to China, but I was actually pretty curious about the country and the culture. </p><p>pose</p><p>摆姿势</p><p>姿势</p><p>posing:表示主动地、伴随状态</p><p><strong>I’d like to pose a question.</strong></p><p>我想提出一个问题。</p><p>The photographer told me to hold the pose.</p><p>摄影师让我保持这个姿势。</p><p>so-called</p><p>所谓的</p><p>All his <strong>so-called friends deserted him</strong> when he went broke.</p><p>He threw one million dollars at the so-called masterpiece.</p><p>Don’t cheat me, I don’t need your so-called love.</p><p>This so-called committee is illegal.</p><p>get to know something.</p><p>去了解</p><p>get to know Chinese culture.</p><p>I realize that I’m supposed to <strong>get to know the city better.</strong></p><p>I realize that I should get to know you better.</p><p>I’d really wanna see you again and <strong>get to know you better.</strong></p><p>I’ll leave you to get to know each other.</p><p>It took me a while to get to know the directions.</p><p>right</p><p>正好地；就是【exactly】</p><p>right here 就在这</p><p>right now 此时此刻</p><p>The ball hit him <strong>right in the face.</strong></p><p>I’ll be right back. 我马上回来</p><p>Where is the key?- Right here.</p><p>I don’t need to reply to you right now.</p><p>have an great interest in sth.</p><p>对……有兴趣</p><p><strong>I have an interest in playing basketball</strong>.【更正式】</p><p>I’m interested in basketball.</p><p>He has an interest in making money.</p><p>trace back to</p><p>回溯，追溯到</p><p><strong>This tradition can be traced back to the Qing Dynasty.</strong></p><p>We can’t trace the origin of this vase back to any specific period.</p><p>This habit can be traced back to many decades ago.</p><p>demonstration</p><p>证明</p><p>She gave us a demonstration of the machine to show us how it worked.</p><p>It was a very good demonstration of his capability to do this work.</p><hr><h3 id="L5-如何描述事情"><a href="#L5-如何描述事情" class="headerlink" title="L5 如何描述事情"></a>L5 如何描述事情</h3><h4 id="不把话说太死"><a href="#不把话说太死" class="headerlink" title="不把话说太死"></a>不把话说太死</h4><p>I think, I feel ,I heard, somebody told me……It seems like</p><h4 id="where"><a href="#where" class="headerlink" title="where"></a>where</h4><p>indoors,outdoors,inside,outside,on the road</p><p>in BeiJing, in SunLiTun</p><h4 id="When"><a href="#When" class="headerlink" title="When"></a>When</h4><p>on&#x2F;over the weekend 在周末</p><p>on Friday</p><p>one day</p><p>a few days ago</p><p>in August ,in 2023</p><h4 id="Why"><a href="#Why" class="headerlink" title="Why"></a>Why</h4><p>Everything happens for a reason.</p><p><strong>the reason why …… is that……</strong></p><p>The reason why I’m so happy is that I gonna meet up with my old friends.</p><p><strong>That’s why</strong> she left you.</p><p><strong>That’s the reason why</strong> I stay up late last night. </p><p>he woke up late everyday ,since he stay up late.</p><h4 id="How"><a href="#How" class="headerlink" title="How"></a>How</h4><p>How do you feel</p><p>How long&#x2F;much</p><p>How can I get there</p><p>How do we solve this problem?</p><p>顺序词</p><p>first &#x2F;next &#x2F;then &#x2F;after that&#x2F;finally</p><p>表达自己看法感受</p><p>I think,I feel,I don’t understand why, I don’t get why</p><p>no Shit!!&#x2F;I shocked!It’s fascinating!!!</p><p>ed表示：感到……</p><p>ing表示：令人怎样</p><p>I’m bored.我感觉无聊</p><p>I’m boring.我是个无聊的人</p><p>My wife and I got away from the city last weekend. The reason why we <strong>went outside</strong> is that we wanted to feel free for a little while, since we <strong>hadn’t been outdoors</strong> in days.</p><p>We drove to a national park. The first thing we did was to take some pictures of the stunning scenery as autumn comes to an end .Then we hiked for a while. Finally, we came back home really happy. It was great.</p><hr><h3 id="L6-是否养宠物"><a href="#L6-是否养宠物" class="headerlink" title="L6 是否养宠物"></a>L6 是否养宠物</h3><blockquote><p>at that point</p><p>在那时刻</p></blockquote><p>that 用于过去，this 用于现在</p><p>point &#x3D; momtent</p><p><strong>At that point</strong>,I thought I <strong>was gonna get hit by the car.</strong></p><p>She decided to become a better person at that monment.</p><blockquote><p>kill for</p><p>非常渴望</p></blockquote><p>I <strong>would&#x2F;could kill for</strong> a body like that.</p><p>I <strong>would kill for a pizza</strong> right now.</p><p>I <strong>would kill for a job</strong> like that.</p><p>while</p><p>然而；在……时候</p><p>While I was waiting at the bus stop,She walked up behind me.</p><p>He is outgoing person,while she is pretty shy.</p><p>While there are some other people might raise lizards ,snacks, and even spiders as pets.</p><p>clip ones nails</p><p>剪指甲</p><p>跟朋友出去玩</p><p>go out&#x2F;hang out with friends.</p><blockquote><p>play with</p><p>玩（运动）；把玩；玩弄</p></blockquote><p>Don’t play with the knife. It’s dangerous.</p><p>He played with her emotions.</p><p>He was playing with phone on the coach.</p><p>I wanna play football this weekend, but I don’t have anyone to play with.</p><blockquote><p>one’s heart melts.</p><p>某人的心融化了</p></blockquote><p>His heart melted when she smiled him.</p><p>Her smile melted his heart.</p><blockquote><p>be confident in</p><p>自信</p></blockquote><p><strong>I’m confident in speaking Chinese.</strong></p><p><strong>You should be confident in your English.</strong></p><p>be confident of:说的是一个事实</p><p>be confident in:说一种信念</p><p>we are confident of the result.对事实自信</p><blockquote><p>kind of</p><p>有点儿</p><p>发音kinda&#x2F;kina</p></blockquote><p>I was kind of shocked.</p><p>I kind of like the jacket</p><p>She’s kind of cute.</p><h4 id="原文-3"><a href="#原文-3" class="headerlink" title="原文"></a>原文</h4><p>One day when I was <strong>walking down</strong> the street, I saw a fluffy, smiling , snow-white Samoyed. It was so <strong>adorable!</strong> <strong>At that point,</strong> I <strong>would’ve killed for</strong> a pet. When I <strong>think of</strong> pets(when it comes to pets), I think of dogs, cats, and maybe birds, while there are other people who might raise lizards, snakes, and even spiders as pets. For me, cats and dogs are both great. They can help improve your mood and you can play with them. When you pet them, you just feel your <strong>heart melt</strong>. I would rank dogs far above cats though, cuz I’m not <strong>confident in my ability</strong> to bathe a cat or clip its nails without depressing it or hurting myself. However, if I had a dog, I’d have to walk it several times a day, which is <strong>kind of</strong> annoying for a lazy or a busy person.</p><p>I think it should be a serious decision,If you’re not confident in keeping one right now,don’t rush. If you already have, just take good care of it.</p><hr><h3 id="L7"><a href="#L7" class="headerlink" title="L7"></a>L7</h3><blockquote><p>think through</p><p>认真考虑，深思熟虑</p></blockquote><p>think this&#x2F;it through</p><p>I need some time to <strong>think it through</strong> what I need to <strong>take with me.</strong></p><p>She thought through the matter before taking action.</p><p>她在采取行动前认真考虑这件 </p><p>think over:表示已经知道这件事件所有信息，只差作决定</p><p>think through:包含找信息、作分析过程</p><p>She gave him some time to think through the matter.</p><p>We can’t make decisions until we’ve think through all the possibilities.</p><blockquote><p>go for</p><p>选择</p><p>go for 后加上选择的东西</p></blockquote><p>I’m gonna <strong>go for</strong> the red instead of the blue one.</p><p>She’ll definitely <strong>go for</strong> the most expensive car.</p><p><strong>Go for</strong> it.</p><p>加油</p><blockquote><p>something&#x2F;someone have its place</p><p>某物有一席之地</p></blockquote><p>This coffee machine always <strong>has its place</strong> in my apartment.</p><p>Mark has his place in the company.</p><p>Mark在公司里面有一席之地。</p><p>Daniel has his place in the management team.</p><blockquote><p>suit</p><p>适合，合适，切合【fit】</p><p>把衣服（物品）作为主语</p></blockquote><p>These pants suit me really well.</p><p>这条裤子适合我。</p><p>The dark grey really suits her blonde hair.</p><p>金黄色头发</p><p>The skirt doesn’t suit her at all.</p><p>这短裙一点都不适合她。</p><p>suit</p><p>西服、套装</p><blockquote><p>had better do sth.</p><p>最好去做某件事【虚拟语气】</p></blockquote><p>You’d better take the baby with you.</p><p>I’d better think this through.</p><p>We’d better come up with a more creative idea.</p><p>You’d better not cheat in the exam.</p><blockquote><p>just in case</p><p>以防万一【放在句子后面】</p></blockquote><p>She took the hair spray,just in case.</p><p>【引导从句】I’m gonna give you more time to <strong>think it through</strong>,<strong>just in case</strong> you change your mind.</p><p>She told you the background just in case you don’t know.</p><p>Take the tissue,just in case.</p><blockquote><p>hit the road</p><p>上路吧</p></blockquote><p>hit the gym.去健身房</p><p>get a move on.上路吧</p><p>let’s get it start.上路吧</p><h4 id="原文-4"><a href="#原文-4" class="headerlink" title="原文"></a>原文</h4><p>I gotta <strong>think through</strong> what I need to take with me. I need some t-shirts ,jackets and pants. This shelf holds t-shirts of different colors and styles. The oversized fit is just not my style I don’t know why I bought it. I’m <strong>gonna go for</strong> this skinny fit T-shirt. I love leather jackets, denim jackets, <strong>all kinds of</strong> jackets. This leather jacket always <strong>has its place in</strong> closet cuz I thinks it <strong>suits me really well</strong>. There’re some pants, jeans and trousers <strong>hanging on this rail</strong>. These jeans are really stretchy, so I wear them all the time. I’d better take my swimsuit and a suit with me,<strong>just in case</strong>. let’s <strong>hit the road.</strong></p><p>I don’t judge people by what they’re wearing and I don’t really care what others say about my clothes.</p><hr><h3 id="L8"><a href="#L8" class="headerlink" title="L8"></a>L8</h3><blockquote><p>be surrounded by</p><p>被围绕</p></blockquote><p>He’s fans surrounded him.</p><p>He was surrounded by his fans.</p><p><strong>The high walls surround the house.</strong></p><p>I’m surround by all kinds of furniture.</p><p><strong>Fiona’s upbringing was surrounded by jazz music.</strong></p><blockquote><p>major in</p></blockquote><p>去过学过 I majored in CS .</p><p>还在学 <strong>I am majoring in CS and do very well in my major.</strong></p><p>过去持续学 I was <strong>majoring in</strong> CS when I was in college.</p><p>Nowadays it’s becoming trendy to major in Chinese.</p><blockquote><p>do well in sth.</p><p>做得好</p></blockquote><p>I certainly <strong>did well in</strong> my major and before I graduated.</p><p>He’s <strong>doing so well</strong> in the IT field.</p><p>what things does this company do well?</p><p>I didn’t do well in this work.</p><p>She is very clever ,she’s gonna do well in this course.</p><blockquote><p>offer</p><p>报价；录用；录取通知</p></blockquote><p>John received an offer from Huawei.</p><p>What would be your offer <strong>on this car.</strong></p><p>你对这辆车出价多少</p><p>What would be your offer on this house.</p><p>I’m gonna get the offer <strong>I’ve been dreaming of.</strong></p><blockquote><p>succeed in</p><p>【be successful in】</p><p>在……上取得成功</p></blockquote><p>John is very successful in the IT field.</p><p><strong>That work would most likely helped me succeed in my career</strong> and make a lot of money.</p><p>Work hard if you wanna succeed in this industry.</p><p>He succeed in <strong>making his point[重读]</strong> during the presentation.</p><p>There’s no doubt you will succeed in your research.</p><p>John is very <strong>successful in</strong> the IT field.</p><p>That thing <strong>would most likely be the key point</strong> to success.</p><p>This company is very succeed in filmmaking.</p><blockquote><p>turn down</p><p>拒绝；调低音量</p></blockquote><p>I thanked Frank for the offer but I <strong>turned it down.</strong></p><p>There’s no reason whatsoever to turn down this job.</p><p>没有任何理由拒绝这个工作.</p><p>Can you <strong>turn the volume down a bit</strong>?</p><p><strong>Would you mind</strong> turn the volume down a bit?</p><p>你能把电视声音调低</p><p>I can’t imagine why they turn down your proposal.</p><blockquote><p>whatnot</p><p>什么的；等等；有的没的</p></blockquote><p>She brought some <strong>fruit,snacks and whatnot.</strong></p><p>Let’s meet on Saturday and we can have dinner <strong>and whatnot.</strong></p><p>so on等等</p><h4 id="原文-5"><a href="#原文-5" class="headerlink" title="原文"></a>原文</h4><p>Throughout my childhood I was <strong>surrounded by</strong> languages. My home was multilingual and we would generally speak Spanish, watch news in English, and later , I started speaking German with my dad, which admittedly became an advantage for learning foreign languages. Yet, I chose to major in finance when I went to college. I certainly did well in my major and before I graduated, I received an offer to work at a well-known Swiss bank. That work would most likely have helped me succeed in my career and make lots of money, but after careful consideration, I decided to <strong>turn down</strong> the offer and followed my heart. When I made this choice, I had worries about you know salary, cultural differences and <strong>whatnot</strong>, but in the end I chose to <strong>carry on</strong> with the things I enjoy, embrace the challenges , and make the best of it. </p><p>Anyway,jobs don’t define a person ,every legal job deserves our respect. So when you’re looking for a job, just carefully consider your demands ,your options and <strong>go for</strong> the <strong>one that suits you</strong> the most.</p><hr><h3 id="L9"><a href="#L9" class="headerlink" title="L9"></a>L9</h3><table><thead><tr><th>pros</th><th>cons</th></tr></thead><tbody><tr><td>advantage</td><td>disadvantage</td></tr><tr><td>benefits</td><td>drawbacks</td></tr><tr><td>upside</td><td>downsides</td></tr><tr><td>good point</td><td>bad point</td></tr><tr><td>positive effect</td><td>negative effect</td></tr><tr><td>positive aspect</td><td>negative aspects</td></tr><tr><td>positive consequences</td><td>negative consequences</td></tr><tr><td>argument in favor of</td><td>argument against</td></tr></tbody></table><p>the&#x2F;a&#x2F;an ……………………（dis）advantage 形容词</p><p>great&#x2F;greatest</p><p>significant&#x2F;insignficant</p><p>main&#x2F;major</p><p>more&#x2F;most important</p><p>only 唯一</p><p>possible</p><p>potential</p><p>comparatively minor 相对次要</p><p>Pros好处</p><p>表示主体：For xxx,for employees,for companies</p><p>说明……好处：The &#x2F;An advantage of A is B</p><p><strong>An great advantage of</strong> working overtime <strong>is</strong> that employees may get a promotion and a raise.</p><p>positive aspect of working overtime is ……</p><p><strong>can&#x2F;may help</strong>：会、可以有助于</p><p>Working extra hours <strong>may help</strong> employees finish tasks before deadlines.</p><p><strong>It helps……&#x2F;It helps to do</strong></p><p>It helps to save your work.</p><p><strong>…… is beneficial to</strong></p><p>Working extra hours is beneficial to becoming a more competitive employee.</p><p><strong>It’s good for</strong></p><p>It’s good for companies.</p><p>Cons</p><p>For employees ,the <strong>main downside</strong> of working overtime is that it <strong>leads to</strong> worse mental and physical health.</p><p><strong>can&#x2F;may cause……</strong></p><p>Working extra hours may cause sudden death for worker.</p><p><strong>It leads to……</strong></p><p><strong>The worst part (of) is</strong></p><p>The worst part is that employees usually don’t get overtime pay.</p><p><strong>It’s bad for……</strong></p><p>连词</p><p>on the one hand,on the other hand</p><p>on the contrary &#x2F;In contrast 相反</p><p>nonetheless&#x2F;nevertheless&#x2F;.尽管如此</p><p>On the one hand, a great advantage of working overtime is that the employees may get a promotion and a raise. Working extra hours may help employees finish tasks before deadline. And it’s also good for your company.</p><p>In contrast, for employees,the main downside of working overtime is that it leads to worse mental and physical health,<strong>not to mention</strong> that it may cause sudden death for workers. But generally speaking ,the worst part is that employees usually don’t get overtime pay.</p><h4 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h4><p>养狗好处</p><p>I like dogs the most,because one of the advantages of having a dog is that they are more likely to play with you</p><p>besides in some cases there can help take care of you.</p><p>养狗坏处</p><p>however if I had a dog and I’d have to walk it several times a day and I’m kind of lazy. also dogs barks may make my neighborhood complaint</p><p>养猫好处</p><p>on the other hand the greatest part of having a cat is that I wouldn’t have to walk it. meanwhile cats are good choice for people who can enjoy quiet company</p><p>养猫坏处</p><p>it’s difficult to bathe cats or clip the nails without the depressing them or hurting myself</p><p>I had a lot of shirts in different colors and styles,and I pick the skinny fit shirt and a oversized one</p><p>宽松款衣服好处</p><p>the best part of the oversized fit shirt is the color</p><p>宽松款衣服缺点</p><p>however it’s too big,which is the worst part of it to decisive this disadvantage is that I didn’t look good in it</p><p>紧身衣服好处</p><p>the upside of skinny one is that it’s stretchy,more importantly ,I feel cute in it plus it really helps to show my physique</p><p>紧身衣服缺点</p><p>after thinking about it I couldn’t find any downsides to it</p><p>obviously I went for the skinny one</p><hr><h3 id="L11"><a href="#L11" class="headerlink" title="L11"></a>L11</h3><h4 id="原文-6"><a href="#原文-6" class="headerlink" title="原文"></a>原文</h4><p>people used to get married and have kids with the purpose of having someone to take care of them once they get old</p><p>however,with better medical care and more nursing homes available,people no longer worry about it so much. In terms of divorce rates, they are so incredibly high that people are scared of marriage</p><p>In some places it takes man a fortune to get married which makes it even more difficult for these who want to.</p><p>Besides that,there’s been a lot of horrible news reported about people being killed by their partners. Obviously, no one wants to end up in such a situation</p><p>Now, many people prefer to stay single,so that they can simply enjoy their lives,no worry about partners’ cheating and have no responsibilities to take care of someone or to get along with their partners family</p><blockquote><p><strong>no longer</strong><br>People no longer worry about it so much.</p></blockquote><p>不再</p><p>一般放在主语或者be动词后面</p><p>He no longer <strong>cares about</strong> his father. 【主语后面】</p><p>他不再在乎他爸</p><p>She**’s** no longer an employee here.【be动词后面】</p><p>She no longer <strong>work</strong> here.【主语后面】</p><p>她不再在这工作了。</p><p>We will no longer meet on the weekends.</p><p>我们周末不再见面了。</p><p><strong>not …… ang longer</strong></p><p>People don’t worry about it so much any longer.</p><blockquote><p><strong>in terms of</strong> </p><p>就什么而言</p><p>后面加名词然后停一下，再加描述， 切换话题角度时常用</p></blockquote><p>In terms of <strong>project implementation</strong>, we don’t have a concrete plan yet.</p><p>In terms of <strong>career</strong>, he’s pretty successful.</p><p><strong>with regard to</strong></p><p>with regard to the divorce rate.</p><p><strong>In terms of</strong> environment,the mayor has contributed a lot.</p><p><strong>In terms of</strong> painting,she’s not an expert.</p><blockquote><p><strong>so …… that</strong></p><p>太……以至于</p></blockquote><p>they’re <strong>so</strong> incredibly high <strong>that</strong> people are scared of marriage.</p><p>She’s <strong>so</strong> special <strong>that</strong> Tom can’t ignore her.</p><p>她如此特别，以至于Tom无法忽视她</p><p>The noodles were <strong>so</strong> delicious <strong>that</strong> I couldn’t stop eating</p><p>面条太好吃了，以至于我根本停不下来</p><blockquote><p>so that</p><p>为了……</p></blockquote><p>Many people prefer to stay single <strong>so that</strong> they can simply enjoy their lives.</p><p>The professor made the exam extremely hard <strong>so that</strong> no one could pass it.</p><blockquote><p>be scared of </p><p>某人害怕某事</p></blockquote><p>James is scared of heights.</p><p>James恐高</p><p>Peter used to scared of final exams.</p><p>Peter从前对期末考试有恐惧</p><blockquote><p>end up in</p><p>最终发生了……做了某事</p><p>后面加动词ing、with加名词</p></blockquote><p>I end up with no money after double 11.</p><p>双十一之后我就没钱了.</p><p>She ended up getting job offers from both companies.</p><p>她最终收到两份offer.</p><blockquote><p>cheating</p><p>欺骗，出轨</p></blockquote><p>She can’t forgive his cheating.</p><p>她无法原谅他的欺骗</p><p>Anyway,whether or not to get married is a very personal choice. Don’t make such an important decision just based on social pressure.</p><hr><h3 id="L12"><a href="#L12" class="headerlink" title="L12"></a>L12</h3><blockquote><p>safe and sound</p><p>安然无恙</p></blockquote><p>I’m happy that you’re <strong>safe and sound</strong>.</p><p>Jack got to his hometown <strong>safe and sound</strong>.</p><p>I’m really lucky that my family and friends are <strong>safe and sound</strong>.</p><blockquote><p>in some way</p><p>从某种程度上</p></blockquote><p>They look similar <strong>in some way</strong>.</p><p>他们在某种程度上有点像</p><blockquote><p>in a way</p><p>在某种程度上，表示<strong>某个确定的方面</strong></p></blockquote><p><strong>In a way</strong>,this is probably a good thing.</p><p>某种程度上，这可能是一件好事</p><blockquote><p>In any way</p><p>以任何方式，无论如何</p></blockquote><p>We’re not related <strong>in any way.</strong></p><p>无论如何，我们没有血缘关系</p><p>She won’t throw away her cat <strong>in any way.</strong></p><p>她无论如何也不会丢掉她的猫</p><blockquote><p>day(s) off</p><p>休息几天</p></blockquote><p>I have some days off next month.（偏口语）</p><p>我下个月会休息几天。</p><p>I’d like to ask for some time off to see the dentist tomorrow.</p><p>我明天想请假去看牙医。</p><p>In some way, the earth has some days off.</p><p>某种程度上，地球休息了几天。</p><p>I’m gonna take couple of days off next week.</p><p>我下周想休息几天。</p><p>It’s her day off today.</p><p>她今儿休假</p><blockquote><p>be free from</p><p>从……中解脱+消极的词</p></blockquote><p>He want’s to be free from his parents.</p><p>他想从父母中解脱。</p><p>She wants to move to the countryside <strong>to be free from</strong> pollution.</p><p>她想搬到乡下以免受到污染的影响。</p><p>The woman wants to <strong>be free from</strong> her husband’s control.</p><blockquote><p>……，which is</p><p>补充说明，表明态度或看法</p></blockquote><p>He believes I’m a genius, <strong>which is</strong> true.</p><p>他觉得我是个天才，我觉得他说的对</p><p>He said he had never cheated on her, which is a lie.</p><p>他说他不欺骗她，但这是个谎言</p><p>Anna was invited to that party, which is awesome.</p><p>安娜被邀请去派对，这可真棒</p><blockquote><p>do&#x2F;does&#x2F;did 动词原型</p><p>表<strong>强调</strong>或<strong>用来反驳</strong></p></blockquote><p><strong>I do</strong> feel sorry for those who lose their jobs.</p><p>She <strong>does feel</strong> sorry for his loss.</p><p><strong>I do</strong> love you.</p><blockquote><p>take …… for granted</p><p>理所应当</p></blockquote><p>Don’t take my love for granted.</p><p>别把我的爱当理所应当</p><p>I’m not gonna take any ordinary day for granted.</p><p>我不会把任何普通无聊的一天看得理所应当</p><p>She takes her wealth for granted.</p><p>她把她拥有的财富视为理所应当</p><p>I used to take my health body for granted.</p><p>我曾经把我的健康身体视为理所应当</p><h4 id="原文-7"><a href="#原文-7" class="headerlink" title="原文"></a>原文</h4><p>During lockdown,I got plenty of time to look back on my life. I’m really lucky that my family and friends are safe and sound. </p><p>Also, thanks to quarantine, I can spend more time with my loved ones and try things that I said I would do but just never happened. </p><p>And in some way, the earth can have some days off and be free from noise and emissions. Meanwhile, I do feel sorry for those who lose their jobs, who are suffering from depression. </p><p>And I guess it’s a big challenge for all of us , and we’re gonna  have to stay strong and positive. After this experience, I really feel like I should live my life to the fullest, and I’m not gonna take any ordinary day for granted.</p><hr><h3 id="L13"><a href="#L13" class="headerlink" title="L13"></a>L13</h3><blockquote><p>wonder</p><p>wonder+why&#x2F;how&#x2F;what&#x2F;when</p></blockquote><p>I <strong>wonder how</strong> he survived the test.</p><p>He still <strong>wonders why</strong> she left him.</p><p>He wonders why she always looks upset.</p><p>I <strong>wonder why</strong> younger people are more adept at phones than previous generations.</p><p>I <strong>wonder</strong> how Laura completed this project alone.</p><blockquote><p>be adept at + 名词 动词ing</p><p>擅长</p></blockquote><p>He’s an <strong>adept</strong> negotiator.</p><p>谈判老手</p><p>younger people <strong>are more adept at</strong> phones than previous generations.</p><p>You <strong>are adept at</strong> cutting through red tape.</p><p>你很擅长突破繁文缛节</p><blockquote><p>serve the <strong>needs</strong> of</p><p>服务于……的需求</p></blockquote><p>they are designed to <strong>serve the needs of</strong> young people.</p><blockquote><p>过去分词作定语</p><p>an app <strong>made</strong> for the elderly.</p><p>an app (that is) made for the elderly.</p><p>过去分词表示被动</p><p>动词ing表示主动，放在被修饰词后</p></blockquote><p>I like the scarf made of cashmere.</p><p>我喜欢羊绒做的围巾</p><p>She hates the rule set by her manager.</p><p>她讨厌经理设置的规定</p><blockquote><p>a bunch of </p><p>一些，一堆</p></blockquote><p>a bunch of meetings.</p><p>a bunch of reasons.</p><p>一堆原因</p><p>a couple of</p><p>代表几个</p><p>a couple of days ago.几天前</p><p>a couple of documents.几份文件</p><blockquote><p>savvy</p><p>精通某事的人</p></blockquote><p>tech savvy</p><p>精通技术</p><p>political savvy</p><p>政治头脑</p><p>She’s <strong>savvy</strong> about investment opportunities.</p><p>她对投资机会了如指掌</p><blockquote><p>sth. happen to s.o.</p><p>某事发生在某人</p></blockquote><p>What <strong>happened to</strong> your hair?</p><p>你头发怎么了，发生了什么？</p><p>What happened to your shirt?</p><p>你衣服怎么了</p><p>Something bad happened to Dominik.</p><p>Dominik出事了</p><p>只有主动语态，没有被动语态。只能说某事发生在某人身上。</p><blockquote><p>happen to do something.</p><p>恰巧做某事</p></blockquote><p>I <strong>happened to see</strong> Hannah at the store today.</p><blockquote><p>for sure</p><p>一定，确定(放在句子中后末尾)</p></blockquote><p>definitely.certainly.100 percent.</p><p>I don’t know for sure what they were talking about.</p><p>He’s gonna ask you out for sure.</p><h4 id="原文-8"><a href="#原文-8" class="headerlink" title="原文"></a>原文</h4><p>I wonder why younger people are more adept at phones than previous generations.</p><p>It seems like most features were designed to serve the needs of young people.</p><p>Zoom and other apps make working online possible. But can you think of an app made for the elderly within two seconds?</p><p>Even if we don’t know how to use a new device or app,we have friends around that can teach us. But it’s harder for the elderly to get help.</p><p>And they use less features less frequently due to a bunch of reasons.</p><p>We consider ourselves <strong>internet savvy</strong> cuz we grew up with it, which the elderly didn’t. But that kind of situation will happen to our generation too in the future for sure.</p><hr><h3 id="L14-从不同角度分析事件"><a href="#L14-从不同角度分析事件" class="headerlink" title="L14 从不同角度分析事件"></a>L14 从不同角度分析事件</h3><blockquote><p><strong>relevance</strong></p><p><strong>相关性</strong></p><p>A is(not) related&#x2F;connected&#x2F;correlated to B</p></blockquote><p>what the character does <strong>isn’t related to</strong> the actor himself.</p><p>角色所做的事情与演员本人并无关系</p><p>The upbringing of the actor <strong>is not connected to</strong> that of the character.</p><p>角色与演员的家教不相关。</p><blockquote><p>A has something &#x2F;nothing to do with B</p><p>A has a lot to do with B.</p></blockquote><p>The character’s actions <strong>have nothing to do with</strong> the actor.</p><p>角色的行为和演员无关。</p><blockquote><p>There’s a&#x2F;no connection&#x2F;relation&#x2F;correlation between A and B.</p></blockquote><p>There’s no connection between his upbringing and the character’s.</p><p>他的教养和角色的教养无关。</p><blockquote><p>The connection between A and B is……形容词</p></blockquote><p>The connection between A and B is strong.</p><blockquote><p><strong>accuracy</strong></p><p><strong>准确性</strong></p><p>There’s (no) evidence&#x2F;proof that</p></blockquote><p>There’s <strong>no evidence that</strong> the actor is a bad guy.</p><p>没有证据表明那个演员是个恶人。</p><blockquote><p>…… is(not) <strong>accurate</strong>&#x2F;precise&#x2F;true</p><p>……是不准确的</p></blockquote><p>This kind of accusation is <strong>just not accurate&#x2F;true.</strong></p><p>这种指责其实是不准确的。</p><blockquote><p>It’s (not) <strong>right</strong>&#x2F;accurate&#x2F;precise to say……</p></blockquote><p>这么说是（不）准确的</p><p>It’s not <strong>right</strong>&#x2F;accurate to say that the actor is immoral.</p><blockquote><p>The fact is that</p></blockquote><p><strong>The fact is that</strong> the actor loves his wife with all his heart.</p><blockquote><p><strong>breadth</strong></p><p><strong>广度</strong></p><p>To a great(er) extent.</p><p>很大程度上</p></blockquote><p>To a great extent,some people abused the actor because the scriptwriter did a good job in describing character.</p><blockquote><p>In a broader perspective</p><p>从更广的角度看</p></blockquote><p>In a broader perspective,it actually shows that the actor has brilliant acting skills.</p><blockquote><p><strong>fairness</strong></p><p><strong>公正性</strong></p><p>It’s (not) fair to do sth.</p></blockquote><p>It’s not fair to bother people unrelated to the case.</p><p>骚扰那些与案件无关的人是不公平的。</p><blockquote><p>It’s (not) fair that</p></blockquote><p>It’s not fair that they based my advancement opportunities &#x2F; job opportunities on some people’s comments, not by my actual skill level.</p><p>What the character does isn’t related to the actor himself. The upbringing of the character is not connected to that of the actor. Meanwhile,what does have to do with the actor is his actual acting skills , and this is the only relation between actors and the characters they have played. What’s more,there is no evidence that the actor is a bad guy.</p><p>To great extent,some people bullied or abused the actor because the scriptwriter did a good job in describing the character. In a broader perspective, it actually shows that the actor has brilliant acting skills . And to be honest, it’s not fair to harass the actor’s family members who aren’t related to the case. And it’s not fair that his work and acting opportunities are affected by some people’s comments, not his actual skills or ability.</p><hr><h3 id="L15"><a href="#L15" class="headerlink" title="L15"></a>L15</h3><h4 id="复习课12"><a href="#复习课12" class="headerlink" title="复习课12"></a>复习课12</h4><p>Having someone to take care of me is not related to marriage.</p><p>Having someone to take care of me has nothing to do with marriage.</p><p>There isn’t a necessary connection between marriage and having someone to take care of me.</p><p>有人照顾我与婚姻无关</p><p>Marriage is not necessarily relate to raise a child.</p><p>Marriage has nothing to do with raise a child.</p><p>There isn’t a necessary connection between marriage and raising a child.</p><p>有孩子与婚姻无关</p><p>A happy marriage is not necessarily related to material wealth.</p><p>A happy marriage has nothing to do with material wealth.</p><p>There isn’t a necessary connection between a happy marriage and material wealth.</p><p>快乐的婚姻和物质条件也不挂钩。</p><p>There’s an evidence that 1 in 3 female murder victims and 1 in 20 male murder victims are killed by their partners.</p><p>And the fact is that the number is still raising.</p><p>To a <strong>greater extent</strong>, with more nursing homes available and a better pension system, some people <strong>no longer need to</strong> worry about it so much.</p><p>很大程度上，随着更多养老院可用以及抚恤金系统的优化，一些人不再那么担忧婚姻。</p><p><strong>On the other hand</strong>, we can’t really know what’s gonna happen in the future, no matter if it’s marriage or in our daily lives, but we still need to live our lives bravely.</p><p><strong>It’s not fair to</strong> measure your marriage according to noise from the outside world or random stereotypes.</p><h4 id="复习课13"><a href="#复习课13" class="headerlink" title="复习课13"></a>复习课13</h4><p>The global quarantine is related to pollution reduction.</p><p>The global quarantine has something to do with pollution reduction.</p><p>There’s a correlation between the global quarantine and pollution reduction.</p><p>世界范围的隔离与环境污染的减少有相关性。</p><p>People’s large scale production activities is related to level of air pollution.</p><p>People’s large scale production activities actually have a lot to do with level of air pollution.</p><p><strong>There’s a correlation</strong> between People’s large scale production activities and air pollution.</p><p>人口活动事件与空气污染相关</p><p><strong>The fact is</strong> that many people lost their jobs and they were suffering from depression due to the economic recession from COVID-19.</p><p>事实上，许多人因新冠导致的经济衰退而失去工作并患上忧郁症。</p><p><strong>To a great extent</strong>, we could make good use of the lockdown time to try new things.</p><p>更大程度上，我们可以充分利用封城时间深度新事情</p><p><strong>In a broader perspective</strong>,we should be grateful for time we maybe able to spend with our family, and hopefully continue to be safe and sound.</p><p>从更大角度上，我们应该感谢我们有时间和家人在一起，并希望我们安然无恙</p><p><strong>It’s unfair that</strong> people from the infected areas face discrimination.</p><p>疫区的价位受到歧视也很不会公平。</p><h4 id="复习课14"><a href="#复习课14" class="headerlink" title="复习课14"></a>复习课14</h4><p>Age isn’t <strong>related to</strong> use digital products.</p><p>Age <strong>has nothing to do with</strong> using digital products .</p><p><strong>The connection between</strong> age and difficulty using digital products is not that strong.</p><p>年龄和使用数字产品的能力之间的联系没有那么紧密。</p><p><strong>Maybe the fact is that</strong> older people have trouble getting help and timely guidance from those around them.</p><p>也许事实是年龄大的一些人没法从身边的人那里及时得到帮助和指导。</p><p>For senior citizens,the sudden appearance of these applications might have something to do with the lack of interest in using them.</p><p><strong>To a great extent</strong> , it’s quite possible we won’t be able to use electric devices properly if we don’t have friends who ca teach us.</p><p>从更广的角度来说，如果我们没有朋友教我们，我们也无法使用这些电子设备</p><p><strong>To a deeper extent,</strong> what’s happening to senior citizens now, could also happen to us one day.</p><p>从更广的角度来说， 如今发生在老人身上的事情站将来也会发生在我们身上</p><p><strong>It’s unfair to</strong> blame them before offering more options to these disadvantaged groups.</p><h3 id="L16-抑郁症"><a href="#L16-抑郁症" class="headerlink" title="L16 抑郁症"></a>L16 抑郁症</h3><blockquote><p>be up to</p><p>干嘛呢？</p></blockquote><p>What are you up to?</p><p>干嘛呢？</p><p>What’s he up to?</p><p>他干嘛呢？</p><p>What have you been up to?</p><p>你最近忙什么呢？</p><blockquote><p>whether (or not)</p><p>是否</p></blockquote><p>I don’t care whether they leave.</p><p>I don’t care whether they leave or stay.</p><p>I don’t care whether they leave or not.</p><p>我不在乎他们留下还是离开</p><p>She is not sure whether the weight-loss diet’s gonna work.</p><p>她不确实减肥餐是否有效</p><p>I doubt whether she told the truth.</p><p>我怀疑她是不是说了真话</p><p>Peter wants to knoow whether they’ve dealt with the problem or not.</p><p>Peter想知道他们是否处理了问题</p><blockquote><p>literally</p><p>用于强调，放在动词形容词前面</p><p>表示：<strong>真的，简直</strong></p></blockquote><p>It literally gives me goose bumps.</p><p>我真的鸡皮疙瘩都起来了</p><p>I’m literally gonna fail this test.</p><p>我这次真的考砸了</p><p>I’m literally gonna starve to death.</p><p>我要饿死了</p><p>My mon literally still think I’m a kid.</p><p>我妈真的还觉得我是个小孩</p><blockquote><p>hang out together&#x2F;hang out with</p><p>一起呆着玩</p></blockquote><p>We should <strong>hanging out</strong> together sometime.</p><p>有时间一起玩</p><p>She’s **hanging out **with her ex.</p><p>她正在和其前任在一起</p><p>Do you wanna hang out ?</p><p>一起玩吗？</p><blockquote><p>all in all</p><p>总的来说</p></blockquote><p>All in all, you’ve made a lot of progress so far.</p><p>总体来说，已经取得很大进步</p><blockquote><p>reach sb.</p><p>联系某人</p><p>reach out to sb.</p><p>联系某人</p></blockquote><p>I tried to <strong>reach you</strong> but I couldn’t get through.</p><p>我曾试着打电话找您，但没打通</p><p>He wondered whether she would <strong>reach out to</strong> him.</p><p>他想知道她会不会找他。</p><p>Every time I wanted to <strong>reach</strong> you, I end up giving it up.</p><p>每次我想找你，最后我都放弃。</p><p>Whenever you need help, just <strong>reach out to</strong> me.</p><p>无论什么时候你需要帮助，联系我</p><blockquote><p>it hit sb. that……</p><p>某人突然意识到</p><p>一般用过去时</p></blockquote><p><strong>It hit me that</strong> she chose to travel by train’s cause she’s an environmentalist.</p><p>It hit me that he needed help.</p><p>我突然意识到他需要帮助</p><p>It hit me that I need to prepare for this test.</p><p>我突然意识到需要为考试准备</p><p>It hit me that I need to learn from this mistake.</p><p>我突然意识到我要从错误中吸取教训</p><p>It hit him that he shouldn’t let her go.</p><p>他突然意识到，不应该让她走</p><h4 id="原文-9"><a href="#原文-9" class="headerlink" title="原文"></a>原文</h4><p>Yesterday I texted Ian and wanted to know <strong>what he was up to</strong>, but he hasn’t repllied yet.</p><p>I don’t know <strong>whether</strong> I should call him to <strong>check if he’s ok</strong>, cuz it happens a lot. Usually, it’s that he doesn’t <strong>feel like doing</strong> anything because of depression, and he <strong>literally just wants to</strong> be alone. </p><p>We used to <strong>hang out together</strong> all the time while in high school. At that time(at that point), I sensed some of his strugle, since he mentioned his random physical pain, but <strong>all in all</strong>, he looked fine. </p><p>Then one day, he <strong>reached out to</strong> me, and said he was actually clinically depressed. And <strong>it hit me</strong> that his <strong>state of mind</strong> was getting worse and worse.</p><p>Sometimes I tried to make him happy, but it seemed like he just didn’t feel anything . But I’m still keep trying.</p><h3 id="L17"><a href="#L17" class="headerlink" title="L17"></a>L17</h3><blockquote><p>be alien to</p><p>对……感到陌生</p></blockquote><p>to后加someone</p><p>Common sense is alien to me.</p><p>我对常识感到陌生</p><p>The new environment is alien to me.</p><p>我对新环境很陌生。</p><p>to后加something.</p><p>Orange trees are alien to China.</p><p>橙子树对中国来说是外来的。</p><p>Your action should not be alien to your word.</p><p>你的行为不应该和你的说法不同。</p><blockquote><p>insist on</p><p>坚持</p></blockquote><p>后面直接加动词ing</p><p>He <strong>insisted on</strong> going out.</p><p>他坚持要出来。</p><p>She <strong>insisted on</strong> paying her half of the bill.</p><p>后面加that</p><p>She <strong>insisted that</strong> her bag was stolen in this store.</p><p>她坚称包在这家店被偷</p><blockquote><p>be apt to</p><p>倾向于做，易于……</p></blockquote><p>If you say something different from the public opinion, you <strong>are apt to be</strong> attacked as an enemy.</p><p>如果你说了一些和大人意见不同的话，很容易被当作敌人攻击。</p><p>I am apt to have online classes.</p><p>我更倾向于上网课</p><p>This situation is apt to continue for a lon time.</p><blockquote><p>tend to </p><p>一个人或一个事情习惯</p></blockquote><p>He <strong>tends to</strong> be late almost everyday.</p><p>他几乎每天都迟到</p><p>They tend to fight at least once a month.</p><p>他们一个月至少打一次架。</p><blockquote><p>blow one’s mind</p><p>让某人感到震撼；让某人心动</p><p>mind-blowing 震撼人的事物</p></blockquote><p>It <strong>blew my mind</strong> when I watch Stanley Kubrick’s movies.</p><p>我看库布里克电影时很震撼</p><p>Stanley Kubrick’s movies are <strong>mind-blowing</strong>.</p><p>库布里克电影让我震撼</p><p>The girl in yellow dress really <strong>blew my mind</strong>.</p><p>穿黄裙子女孩让我心动。</p><blockquote><p>factor in</p><p>把……考虑进去</p><p>factor <strong>the cost</strong> in</p><p>把花费考虑进去</p></blockquote><p>如果考虑的事情很多，把事情放后面</p><p>I have to factor in the distance, the weather, and the price when I plan to go on a trip.</p><p>当我打算出行的时候，我得考虑距离，天气，还有价格。</p><p>Food costs should be factored in when we count the living expenses.</p><p>当我们算生活开支时，要考虑食物花费</p><p>I factored my dog in when I buy Christmas presents.</p><p>买圣诞礼物时我考虑了我的狗</p><blockquote><p>live on</p><p>靠……生存</p><p><strong>维持生计，勉强过活</strong></p></blockquote><p>The old couple <strong>live on</strong> their pension.</p><p>这对老夫妇靠养老金生存。</p><p>The school lives on citizens’ donation and government funding.</p><p>学校靠居民捐钱和政府投资</p><p>Stray cats live on the leftovers.</p><p>流浪猫靠剩饭生存。</p><blockquote><p>you know the drill</p><p>你知道该怎么做，你懂的</p><p>drill 有演习的意思</p></blockquote><p>So that’s our last point for today, <strong>and you know the drill</strong>. You gotta practice and do your homework.</p><p>Next time you land in a country that you’re not really familiar with, remember to figure out their culture and follow the customs.</p><p>下次到一个太熟悉的国家，记得弄清楚并遵守他们的习俗和文化。</p><h4 id="原文-10"><a href="#原文-10" class="headerlink" title="原文"></a>原文</h4><p>The first time I arrived in China, I was shocked <strong>when it came to</strong> tipping. The lack of tipping in China was <strong>alien to</strong> me. Actually, as you know, there’s no need to tip in China , because the taxes, service fees and <strong>whatnot</strong> are included in the bill. If you <strong>insist on</strong> tipping, the people serving you <strong>are apt to</strong> deem it as a display of sympathy, which is not <strong>well-received</strong>. However, when I came back to America, it really <strong>blew my mind</strong> every time I saw the number on the check. You have to <strong>factor in</strong> taxes （between 5%-10%),plus 15% - 20% of the total price as a standard tip in a sit-down restaurant,  and maybe even added payment for things like carryout boxes and other stuff while calculating the price. These sorts of extra payments really add up quickly. In fact, American people in the service industry <strong>live on</strong> tips. So next time you visit the U.S. and get some service, you know the drill.</p><h3 id="L18"><a href="#L18" class="headerlink" title="L18"></a>L18</h3><blockquote><p>I figure</p><p>I suppose</p><p>我认为……可以代替：I think,I guess</p></blockquote><p><strong>I figure</strong> I’m gonna get fire for this.</p><p><strong>I figure</strong> you have already seen his newest movie trailer.</p><p>我猜你已经看过他最新电影预告片。</p><p><strong>I suppose</strong> I’d better finish my assignment before the teacher comes.</p><p><strong>I suppose</strong> Carol just leave for a while and will be back soon.</p><blockquote><p>when it comes to</p><p>当说到提到，就……而论</p></blockquote><p>to后面接名词或动词ing</p><p><strong>When it comes to</strong> fishing , my father is an expert.</p><p>谈到钓鱼，我爸是专家。</p><p>No one can touch him <strong>when it comes to</strong> garden design.</p><p>在园林设计这方面没人比得过他</p><p><strong>When it comes</strong> to K-pop culture , she knows more than any of us.</p><p>谈到韩流，她比我们都懂</p><blockquote><p>for whatever reason</p><p>不论什么原因；出于某种原因</p><p>放在句首或者句尾</p></blockquote><p>He ignored me <strong>for whatever reason.</strong></p><p>不知出于什么原因，他无视我</p><p><strong>For whatever reason</strong>, I didn’t say anything about it.</p><p>出于某种原因，关于那事我什么都没说。</p><blockquote><p>compared to</p><p>与……相比较</p><p>compare with可以相互替换</p></blockquote><p>Nowadays, Tiktok is apparently much more popular among Generation Zs’ <strong>compared to</strong> eBooks.</p><p>对于Z世代来说，TikTok 显然比电子书更受到欢迎</p><p>As for me, I’d rather watch The Matrix <strong>compared to</strong> The Hangover.</p><p>I prefer to watch The Matrix <strong>compared to</strong> The Hangover.</p><p>我更想看黑客帝国</p><p>This course is much easier <strong>compared to</strong> the last one.</p><p>这节课比上节简单不少。</p><p>The risk is as nothing <strong>compared to</strong> the gain.</p><p>风险跟收益比算不了什么</p><blockquote><p>Besides</p><p>而且，另外</p><p>also, plus.</p></blockquote><p>I don’t really wanna go. <strong>Besides</strong>, it’s too late now.</p><p>现在太晚了，而且我不太想去</p><p>I don’t think he would e good at this job. <strong>Besides</strong>, he didn’t seem that nice either.</p><p>我认为他对这个工作不太擅长，而且他人看起来也不太好。</p><p>I have a lot of work to do. <strong>Besides</strong>, I don’t really like parties.</p><p>我有很多工作，而且我不喜欢派对。</p><blockquote><p>the 比较级, the 比较级</p><p>越……，越……</p></blockquote><p>the sooner, the better</p><p>the more he eats,the fatter he gets.</p><p>他越吃越胖</p><p>The busier he is , the happier he feels.</p><p>他越忙越开心。</p><p>The more English you practice, the better your English will be.</p><blockquote><p>quote</p><p>引用，引号</p><p>表示反讽</p></blockquote><p>He was telling that us how he’s a “genius”</p><p>他说自己是个“天才”</p><p>I really wish he wouldn’t be so “kind” to me.</p><p>我希望他不会对我那么“友善”【实际上，对我不好】</p><h4 id="原文-11"><a href="#原文-11" class="headerlink" title="原文"></a>原文</h4><p><strong>I figure</strong> maybe you’ve already <strong>heard of</strong> the chain of contempt among overseas Chinese students. For example, <strong>when it comes to</strong> country selection, sometimes students who have chosen the US or the UK may have <strong>a sense of superiority</strong>. <strong>I suppose</strong> some of them might <strong>look down on</strong> others for <strong>whatever reason</strong>. The US and the UK are always the most typical and traditional choices. Probably it’s because these countries are well-developed and might have better academic opportunities <strong>compared to</strong> others. <strong>Besides</strong>, it feels like <strong>the farther</strong> they go <strong>the more</strong> independent they are. And among English-speaking countries, those who study in the US and the UK can <strong>pick up</strong> a “purer” accent.</p><h3 id="L19-如何换位思考"><a href="#L19-如何换位思考" class="headerlink" title="L19 如何换位思考"></a>L19 如何换位思考</h3><h4 id="on-the-same-page"><a href="#on-the-same-page" class="headerlink" title="on the same page"></a>on the same page</h4><p>观点一致，要肯定别人的情绪</p><p>we are on the same page</p><blockquote><p>I can totally see</p><p>我完全理解</p></blockquote><p><strong>I can totally see</strong> why it made you angry.</p><p>我完全理解这为什么让您生气。</p><p><strong>I can totally see</strong> how annoying that is.</p><p>我完全可以理解这有多烦人</p><p><strong>I can totally see</strong> how disappointing that is</p><p>我完全可以理解这有多令人失望。</p><blockquote><p>I understand</p><p>我理解</p></blockquote><p><strong>I understand</strong> how disappointing it is.</p><p>我知道那多么令人失望</p><blockquote><p>That sucks!!!</p><p>那太糟了</p></blockquote><p>One of my roommates keeps yelling and swearing while playing League of Legends at freaking 3 am in the morning!!!</p><p>– <strong>That sucks</strong>!!!I totally get it.</p><p>那太糟了，我完全理解</p><blockquote><p>If I were you, I would</p><p>如果我是你，我会……</p></blockquote><p><strong>If I were you, I would</strong> be upset <strong>for sure</strong>.</p><p>如果我是你，我肯定会心烦</p><blockquote><p>if anyone can understand</p><p>没有人可以理解</p></blockquote><p>I’m not sure <strong>if anyone can understand</strong> what on earth you’re going through.</p><p>没有人能理解你现在究竟在经历什么。【没有人能评价与指责你的境遇】</p><h4 id="to-know-his-needs"><a href="#to-know-his-needs" class="headerlink" title="to know his needs"></a>to know his needs</h4><blockquote><p>what can I do to help?</p><p>Is there anything I can do?</p><p>我能为你做些什么？</p></blockquote><blockquote><p>Do you want me to?</p><p>你想让我做……</p></blockquote><p>Do you want me to call you right now?</p><p>想我立刻打电话给你吗？</p><blockquote><p>I can …… if you want me to.</p><p>如果你想的话，我可以</p></blockquote><p><strong>I can</strong> come over there right now <strong>if you want me to.</strong></p><p>如果你想的话，我可以立刻到那儿</p><h4 id="to-show-your-support"><a href="#to-show-your-support" class="headerlink" title="to show your support"></a>to show your support</h4><blockquote><p>be here&#x2F;there</p></blockquote><p>I’m here for you. I’ll always be there for you.</p><p>我在你身边，我会一直在你身边。</p><p>No matter what you decide to do, I’m here for you.</p><p>无论你决定做什么，我会一直在您身边。</p><blockquote><p>It’s ok</p></blockquote><p>It’s ok to cry in front of me.</p><p>在我面前哭吧，没关系。</p><p>It’s ok if you don’t want to give me the details.</p><p>如果你不想告诉我细节也没关系。</p><blockquote><p>get through</p><p>度过</p></blockquote><p>We’ll get through this together.</p><p>我们会一直度过这段事</p><h4 id="to-put-yourself-in-other’s-shoes"><a href="#to-put-yourself-in-other’s-shoes" class="headerlink" title="to put yourself in other’s shoes"></a>to put yourself in other’s shoes</h4><p>when I put myself in his shoes, it suddenly all makes sense.</p><p>当我换位思考时，我突然间全明白了</p><p>Even when I put myself in his shoes, I still don’t understand it.</p><p>即使我换位思考，我还是不能理解。</p><blockquote><p>imagine oneself in the situation&#x2F;circumstances</p><p>换位思考</p></blockquote><p>After imagining myself in that situation, I think I might do the same thing he did.</p><p>设身处地的想象后，我认为我可能会做一样的事情。</p><p>A person who always <strong>empathizes with</strong> other people, no matter what the circumstances are.</p><p>I can empathize with his roommate.</p><h4 id="原文-12"><a href="#原文-12" class="headerlink" title="原文"></a>原文</h4><p>One day when I was about to go to sleep at 3 am, I got a message from my friend. It goes like this.</p><p>Hey bro!Are you asleep?I’m having trouble falling asleep cuz you <strong>are not gonna</strong> believe it.</p><p>One of my roommates is singing on the balcony, one keeps yelling and swearing while playing League of Legends, and one is still fighting with his girlfriend!!!</p><p>And now some maniacs just started to recite his notes outside our door, I know it’s exam time and people get hyped. But it’s freaking 3 am and people gotta sleep!</p><p>I mean,some people just can’t put themselves in other people’s shoes.</p><p>I could tell he was helpless. That sounded like a total disaster. <strong>I do fell bad for</strong> him. If I went through that mess, <strong>I’d be pissed off for sure</strong>.</p><h3 id="L26-我的家乡"><a href="#L26-我的家乡" class="headerlink" title="L26 我的家乡"></a>L26 我的家乡</h3><blockquote><p>some of</p><p>中的一些，一部分</p></blockquote><p>名词前面有：your&#x2F;my&#x2F;his&#x2F;her&#x2F;this 用some of</p><p>Can I have <strong>some of your</strong> chips.</p><p>我可以吃一些你的薯片吗？</p><p><strong>Some of the</strong> students speak very fluent English.</p><p>一部分学生英语说得非常好</p><p><strong>Some of my</strong> friends really like playing soccer.</p><p>我的一些朋友非常喜欢足球</p><p>Can you name <strong>some of the</strong> car brands?</p><p>您可以说出一些车品牌吗？</p><p>Can you share <strong>some of the</strong> action movies?</p><p>你可以分享一些动作电影吗</p><p>Can I hang out with some of your bitches?</p><p>Would you mind if I reach out to some of your bitches?</p><blockquote><p>all of</p><p>全部</p></blockquote><p>All of you are awesome. I hope not only some of you, but all of you speak very good English!</p><blockquote><p>be located in&#x2F;at</p><p>位于，位置在</p><p>大地点用in，小地点用at</p></blockquote><p>Sanya is <strong>located in</strong> Southeast China.</p><p>三亚在中国东南方</p><p>The Summer Palace <strong>is located in</strong> Beijing.</p><p>颐和园位于北京</p><p>The painting <strong>is located at</strong> the other side of this museum.</p><p>那幅画位于博物馆另一边</p><p>New York City is located in the east side of the States.</p><p>纽约在美国东部</p><blockquote><p>is home to</p><p>是……故乡</p></blockquote><p>Beijing <strong>is home to</strong> fermented soy milk.</p><p>北京是豆汁儿的故乡。</p><p>Sichuan <strong>is home to</strong> adorable pandas.</p><p>四川是可爱的熊猫故乡</p><p>Earth <strong>is home to</strong> human beings.</p><p>地球是人类故乡</p><blockquote><p>home sweet home</p><p>还是家最好</p></blockquote><blockquote><p>official</p><p>官方的；正式的</p></blockquote><p>official language 官方语言</p><p>official partner 官方合作伙伴</p><p>Did you know the US actually doesn’t have an <strong>official language</strong>?</p><p>你知道美国实际上没有官方语言吗？</p><p>An <strong>official announcement</strong> is expected in the next few days.</p><p>预计过几天会发布一条官方声明。</p><blockquote><p>not to mention</p><p>更不用说；更不用提；用来补充，扩展</p></blockquote><p>I was so amazed by the splendid scenery, <strong>not to mention</strong> the fascinating culture.</p><p>我深深惊叹于美丽风景，更不用提那迷人文化</p><p>She is rich enough to buy a mansion in New York, <strong>not to mention</strong> those islands she bought.</p><p>她足够富到在纽约买个豪宅，更别提她买的那些岛</p><p><strong>Not to mention</strong> that our airline infrastucture is so developed , that in order to replace.</p><p>I admire his talent, <strong>not to mention</strong> his great personality.</p><p>我钦佩他的才华，更别提他出色的个性</p><p>I’ve been working for 16 hours, <strong>not to mention</strong> I only slept for 3 hours last night.</p><p>我持续工作16小时，更别提我只睡了3小时</p><blockquote><p>move to</p><p>搬到</p></blockquote><p>Maybe it is a good idea to <strong>move to</strong> L.A. and start a new life.</p><p>搬到洛杉矶开启新生活可能是个好主意</p><p>I heard John is gonna sell out and <strong>move to</strong> city</p><p>约翰打算变卖家当搬去城市</p><p>Will you consider <strong>move to</strong> a new place?</p><p>考虑搬到一个新地方吗</p><blockquote><p>move in; 入住，搬进某个地方</p></blockquote><p>He just moved in his new house.</p><p>他刚搬入新家</p><h3 id="L27-喜欢的电影和音乐"><a href="#L27-喜欢的电影和音乐" class="headerlink" title="L27 喜欢的电影和音乐"></a>L27 喜欢的电影和音乐</h3><blockquote><p>both …… and</p><p>两者都</p></blockquote><p><strong>Both of</strong> my parents agreed that I should stay in this company.</p><p>我父母两人都同意我留在这个公司</p><p><strong>Both</strong> my mom <strong>and</strong> my dad think I should stick to the plan.</p><p>我爸和我妈认为我应该坚持计划</p><p>He can speak both French and German.</p><p>他既会说法语又会德语</p><blockquote><p>either …… or </p><p>不是这样，就是那样</p></blockquote><p>Today I’m gonna eat <strong>either</strong> pizza <strong>or</strong> spaghetti.</p><p>要么吃披萨要么吃意面</p><p>You can either go swimming or play tennis.</p><p>你可以游泳也可以打网球</p><blockquote><p>neither …… nor</p><p>既没也没</p></blockquote><p>He chose <strong>neither</strong> Jessica <strong>nor</strong> Sarah. He chose Angla.</p><p>既没也没</p><p>I feel neither happy nor sad.</p><p>我既不高兴也不难过</p><blockquote><p>regardless of</p><p>不管，不理会，无论【无论是什么情况，已经发生或未发生，都无所谓】</p><p>&#x3D; no matter</p></blockquote><p>The shelter takes in anybody <strong>regardless of</strong> religion or skin color.</p><p>收容所接收任何皮肤和其地域的人</p><p><strong>regardless of</strong> its inevitable negative outcome.</p><p>不管其不可避免的负面结果。</p><p><strong>Regardless of</strong> your time and place, there are some things that are constant.</p><p>无论您身处何时何地，有些事情是不变的。</p><p><strong>Regardless of</strong> whether he’s right or wrong, we have the right to make the final decision.</p><p>不管他对错，我们有权做最终决定</p><p>Everyone should be treated equally <strong>regardless of</strong> social status.</p><p>不管社会状态如何，人人平等</p><blockquote><p>in spite of 和其 despite </p><p>尽管，已知有一种情况</p></blockquote><p>We’re gonna see the movie <strong>in spite of</strong> the reviews.</p><p>不论评论怎样，我们也看【知道评论差，但还是看】</p><p>We’re gonna see the movie <strong>regardless of</strong> the reviews.</p><p>不论评论怎样，我们也看【不管评论怎样，就要看】</p><blockquote><p>tons of</p><p>特别多【ton 吨】</p><p>loads of</p><p>a great&#x2F;huge&#x2F;large amount of</p><p>a number of</p><p>a good many</p></blockquote><p>you can see tons of videos of gta.</p><blockquote><p>be adapt to</p><p>被改编成；</p></blockquote><p>Besides, his story <strong>was adapted to</strong> a movie called 8 Mile.</p><p>除此之外，他的故事被改编成电影《八英里》</p><p>The musical <strong>was adapted to</strong> a movie last year.</p><p>这个音乐剧在去年被改编成电影</p><p>The bestseller was adapted to a TV series.</p><p>这本畅销书被改编成一个电视剧</p><blockquote><p>be adapt to</p><p>适应 &#x3D; get used to</p></blockquote><p>With the pandemic, we’ve all been forced to <strong>adapt to</strong> new things.</p><p>因为这场流行病，我们都需要<strong>适应</strong>一些新事物</p><p>We have tried to <strong>adapt to</strong> the local customs.</p><p>我们适应当地习俗</p><p>I also loved looking at how animals have <strong>adapted to</strong> the African landscape.</p><p>我也很喜欢观察动物如何适应非洲景观。</p><p>I found it very hard to <strong>adapt to</strong> the new enviroment.</p><p>我发现适应新环境很难</p><blockquote><p>make one’s way to <strong>doing</strong></p><p>经过相当程度的努力</p><p>朝着某个方向艰难前进，或一路向前，表示：最终到达某个地方</p></blockquote><p>I’m gonna <strong>make my way to</strong> the stage as a dancer.</p><p>我会作为一个舞者，拉出一条通往舞台的道路</p><p>He <strong>made his way to</strong> the top through hard work and determinanation.</p><p>他通过努力工作和其决心最终取得成功。</p><p><strong>make my way to</strong> becoming a better English speaker.</p><p>努力让英语说得更好</p><p>I finally <strong>make my way to</strong> a busy intersection.</p><p>我终于走到了一个繁忙的十字路口</p><p>After lunch, I’ll get changed and <strong>make my way to</strong> the gym</p><p>饭后，我换装并去体育馆</p><blockquote><p>make way</p><p>让路</p><p>make way for </p><p>为谁让路</p></blockquote><p>make way for the queen</p><p>为女王让路</p><p>I made way for an ambulance on the highway today.</p><p>我今儿在高速为救护车让路</p><blockquote><p>including</p><p>包括</p></blockquote><p>In fact, they had the lowest risk of dying of anyone in the study, including people who had relatively little stress.</p><p>事实上，他们有全部参与实验的人中最小的死亡风险，包括压力相对较小的人。</p><p>You can find all the information on their offical website, including all the professors’ email addresses.</p><p>你可以在他们官方网站找到全部信息，包括教授们的邮箱地址</p><h4 id="原文-13"><a href="#原文-13" class="headerlink" title="原文"></a>原文</h4><p>I’m <strong>big fan of</strong> Eminem. He’s the first white rapper who became <strong>worldwide famous</strong>. I like him because he raps really fast and <strong>made his onw style</strong>. He’s made <strong>both</strong> old school albums <strong>and</strong> new school albums. Anything he hates or loves, he just raps about it <strong>regardless of tons of</strong> critiques and disses. <strong>Besides</strong>, his story was even <strong>adapted to</strong> a movie called 8 Mile. In the movie, Eminem was cast as Rabbit, who was basically him. The picture told the story of a Detroit car factory worker who <strong>made his way to</strong> becoming a worldwide famous rap star. I also <strong>gotta mention</strong> that every song in the movie was written by Eminem himself, <strong>including</strong> the very famous “lose yourself” that won an Academy Award for Best Original Song that year. </p>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;h3 id=&quot;L1-拖延症的一天&quot;&gt;&lt;a href=&quot;#L1-拖延症的一天&quot; class=&quot;headerlink&quot; title=&quot;L1 拖延症的一天&quot;&gt;&lt;/a&gt;L1 拖延症的一天&lt;/h3&gt;&lt;p&gt;gotta&lt;/p&gt;
&lt;p&gt;&amp;#x3D;have&amp;#x2F;has to d</summary>
      
    
    
    
    <category term="英语口语" scheme="https://blog.lthero.cn/categories/%E8%8B%B1%E8%AF%AD%E5%8F%A3%E8%AF%AD/"/>
    
    
    <category term="英语口语" scheme="https://blog.lthero.cn/tags/%E8%8B%B1%E8%AF%AD%E5%8F%A3%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>局域网连接方案</title>
    <link href="https://blog.lthero.cn/2022/12/22/ConnectedDevices/"/>
    <id>https://blog.lthero.cn/2022/12/22/ConnectedDevices/</id>
    <published>2022-12-22T06:19:13.000Z</published>
    <updated>2022-12-22T06:21:18.710Z</updated>
    
    <content type="html"><![CDATA[<h1 id="局域网连接方案"><a href="#局域网连接方案" class="headerlink" title="局域网连接方案"></a>局域网连接方案</h1><blockquote><p>主路由：192.168.6.1<br>n1盒子：192.168.6.155<br>主机：192.168.6.116<br>华为路由器：192.168.8.1</p></blockquote><p>1、华为路由器使用<strong>流量卡</strong>上网</p><p>2、主路由<strong>用网线</strong>连接华为路由器。随后，主机连接<strong>主路由的wifi</strong>，进入“网络”将wan口重新连接，直到wan网ip显示为192.168.8.x【主路由外网地址】</p><p>3、n1盒子<strong>用网线</strong>连接主路由，br-lan设置192.168.6.155，dns为192.168.6.1。在n1盒子上运行passwall</p><p>4、主机<strong>用网线</strong>连接主路由，设置网关为192.168.6.155</p><p>信号较好的情况下，外网带宽为50~70Mbps，油管连接速度4w</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;局域网连接方案&quot;&gt;&lt;a href=&quot;#局域网连接方案&quot; class=&quot;headerlink&quot; title=&quot;局域网连接方案&quot;&gt;&lt;/a&gt;局域网连接方案&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;主路由：192.168.6.1&lt;br&gt;n1盒子：192.168.6.155</summary>
      
    
    
    
    <category term="网络" scheme="https://blog.lthero.cn/categories/%E7%BD%91%E7%BB%9C/"/>
    
    
    <category term="网络" scheme="https://blog.lthero.cn/tags/%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>巫师3控制台代码</title>
    <link href="https://blog.lthero.cn/2022/12/14/TheWitcherConsole/"/>
    <id>https://blog.lthero.cn/2022/12/14/TheWitcherConsole/</id>
    <published>2022-12-14T13:07:29.000Z</published>
    <updated>2022-12-14T13:08:18.743Z</updated>
    
    <content type="html"><![CDATA[<h1 id="巫师3控制台代码"><a href="#巫师3控制台代码" class="headerlink" title="巫师3控制台代码"></a>巫师3控制台代码</h1><h2 id="控制台打开方式"><a href="#控制台打开方式" class="headerlink" title="控制台打开方式"></a>控制台打开方式</h2><p>1、找到游戏目录。<br>例如G:\software\steam\steamapps\common\The Witcher 3\bin\config\base<br>2、找到文件General，并且打开。<br>如果找不到的话，可以windows自带的搜索或是everyting搜索游戏名<br>然后在ConfigVersion&#x3D;2后添加语句。<br>DBGConsoleOn&#x3D;true<br>控制台就开启了，热键是”~”</p><h2 id="通则"><a href="#通则" class="headerlink" title="通则"></a>通则</h2><p>如果要添加一个物品使用<br>additem(‘物品英文名称’,数量)<br>生成一个怪物<br>spawn(‘怪物名称英文’)<br>如果不清楚英文的话，可以将游戏切换成英文进行查看，注意大小写的区分<br>控制台代码严格区分大小写，全半角</p><h2 id="传送代码："><a href="#传送代码：" class="headerlink" title="传送代码："></a>传送代码：</h2><p>ShowAllFT(1) 打开全部快速旅行点<br>不要随便使用，否则可能造成卡关等等<br>AllowFT(1) 允许随时使用路牌<br>注意AllowFT严格要求大小写，并在游戏退出后需要重新打开</p><h2 id="怪物突变诱发物"><a href="#怪物突变诱发物" class="headerlink" title="怪物突变诱发物"></a>怪物突变诱发物</h2><p>使用方式如 additem(‘Gryphon mutagen’) 注意全半角<br>Gryphon mutagen 狮鹫兽突变诱发物<br>Nightwraith mutagen 夜之妖灵突变诱发物<br>Czart mutagen 雌特怪突变诱发物<br>Wyvern mutagen 翼手龙突变诱发物<br>Troll mutagen 巨魔突变诱发物<br>Noonwraith mutagen 日间妖灵突变诱发物<br>Succubus mutagen 女夜魔突变诱发物<br>Fogling 2 mutagen 大雾妖突变诱发物<br>Fiend mutagen 恶魔突变诱发物<br>Forktail mutagen 叉尾龙突变诱发物<br>Grave Hag mutagen 墓穴女巫突变诱发物<br>Wraith mutagen 妖灵突变诱发物<br>Dao mutagen 地元素突变诱发物<br>Lamia mutagen 海克娜突变诱发物<br>Ancient Leshy mutagen 古鹿首精突变诱发物<br>Basilisk mutagen 石化蜥蜴突变诱发物<br>Werewolf mutagen 狼人突变诱发物<br>Nekker Warrior mutagen 孽鬼战士突变诱发物<br>Leshy mutagen 鹿首精怪突变诱发物<br>Katakan mutagen 卡塔卡恩突变诱发物<br>Arachas mutagen 蟹蜘蛛突变诱发物<br>Cockatrice mutagen 石化鸡蛇突变诱发物<br>Volcanic Gryphon mutagen 大狮鹫突变诱发物<br>Water Hag mutagen 沼泽巫婆突变诱发物</p><h2 id="修理工具："><a href="#修理工具：" class="headerlink" title="修理工具："></a>修理工具：</h2><p>additem(‘weapon_repair_kit_3’) 武器修理工具<br>additem(‘armor_repair_kit_3’) 护甲修理工具</p><h2 id="状态buff："><a href="#状态buff：" class="headerlink" title="状态buff："></a>状态buff：</h2><p>addabl(‘DamageBuff’) 增加200攻击力 200法印强度<br>addabl(‘ForceCriticalHits’) 100%暴击率<br>addabl(‘ConAthletic’) 1000血，100体力和更高的体力恢复率<br>addabl(‘ConImmortal’) - 99800血，100体力和更高的体力恢复率<br>(去除的话只要前缀 “addabl” 换成 “remabl”即可)</p><h2 id="常用："><a href="#常用：" class="headerlink" title="常用："></a>常用：</h2><p>addmoney(77777) 加钱 (括号里的数值自己决定，太夸张了也许会显示错误，可以适当调整)<br>removemoney(11) 减钱<br>staminaboy() Geralt耐力不减<br>resurrect() 死掉了，打这个就复活了<br>addskillpoints(99) 添加技能点数<br>addexp (1000) 增加经验值<br>setlevel(40) 设置等级数<br>levelup(5) 等级提升<br>shave 剃胡子<br>makeitrain 下雨<br>stoprain 停止下雨<br>healme 加血</p><h2 id="生活必需品："><a href="#生活必需品：" class="headerlink" title="生活必需品："></a>生活必需品：</h2><p>addbolts 添加全箭矢<br>addherbs 添加所有药草<br>addpotions 添加煎药<br>addmutagens 添加突变煎药<br>addsteelswords 添加全钢剑<br>addsteelswords2 添加全钢剑2<br>addsilverswords 添加全银剑<br>addsilverswords2 添加全银剑2<br>addcrossbows 添加全十字弓<br>addarmor 添加全护甲<br>addarmor2 添加全护甲2<br>addpants 添加全裤子<br>addboots 添加全鞋子<br>addgloves 添加全手套<br>addsets 添加全套装<br>addbooks 添加全书籍<br>addlore 添加知识<br>addlore2 添加知识2<br>addfood 添加全食物<br>adddrinks 添加全酒精<br>addupgrades 全剑部位镶嵌符文</p><h2 id="换杰洛特发型："><a href="#换杰洛特发型：" class="headerlink" title="换杰洛特发型："></a>换杰洛特发型：</h2><p>WitcherHairstyle(‘1’) 短发辫子<br>WitcherHairstyle(‘2’) 飘逸长发<br>WitcherHairstyle(‘3’) 默认发型</p><h2 id="高级马具："><a href="#高级马具：" class="headerlink" title="高级马具："></a>高级马具：</h2><p>additem(‘Toussaint horsebag’)<br>additem(‘Toussaint saddle’)<br>additem(‘Toussaint saddle 2’)<br>additem(‘Toussaint saddle 3’)<br>additem(‘Toussaint saddle 4’)<br>additem(‘Toussaint saddle 5’)<br>additem(‘Toussaint saddle 6’)<br>additem(‘Toussaint horse blinders’)<br>additem(‘Toussaint horse blinders 2’)<br>additem(‘Toussaint horse blinders 3’)<br>additem(‘Toussaint horse blinders 4’)<br>additem(‘Toussaint horse blinders 5’)<br>additem(‘Toussaint horse blinders 6’)</p><h2 id="突变诱发物："><a href="#突变诱发物：" class="headerlink" title="突变诱发物："></a>突变诱发物：</h2><p>additem(‘Greater mutagen red’,2) 大型红色突变诱发物<em>2<br>additem(‘Greater mutagen blue’,2) 大型蓝色突变诱发物</em>2<br>additem(‘Greater mutagen green’,2) 大型绿色突变诱发物*2<br>如果是弱效的话为Lesser mutagen green,严格要求大小写</p><h2 id="熊套："><a href="#熊套：" class="headerlink" title="熊套："></a>熊套：</h2><p>additem(‘Bear Pants 5’) 裤<br>additem(‘Bear Boots 5’) 鞋<br>additem(‘Bear Gloves 5’) 手<br>additem(‘Bear Armor 4’) 胸<br>additem(‘Bear School steel sword 4’) 钢剑<br>additem(‘Bear School Crossbow’) 十字弓</p><h2 id="猫套："><a href="#猫套：" class="headerlink" title="猫套："></a>猫套：</h2><p>additem(‘Lynx Pants 5’) 裤<br>additem(‘Lynx Boots 5’) 鞋<br>additem(‘Lynx Gloves 5’) 手<br>additem(‘Lynx Armor 4’) 胸<br>additem(‘Lynx School steel sword 4’) 钢剑<br>additem(‘Lynx School silver sword 4’) 银剑<br>additem(‘Lynx School Crossbow’) 十字弓</p><h2 id="狮鹫套："><a href="#狮鹫套：" class="headerlink" title="狮鹫套："></a>狮鹫套：</h2><p>additem(‘Gryphon Pants 5’) 裤<br>additem(‘Gryphon Boots 5’) 鞋<br>additem(‘Gryphon Gloves 5’) 手<br>additem(‘Gryphon Armor 4’) 胸<br>additem(‘Gryphon School steel sword 4’) 钢剑<br>additem(‘Gryphon School silver sword 4’) 银剑</p><h2 id="狼套："><a href="#狼套：" class="headerlink" title="狼套："></a>狼套：</h2><p>additem(‘Wolf Pants 5’) 裤<br>additem(‘Wolf Boots 5’) 鞋<br>additem(‘Wolf Gloves 5’) 手<br>additem(‘Wolf Armor 4’) 胸<br>additem(‘Wolf School steel sword 4’) 钢剑<br>additem(‘Wolf School silver sword 4’) 银剑</p><h2 id="飞狮套："><a href="#飞狮套：" class="headerlink" title="飞狮套："></a>飞狮套：</h2><p>additem(‘Red Wolf Pants 2’) 裤<br>additem(‘Red Wolf Gloves 2’) 手<br>additem(‘Red Wolf Boots 2’) 鞋<br>additem(‘Red Wolf Armor 2’) 胸<br>additem(‘Red Wolf School steel sword 2’) 钢剑<br>additem(‘Red Wolf School silver sword 2’) 银剑</p><h2 id="毒蛇套："><a href="#毒蛇套：" class="headerlink" title="毒蛇套："></a>毒蛇套：</h2><p>additem(‘EP1 Witcher Armor’) 胸<br>additem(‘EP1 Witcher Gloves’) 手<br>additem(‘EP1 Witcher Boots’) 鞋<br>additem(‘EP1 Witcher Pants’) 裤<br>additem(‘EP1 Viper School silver sword’) 银剑<br>additem(‘EP1 Viper School steel sword’) 钢剑</p><h2 id="陶森特骑士钢剑-："><a href="#陶森特骑士钢剑-：" class="headerlink" title="陶森特骑士钢剑 ："></a>陶森特骑士钢剑 ：</h2><p>additem(‘Knights steel sword 3’) 300穿刺+昆恩+双爆+燃烧</p><h2 id="陶森特骑士比武大赛套装："><a href="#陶森特骑士比武大赛套装：" class="headerlink" title="陶森特骑士比武大赛套装："></a>陶森特骑士比武大赛套装：</h2><p>additem(‘Knight Geralt A Armor 3’) 胸<br>additem(‘Knight Geralt A Gloves 3’) 手<br>additem(‘Knight Geralt A Pants 3’) 裤<br>additem(‘Knight Geralt A Boots 3’) 鞋</p><h2 id="镜子大师全套奖励："><a href="#镜子大师全套奖励：" class="headerlink" title="镜子大师全套奖励："></a>镜子大师全套奖励：</h2><p>additem(‘Devil Saddle’)悲痛马衣，马永不惊慌，并随机混乱一名敌人<br>additem (‘Soltis Vodka’) 无底酒瓶，无限烈酒<br>additem (Cornucopia) 富饶之角，无限食物</p><h2 id="石之心神偷套装："><a href="#石之心神偷套装：" class="headerlink" title="石之心神偷套装："></a>石之心神偷套装：</h2><p>additem(‘Thief Armor’) 新月盔甲<br>additem(‘Thief Gloves’) 新月手套<br>additem(‘Thief Pants’) 新月裤子<br>additem(‘Thief Boots’) 新月靴子</p><h2 id="能混入人群的驴耳头套-可以分解为驴耳朵和眼镜-："><a href="#能混入人群的驴耳头套-可以分解为驴耳朵和眼镜-：" class="headerlink" title="能混入人群的驴耳头套(可以分解为驴耳朵和眼镜)："></a>能混入人群的驴耳头套(可以分解为驴耳朵和眼镜)：</h2><p>additem(‘Concealment Kit’)</p><h2 id="挂画装饰品代码："><a href="#挂画装饰品代码：" class="headerlink" title="挂画装饰品代码："></a>挂画装饰品代码：</h2><p>(风景类)<br>additem(‘mq7024_gen_painting_landscape_b’)<br>additem(‘mq7024_painting_prologue_village’)<br>additem(‘mq7024_palace_painting’)<br>additem(‘mq7024_gen_painting_landscape_c’)<br>additem(‘mq7024_painting_battlefield’)<br>additem(‘mq7024_gen_painting_landscape_a’)<br>additem(‘mq7024_painting_harbour’)<br>additem(‘mq7024_painting_stilllife’)<br>additem(‘q603_auctioned_painting’)</p><p>(人像类)<br>additem(‘mq7024_gen_painting_portrait_a’)<br>additem(‘mq7024_painting_ciri_portrait’)<br>additem(‘mq7024_painting_emhyr_portrait’)<br>additem(‘q305_painting_of_hemmelfart’)<br>additem(‘mq7009_painting_pose1_grif’) (裸体白狼——骑马)<br>additem(‘mq7009_painting_pose2_grif’) (裸体白狼——英雄)<br>additem(‘mq7009_painting_pose3_grif’) (裸体白狼——躺卧)</p><p>(盾牌)<br>additem(‘sq701_geralt_shield’)<br>additem(‘sq701_ravix_shield’)</p><h2 id="独特武器："><a href="#独特武器：" class="headerlink" title="独特武器："></a>独特武器：</h2><p>additem(‘Aerondight EP2’) 湖女之剑-可跟角色升级的极品银剑(就是连击十下可以永久提升伤害，最佳是永远跟同等猎魔剑攻击一致或更高！)<br>additem(‘q704 vampire silver sword’) 坎塔娜(吸血鬼之剑)</p><h2 id="大赛奖励："><a href="#大赛奖励：" class="headerlink" title="大赛奖励："></a>大赛奖励：</h2><p>additem(‘Geralt of Rivia Crossbow’) 杰洛特的十字弓</p><h2 id="吸血鬼套-两套一红一黑-："><a href="#吸血鬼套-两套一红一黑-：" class="headerlink" title="吸血鬼套(两套一红一黑)："></a>吸血鬼套(两套一红一黑)：</h2><p>Blood and Wine Vampire Set Item IDs<br>红色<br>additem(‘q704_vampire_mask’) 面具<br>additem(‘q704_vampire_armor’) 胸<br>additem(‘q704_vampire_gloves’) 手<br>additem(‘q704_vampire_pants’) 裤<br>additem(‘q704_vampire_boots’) 鞋<br>additem(‘q704 vampire steel sword’) 钢剑</p><p>黑色<br>additem(‘q702_vampire_boots’) 鞋<br>additem(‘q702_vampire_pants’) 裤<br>additem(‘q702_vampire_gloves’) 手<br>additem(‘q702_vampire_armor’) 胸<br>additem(‘q702_vampire_mask’) 面具<br>additem(‘q702 vampire steel sword’) 钢剑</p><h2 id="Bang！炸药："><a href="#Bang！炸药：" class="headerlink" title="Bang！炸药："></a>Bang！炸药：</h2><p>additem(‘White Frost 3’) 高等北风<br>additem(‘Grapeshot 3’) 高等蜂窝<br>additem(‘Silver Dust Bomb 3’) 高等月之尘(不能变形)<br>additem(‘Samum 3’) 高等樊风<br>additem(‘Dragons Dream 3’) 高等龙之梦<br>additem(‘Devils Puffball 3’) 高等恶魔之尘<br>additem(‘Dancing Star 3’) 高等舞动之星<br>additem(‘Dwimeritium Bomb 3’) 高等反魔法金属炸弹</p><h2 id="染料："><a href="#染料：" class="headerlink" title="染料："></a>染料：</h2><p>additem(‘Dye Red’,100) 红色护甲染剂<br>additem(‘Dye Blue’,100) 蓝色护甲染剂<br>additem(‘Dye Gray’,100) 灰色护甲染剂<br>additem(‘Dye Black’,100) 黑色护甲染剂<br>additem(‘Dye White’,100) 白色护甲染剂<br>additem(‘Dye Green’,100) 绿色护甲染剂<br>additem(‘Dye Brown’,100) 棕色护甲染剂<br>additem(‘Dye Purple’,100) 紫色护甲染剂<br>additem(‘Dye Yellow’,100) 黄色护甲染剂<br>additem(‘Dye Pink’,100) 粉红色护甲染剂<br>additem(‘Dye Orange’,100) 橘色护甲染剂<br>additem(‘Dye Turquoise’,100) 蓝绿色护甲染剂<br>additem(‘Dye Default’,100) 染色去除剂</p><h2 id="各种可获得的剑名称及代码："><a href="#各种可获得的剑名称及代码：" class="headerlink" title="各种可获得的剑名称及代码："></a>各种可获得的剑名称及代码：</h2><p>代码   中文名</p><p>additem(‘Abarad’)  冬之刃(非领主送的)<br>additem(‘Addandeith’)  艾丹·戴兹<br>additem(‘Aerondight’)  毛格林<br>additem(‘Anathema’)  咒逐<br>additem(‘Angivare’)  信鸽<br>additem(‘Anth’)   安司<br>additem(‘Arainne’)  艾林尼<br>additem(‘Arbitrator’)  仲裁者<br>additem(‘Ardaenye’)  阿德尼之剑<br>additem(‘Ashrune’)  灰符<br>additem(‘Azurewrath’)  阿祖烈之怒<br>additem(‘Barbersurgeon’) 理发医师<br>additem(‘Beannshie’)  女妖<br>additem(‘Blackunicorn’)  黑独角兽<br>additem(‘Bladeofys’)  Y字之刃<br>additem(‘Bloedeaedd’)  布洛德·艾德<br>additem(‘Bloodsword’)  血剑<br>additem(‘Breathofthenorth’) 北方气息<br>additem(‘Caerme’)  凯而米<br>additem(‘Caroline’)  卡洛琳<br>additem(‘Cheesecutter’)  酪奶剑<br>additem(‘Cleaver’)  屠夫披肩<br>additem(‘Dancer’)  舞者<br>additem(‘Daystar’)  白昼之星<br>additem(‘Deargdeith’)  迪尔格戴斯<br>additem(‘Deireadh’)  戴尔瑞<br>additem(‘Deithwen’)  戴斯文<br>additem(‘Devine’)  代文<br>additem(‘Dyaebl’)  迪亚布罗<br>additem(‘Fate’)   命运<br>additem(‘Forgottenvransword’)  忘却的弗朗剑<br>additem(‘Gloryofthenorth’)  北方荣耀<br>additem(‘Gwestog’)  诡斯托格<br>additem(‘Gwyhyr’)  古威希尔<br>additem(‘Gynvael’)  吉纳维尔<br>additem(‘Gynvaelaedd’)  吉纳维尔·艾德<br>additem(‘Harpy’)  人面妖鸟<br>additem(‘Harvall’)  哈维尔剑<br>additem(‘Havcaaren’)  私袅<br>additem(‘Headtaker’)  人头猎人<br>additem(‘Hjalmar_Short_Steel_Sword’)  哈尔玛的钢剑<br>additem(‘Inis’)   伊尼斯<br>additem(‘Karabela’)  卡拉贝拉<br>additem(‘Loathen’)  洛森<br>additem(‘Longclaw’)  长爪<br>additem(‘Lune’)   月牙<br>additem(‘Moonblade’)  月刃<br>additem(‘Mourner’)  哀悼者<br>additem(‘Naevdeseidhe’)  耐伏德·西迪<br>additem(‘Negotiator’)  谈判者<br>additem(‘Princessxenthiasword’)  杰西亚公主之剑<br>additem(‘Reachofthedamned’)  诅咒之地<br>additem(‘Robustswordofdolblathanna’)  高等多尔·布雷坦纳之剑<br>additem(‘Roseofaelirenn’) 夏拉韦玫瑰<br>additem(‘Tlareg’)  特拉雷格<br>additem(‘Torlara’)  托尔劳拉<br>additem(‘Torzirael’)  托尔吉薇艾儿<br>additem(‘Ultimatum’)  最后通牒<br>additem(‘Virgin’)  圣女<br>additem(‘Vynbleidd’)  希望<br>additem(‘Weeper’)  哀泣者<br>additem(‘WitcherSilverWolf’) 布雷伊德<br>additem(‘Wolf’)   狼<br>additem(‘Zerrikanterment’) 龙之剑<br>additem(‘q402 Skellige sword 3’) 冬之刃<br>additem(‘Zireael Sword’)  吉薇艾儿<br>additem(‘q505 crafted sword’)  吉薇艾儿(银，一级)<br>additem(‘mq1058_cat_school_sword’)  dlc里面猫派猎魔人送的剑，与白狼等级相关<br>additem (‘Olgierd Sabre’) 卡拉神刀</p><h2 id="药水"><a href="#药水" class="headerlink" title="药水"></a>药水</h2><p>additem(‘Thunderbolt 3 高等雷霆(加35攻击力，可使用5次，暗金)</p><p>additem(‘White Raffards Decoction 3 高等白色拉发达煎药(可恢复全部生命)</p><p>additem(‘White Honey 3 高等白蜂蜜(去除毒性)</p><p>additem(‘Cat 3 高等猫(夜视，免疫催眠)</p><p>additem(‘Maribor Forest 3 高等马里波森林(秒回肾上腺素0.15)</p><p>additem(‘Petris Philtre 3 高等派翠的魔药(加25法强)</p><p>additem(‘Blizzard 3 高等暴风雪(杀人子弹时间)</p><p>additem(‘Swallow 3 高等燕子(战时回血秒80)</p><p>additem(‘Tawny Owl 3 高等黄褐色猫头鹰(秒回10体力)</p><p>additem(‘Black Blood 3 高等黑血(反伤吸血鬼)</p><p>additem(‘Full Moon 3 高等满月(限时加最大生命)</p><p>additem(‘Golden Oriole 3 高等金鹫(毒素不掉血反而回血)</p><p>additem(‘Killer Whale 1 杀人鲸(水底气息增加50%)</p><p>additem(‘Recipe for Bear Pheromone Potion 1 熊费洛蒙图纸</p><p>additem(‘Recipe for Drowner Pheromone Potion 1 水鬼费洛蒙图纸</p><p>additem(‘Recipe for Nekker Pheromone Potion 1 孽鬼费洛蒙图纸</p><p>additem(‘White Frost 3 高等北风</p><p>additem(‘Grapeshot 3 高等蜂窝</p><p>additem(‘Silver Dust Bomb 3 高等月之尘(不能变形)</p><p>additem(‘Samum 3 高等樊风</p><p>additem(‘Dragons Dream 3 高等龙之梦</p><p>additem(‘Devils Puffball 3 高等恶魔之尘</p><p>additem(‘Dancing Star 3 高等舞动之星</p><p>additem(‘Dwimeritium Bomb 3 高等反魔法金属炸弹</p><h2 id="符文-Runes"><a href="#符文-Runes" class="headerlink" title="符文 Runes"></a>符文 Runes</h2><p>流血 additem(‘Rune devana greater’)</p><p>燃烧 additem(‘Rune dazhbog greater’)</p><p>冰冻 additem(‘Rune zoria greater’)</p><p>昏迷 additem(‘Rune triglav greater’)</p><p>中毒 additem(‘Rune morana greater’)</p><p>失衡 additem(‘Rune stribog greater’)</p><p>护甲穿刺 additem(‘Rune svarog greater’)</p><p>攻击力 additem(‘Rune elemental greater’)</p><p>肾上腺素 additem(‘Rune perun greater’)</p><p>法印强度 additem(‘Rune veles greater’)</p><p>镶嵌 Glyphs</p><p>阿尔德 additem(‘Glyph aard greater’)</p><p>亚克席 additem(‘Glyph axii greater’)</p><p>伊格尼 additem(‘Glyph igni greater’)</p><p>昆恩 additem(‘Glyph quen greater’)</p><p>亚登 additem(‘Glyph yrden greater’)</p><h2 id="全染色剂代码"><a href="#全染色剂代码" class="headerlink" title="全染色剂代码"></a>全染色剂代码</h2><p>additem(‘Dye Solution’,100) 染剂溶剂 (工艺栏)</p><p>additem(‘Dye Default’,100) 染色去除剂</p><p>additem(‘Dye Red’,100) 红色护甲染剂</p><p>additem(‘Dye Blue’,100) 蓝色护甲染剂</p><p>additem(‘Dye Gray’,100) 灰色护甲染剂</p><p>additem(‘Dye Black’,100) 黑色护甲染剂</p><p>additem(‘Dye White’,100) 白色护甲染剂</p><p>additem(‘Dye Green’,100) 绿色护甲染剂</p><p>additem(‘Dye Brown’,100) 棕色护甲染剂</p><p>additem(‘Dye Purple’,100) 紫色护甲染剂</p><p>additem(‘Dye Yellow’,100) 黄色护甲染剂</p><p>additem(‘Dye Pink’,100) 粉红色护甲染剂</p><p>additem(‘Dye Orange’,100) 橘色护甲染剂</p><p>additem(‘Dye Turquoise’,100) 蓝绿色护甲染剂</p><p>一些比较难得的材料</p><p>additem(‘Quebrith 硫磺</p><p>additem(‘Recipe for Quebrith 硫磺图纸</p><p>additem(‘Hydragenum 水银</p><p>additem(‘Albedo 净化剂</p><p>additem(‘Aether 以太</p><p>additem(‘White Gull 1 白海鸥</p><p>additem(‘Ekimma epidermis’,1) 血魔皮</p><p>additem(‘Rotfiend blood’,50) 腐食魔血</p><p>additem(‘Greater Rotfiend blood’,50) 大腐食魔血</p><p>additem(‘Cockatrice egg 石化鸡蛇蛋</p><p>additem(‘Cockatrice maw 石化鸡蛇胃</p><p>additem(‘Erynie eye 艾琳尼亚眼</p><p>additem(‘Nekker warrior liver 孽鬼战士的肝</p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>如何使用带2个符文技能的Ciri。</p><p>replaceplayer(Ciri) 后输入</p><p>addabl(CiriBlink) 解锁蓄力无敌斩</p><p>addabl(CiriCharge) 解锁快速重斩</p><p>additem(q403_ciri_meteor) ciri的火陨石</p><p>addabl(Ciri_Q111) 解锁2500血 600攻击力的ciri</p><p>replaceplayer(‘Ciri’) - play with Ciri 使用Ciri希里如要恢复replaceplayer(‘geralt’)</p><p>能够调用到脚本的其它角色名 Avallach，Nithral，Popiel，Baron，Kid，Ciri_naked，Ciri_wounded(能调用不代表可以使用，多数会导致CTD)</p><p>appearance 换装，可用于spwan生成角色。</p><p>例如： appearance(yennefer_naked) 果体叶奈法 可用模型参考 换装模型</p><p>ps. _<em>是2个</em> ciri的换装必须用spawn(‘cililla’)</p><p>addabl() 添加技能，可以直接调用很多功能。具体技能名参照这个文件()这只是直接调用游戏内设定好的技能设定值。</p><p>addabl(‘DamageBuff’) 增加200攻击力 200法印强度</p><p>addabl(‘ForceCriticalHits’) 100%暴击率</p><p>addabl(‘ConAthletic’) 1000血，100体力和更高的体力恢复率</p><p>addabl(‘ConImmortal’) - 99800血，100体力和更高的体力恢复率</p><p>addabl(‘StatsRangedSuperLame’) - i 增加瞄准时的子弹时间可以不升炸弹和十字弓技能了</p><p>UnlockAllAchievements 解锁所有成就 steam正版测试有效，大家慎用</p><p>witchcraft 注意：此命令会给你每样物品各一个，会导致游戏在那卡个几分钟</p><p>addmoney(数字) 加钱(数量)，十分实用的一个秘籍，在瓶子哥下岗后，用这个调钱吧。。例如addmoney(1000)就是加1000</p><p>removemoney(11) 减钱(数量)</p><p>eatapple() 吃苹果?</p><p>god() 上帝模式</p><p>god() off关闭上帝模式</p><p>PS:上帝模式就是锁血，不会达到whosyourdaddy那种一击必杀的效果，这个锁血会带到存档里，不想用的时候请关闭</p><p>god2() 上帝模式2档…此模式下你还是会受到伤害，但是你卡1滴血就是死不了</p><p>god3() 上帝模式3档….暂时未知有何区别</p><p>learnskill(‘sword_s10’) 学习技能(技能id)</p><p>testpause() 测试暂停?</p><p>testunpause() 测试反暂停?</p><p>likeaboss() 像个boss?</p><p>spawnenemy() 或spawn() 生成敌人或生物 所有可生成物的名称请参照 各类生成物名称(点击下载) 举例：眼前100只猫 spawn(‘cat’,100)</p><p>ShowAllFT(1) 打开全部快速旅行点就是路牌</p><p>AllowFT(1) 允许你随地使用快速旅行，类似老滚，节省时间必用，但玩着游戏不是都是来看风景妹子的吗</p><p>ShowKnownPins(1) 显示已知?地点，但是事件还是要你自己去触发</p><p>ShowPins(1) 显示地图上所有?地点</p><p>activateAllGlossaryCharacters() 解锁字典里所有的角色</p><p>activateAllGlossaryBeastiary 解锁字典里所有的怪物</p><p>staminaboy() Geralt耐力不减</p><p>resurrect() 死掉了，打这个就复活了</p><p>spawnBoatAndMount() 生成一条船并且坐在上面，最好水上用</p><p>Cat(1) 代替烦人的猫眼药剂，里面数值1是开，0是关</p><p>addskillpoints() 添加技能点数(数值)</p><p>addexp (1000) 增加经验值(数值)</p><p>setlevel() 设置等级数</p><p>levelup() 等级提升</p><p>cleardevelop 注意：此命令会重置等级为1级，并装备最初装备</p><p>shave 剃胡子</p><p>setbeard(1) 长胡子</p><p>WitcherHairstyle(‘1’) 发型1</p><p>WitcherHairstyle(‘2’) 发型2</p><p>WitcherHairstyle(‘3’) 发型3</p><p>settattoo(1) 巫师2宿醉任务奖励蓝色纹身1打开、0关闭</p><p>staminapony 蘿蔔(葡萄)无限体力</p><p>instantMount(‘horse’) 立刻上马</p><p>winGwint(122) 昆特牌胜利?</p><p>addgwintcards 快速添加全套牌</p><p>makeitrain 下雨</p><p>stoprain 停止下雨</p><p>Usage: xy(posX,posY)posX and posY are the coordinates you want to teleport to.I found some coordinates in the startup.bundle file (game&#x2F;fast_travel.csv)Tip: active godmode to avoid falldamage after teleportation (god())</p><p>使用xy坐标来传送，传送坐标具体在startup.bundle file (game&#x2F;fast_travel.csv)内，注意开启无敌模式来防止掉落摔死</p><p>Changeweather(WT_Clear) - you can find a list of the available weather in startup.bundle file (&#x2F;engine&#x2F;environments&#x2F;weather_YOURREGION.csv) e.g. snow in novigrad: WT_Snow</p><p>变更天气 天气代码参照 (&#x2F;engine&#x2F;environments&#x2F;weather_YOURREGION.csv)</p><p>例如诺维嘉德下雪：WT_Snow 详细天气代码参见： 天气代码(点击下载，额，暂无文件)</p><p>settime(TIME) 设置当前时间</p><p>healme() - you get full health 加满血</p><p>secretgwint() - starts gwint game 开始打牌</p><h2 id="以下是快速增加一些物品"><a href="#以下是快速增加一些物品" class="headerlink" title="以下是快速增加一些物品"></a>以下是快速增加一些物品</h2><p>AddAllThMaps 3个选派的所有藏宝图</p><p>addbolts 添加全箭矢</p><p>addcraft 添加全工艺品?未确认</p><p>addsteelswords 添加全钢剑</p><p>addsteelswords2 添加全钢剑2</p><p>addwolfdlc 添加狼dlc</p><p>addsilverswords 添加全银剑</p><p>addsilverswords2 添加全银剑2</p><p>addcrossbows 添加全十字弓</p><p>addarmor 添加全护甲</p><p>addarmor2 添加全护甲2</p><p>addpants 添加全裤子</p><p>addboots 添加全鞋子</p><p>addgloves 添加全手套</p><p>addsets 添加全套装</p><p>addbooks 添加全书籍</p><p>addlore 添加知识</p><p>addlore2 添加知识2</p><p>addfood 添加全食物</p><p>adddrinks 添加全酒精</p><p>addtrophies 添加全战利品</p><p>addmiscaddhorseitems 马的物品</p><p>addupgrades 全剑部位镶嵌符文</p><p>addcraftingingre 全打造矿物</p><p>addCraftingItem 全打造材料</p><h2 id="图纸类"><a href="#图纸类" class="headerlink" title="图纸类"></a>图纸类</h2><p>learnallschematics 学会所有打造图纸</p><p>addcraftedsteel 铁图纸</p><p>addcraftedsilver 银图纸</p><p>addcraftedsteelrelic 旧铁图纸</p><p>addcraftedsilverrelic 旧银图纸</p><p>addcraftedranged 范围图纸</p><p>addcraftedboots 鞋子图纸</p><h2 id="蓝图类"><a href="#蓝图类" class="headerlink" title="蓝图类"></a>蓝图类</h2><p>addschematicsboots 获得鞋子蓝图</p><p>addschematicspants 获得裤子蓝图</p><p>addschematicsgloves 获得手套蓝图</p><p>addschematicsarmor 获得盔甲蓝图</p><p>addschematicscomponents 获得组件蓝图</p><p>addschematicsupgrades 获得升级蓝图</p><p>addschematicsbolts 获得螺栓蓝图</p><h2 id="药剂配方类"><a href="#药剂配方类" class="headerlink" title="药剂配方类"></a>药剂配方类</h2><p>addmutagens 所有突变药剂</p><p>addmutageningredients 获得所有种类突变物</p><p>addmutagenrecipes 学会所有煎药的配方</p><p>addrecipesoils 学会所有剑油的配方</p><p>addrecipesbombs 学会所有炸弹配方</p><p>addrecipespotions 学会所有魔药配方</p><p>addrecipespotions2 学会所有高级魔药配方</p><p>addherbs 添加所有药草</p><p>addkeys 所有钥匙</p><p>addvaluables 所有贵重物</p><p>additem(‘gwint_card_eredin_gold’, 1) 添加物品(物品id)</p><p>小技巧: 添加多数量物品时 例如洗点药 additem(‘Clearing Potion’,20) 这样就是20瓶一次添 物品名区分大小写 必须完全一致</p><p>additemfood 所有食物</p><p>additemalchemy 所有炼金术</p><p>additemcrafting 所有艺术品</p><p>additemleather 所有皮</p><p>additemmetals 所有矿物</p><p>additemrunesupgrades 所有符文</p><p>additemmonstrous 所有怪物材料</p><p>additemsprecious 所有贵重物品</p><p>addjunk 所有垃圾</p><p>addjunk2 所有垃圾2</p><p>addquestitems 任务物品</p><p>addquestitems2 任务物品2</p><p>addquestitems3 任务物品3</p><p>addtreasurehuntitems 宝物猎人物品</p><p>addcharacterdecorations 个性装饰</p><p>addmutageningredients 添加所有种类突变物</p><p>addupgrades 全部位镶嵌符文</p><p>adddrinks 添加全酒精</p><p>addbolts 添加全箭矢</p><p>addcrossbows 添加全十字弓</p><p>addherbs 添加所有药草</p><p>addmutagens 添加所有煎药</p><p>addmutagenrecipes 学会所有煎药的配方</p><p>addrecipesoils 学会所有剑油的配方</p><p>addrecipesbombs 学会所有炸弹配方</p><p>addrecipespotions 学会所有魔药配方</p><p>addrecipespotions2 学会所有高级魔药配方</p><h2 id="生成生物"><a href="#生成生物" class="headerlink" title="生成生物"></a>生成生物</h2><p>spawn(‘Name’,#number)</p><p>spawn(‘succubus’) 1级法师</p><p>spawn(‘witcher’) 1级无名</p><p>spawn(‘vesemir’) 维瑟米尔</p><p>spawn(‘yennefer’) 叶奈法 不显示名 不能聊天</p><p>spawn(‘triss’) 特莉丝 不显示名 不能聊天</p><p>spawn(‘keira’) 凯拉 不显示名 不能聊天</p><p>spawn(‘grenn’) 葛澜 7级</p><p>spawn(‘cirilla’) 希里</p><p>spawn(‘zoltan’) 卓尔坦</p><p>spawn(‘sorceress’) 反派 叶奈法 1级</p><p>spawn(‘witch1’) 呢喃婆 28级</p><p>spawn(‘witch_1’) 呢喃婆 28级</p><p>spawn(‘_quest__witch_1’) 呢喃婆 28级</p><p>spawn(‘witch2’) 煮婆 28级</p><p>spawn(‘witch_2’) 煮婆 28级</p><p>spawn(‘_quest__witch_2’) 煮婆 28级</p><p>spawn(‘witch3’) 织婆 28级</p><p>spawn(‘witch_3’) 织婆 28级</p><p>spawn(‘witch_q105’) 织婆 28级 不死</p><p>spawn(‘_quest__witch_3’) 织婆 28级</p><p>spawn(‘eredin’) 艾瑞汀 30级</p><p>spawn(‘imlerith’) 艾瑞汀手下 26级</p><p>spawn(‘caranthir’) 艾瑞汀手下 26级</p><p>spawn(‘wildhunt_mage’) 狂猎法师 1级</p><p>spawn(‘denied_area’) 狂猎士兵 1级</p><p>spawn(‘wildhunt_sword’) 狂猎士兵 1级</p><p>spawn(‘wild_hunt_sword’) 狂猎士兵 1级</p><p>spawn(‘wildhunt_axe’) 狂猎士兵 1级</p><p>spawn(‘wild_hunt_axe’) 狂猎士兵 1级</p><p>spawn(‘wildhunt_minion_lvl1’) 狂猎之犬 4级</p><p>spawn(‘wildhunt_minion’) 狂猎之犬 27级</p><p>spawn(‘wildhunt_minion_lvl2’) 狂猎之犬 27级</p><p>spawn(‘wildhunt_minion_mh’) 狂猎之犬 37级</p><p>spawn(‘wild_dog’) 野狗 1级</p><p>spawn(‘wild_dog_lvl1’) 野狗 1级</p><p>spawn(‘wolf_lvl1__summon_were’) 狼 1级</p><p>spawn(‘wolf’) 狼 5级</p><p>spawn(‘wolf_lvl1’) 狼 5级</p><p>spawn(‘wolf_alpha’) 座狼 8级</p><p>spawn(‘wolf_lvl2__alpha’) 座狼 8级</p><p>spawn(‘wolf_white’) 白狼 15级</p><p>spawn(‘wolf_white_lvl2’) 白狼 15级</p><p>spawn(‘wolf_white_lvl3__alpha’) 白狼 15级</p><p>spawn(‘wolf_lvl1__summon’) 狼 22级</p><p>spawn(‘_quest__bear_grizzly_honey’) 熊 1级</p><p>spawn(‘bear_black’) 熊 6级</p><p>spawn(‘bear_lvl1__black’) 熊 6级</p><p>spawn(‘bear_berserker_lvl1’) 熊 11级</p><p>spawn(‘bear_grizzly’) 熊 12级</p><p>spawn(‘grizzly’) 熊 12级</p><p>spawn(‘bear_lvl2__grizzly’) 熊 12级</p><p>spawn(‘bear’) 熊 16级</p><p>spawn(‘bear_white’) 熊 16级</p><p>spawn(‘bear_berserker’) 熊 16级</p><p>spawn(‘bear_lvl3__white’) 熊 16级</p><p>spawn(‘_quest__werewolf’) 狼人 5级</p><p>spawn(‘werewolf_lvl1’) 狼人 5级</p><p>spawn(‘warewolf’) 狼人 17级</p><p>spawn(‘werewolf’) 狼人 17级</p><p>spawn(‘lycanthrope’) 狼人 17级</p><p>spawn(‘lycan’) 狼人 17级</p><p>spawn(‘werewolf_lvl2’) 狼人 17级</p><p>spawn(‘werewolf_lvl3__lycan’) 狼人 17级</p><p>spawn(‘werewolf_lvl4__lycan’) 狼人 25级</p><p>spawn(‘drowner’) 水鬼 4级</p><p>spawn(‘drowner_lvl1’) 水鬼 4级</p><p>spawn(‘drowner_lvl2’) 水鬼 9级</p><p>spawn(‘drowner_lvl3’) 水鬼 15级</p><p>spawn(‘ddead’) 水鬼 18级</p><p>spawn(‘drowner_lvl4__dead’) 水鬼 18级</p><p>spawn(‘nekker’) 孽鬼 6级</p><p>spawn(‘nekker_lvl1’) 孽鬼 6级</p><p>spawn(‘nekker_lvl2’) 孽鬼 8级</p><p>spawn(‘nekker_lvl3__warrior’) 孽鬼战士 12级</p><p>spawn(‘nekker_warrior’) 孽鬼战士 12级</p><p>spawn(‘nekker_mh__warrior’) 孽鬼战士 15级</p><p>spawn(‘ghoul_lesser’) 食尸鬼 2级</p><p>spawn(‘ghoul_lvl1’) 食尸鬼 2级</p><p>spawn(‘ghoul’) 食尸鬼 9级</p><p>spawn(‘ghoul_lvl2’) 食尸鬼 9级</p><p>spawn(‘alghoul’) 巨食尸鬼 14级</p><p>spawn(‘alghoul_lvl1’) 巨食尸鬼 14级</p><p>spawn(‘ghoul_lvl3’) 食尸鬼 15级</p><p>spawn(‘alghoul_lvl2’) 巨食尸鬼 17级</p><p>spawn(‘alghoul_lvl3’) 巨食尸鬼 21级</p><p>spawn(‘alghoul_mh’) 巨食尸鬼 25级</p><p>spawn(‘gargoyle’) 石像鬼 13级</p><p>spawn(‘gargoyle_lvl1’) 石像鬼 13级</p><p>spawn(‘rotfiend_lvl1’) 腐食魔 6级</p><p>spawn(‘rotfiend’) 腐食魔 6级</p><p>spawn(‘rotfiend_lvl2’) 贪食者 13级</p><p>spawn(‘rotfiend_large’) 贪食都 13级</p><p>spawn(‘fogling_lvl1__doppelganger’) 小雾妖 0级</p><p>spawn(‘_quest__fogling’) 小雾妖 1级</p><p>spawn(‘fogling’) 小雾妖 4级</p><p>spawn(‘fogling_lvl1’) 小雾妖 4级</p><p>spawn(‘fogling_lvl2’) 小雾妖 10级</p><p>spawn(‘fogling_lvl3__willowisp’) 小雾妖 19级</p><p>spawn(‘fogling_mh’) 小雾妖 29级</p><p>spawn(‘wraith’) 妖灵 7级</p><p>spawn(‘wraith_lvl1’) 妖灵 7级</p><p>spawn(‘wraith_mh’) 妖灵 24级</p><p>spawn(‘pesta’) 女瘟妖 1级</p><p>spawn(‘_quest__noonwright_pesta’) 女瘟妖 1级</p><p>spawn(‘noonwraith_lvl1__doppelganger’) 日间妖灵 1级</p><p>spawn(‘noonwraith’) 日间妖灵 15级</p><p>spawn(‘noonwraith_lvl1’) 日间妖灵 15级</p><p>spawn(‘noonwraith_mh’) 日间妖灵 26级</p><p>spawn(‘nightwraith_lvl1__doppelganger’) 夜之妖灵 1级</p><p>spawn(‘nightwraith’) 夜之妖灵 15级</p><p>spawn(‘nightwraith_lvl1’) 夜之妖灵 15级</p><p>spawn(‘nightwraith_mh’) 夜之妖灵 34级</p><p>spawn(‘wight’) 墓穴女巫 28级</p><p>spawn(‘gravehag’) 墓穴女巫 28级</p><p>spawn(‘hag_grave_lvl1’) 墓穴女巫 28级</p><p>spawn(‘hag_grave__mh’) 墓穴女巫 35级</p><p>spawn(‘waterhag’) 沼泽巫婆 8级</p><p>spawn(‘hag_water_lvl1’) 沼泽巫婆 8级</p><p>spawn(‘hag_water_lvl2’) 沼泽巫婆 20级</p><p>spawn(‘hag_water_mh’) 沼泽巫婆 30级</p><p>spawn(‘ice_giant’) 寒冰巨人 14级</p><p>spawn(‘icegiant’) 寒冰巨人 14级</p><p>spawn(‘ice_golem’) 冰元素 30级</p><p>spawn(‘elemental_dao_lvl3__ice’) 冰元素 30级</p><p>spawn(‘elemental_dao_lvl1’) 土元素 25级</p><p>spawn(‘dao’) 土元素 27级</p><p>spawn(‘elemental_dao_lvl2’) 土元素 27级</p><p>spawn(‘elemental_dao_mh’) 土元素 49级</p><p>spawn(‘ifryt’) 火巨灵 9级</p><p>spawn(‘ifrit’) 火巨灵 9级</p><p>spawn(‘golem_lvl2__ifryt’) 火巨灵 9级</p><p>spawn(‘lessog’) 鹿首精 20级</p><p>spawn(‘leszy’) 鹿首精 20级</p><p>spawn(‘leshy’) 鹿首精 20级</p><p>spawn(‘leshen’) 鹿首精 20级</p><p>spawn(‘lessun’) 鹿首精 20级</p><p>spawn(‘lessog_lvl1’) 鹿首精 20级</p><p>spawn(‘lessog_lvl2__ancient’) 古代鹿首精 34级</p><p>spawn(‘lessog_mh’) 鹿首精 49级</p><p>spawn(‘fugas_lvl1’) 林精 5级</p><p>spawn(‘fugas’) 林精 27级</p><p>spawn(‘fugas_lvl2’) 林精 27级</p><p>spawn(‘arachas_lvl1’) 蟹蜘蛛 11级</p><p>spawn(‘arachas’) 蟹蜘蛛 11级</p><p>spawn(‘arachas_armored’) 装甲蟹蜘蛛 26级</p><p>spawn(‘armoredarachas’) 装甲蟹蜘蛛 26级</p><p>spawn(‘arachas_lvl2__armored’) 装甲蟹蜘蛛 26级</p><p>spawn(‘arachas_poison’) 毒蟹蜘蛛 31级</p><p>spawn(‘poisonarachas’) 毒蟹蜘蛛 31级</p><p>spawn(‘poisonedarachas’) 毒蟹蜘蛛 31级</p><p>spawn(‘arachas_lvl3__poison’) 毒蟹蜘蛛 31级</p><p>spawn(‘endriaga_worker’) 安德莱格工兵 9级</p><p>spawn(‘endriaga_lvl1__worker’) 安德莱格工兵 9级</p><p>spawn(‘endriaga’) 安德莱格勇士 11级</p><p>spawn(‘endrega’) 安德莱格勇士 11级</p><p>spawn(‘endriaga_tailed’) 安德莱格勇士 11级</p><p>spawn(‘endriaga_lvl2__tailed’) 安德莱格勇士 11级</p><p>spawn(‘endriaga_lvl3__spikey’) 公安德莱格 20级</p><p>spawn(‘endriaga_spikey’) 公安德莱格 20级</p><p>spawn(‘katakan’) 卡塔卡恩 11级</p><p>spawn(‘vampire_katakan_lvl1’) 卡塔卡恩 11级</p><p>spawn(‘katakan_large’) 卡塔卡恩 45级</p><p>spawn(‘katakanlarge’) 卡塔卡恩 45级</p><p>spawn(‘vampire_katakan_mh’) 卡塔卡恩 45级</p><p>spawn(‘cyclop’) 独眼怪 21级</p><p>spawn(‘cyclops’) 独眼怪 21级</p><p>spawn(‘cyclop_lvl1’) 独眼怪 21级</p><p>spawn(‘bies_lvl1’) 恶魔 16级</p><p>spawn(‘bies’) 恶魔 28级</p><p>spawn(‘bies_lvl2’) 恶魔 28级</p><p>spawn(‘bies_mh’) 恶魔 50级</p><p>spawn(‘black_troll’) 黑巨魔 52级</p><p>spawn(‘blacktroll’) 黑巨魔 52级</p><p>spawn(‘troll_black’) 黑巨魔 52级</p><p>spawn(‘troll_cave_mh__black’) 黑巨魔 52级</p><p>spawn(‘troll_cave_lvl1’) 发狂的岩石巨魔 10级</p><p>spawn(‘troll_cave_lvl2’) 发狂的岩石巨魔 16级</p><p>spawn(‘cave_troll’) 发狂的岩石巨魔 16级</p><p>spawn(‘cavetroll’) 发狂的岩石巨魔 16级</p><p>spawn(‘troll’) 发狂的岩石巨魔 16级</p><p>spawn(‘czart’) 雠特魔 27级</p><p>spawn(‘czart_lvl1’) 雌特魔 27级</p><p>spawn(‘czart_mh’) 雌特魔 51级</p><p>spawn(‘ekima’) 血魔 11级</p><p>spawn(‘ekimma’) 血魔 11级</p><p>spawn(‘vampire_ekima_lvl1’) 血魔 11级</p><p>spawn(‘vampire_ekima_mh’) 血魔 40级</p><p>spawn(‘golem_lvl1’) 魔像 6级</p><p>spawn(‘golem’) 魔像 29级</p><p>spawn(‘golem_lvl2’) 魔像 29级</p><p>spawn(‘troll_cave_lvl3__ice’) 冰巨魔 26级</p><p>spawn(‘harpy’) 人面妖鸟 7级</p><p>spawn(‘harpy_lvl1’) 人面妖鸟 7级</p><p>spawn(‘harpy_lvl2’) 人面妖鸟 13级</p><p>spawn(‘siren’) 女海妖 13级</p><p>spawn(‘siren_lvl1’) 女海妖 13级</p><p>spawn(‘siren_lvl2__lamia’) 海克娜 19级</p><p>spawn(‘siren_mh__lamia’) 海克娜 25级</p><p>spawn(‘gryphon’) 狮鹫兽 4级</p><p>spawn(‘griffon’) 狮鹫兽 4级</p><p>spawn(‘gryphon_lvl1’) 狮鹫兽 4级</p><p>spawn(‘gryphon_lvl2’) 狮鹫兽 25级</p><p>spawn(‘volcanic_gryphon’) 大狮鹫兽 48级</p><p>spawn(‘gryphon_lvl3__volcanic’) 大狮鹫兽 48级</p><p>spawn(‘gryphon_mh__volcanic’) 大狮鹫兽 54级</p><p>spawn(‘cockatrice’) 石化鸡蛇 20级</p><p>spawn(‘basilisk’) 石化蜥蜴 32级</p><p>spawn(‘basilisk_lvl1’) 石化蜥蜴 32级</p><p>spawn(‘cockatrice_lvl1’) 石化鸡蛇 20级</p><p>spawn(‘cockatrice_mh’) 石化鸡蛇 25级</p><p>spawn(‘forktail_lvl2’) 叉尾龙 15级</p><p>spawn(‘forktail_lvl1’) 叉尾龙 18级</p><p>spawn(‘forktail’) 叉尾龙 37级</p><p>spawn(‘forktail_mh’) 叉尾龙 48级</p><p>spawn(‘wyvern’) 翼手龙 9级</p><p>spawn(‘wyvern_lvl1’) 翼手龙 9级</p><p>spawn(‘wyvern_lvl2’) 翼手龙 14级</p><p>spawn(‘wyvern_mh’) 翼手龙 18级</p><p>spawn(‘erynia’) 艾琳尼亚 13级</p><p>spawn(‘harpy_lvl3__erynia’) 艾琳尼亚 13级</p><p>spawn(‘willo_wisp’) 潭加洛 19级</p><p>spawn(‘willowisp’) 潭加洛 19级</p><p>spawn(‘baronswife’) 安娜 10级</p><p>spawn(‘gravehag_barons_wife’) 安娜 10级</p><p>spawn(‘hag_grave_lvl1__barons_wife’) 安娜 10级</p><p>spawn(‘lamia’) 海克娜 19级</p><p>spawn(‘simulacrum’) 幻形怪 36级</p><p>spawn(‘golem_lvl3’) 幻形怪 36级</p><p>spawn(‘miscreant’) 死婴无伤害</p><p>spawn(‘_quest__miscreant’) 死婴无伤害</p><p>spawn(‘botchling’) 尸婴 24级</p><p>spawn(‘_quest__miscreant_greater’) 死婴 24级</p><p>spawn(‘_quest__him’) 希姆 13级</p><p>spawn(‘him’) 希姆 13级</p><p>spawn(‘arachas_mh__poison’) 哈里西 51级</p><p>spawn(‘_quest__godling’) 地精</p><p>spawn(‘_quest__endriaga_spiral’) 沙虫 25级</p><p>spawn(‘heart’) 无伤害</p><p>spawn(‘cat’) 猫</p><p>spawn(‘chicken’) 鸡</p><p>spawn(‘cow’) 牛</p><p>spawn(‘crab’)</p><p>spawn(‘crow’) 乌鸦</p><p>spawn(‘deer’) 鹿</p><p>spawn(‘dog’) 狗</p><p>spawn(‘fish_kingfish’) 鱼</p><p>spawn(‘fish_mackerel’)</p><p>spawn(‘fish_roach’)</p><p>spawn(‘fish_tuna’) 鱼</p><p>spawn(‘goat’) 山羊</p><p>spawn(‘goose’) 鹅</p><p>spawn(‘goose_leader’) 鹅</p><p>spawn(‘hare’) 兔子</p><p>spawn(‘mountain_goat’) 山羊</p><p>spawn(‘owl’) 猫头鹰</p><p>spawn(‘pig’) 猪</p><p>spawn(‘pigeon’) 鸽子</p><p>spawn(‘ram’) 公羊</p><p>spawn(‘rat’) 老鼠</p><p>spawn(‘rooster’) 公鸡</p><p>spawn(‘seagull’) 鸟</p><p>spawn(‘sheep’) 绵羊</p><p>spawn(‘snow_deer’) 母鹿</p><p>spawn(‘snow_rabbit’) 雪免</p><p>spawn(‘sparrow’) 鸟</p><p>spawn(‘swallow’) 鸟</p><p>spawn(‘toad’) 蛤蟆</p><p>spawn(‘whale’) 大鲸鱼</p><p>spawn(‘boat’) 帆船</p><p>spawn(‘playerHorse’) 马</p><p>spawn(‘horse’) 马</p><p>spawn(‘horse_manager’)</p><p>spawn(‘poison_cloud’) 毒气弹</p><p>spawn(‘rotfiend_explode’) 一堆血</p><p>spawn(‘barrel’) 炸药桶</p><p>spawn(‘beehive’) 蜜蜂 在地下</p><p>spawn(‘lure_cloud’) 地面变黑 多用几次有反应</p><p>spawn(‘yennefer_bubble’) 白雾</p><p>spawn(‘yennefer_bubble_2’) 白雾</p><p>spawn(‘yennefer_bubble_3’) 白雾</p><p>spawn(‘frozen_soldier’) 巨型景观剑</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;巫师3控制台代码&quot;&gt;&lt;a href=&quot;#巫师3控制台代码&quot; class=&quot;headerlink&quot; title=&quot;巫师3控制台代码&quot;&gt;&lt;/a&gt;巫师3控制台代码&lt;/h1&gt;&lt;h2 id=&quot;控制台打开方式&quot;&gt;&lt;a href=&quot;#控制台打开方式&quot; class=&quot;header</summary>
      
    
    
    
    <category term="游戏" scheme="https://blog.lthero.cn/categories/%E6%B8%B8%E6%88%8F/"/>
    
    
    <category term="游戏" scheme="https://blog.lthero.cn/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="巫师3" scheme="https://blog.lthero.cn/tags/%E5%B7%AB%E5%B8%883/"/>
    
  </entry>
  
  <entry>
    <title>TCP基于丢包的行为分析与缺点</title>
    <link href="https://blog.lthero.cn/2022/11/24/TCP-BasedOnDropingAnalysis/"/>
    <id>https://blog.lthero.cn/2022/11/24/TCP-BasedOnDropingAnalysis/</id>
    <published>2022-11-24T14:59:32.000Z</published>
    <updated>2022-11-24T15:01:21.843Z</updated>
    
    <content type="html"><![CDATA[<h1 id="TCP基于丢包的CBUIC算法与BBR算法的分析"><a href="#TCP基于丢包的CBUIC算法与BBR算法的分析" class="headerlink" title="TCP基于丢包的CBUIC算法与BBR算法的分析"></a>TCP基于丢包的CBUIC算法与BBR算法的分析</h1><p>原文章：<a href="https://blog.csdn.net/dog250/article/details/52939004">https://blog.csdn.net/dog250/article/details/52939004</a></p><p><img src="https://img-blog.csdn.net/20161026224121325?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="TCP链路"></p><p>假设TCP端节点之间的BDP【<strong>带宽时延积</strong>】为C，那么：<br><strong>C &#x3D; C1 + C2 (其中C1是网络本身的管道容量，而C2是路由器节点缓存的容量)</strong><br>由于路径中最小带宽为B，那么整个链路的带宽将由B决定，在排队未发生时(即没有发生拥塞时)，假设测量RTT为rtt0，发送速率为B0&#x3D;B，则：<br><strong>C1 &#x3D; B0*rtt0<br>C &#x3D; B0*rtt0 +C2 &gt; B*rtt0</strong><br>此时，任何事情均为发生，一切平安无事！继续着TCP“加性增”的行为，此时发送端继续线性增加发送速率，到达B1，此时：<br><strong>B0*rtt0 &lt; B1*rtt1</strong><br>C是客观的不变量，这会导致C2开始被填充，即开始轻微排队。排队会造成RTT的增加。假设C2已经被加性增特性填充到满载的临界，此时发送带宽为B2，即：<br><strong>C &#x3D; B2*rtt2 &#x3D; B*rtt0 + C2</strong></p><p>第二类缓存的时间墙特征导致了排队的发生，而排队会导致一个TCP连接中数据包的RTT变大。为了讨论方便，我们假设TCP端节点之间管道最细处(即Bottleneke处)的带宽为B，那么正如上图所表明的，我把TCP端节点之间的网络中，凡是带宽比B大的网络均包含在第二类缓存中，也就是说，凡是会引起排队的路径，均是第二类缓存。</p><h2 id="TCP之CUBIC算法【基于丢包算法】"><a href="#TCP之CUBIC算法【基于丢包算法】" class="headerlink" title="TCP之CUBIC算法【基于丢包算法】"></a>TCP之CUBIC算法【基于丢包算法】</h2><h3 id="理想功能："><a href="#理想功能：" class="headerlink" title="理想功能："></a>理想功能：</h3><p>TCP在临界点的加性增窗行为，<strong>理想状态下应该让发送方获得第一类缓存</strong>，<strong>也就是链路吞吐量的大小</strong>【C1大小】。</p><h3 id="实际功能："><a href="#实际功能：" class="headerlink" title="实际功能："></a>实际功能：</h3><p>但实际上，因为路由器有了第二类缓存，导致TCP<strong>变成了探测C1+C2的容量</strong>。并且，随着C2的增加而增加，RTT的最终测量值，即rtt2则越大！这就是深队列丢包探测的原因。</p><h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>之所以基于丢包的拥塞控制算法的带宽利用率低，就是由于<strong>其填充第二类缓存</strong>，而<strong>增加了排队延迟</strong>造成的<strong>虚假且逐渐增大的RTT</strong>，最终导致了BDP很大的假象。而这一切的目的，却仅仅是为了探测丢包，自以为在丢包前已经100%的利用了带宽，然而在丢包后，所有的一切都加倍还了回去！是丢包导致了带宽利用率的下降，而不是增加！！</p><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>​事实上，通过<strong>探测时间窗口内的最大带宽和最小RTT</strong>，就可以明确知道<strong>是不是已经填满了第一类缓存</strong>，并<strong>停止继续填充第二类缓存</strong>，即向最小化排队的方向收敛！</p><p>​曾经的基于时延的算法，比如Vegas，其实已经在走这条路了，它已经知道RTT的增加意味着排队了，只是它没有采用时间窗口过滤掉常规波动，而是采用了RTT增量窗口来过滤波动，最终甚至由于RTT抖动主动减少窗口，所以会造成竞争性不足。不管怎样，这是一种君子行为，它总是无力对抗<strong>基于丢包算法的流氓行为</strong>。</p><p>​BBR综合了二者，对待君子则君子，即：<strong>不会填充第二类缓存</strong>，就不会造成路由器排队。因为一旦排队，所有连接的RTT均会增加，对类似Vegas的不利。对待流氓则流氓，即：采用滑动时间窗口抗带宽噪声，采用固定超时时间窗口抗RTT噪声，时间窗口内，决不降速。</p><hr><p>从上面的分析看来，<strong>第二类缓存没有必要</strong>？</p><h2 id="第二类缓存【路由器缓存】的用处"><a href="#第二类缓存【路由器缓存】的用处" class="headerlink" title="第二类缓存【路由器缓存】的用处"></a>第二类缓存【路由器缓存】的用处</h2><p>第二类缓存的作用是为了适配统计复用的分组交换网络上路由器<strong>处理不过来到来的数据包</strong>而引入的，并用来缓冲不同链路上的速度。如果没有路由器交换机节点的存在，那么第二类缓存这里什么也没有：</p><p><img src="https://img-blog.csdn.net/20161026224221294?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p><p>如果你想最快速度理解上图中泊松到达这个点的入口行为和固定速率发出的出口行为，请考虑丁字路由或十字路口，和路由器一样，只有在交叉点的位置才需要第二类缓存来平滑多方瞬时速率的不匹配特征！我以丁字路口为例：</p><p><img src="https://img-blog.csdn.net/20161026224301779?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p><p>不管哪里为应对瞬时到达率而加入的”缓存“，都是第二类缓存，这类缓存的<strong>目的是临时缓存瞬时到达过快的数据或者车流</strong>，这就是统计复用的分组交换网节点缓存的本质！然而<strong>一旦这些缓存被误用了</strong>，拥塞就一定会发生！误用行为很多，比如<strong>UDP毫无节制的发包</strong>，比如<strong>TCP依靠填满第二类缓存而发现拥塞</strong>，讽刺的是，很大程度上，<strong>拥塞是TCP自己造成的</strong>，要想发现拥塞，就必须要先制造拥塞。</p><h2 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h2><p><strong>尽量减少网络交换节点处队列的排队</strong>！通过上一节的最后，我们知道，交换节点出口的速率恒定，而入口可能会面临突发，虽然在统计意义上，出入口的处理能力匹配即可，然而即便大多数时候到达速率都小于出口速率，只要有一瞬间的突发就可能冲击队列到爆满！事实上队列缓存存在的理由：<strong>解决到达速率大于出口速率</strong></p><h4 id="基于丢包的收敛图"><a href="#基于丢包的收敛图" class="headerlink" title="基于丢包的收敛图"></a>基于丢包的收敛图</h4><p><img src="https://img-blog.csdn.net/20161026224333982?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="基于丢包的收敛图"></p><h3 id="BBR的收敛方案"><a href="#BBR的收敛方案" class="headerlink" title="BBR的收敛方案"></a>BBR的收敛方案</h3><p>BBR收敛过程并<strong>不是独立的，它们是配合的</strong>。BBR算法根本就没有定义收敛点，只是大家互相配合，<strong>满足其带宽之和不超过第一类缓存的大小</strong>，即<strong>真正BDP</strong>的大小，在这个约束条件下，BBR最终自己找到了一个稳定的平衡点。</p><ol><li>如果没有其它连接，一个连接会一直试图占满所有带宽。</li><li>一旦有新连接，则<strong>老连接</strong>尽量一次性或者很短时间内出<strong>让部分带宽</strong>，然后在这些带宽被利用之前，老连接不再抢带宽。</li><li>超过6个RTT周期之后，<strong>老连接重新开始新一轮抢占</strong>，出让，等待被利用的过程，从而和其它的连接一起收敛到平衡点。</li></ol><p>因此，和加性增乘性减的独立收敛方案不同，BBR<strong>一开始</strong>就是考虑到<strong>对方存在</strong>的收敛方案</p><h4 id="BBR的收敛图"><a href="#BBR的收敛图" class="headerlink" title="BBR的收敛图"></a>BBR的收敛图</h4><p><img src="https://img-blog.csdn.net/20161026224529608?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="BBR的收敛图"></p><p>很遗憾，BBR无法识别CUBIC的存在！当BBR将cwnd缩减的时候，CUBIC会继续填充第二类缓存，直到透支掉最后的那一个字节。随后，也许你会认为CUBIC会执行乘性减来缩减cwnd，是的，确实如此，然而即使这样，也不能指望它们会腾出带宽，因为CUBIC的行为是各自独立的，你无法假设它们会同时进入乘性减窗，因此几乎可以肯定，共享链路上的缓存总是趋向与被填满的状态，这都是CUBIC的所为。然而怎能怪它呢，毕竟它的基础就是填满所有两类缓存为止，决不降速(不同于BBR的发现排队之前绝不减速的特性)。因此，BBR和CUBIC共存的时候，很有可能会出现全盘皆输的局面。</p><h2 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h2><p>CUBIC还算是迄今比较伟大的算法，它不会轻易被BBR取代，但是它需要被改进。<br>    首先，在没有AQM时，加性增乘性减本身并没有错，一般的丢包都是尾部拥塞丢包，这对于TCP拥塞控制而言，基于丢包的拥塞探测太容易做了，但是尾部丢包会带来一系列的问题，为了解决这些问题，出现了AQM，比如RED之类的丢包算法，这样一来就无法区别RED丢包，尾部丢包，线路噪声丢包，乱序未丢包这几类现象了。问题的严重性是由拥塞算法对丢包的敏感性造成的，只要有丢包，或者说仅仅是按照自己的逻辑检测到了可能的丢包，就好像出了大事一般，窗口会大幅度下降！！然而，噪声丢包和乱序并不是拥塞，所以如果能过滤掉这两类，CUBIC的效率一定会有大的提高！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;TCP基于丢包的CBUIC算法与BBR算法的分析&quot;&gt;&lt;a href=&quot;#TCP基于丢包的CBUIC算法与BBR算法的分析&quot; class=&quot;headerlink&quot; title=&quot;TCP基于丢包的CBUIC算法与BBR算法的分析&quot;&gt;&lt;/a&gt;TCP基于丢包的CBUIC算</summary>
      
    
    
    
    <category term="计算机网络" scheme="https://blog.lthero.cn/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    <category term="TCP" scheme="https://blog.lthero.cn/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP/"/>
    
    
    <category term="计算机网络" scheme="https://blog.lthero.cn/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    <category term="TCP" scheme="https://blog.lthero.cn/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>【操作系统】进程互斥访问&amp;同步问题综合</title>
    <link href="https://blog.lthero.cn/2022/11/06/semaphore-problems/"/>
    <id>https://blog.lthero.cn/2022/11/06/semaphore-problems/</id>
    <published>2022-11-06T14:40:19.000Z</published>
    <updated>2022-11-06T14:42:23.429Z</updated>
    
    <content type="html"><![CDATA[<h1 id="进程互斥访问-amp-同步问题综合"><a href="#进程互斥访问-amp-同步问题综合" class="headerlink" title="进程互斥访问&amp;同步问题综合"></a>进程互斥访问&amp;同步问题综合</h1><h2 id="1窗口n客人叫号"><a href="#1窗口n客人叫号" class="headerlink" title="1窗口n客人叫号"></a>1窗口n客人叫号</h2><p>面包师有很多面包，由n名销售人员卖。每个客人进店后取号，并等待叫号。当一名销售人员空闲，就叫下一个号。</p><blockquote><p>n个销售【服务窗口】，n个客人</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> waitnum=<span class="number">0</span>;<span class="comment">//取号值</span></span><br><span class="line"><span class="type">int</span> servernum=<span class="number">0</span>;<span class="comment">//叫号值</span></span><br><span class="line">semaphore mutex_waitnum=<span class="number">1</span>,mutex_servernum=<span class="number">1</span>;<span class="comment">//用来保证修改num过程是原子性</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//mutex_waitnum和mutex_servernum只是锁</span></span><br><span class="line"><span class="comment">//waitnum作为状态变量</span></span><br><span class="line">customer&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="built_in">P</span>(mutex_waitnum);</span><br><span class="line">        <span class="comment">//取号</span></span><br><span class="line">        waitnum+=<span class="number">1</span>;</span><br><span class="line">        <span class="built_in">V</span>(mutex_waitnum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="built_in">P</span>(mutex_servernum);</span><br><span class="line">        <span class="keyword">if</span>(waitnum&lt;servernum)&#123;</span><br><span class="line">            servernum+=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">V</span>(mutex_servernum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法2：完全使用PV操作</span></span><br><span class="line">semaphore mutex=<span class="number">1</span>;<span class="comment">//锁：锁取号机</span></span><br><span class="line">customer&#123;</span><br><span class="line">    <span class="built_in">P</span>(mutex);</span><br><span class="line">    取号</span><br><span class="line">    <span class="built_in">V</span>(mutex);</span><br><span class="line">    <span class="built_in">V</span>(customer);<span class="comment">//告诉服务人员，来人了</span></span><br><span class="line">    <span class="built_in">P</span>(server);<span class="comment">//等待服务</span></span><br><span class="line">    被服务函数</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server&#123;</span><br><span class="line">    <span class="built_in">P</span>(customer);<span class="comment">//消耗一个客人</span></span><br><span class="line">    <span class="built_in">V</span>(server);<span class="comment">//提供服务</span></span><br><span class="line">    服务函数</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1窗口n客人M椅子，人会离开"><a href="#1窗口n客人M椅子，人会离开" class="headerlink" title="1窗口n客人M椅子，人会离开"></a>1窗口n客人M椅子，人会离开</h2><p>理发店里面一位理发师，一把理发椅子和n个等待时椅子。若没有客人，理发师在理发椅子上睡觉。若有客人，客人要叫醒理发师，若理发师在理发又有客人来，若椅子有空，客人在椅子上等待，椅子不空就离开。使用PV操作</p><blockquote><p>本题中，椅子不空就离开。说明不是进程不是一直等待下去，不能直接用P操作，因为P操作会一直等待。需要用状态变量+锁的方式完成</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> wait=<span class="number">0</span>,chair=n;</span><br><span class="line">semaphore mutex_wait=<span class="number">1</span>;<span class="comment">//锁</span></span><br><span class="line">semaphore server=<span class="number">0</span>;<span class="comment">//表示需要服务数</span></span><br><span class="line">semaphore customer=<span class="number">0</span>;<span class="comment">//表示客人数量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//和第一题方法2相似</span></span><br><span class="line">customer&#123;</span><br><span class="line"><span class="built_in">P</span>(mutex_wait);</span><br><span class="line"><span class="keyword">if</span>(wait&lt;chair)&#123;</span><br><span class="line">wait+=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">V</span>(customer);<span class="comment">//告诉服务人员，来人了</span></span><br><span class="line"><span class="built_in">V</span>(mutex);</span><br><span class="line"><span class="built_in">P</span>(server);<span class="comment">//等待服务</span></span><br><span class="line">        被理发函数</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">V</span>(mutex_wait);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">barber&#123;</span><br><span class="line">    <span class="built_in">P</span>(customer);<span class="comment">//如果有客人就提供服务,没有就睡觉</span></span><br><span class="line">    <span class="built_in">P</span>(mutex_wait);</span><br><span class="line">    wait-=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">V</span>(server);<span class="comment">//理发师醒了</span></span><br><span class="line">    <span class="built_in">V</span>(mutex_wait);</span><br><span class="line">    理发函数</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1窗口n客人M椅子，人不离开"><a href="#1窗口n客人M椅子，人不离开" class="headerlink" title="1窗口n客人M椅子，人不离开"></a>1窗口n客人M椅子，人不离开</h2><p>银行提供一个服务窗口和10个等待座位。客人到达银行时，若有空位，则到取号机拿号并坐下等待。否则就一直等待空座位再拿号。取号机每次仅允许一个人使用。营业员空闲时，叫号一个客人并服务。</p><blockquote><p>本题中，椅子不空就等待，可以使用PV</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">semaphore chair=<span class="number">10</span>;<span class="comment">//固定资源</span></span><br><span class="line">semaphore mutex=<span class="number">1</span>;<span class="comment">//锁</span></span><br><span class="line">semaphore customer=<span class="number">0</span>;</span><br><span class="line">semaphore server=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">customer&#123;</span><br><span class="line"><span class="built_in">P</span>(chair);<span class="comment">//有椅子就拿号，没椅子就等。不像第二题会走</span></span><br><span class="line"><span class="built_in">P</span>(mutex);<span class="comment">//叫号机上锁</span></span><br><span class="line">取号函数</span><br><span class="line"><span class="built_in">V</span>(mutex);</span><br><span class="line">    <span class="built_in">V</span>(customer);<span class="comment">//告诉服务人员，来人了</span></span><br><span class="line">    <span class="built_in">P</span>(server);<span class="comment">//等待服务</span></span><br><span class="line">    被服务函数</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server&#123;</span><br><span class="line">    <span class="built_in">P</span>(customer);<span class="comment">//消耗一个客人</span></span><br><span class="line">    <span class="built_in">V</span>(chair);<span class="comment">//空出一个椅子</span></span><br><span class="line">    <span class="built_in">V</span>(server);<span class="comment">//提供服务</span></span><br><span class="line">    服务函数</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="双资源生产者问题"><a href="#双资源生产者问题" class="headerlink" title="双资源生产者问题"></a>双资源生产者问题</h2><p>小和尚，老和尚若干。有一个水缸，只能小和尚提水给老和尚用。水缸可以容10桶水，水取自同一个水井。水井每次只能由一桶水，一共有3个水桶。水缸一次只能入一桶水。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">semaphore mutex_shaft=<span class="number">1</span>;<span class="comment">//水井</span></span><br><span class="line">semaphore mutex_tank=<span class="number">1</span>;<span class="comment">//水缸</span></span><br><span class="line">semaphore bucket=<span class="number">3</span>;<span class="comment">//资源</span></span><br><span class="line">semaphore tank_empty=<span class="number">10</span>;<span class="comment">//经典生产者和消费者的条件变量</span></span><br><span class="line">semaphore tank_full=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">老&#123;</span><br><span class="line">    <span class="built_in">P</span>(tank_full);</span><br><span class="line">    <span class="built_in">P</span>(bucket);</span><br><span class="line">    <span class="built_in">P</span>(mutex_tank);</span><br><span class="line">    取水</span><br><span class="line">    <span class="built_in">V</span>(mutex_tank);</span><br><span class="line">    <span class="built_in">V</span>(bucket);</span><br><span class="line">    <span class="built_in">V</span>(tank_empty);<span class="comment">//提醒生产者生产</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">小&#123;</span><br><span class="line"><span class="built_in">P</span>(tank_empty);</span><br><span class="line">    <span class="built_in">P</span>(bucket);</span><br><span class="line">    <span class="built_in">P</span>(mutex_shaft);</span><br><span class="line">    从水井打水</span><br><span class="line">    <span class="built_in">V</span>(mutex_shaft);</span><br><span class="line">    <span class="comment">//再向水缸放水</span></span><br><span class="line">    <span class="built_in">P</span>(mutex_tank);</span><br><span class="line">    放水</span><br><span class="line">    <span class="built_in">V</span>(mutex_tank);</span><br><span class="line">    <span class="built_in">V</span>(bucket);</span><br><span class="line">    <span class="built_in">V</span>(tank_full);<span class="comment">//提醒消费者消费</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="多进程同步问题"><a href="#多进程同步问题" class="headerlink" title="多进程同步问题"></a>多进程同步问题</h2><p>三个合作进程P1,P2,P3。者通过同一个设备输入各自的数据a,b,c。输入设备互斥使用。a为第一个输入必须由P1读取。b为第二个输入必须由P2读取。c为第二个输入必须由P3读取。然后进行以下运算</p><p>P1:x&#x3D;a+b;</p><p>P2:y&#x3D;a*b;</p><p>P3:z&#x3D;y+c-a;</p><p>最后，由P1通过打印机将x,y,z打印出来。</p><blockquote><p>因为规定了P1先取a，P2再取b,P3最后取C。设置fetch_a&#x3D;1;fetch_b&#x3D;0;fetch_c&#x3D;0;表示a可以取</p><p>P1需要等待P2读取b，则有个信号量b_done</p><p>P3需要等待P2计算出y，则有个信号量y_done</p><p>P1最后需要等待P3计算出z，则有个信号量z_done</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">semaphore fetch_a=<span class="number">1</span>;</span><br><span class="line">semaphore fetch_b=<span class="number">1</span>;</span><br><span class="line">semaphore fetch_c=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">P1&#123;</span><br><span class="line"><span class="built_in">P</span>(fetch_a);</span><br><span class="line">取a数据</span><br><span class="line"><span class="built_in">V</span>(fetch_b);<span class="comment">//允许P2读取b</span></span><br><span class="line"><span class="built_in">P</span>(b_done);<span class="comment">//在P2得到b之前,P1要等待</span></span><br><span class="line">x=a+b;</span><br><span class="line"><span class="built_in">P</span>(z_done);<span class="comment">//在P3得到z之前，P1要等</span></span><br><span class="line">打印x,y,z<span class="comment">//因为z也需要y，所以P1不用等y</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">P2&#123;</span><br><span class="line"><span class="built_in">P</span>(fetch_b);</span><br><span class="line">取b数据</span><br><span class="line"><span class="built_in">V</span>(fetch_c);<span class="comment">//允许P3读取c</span></span><br><span class="line">y=a*b;</span><br><span class="line"><span class="built_in">V</span>(y_done);<span class="comment">//唤醒等待y的进程</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">P3&#123;</span><br><span class="line"><span class="built_in">P</span>(fetch_c);</span><br><span class="line">取c数据</span><br><span class="line"><span class="built_in">P</span>(y_done);<span class="comment">//等待y</span></span><br><span class="line">z=y+c-a;</span><br><span class="line"><span class="built_in">V</span>(z_done);<span class="comment">//唤醒等待z的进程</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>未完……</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;进程互斥访问-amp-同步问题综合&quot;&gt;&lt;a href=&quot;#进程互斥访问-amp-同步问题综合&quot; class=&quot;headerlink&quot; title=&quot;进程互斥访问&amp;amp;同步问题综合&quot;&gt;&lt;/a&gt;进程互斥访问&amp;amp;同步问题综合&lt;/h1&gt;&lt;h2 id=&quot;1窗口n客</summary>
      
    
    
    
    <category term="操作系统" scheme="https://blog.lthero.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="操作系统" scheme="https://blog.lthero.cn/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>【树莓派脸部追踪】</title>
    <link href="https://blog.lthero.cn/2022/10/12/raspi4B-face-tracking/"/>
    <id>https://blog.lthero.cn/2022/10/12/raspi4B-face-tracking/</id>
    <published>2022-10-12T10:50:15.000Z</published>
    <updated>2022-10-12T11:16:08.659Z</updated>
    
    <content type="html"><![CDATA[<h1 id="树莓派脸部追踪"><a href="#树莓派脸部追踪" class="headerlink" title="树莓派脸部追踪"></a>树莓派脸部追踪</h1><h2 id="硬件材料"><a href="#硬件材料" class="headerlink" title="硬件材料"></a>硬件材料</h2><p>树莓派4B、云台、摄像头</p><p><img src="https://cdn.lthero.cn/post_images/course/Cryptography/image-20221012191549696.png" alt="成品展示"></p><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>1、电脑上显示摄像头拍摄的视频，并得到人脸坐标，将人脸坐标发给树莓派。</p><p>2、树莓派来控制舵机旋转</p><p>3、电脑和树莓派之间和socket通信</p><p>4、树莓派上使用motion将摄像头内容输出到“192.168.6.179:8081”，从而让电脑获取视频源【192.168.6.179是树莓派地址】</p><p>注意：</p><p>1、树莓派可能需要关掉防火墙：ufw disable</p><p>2、树莓派要先启动motion：sudo motion【只用启动一次即可，一直在后台运行】</p><h2 id="人脸跟踪的算法"><a href="#人脸跟踪的算法" class="headerlink" title="人脸跟踪的算法"></a>人脸跟踪的算法</h2><h3 id="第一种"><a href="#第一种" class="headerlink" title="第一种"></a>第一种</h3><p>获得人脸矩阵中心点坐标【x,y】，再获得视频中心坐标，计算两者误差，从而让摄像头旋转相应角度，旋转时要尽量一度一度的转，不要过激，否则容易让抖动。</p><p>当然，我写的只是简单的计算两个中心误差再旋转，缺点是旋转不平滑，改进方式是用PID算法</p><p>PID算法参考1：<a href="https://pyimagesearch.com/2019/04/01/pan-tilt-face-tracking-with-a-raspberry-pi-and-opencv/">https://pyimagesearch.com/2019/04/01/pan-tilt-face-tracking-with-a-raspberry-pi-and-opencv/</a></p><p>PID算法参考2：<a href="https://bcxiaobai.eu.org/post/383.html">https://bcxiaobai.eu.org/post/383.html</a></p><h3 id="第二种"><a href="#第二种" class="headerlink" title="第二种"></a>第二种</h3><p>参考：<a href="https://blog.csdn.net/rikeilong/article/details/126446567">https://blog.csdn.net/rikeilong/article/details/126446567</a></p><p>当人脸矩阵左边或右边快要超出视频边界时再旋转，也是要尽量一度一度的转</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="电脑上"><a href="#电脑上" class="headerlink" title="电脑上"></a>电脑上</h3><p>电脑上client.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">connect_Raspberry</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,host,port</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;客户端开启&quot;</span>)</span><br><span class="line">        <span class="comment"># 套接字接口</span></span><br><span class="line">        self.mySocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">        <span class="comment"># 设置ip和端口</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.mySocket.connect((host, port))  <span class="comment">#连接到服务器</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;连接到服务器&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span>:  <span class="comment">#连接不成功，运行最初的ip</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;连接RASP不成功&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">send</span>(<span class="params">self, words</span>):</span><br><span class="line">        <span class="comment"># 发送消息</span></span><br><span class="line">        msg = words</span><br><span class="line">        <span class="comment"># 编码发送</span></span><br><span class="line">        self.mySocket.send(msg.encode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line">        <span class="comment"># print(&quot;成功发送消息&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">close</span>(<span class="params">self</span>):</span><br><span class="line">        self.mySocket.close()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;与树莓派丽连接中断\n&quot;</span>)</span><br><span class="line">        exit()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>电脑上main.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> mediapipe <span class="keyword">as</span> mp</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> client</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检测脸部</span></span><br><span class="line">mp_face_detection = mp.solutions.face_detection</span><br><span class="line">mp_drawing = mp.solutions.drawing_utils</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通信传输</span></span><br><span class="line">myRaspConnection = client.connect_Raspberry(<span class="string">&#x27;192.168.6.179&#x27;</span>, <span class="number">8888</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"></span><br><span class="line">    capture = cv2.VideoCapture(<span class="string">&quot;http://192.168.6.179:8081&quot;</span>)</span><br><span class="line">    ref, frame = capture.read()</span><br><span class="line">    fps = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">True</span>):</span><br><span class="line">        ref, frame = capture.read()</span><br><span class="line">        h, w, _ = np.shape(frame)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> ref:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        image = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 脸部检测</span></span><br><span class="line">        <span class="keyword">with</span> mp_face_detection.FaceDetection(model_selection=<span class="number">0</span>, min_detection_confidence=<span class="number">0.8</span>) <span class="keyword">as</span> face_detection:</span><br><span class="line">            results = face_detection.process(image)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> results.detections:</span><br><span class="line">                <span class="keyword">for</span> detection <span class="keyword">in</span> results.detections:</span><br><span class="line">                    box = detection.location_data.relative_bounding_box</span><br><span class="line">                    <span class="comment"># cx,cy,cw,ch=box</span></span><br><span class="line">                    cx = box.xmin</span><br><span class="line">                    cy = box.ymin</span><br><span class="line">                    cw = box.width</span><br><span class="line">                    ch = box.height</span><br><span class="line"></span><br><span class="line">                    cv2.rectangle(image, (<span class="built_in">int</span>(cx * w), <span class="built_in">int</span>(cy * h)), (<span class="built_in">int</span>((cx + cw) * w), <span class="built_in">int</span>((cy + ch) * h)),</span><br><span class="line">                                  (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line">                <span class="comment"># 控制云台</span></span><br><span class="line">                msg = <span class="built_in">str</span>(<span class="built_in">abs</span>(<span class="built_in">int</span>(cx * w))) + <span class="string">&quot; &quot;</span> + <span class="built_in">str</span>(<span class="built_in">abs</span>(<span class="built_in">int</span>(cy * h))) + <span class="string">&quot; &quot;</span> + <span class="built_in">str</span>(<span class="built_in">abs</span>(<span class="built_in">int</span>((cx + cw) * w))) + <span class="string">&quot; &quot;</span> + <span class="built_in">str</span>(</span><br><span class="line">                    <span class="built_in">abs</span>(<span class="built_in">int</span>((cy + ch) * h)))</span><br><span class="line">                <span class="built_in">print</span>(msg)</span><br><span class="line">                myRaspConnection.send(msg)</span><br><span class="line"></span><br><span class="line">        frame = cv2.cvtColor(image, cv2.COLOR_RGB2BGR)</span><br><span class="line">        <span class="comment"># cv2.rectangle(frame, (int(cx*w) , int(cy*h)), (int((cx+cw)*w) , int((cy+ch)*h)),(0, 255, 0), 2)</span></span><br><span class="line"></span><br><span class="line">        cv2.imshow(<span class="string">&quot;video&quot;</span>, frame)</span><br><span class="line">        c = cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xff</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> c == <span class="number">27</span>:</span><br><span class="line">            capture.release()</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Video Detection Done!&quot;</span>)</span><br><span class="line">    capture.release()</span><br><span class="line">    cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><p>​    </p><h3 id="树莓派上"><a href="#树莓派上" class="headerlink" title="树莓派上"></a>树莓派上</h3><p>树莓派上sever.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;服务开启&quot;</span>)</span><br><span class="line">mySocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">host = <span class="string">&quot;192.168.6.179&quot;</span></span><br><span class="line">port = <span class="number">8888</span> <span class="comment">#自己定义的端口号</span></span><br><span class="line"></span><br><span class="line">mySocket.bind((host, port))</span><br><span class="line">mySocket.listen(<span class="number">10</span>)</span><br></pre></td></tr></table></figure><p>树莓派上main.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> sever</span><br><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"><span class="keyword">from</span> PCA9685 <span class="keyword">import</span> PCA9685</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line">pwm=PCA9685()</span><br><span class="line">pwm.setPWMFreq(<span class="number">50</span>)</span><br><span class="line">pwm.setRotationAngle(<span class="number">5</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    pid_X_P=<span class="number">0</span></span><br><span class="line">    pid_Y_P=<span class="number">0</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;等待连接&quot;</span>)</span><br><span class="line">    client,address = sever.mySocket.accept()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;新连接&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;IP is %s&quot;</span> % address[<span class="number">0</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;port is %d\n&quot;</span> % address[<span class="number">1</span>])</span><br><span class="line">    </span><br><span class="line">    beangle = <span class="number">90</span> <span class="comment">#每个人的初始角度不同，建议先自己测试好角度</span></span><br><span class="line">    beangle0 = <span class="number">45</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#舵机插的通道口</span></span><br><span class="line">    channel1 = <span class="number">4</span> <span class="comment">#上下</span></span><br><span class="line">    channel2 = <span class="number">8</span> <span class="comment">#左右</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#变化幅度（这个越大，舵机动的幅度就越大）</span></span><br><span class="line">    angleFreq = <span class="number">1</span></span><br><span class="line"><span class="comment">#超出屏幕范围（这个调大后，脸部离视频边界检测更灵敏）</span></span><br><span class="line">    changeFreqX = <span class="number">100</span></span><br><span class="line">    changeFreqY = <span class="number">20</span></span><br><span class="line"></span><br><span class="line">    error_x=<span class="number">500</span>            <span class="comment">#当前误差值</span></span><br><span class="line">    last_error_x=<span class="number">100</span>       <span class="comment">#上一次误差值</span></span><br><span class="line">    error_y=<span class="number">250</span></span><br><span class="line">    last_error_y=<span class="number">50</span></span><br><span class="line">    wight=<span class="number">900</span></span><br><span class="line">    height=<span class="number">480</span></span><br><span class="line">    piv_x=<span class="number">90</span></span><br><span class="line">    piv_y=<span class="number">45</span></span><br><span class="line"></span><br><span class="line">    step=<span class="number">1</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            msg = client.recv(<span class="number">1024</span>)</span><br><span class="line">            msg = msg.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> msg != <span class="string">&quot;&quot;</span>:</span><br><span class="line">                mess = msg.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">                </span><br><span class="line">                x0 = <span class="built_in">int</span>(mess[<span class="number">0</span>])<span class="comment">#左上角x</span></span><br><span class="line">                y0 = <span class="built_in">int</span>(mess[<span class="number">1</span>])<span class="comment">#左上角y</span></span><br><span class="line">                x1 = <span class="built_in">int</span>(mess[<span class="number">2</span>])<span class="comment">#右下角x</span></span><br><span class="line">                y1 = <span class="built_in">int</span>(mess[<span class="number">3</span>])<span class="comment">#右下角y</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法1：超出中间就偏转</span></span><br><span class="line">                x_mean=<span class="built_in">int</span>((x0+x1)/<span class="number">2</span>)</span><br><span class="line">                y_mean=<span class="built_in">int</span>((y0+y1)/<span class="number">2</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;x_mean&quot;</span>,x_mean,<span class="string">&quot;y_mean&quot;</span>,y_mean)</span><br><span class="line">                error_x=<span class="built_in">int</span>(x_mean-wight/<span class="number">2</span>)</span><br><span class="line">                error_y=<span class="built_in">int</span>(y_mean-height/<span class="number">2</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;error_x&quot;</span>,error_x,<span class="string">&quot;error_y&quot;</span>,error_y)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 误差大于100,要向左偏</span></span><br><span class="line">                <span class="keyword">if</span> error_x&lt;<span class="number">0</span>  <span class="keyword">and</span> <span class="built_in">abs</span>(error_x)&gt;<span class="number">100</span>:</span><br><span class="line">                    <span class="comment"># temp_x=abs(error_x)/(wight/2)*45</span></span><br><span class="line">                   </span><br><span class="line">                    step_x=math.exp(<span class="built_in">abs</span>(error_x)/(wight/<span class="number">2</span>))</span><br><span class="line">                    <span class="built_in">print</span>(step_x)</span><br><span class="line">                    beangle+=step</span><br><span class="line">                    <span class="keyword">if</span> beangle &gt;= <span class="number">180</span>:</span><br><span class="line">                        beangle = <span class="number">180</span></span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;向左偏&quot;</span>,beangle)</span><br><span class="line">                    pwm.setRotationAngle(<span class="number">1</span>,beangle)</span><br><span class="line">                <span class="comment"># 向右偏</span></span><br><span class="line">                <span class="keyword">if</span> error_x&gt;<span class="number">0</span>  <span class="keyword">and</span> <span class="built_in">abs</span>(error_x)&gt;<span class="number">100</span>:</span><br><span class="line">                    step_x=math.exp(<span class="built_in">abs</span>(error_x)/(wight/<span class="number">2</span>))</span><br><span class="line">                    <span class="built_in">print</span>(step_x)</span><br><span class="line">                    beangle-=step</span><br><span class="line">                    <span class="keyword">if</span> beangle &lt;=<span class="number">10</span>:</span><br><span class="line">                        beangle = <span class="number">10</span></span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;向右偏&quot;</span>,beangle)</span><br><span class="line">                    pwm.setRotationAngle(<span class="number">1</span>,beangle)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 误差大于50,要向上偏</span></span><br><span class="line">                <span class="keyword">if</span> error_y&lt;<span class="number">0</span>  <span class="keyword">and</span> <span class="built_in">abs</span>(error_y)&gt;<span class="number">70</span>:</span><br><span class="line">                    <span class="comment"># if abs(error_y)&gt;=100:</span></span><br><span class="line">                    <span class="comment">#     error_y=100</span></span><br><span class="line">                    <span class="comment"># temp_x=abs(error_x)/(wight/2)*45</span></span><br><span class="line">                    <span class="keyword">try</span>:</span><br><span class="line">                        step_y=math.exp(<span class="built_in">abs</span>(error_y)/(height/<span class="number">2</span>))</span><br><span class="line">                    <span class="keyword">except</span>:</span><br><span class="line">                        step_y=<span class="number">2</span></span><br><span class="line">                    <span class="built_in">print</span>(step_y)</span><br><span class="line">                    beangle0-=step</span><br><span class="line">                    <span class="keyword">if</span> beangle0 &lt;=<span class="number">10</span>:</span><br><span class="line">                        beangle0 = <span class="number">10</span></span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;向上偏&quot;</span>,beangle0)</span><br><span class="line">                    pwm.setRotationAngle(<span class="number">0</span>,beangle0)</span><br><span class="line">                <span class="comment"># 向下偏</span></span><br><span class="line">                <span class="keyword">if</span> error_y&gt;<span class="number">0</span>  <span class="keyword">and</span> <span class="built_in">abs</span>(error_y)&gt;<span class="number">70</span>:</span><br><span class="line">                    <span class="comment"># if abs(error_y)&gt;=100:</span></span><br><span class="line">                    <span class="comment">#     error_y=100</span></span><br><span class="line">                    <span class="keyword">try</span>:</span><br><span class="line">                        step_y=math.exp(<span class="built_in">abs</span>(error_y)/(height/<span class="number">2</span>))</span><br><span class="line">                    <span class="keyword">except</span>:</span><br><span class="line">                        step_y=<span class="number">2</span></span><br><span class="line">                    <span class="built_in">print</span>(step_y)</span><br><span class="line">                    beangle0+=step</span><br><span class="line">                    <span class="keyword">if</span> beangle0 &gt;= <span class="number">85</span>:</span><br><span class="line">                        beangle0 = <span class="number">95</span></span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;向下偏&quot;</span>,beangle0)</span><br><span class="line">                    pwm.setRotationAngle(<span class="number">0</span>,beangle0)</span><br><span class="line"></span><br><span class="line">                </span><br><span class="line">                </span><br><span class="line">                <span class="comment"># 方法2：快超出屏幕时再旋转</span></span><br><span class="line">                <span class="comment"># if x0 &lt; changeFreqX:</span></span><br><span class="line">                <span class="comment">#     beangle += angleFreq</span></span><br><span class="line">                <span class="comment">#     if beangle &gt;= 180:</span></span><br><span class="line">                <span class="comment">#         beangle = 180</span></span><br><span class="line">                <span class="comment">#     pwm.setRotationAngle(1,beangle)</span></span><br><span class="line">                <span class="comment">#     #set_servo_angle(channel1,beangle)</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment"># if y0 &lt; changeFreqY:</span></span><br><span class="line">                <span class="comment">#     beangle0 -= angleFreq</span></span><br><span class="line">                <span class="comment">#     if beangle0 &lt;= 10:</span></span><br><span class="line">                <span class="comment">#         beangle0 = 10</span></span><br><span class="line">                <span class="comment">#     pwm.setRotationAngle(0,beangle0)</span></span><br><span class="line">                <span class="comment">#     #set_servo_angle(channel2,beangle0)</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># if x1 &gt; 640 - changeFreqX: #窗口宽为640</span></span><br><span class="line">                <span class="comment">#     beangle -= angleFreq</span></span><br><span class="line">                <span class="comment">#     if beangle &lt;= 10:</span></span><br><span class="line">                <span class="comment">#         beangle = 10</span></span><br><span class="line">                <span class="comment">#     pwm.setRotationAngle(1,beangle)</span></span><br><span class="line">                <span class="comment">#     #set_servo_angle(channel1,beangle)</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment"># if y1 &gt; 480 - changeFreqY: #窗口高为480</span></span><br><span class="line">                <span class="comment">#     beangle0 += angleFreq</span></span><br><span class="line">                <span class="comment">#     if beangle0 &gt;= 85:</span></span><br><span class="line">                <span class="comment">#         beangle0 = 85</span></span><br><span class="line">                <span class="comment">#     pwm.setRotationAngle(0,beangle0)</span></span><br><span class="line">                <span class="comment">#     set_servo_angle(channel2,beangle0)</span></span><br><span class="line">                <span class="comment"># print(&quot;beangle&quot;,beangle,&quot;beangle0:&quot;,beangle0)</span></span><br><span class="line">    <span class="keyword">except</span> ValueError <span class="keyword">as</span> e:</span><br><span class="line">        pwm.exit_PCA9685()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;退出&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">        exit()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p>1、树莓派上先运行main.py</p><p>2、电脑上再运行main.py，电脑上可见一个视频窗口，此时摄像头开始追踪人脸</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p>PID算法：<a href="https://pyimagesearch.com/2019/04/01/pan-tilt-face-tracking-with-a-raspberry-pi-and-opencv/">https://pyimagesearch.com/2019/04/01/pan-tilt-face-tracking-with-a-raspberry-pi-and-opencv/</a></p><p>思路：<a href="https://blog.csdn.net/rikeilong/article/details/126446567?spm=1001.2014.3001.5502">https://blog.csdn.net/rikeilong/article/details/126446567?spm=1001.2014.3001.5502</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;树莓派脸部追踪&quot;&gt;&lt;a href=&quot;#树莓派脸部追踪&quot; class=&quot;headerlink&quot; title=&quot;树莓派脸部追踪&quot;&gt;&lt;/a&gt;树莓派脸部追踪&lt;/h1&gt;&lt;h2 id=&quot;硬件材料&quot;&gt;&lt;a href=&quot;#硬件材料&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="折腾" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/"/>
    
    <category term="树莓派" scheme="https://blog.lthero.cn/categories/%E6%8A%98%E8%85%BE/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
    
    <category term="折腾" scheme="https://blog.lthero.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
    <category term="树莓派" scheme="https://blog.lthero.cn/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
  </entry>
  
  <entry>
    <title>【lthero邮箱接口】调用</title>
    <link href="https://blog.lthero.cn/2022/09/25/ltheroMail-api/"/>
    <id>https://blog.lthero.cn/2022/09/25/ltheroMail-api/</id>
    <published>2022-09-25T04:35:01.000Z</published>
    <updated>2022-09-25T11:18:08.387Z</updated>
    
    <content type="html"><![CDATA[<h1 id="lthero邮箱接口调用"><a href="#lthero邮箱接口调用" class="headerlink" title="lthero邮箱接口调用"></a>lthero邮箱接口调用</h1><blockquote><p>每天最多100封邮件发送量</p></blockquote><h2 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#接收方</span></span><br><span class="line">receiver=<span class="string">&#x27;111111@qq.com&#x27;</span></span><br><span class="line"><span class="comment">#内容</span></span><br><span class="line">content=<span class="string">&#x27;testtesttesttesttest&#x27;</span></span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">&#x27;reciever&#x27;</span>: receiver,</span><br><span class="line">    <span class="comment">#邮件标题</span></span><br><span class="line">    <span class="string">&#x27;title&#x27;</span>: <span class="string">f&#x27;邮件标题&#x27;</span>,</span><br><span class="line">    <span class="comment">#主要内容</span></span><br><span class="line">    <span class="string">&#x27;content&#x27;</span>:content,</span><br><span class="line">    <span class="comment">#内部大标题</span></span><br><span class="line">    <span class="string">&#x27;innerTitle&#x27;</span>: <span class="string">f&#x27;内置标题&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">res = requests.post(url=<span class="string">&#x27;http://mailapi.lthero.cn/&#x27;</span>, data=params)</span><br></pre></td></tr></table></figure><h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="https://cdn.lthero.cn/post_images/course/Cryptography/image-20220925123952216.png" alt="image-20220925123952216"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;lthero邮箱接口调用&quot;&gt;&lt;a href=&quot;#lthero邮箱接口调用&quot; class=&quot;headerlink&quot; title=&quot;lthero邮箱接口调用&quot;&gt;&lt;/a&gt;lthero邮箱接口调用&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;每天最多100封邮件发送量&lt;/p&gt;</summary>
      
    
    
    
    <category term="邮箱接口" scheme="https://blog.lthero.cn/categories/%E9%82%AE%E7%AE%B1%E6%8E%A5%E5%8F%A3/"/>
    
    
    <category term="邮箱接口" scheme="https://blog.lthero.cn/tags/%E9%82%AE%E7%AE%B1%E6%8E%A5%E5%8F%A3/"/>
    
  </entry>
  
  <entry>
    <title>浙江青年大学习自动打卡</title>
    <link href="https://blog.lthero.cn/2022/09/23/WeLearnAutoSign/"/>
    <id>https://blog.lthero.cn/2022/09/23/WeLearnAutoSign/</id>
    <published>2022-09-23T08:03:11.000Z</published>
    <updated>2022-09-25T11:12:02.234Z</updated>
    
    <content type="html"><![CDATA[<h1 id="浙江青年大学习自动打卡"><a href="#浙江青年大学习自动打卡" class="headerlink" title="浙江青年大学习自动打卡"></a>浙江青年大学习自动打卡</h1><blockquote><p>一键打卡工具：<a href="https://sign.lthero.cn/">https://sign.lthero.cn/</a></p></blockquote><p>代码思路：</p><ul><li>每个微信账号有唯一的<strong>openid</strong></li><li>在每次打开青年大学习网页时，后台会根据openid生成<strong>accessToken</strong></li><li>后续的所有与服务器交互的信息，都需要用<strong>accessToken</strong>才能拿到</li><li>只要拿到<strong>个人信息</strong>，再将<strong>个人信息</strong>和<strong>accessToken</strong>提交即可打卡完成</li></ul><p>​     </p><p>为什么这样想？</p><ul><li>根据<strong>服务器发来的js文件</strong>推测出的</li></ul><p>​    </p><p>安卓获得openid教程【部分手机不可用】：</p><ul><li><p>安卓下载抓包软件 <a href="https://file-1305871479.cos.ap-nanjing.myqcloud.com/file/HttpCanary.apk">httpcanary</a>，安装完成后，1、同意条款  2、允许安装证书  3、root可以跳过</p></li><li><p>微信：打开大学习</p></li><li><p>软件httpcanary：点击右下角小飞机图标开始抓包</p></li><li><p>微信：点击“立即参与”-&gt;点击“去学习”。随后切到httpcanary，再点击右下角小飞机图标停止抓包。</p></li><li><p>软件httpcanary：点击右上角，找到“搜索”，直接搜索“openId”，注意：只要url是qczj.h5yunban.com的包。一般可以在包名为“qczj.h5yunban.com&#x2F;qczj-youth-learning&#x2F;cgi-bin&#x2F;user-api&#x2F;course&#x2F;last-info”的响应中，在响应的文本(text)中找到openId，这是我们所需的参数！</p></li><li><p>记录openId，因为以后没必要再次抓包！！！</p></li></ul><p>​    </p><p>PC获得openid教程</p><p>需要的软件：Fiddler、电脑版微信</p><p>1、打开Fiddler，安装证书</p><p>2、切换到微信，点击大学习，此时弹窗需要授权，点击“同意”。</p><p>3、点击“同意”后，切换到Fiddler，按“ctrl+f”，搜索openid，双击标黄处的包，并点击“WebForms”，在里面找到openid即可</p><p>注意：如果没有需要第2步授权步骤，而是直接进入大学习页面，则无法获得openid。</p><p>需要彻底关掉微信，并重新打开微信，再尝试。</p><p>如果实现得不到openid，需要点击“开始学习”进入到选择省市的选项。再切到Fiddler，按“ctrl+f”，搜索accessToken。得到accessToken后，</p><p>比如accessToken为xxxx-xxxx-xxxx-xxxx，将其合并到下面的链接</p><p><a href="https://qczj.h5yunban.com/qczj-youth-learning/cgi-bin/user-api/info?accessToken=xxxx-xxxx-xxxx-xxxx">https://qczj.h5yunban.com/qczj-youth-learning/cgi-bin/user-api/info?accessToken=xxxx-xxxx-xxxx-xxxx</a></p><p>替换上面的xxxx-xxxx-xxxx-xxxx。</p><p>随后进行访问此链接，可以在返回的结果里面，找到openid</p><p>文件：config.yml</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">users<span class="punctuation">:</span></span><br><span class="line">  - user<span class="punctuation">:</span></span><br><span class="line">      name<span class="punctuation">:</span> &#x27;张三&#x27;</span><br><span class="line">      openid<span class="punctuation">:</span> &#x27;oO-a2tabkGObaWbIOd4U1Bpaf1l0&#x27;</span><br><span class="line">  - user<span class="punctuation">:</span></span><br><span class="line">      name<span class="punctuation">:</span> &#x27;李四&#x27;</span><br><span class="line">      openid<span class="punctuation">:</span> &#x27;oO-a2t7bkGhdaWbIOd4U1Bpaf1l0&#x27;</span><br></pre></td></tr></table></figure><hr><p>文件：index.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> yaml</span><br><span class="line"></span><br><span class="line">getToken_url = <span class="string">&#x27;https://qczj.h5yunban.com/qczj-youth-learning/cgi-bin/login/we-chat/callback&#x27;</span></span><br><span class="line">getUserInfo_url = <span class="string">&#x27;https://qczj.h5yunban.com/qczj-youth-learning/cgi-bin/user-api/course/last-info&#x27;</span></span><br><span class="line">getClass_url = <span class="string">&#x27;https://qczj.h5yunban.com/qczj-youth-learning/cgi-bin/common-api/course/current&#x27;</span></span><br><span class="line">checkin_url = <span class="string">&#x27;https://qczj.h5yunban.com/qczj-youth-learning/cgi-bin/user-api/course/join&#x27;</span></span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getYmlConfig</span>(<span class="params">yaml_file=<span class="string">&#x27;config.yml&#x27;</span></span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(yaml_file, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        file_data = f.read()</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dict</span>(yaml.load(file_data, Loader=yaml.FullLoader))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getToken</span>(<span class="params">openId</span>):</span><br><span class="line">    <span class="comment"># 根据openId获得token</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        getToken = requests.get(url=getToken_url, params=openId, headers=headers)</span><br><span class="line">        Token_raw = getToken.text</span><br><span class="line">        Token = re.findall(<span class="string">&#x27;[A-Z0-9]&#123;8&#125;[-][A-Z0-9]&#123;4&#125;[-][A-Z0-9]&#123;4&#125;[-][A-Z0-9]&#123;4&#125;[-][A-Z0-9]&#123;12&#125;&#x27;</span>, Token_raw)[<span class="number">0</span>]</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;获取Token为:&#x27;</span> + Token)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;获取Token失败，请检查openId是否正确&#x27;</span>)</span><br><span class="line">    accessToken = &#123;</span><br><span class="line">        <span class="string">&#x27;accessToken&#x27;</span>: Token</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> accessToken</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getinfo</span>(<span class="params">accessToken</span>):</span><br><span class="line">    <span class="comment"># 根据accessToken获得用户信息</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        getUserInfo = requests.get(getUserInfo_url, params=accessToken, headers=headers)</span><br><span class="line">        userInfo = getUserInfo.json()</span><br><span class="line">        cardNo = userInfo[<span class="string">&quot;result&quot;</span>][<span class="string">&quot;cardNo&quot;</span>]</span><br><span class="line">        nid = userInfo[<span class="string">&quot;result&quot;</span>][<span class="string">&quot;nid&quot;</span>]</span><br><span class="line">        getClass = requests.get(getClass_url, params=accessToken, headers=headers)</span><br><span class="line">        Class = getClass.json()</span><br><span class="line">        classId = Class[<span class="string">&quot;result&quot;</span>][<span class="string">&quot;id&quot;</span>]</span><br><span class="line">        infos: <span class="built_in">list</span> = userInfo[<span class="string">&#x27;result&#x27;</span>][<span class="string">&#x27;nodes&#x27;</span>]</span><br><span class="line">        Faculty = [item[<span class="string">&#x27;title&#x27;</span>] <span class="keyword">for</span> item <span class="keyword">in</span> infos]</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;签到课程为：&#x27;</span> + classId, <span class="string">&#x27;\n您填写的个人信息为：&#x27;</span> + cardNo, <span class="string">&#x27;\n您的签到所属组织为：&#x27;</span> + <span class="built_in">str</span>(Faculty))</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;获取历史信息失败，请您手动打卡：<span class="subst">&#123;e&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    checkinData = &#123;</span><br><span class="line">        <span class="string">&#x27;course&#x27;</span>: classId,</span><br><span class="line">        <span class="string">&#x27;subOrg&#x27;</span>: <span class="literal">None</span>,</span><br><span class="line">        <span class="string">&#x27;nid&#x27;</span>: nid,</span><br><span class="line">        <span class="string">&#x27;cardNo&#x27;</span>: cardNo</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> checkinData</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">signup</span>(<span class="params">accessToken, checkinData</span>):</span><br><span class="line">    <span class="comment"># 根据token和data完成打卡</span></span><br><span class="line">    checkin = requests.post(checkin_url, params=accessToken, data=json.dumps(checkinData), headers=headers)</span><br><span class="line">    result = checkin.json()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> result[<span class="string">&quot;status&quot;</span>] == <span class="number">200</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;签到成功&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;出现错误，错误码：&#x27;</span> + result[<span class="string">&quot;status&quot;</span>])</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;错误信息：&#x27;</span> + result[<span class="string">&quot;message&quot;</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    config = getYmlConfig()</span><br><span class="line">    <span class="keyword">for</span> index, user <span class="keyword">in</span> <span class="built_in">enumerate</span>(config[<span class="string">&#x27;users&#x27;</span>]):</span><br><span class="line">        <span class="built_in">print</span>(user[<span class="string">&#x27;user&#x27;</span>][<span class="string">&#x27;name&#x27;</span>], <span class="string">&#x27;openId为 &#x27;</span>, user[<span class="string">&#x27;user&#x27;</span>][<span class="string">&#x27;openid&#x27;</span>])</span><br><span class="line">        openid = &#123;</span><br><span class="line">            <span class="string">&#x27;appid&#x27;</span>: <span class="string">&#x27;wx56b888a1409a2920&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;openid&#x27;</span>: user[<span class="string">&#x27;user&#x27;</span>][<span class="string">&#x27;openid&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        accesstoken = getToken(openid)</span><br><span class="line">        checkindata = getinfo(accesstoken)</span><br><span class="line">        signup(accesstoken, checkindata)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;===========================================&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>最后，使用定时任务crontab即可。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;浙江青年大学习自动打卡&quot;&gt;&lt;a href=&quot;#浙江青年大学习自动打卡&quot; class=&quot;headerlink&quot; title=&quot;浙江青年大学习自动打卡&quot;&gt;&lt;/a&gt;浙江青年大学习自动打卡&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;一键打卡工具：&lt;a href=&quot;https</summary>
      
    
    
    
    <category term="自动打卡" scheme="https://blog.lthero.cn/categories/%E8%87%AA%E5%8A%A8%E6%89%93%E5%8D%A1/"/>
    
    
    <category term="自动打卡" scheme="https://blog.lthero.cn/tags/%E8%87%AA%E5%8A%A8%E6%89%93%E5%8D%A1/"/>
    
    <category term="青年大学习" scheme="https://blog.lthero.cn/tags/%E9%9D%92%E5%B9%B4%E5%A4%A7%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>【马克思】《1844年经济学哲学手稿》</title>
    <link href="https://blog.lthero.cn/2022/09/21/Maxism-01/"/>
    <id>https://blog.lthero.cn/2022/09/21/Maxism-01/</id>
    <published>2022-09-21T14:13:41.000Z</published>
    <updated>2022-09-22T06:06:01.079Z</updated>
    
    <content type="html"><![CDATA[<h1 id="随笔"><a href="#随笔" class="headerlink" title="随笔"></a>随笔</h1><h2 id="知乎问题"><a href="#知乎问题" class="headerlink" title="知乎问题"></a>知乎问题</h2><p>突然意识自己曾经引以为豪的编程其实是一种工具，这是一种悲哀吗？</p><p><a href="zhihu.com/question/469223256/answer/2100070901">原回答链接</a></p><h3 id="原回答："><a href="#原回答：" class="headerlink" title="原回答："></a>原回答：</h3><p>这种悲哀感的本质，其实就是马克思在《1844年经济学哲学手稿》中提出的“四个异化”（的前三个）：</p><p>1，工人同自己的劳动产品相异化。</p><p>2，工人同自己的劳动相异化。</p><p>3，人同自己的类本质相异化。</p><p>马克思认为人区别于动物的最大特点，就是人本质上就需要“工作”，既“创造性地改造环境”。马克思所说的工作，其实就是后来“马斯洛需求层次理论”中的“自我实现”需求。</p><p>这也是马克思的牛逼之处，理论精髓之一——人的本质就是需要工作、热爱工作的，工作是人之所以为“人”的重要组成部分。</p><p>但是</p><p>资本主义世界的雇佣关系，将工作这个部分严重扭曲了，以至于将“工作”与“人性”剥离开来。在资本主义世界中，无论是宏观角度还是微观角度，工作都与人性割裂开来，甚至让“工作”与“人性”变成了对立的存在。</p><p>所以人们普遍认为，下班才是人生的开始。</p><p>所以人们才需要丰富的夜生活，才需要各种宣泄和放纵。</p><p>而这，也助长了消费主义。</p><p>但是消费带来的快乐，终究只是隔靴搔痒，甚至是饮鸩止渴。消费并不能真正填补人性被剥离的空虚。</p><p>特别是，被剥离的部分（工作，或者说是自我实现）还是人性最重要、最核心、最高级的那一部分……</p><p>这种人性被剥离的悲哀</p><p>就正是你体会到的悲哀</p><p>你引以为豪的时候，是你以自我实现（工作）角度去看待编程，这是人性最高级的展现，当然值得自豪。</p><p>而你悲哀的，是发现编程如此高级的东西，它并不属于你……不仅编程的成果不属于你，编程的动机也不属于你，编程过程附带的精神回报也不属于你，甚至你的自我实现（工作）需求也不属于你了……编程沦落为一种生产商品的工具，甚至其本身也是一种商品。</p><p>你的自我实现，变成了一种交换生存资料的手段。放到马斯洛三角里，这种悲哀体现的更加直观：</p><p><img src="https://pic1.zhimg.com/v2-74d63b76e8df193b34eb70a8973f1745_r.jpg?source=1940ef5c" alt="img"></p><p>这个过程相当于把最高级的需求（自我实现），直接压低到最低级的生理需求（交换生存资料）层次！甚至，资本主义倾向于让你只能交换到“刚好能活着”的生存资料，多余的价值都会被剥削！甚至的甚至，再观察一下其他那些层次的需求，呵，这些东西在职场中都是要一一被打破的东西（职场pua请大伙卷起来！）。资本就是要把你压到只能获得生理需求的水平！</p><p>这实在是太tm悲哀了啊！</p><p>所以马克思也是深感悲哀，才搞出了共产主义。</p><p>而共产主义最本质、最核心的创新，就是要把资本主义剥离出来的人性还给人类，把工作和人性相统一，把每一个人都变成完整的人。</p><p>两百年前的哲学家，就已经从现象看到本质，抽离出一套理论体系，做出了一堆神准的推演和预言，定位了核心问题，并想出了一套解决方案。</p><h2 id="文章出处"><a href="#文章出处" class="headerlink" title="文章出处"></a>文章出处</h2><p><a href="http://theory.people.com.cn/n/2015/0209/c83850-26533173-3.html">原文章链接</a></p><h3 id="节选："><a href="#节选：" class="headerlink" title="节选："></a>节选：</h3><p>马克思在文本中提到的异化劳动的第一个规定是，从生产的结果看，劳动者的劳动和他的劳动产品相异化，即“物的异化”。这个规定是表示，劳动者同自己的劳动产品处于异己的对象性关系之中。劳动作为人的一种活动，本来表现为对对象的占有，是人将其自身的意志和力量客观化于对象中。由于劳动和资本的分离，工人生产的产品越多，资本家拿走的越多并转化为更多的资本，反过来继续统治他、奴役他，但是，工人占有的对象却越少，并越受其对象（即产品）的奴役和统治。</p><p>“劳动对工人来说是外在的东西，也就是说，不属于他的本质；因此，他在自己的劳动中不是肯定自己，而是否定自己，不是感到幸福，而是感到不幸，不是自由地发挥自己的体力和智力，而是使自己的肉体受折磨、精神遭摧残。……他的劳动不是自愿的劳动，而是被迫的强制劳动。因此，这种劳动不是满足一种需要，而只是满足劳动以外的那些需要的一种手段。……他的活动属于别人，这种活动是他自身的丧失。”</p><p>　　“结果是，人（工人）只有在运用自己的动物机能——吃、喝、生殖，至多还有居住、修饰等等——的时候，才觉得自己在自由活动，而在运用人的机能时，觉得自己不过是动物。动物的东西成为人的东西，而人的东西成为动物的东西。”——马克思《1844年经济学哲学手稿》</p><h2 id="自我理解"><a href="#自我理解" class="headerlink" title="自我理解"></a>自我理解</h2><p>如果理解了“自我实现”与“交换生存资料”的区别，便能理解：<a href="https://www.bilibili.com/video/BV1wP411L7sC">视频</a>，里面司机的行为。他是为了自我实现，而不是单纯为了交换生存资料。</p><p>如果司机生活在共产主义的社会，他可能是更乐意的这份工作，对他自己来说，他的工作实现了自我意义，他乐意劳动，而不是为了交换生存资料而劳动。</p><p>我是偏向以“自我实现”为驱动的人，如果给我一份我没兴趣或不喜欢的任务，我的生产积极性不会高，因为这是建立在我为了交换生存资料为目的的任务，这是所有人的自然共性。</p><p>如果公司一味地认为我是劳动力商品，那相应的，我也会以交换生存资料为目的地完成任务，我不会有归属感和团队文化认同感，我只是在机械地完成任务并拿到薪水。</p><p>如果我有了对团队文化的认同感，我能意识到我是这个任务中关键的一环，这任务与我高度利益相关，那我“自我实现”为驱动的动力，并且生产积极性会变得很高，届时我并不在乎我工作是否为了生存资料，而是以自我实现而劳动。【这也许就是许多公司给员工股份的原因】</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;随笔&quot;&gt;&lt;a href=&quot;#随笔&quot; class=&quot;headerlink&quot; title=&quot;随笔&quot;&gt;&lt;/a&gt;随笔&lt;/h1&gt;&lt;h2 id=&quot;知乎问题&quot;&gt;&lt;a href=&quot;#知乎问题&quot; class=&quot;headerlink&quot; title=&quot;知乎问题&quot;&gt;&lt;/a&gt;知乎问题&lt;/h</summary>
      
    
    
    
    <category term="马克思" scheme="https://blog.lthero.cn/categories/%E9%A9%AC%E5%85%8B%E6%80%9D/"/>
    
    
    <category term="马克思" scheme="https://blog.lthero.cn/tags/%E9%A9%AC%E5%85%8B%E6%80%9D/"/>
    
  </entry>
  
  <entry>
    <title>【python爬虫】美拍网图片下载</title>
    <link href="https://blog.lthero.cn/2022/09/12/python-download-meipai/"/>
    <id>https://blog.lthero.cn/2022/09/12/python-download-meipai/</id>
    <published>2022-09-12T12:06:41.000Z</published>
    <updated>2022-10-12T12:40:32.632Z</updated>
    
    <content type="html"><![CDATA[<h1 id="美拍网图片下载"><a href="#美拍网图片下载" class="headerlink" title="美拍网图片下载"></a>美拍网图片下载</h1><blockquote><p>难度不大，网站对f12和右键有限制，但不是大问题。</p><p>网站没有反爬，至少没有给图片加防盗链，下载的图片并不是最高清，但清晰度还可以。</p></blockquote><ul><li>多线程代码直接复制之前的，其它的也大部分是走流程，固定套路</li><li>网站上图片全部为jpg格式，所以无需考虑png格式下载</li><li>唯一需要注意的是，有些图片src链接并不完整，需要自行判断和补全</li></ul><p>网站：<a href="https://4zipai.net/">https://4zipai.net</a></p><p>使用方式：</p><p>先：输入路径 </p><p>后：输入网址,如：’<a href="https://4zipai.net/selfies/202207/139004.html&#39;">https://4zipai.net/selfies/202207/139004.html&#39;</a></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;Cookie&#x27;</span>: <span class="string">&#x27;_ga=GA1.2.87052855.1662906879; _gid=GA1.2.106606571.1662906879; twk_idm_key=Szy-fmwxLJBDQNQQ_hKZE; TawkConnectionTime=0; twk_uuid_5e23d8f08e78b86ed8aa0035=%7B%22uuid%22%3A%221.101H94883vBguY180oYHfz0VN3Yrx0pdi2oaeD50URIjcHT13XZdZReDZEMwzt5gW4NEYVHRIUmMAPKTQXzgo0tbdNL6fRa2f2JnkKEdjUC5Me7ZTzLZlaEgUmdlaJJk9PBSm4ORF3UQSw%22%2C%22version%22%3A3%2C%22domain%22%3A%224zipai.net%22%2C%22ts%22%3A1662906990942%7D; __cf_bm=v0FGBMppZPUweg7R0uBuFPrQlE71b0ptig4q4MkaeBU-1662906991-0-AcVALr7cJKi1sMQpzf8Zs1DEJ1PojPDd9mLT8fncCrdyiEBznfws9/awsYksUmTA0dbcUfgPxplYWbTz7LfBSmLvl1dQAD4RU0ni6jxBgdSIvn8SxmBZSJkJCI00EuzjOw==&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myThread</span>(threading.Thread):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, url, fileName, file_path</span>):</span><br><span class="line">        threading.Thread.__init__(self)</span><br><span class="line">        self.url = url</span><br><span class="line">        self.file_path = file_path</span><br><span class="line">        self.fileName = fileName</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">open_url</span>(<span class="params">self, url</span>):</span><br><span class="line">        response = requests.get(url, headers)</span><br><span class="line">        <span class="keyword">return</span> response.text</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        img = requests.get(self.url, headers=headers)</span><br><span class="line">        file = self.file_path + <span class="string">&quot;\\&quot;</span> + self.fileName + <span class="string">&quot;.jpg&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(file):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Downloading %s&quot;</span> % self.fileName)</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;%s/%s.jpg&#x27;</span> % (self.file_path, self.fileName), <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(img.content)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(self.file_path + <span class="string">&quot;\\&quot;</span> + self.fileName + <span class="string">&quot; exist&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x27;https://4zipai.net/selfies/202207/139004.html&#x27;</span></span><br><span class="line">save_path = <span class="built_in">input</span>(<span class="string">&quot;输入要保存的路径文件夹&quot;</span>)</span><br><span class="line">url = <span class="built_in">input</span>(<span class="string">&quot;输入网址&quot;</span>)</span><br><span class="line">rsp = requests.get(url=url, headers=headers)</span><br><span class="line">rsp.encoding=<span class="string">&quot;UTF-8&quot;</span></span><br><span class="line">soup = BeautifulSoup(rsp.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="comment"># 获得标题名</span></span><br><span class="line">title=soup.find(<span class="string">&#x27;div&#x27;</span>,class_=<span class="string">&quot;item_title&quot;</span>)</span><br><span class="line">save_path=save_path+<span class="string">&#x27;\\&#x27;</span>+ <span class="built_in">str</span>(title.find(<span class="string">&quot;h1&quot;</span>).text).strip(<span class="string">&quot; &quot;</span>)</span><br><span class="line"><span class="comment"># 创建标题对应目录</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(save_path):</span><br><span class="line">    os.makedirs(save_path)</span><br><span class="line">li = soup.find(class_=<span class="string">&#x27;content_left&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> li.find_all(<span class="string">&#x27;img&#x27;</span>):</span><br><span class="line">    <span class="comment"># 查找图片链接</span></span><br><span class="line">    each_url=<span class="built_in">str</span>(i.get(<span class="string">&#x27;src&#x27;</span>))</span><br><span class="line">    judge = each_url[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">if</span> judge == <span class="string">&quot;d&quot;</span>:</span><br><span class="line">        each_url = <span class="string">&quot;https://4zipai.net/&quot;</span> + each_url</span><br><span class="line">    name = <span class="built_in">str</span>(each_url).split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>].split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(name) &gt;= <span class="number">9</span>:</span><br><span class="line">        thread1 = myThread(each_url, name, save_path)</span><br><span class="line">        thread1.start()</span><br><span class="line">        time.sleep(<span class="number">0.1</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="推荐"><a href="#推荐" class="headerlink" title="推荐"></a>推荐</h2><blockquote><p>&#x2F;selfies&#x2F;202208&#x2F;140912.html</p><p>&#x2F;selfies&#x2F;202209&#x2F;142694.html</p><p>&#x2F;selfies&#x2F;201808&#x2F;70879.html</p><p>&#x2F;selfies&#x2F;201804&#x2F;63980.html</p><p>&#x2F;selfies&#x2F;201708&#x2F;48223.html</p><p>&#x2F;selfies&#x2F;201903&#x2F;80767.html</p><p>&#x2F;selfies&#x2F;201804&#x2F;63878.html</p><p>&#x2F;selfies&#x2F;202207&#x2F;139004.html</p><p>&#x2F;selfies&#x2F;202209&#x2F;142301.html</p><p>&#x2F;selfies&#x2F;202209&#x2F;142402.html</p><p>&#x2F;selfies&#x2F;202209&#x2F;142391.html</p><p>&#x2F;selfies&#x2F;202209&#x2F;142416.html</p><p>&#x2F;selfies&#x2F;202208&#x2F;142269.html</p><p>&#x2F;selfies&#x2F;202209&#x2F;142317.html</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;美拍网图片下载&quot;&gt;&lt;a href=&quot;#美拍网图片下载&quot; class=&quot;headerlink&quot; title=&quot;美拍网图片下载&quot;&gt;&lt;/a&gt;美拍网图片下载&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;难度不大，网站对f12和右键有限制，但不是大问题。&lt;/p&gt;
&lt;p&gt;网站没有</summary>
      
    
    
    
    <category term="python" scheme="https://blog.lthero.cn/categories/python/"/>
    
    <category term="爬虫" scheme="https://blog.lthero.cn/categories/python/%E7%88%AC%E8%99%AB/"/>
    
    
    <category term="python" scheme="https://blog.lthero.cn/tags/python/"/>
    
    <category term="爬虫" scheme="https://blog.lthero.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>【hexo更新到GitHub后博客内容未变】</title>
    <link href="https://blog.lthero.cn/2022/08/07/hexo-cant-update/"/>
    <id>https://blog.lthero.cn/2022/08/07/hexo-cant-update/</id>
    <published>2022-08-07T11:02:23.000Z</published>
    <updated>2022-08-07T11:08:45.486Z</updated>
    
    <content type="html"><![CDATA[<h1 id="hexo更新到GitHub后博客内容未变"><a href="#hexo更新到GitHub后博客内容未变" class="headerlink" title="hexo更新到GitHub后博客内容未变"></a>hexo更新到GitHub后博客内容未变</h1><blockquote><p>问题描述：hexo d -g可以将文章上传到github的仓库，但打开网页(<code>github-page</code>)后，<strong>发现内容并未更新</strong></p><p>原因：<strong>github-page对私有仓库不免费</strong></p><p>解决方法：<strong>将仓库设置为公开</strong></p></blockquote><p>过程：我尝试过网上各种方法，清除<code>.deploy_git</code>、<code>hexo clean</code>等，但都无效。我检查了github-pages 的更新状态，一直是 <strong>17 days ago</strong> <code>Active</code>。再联想到“github-page”对私有仓库不是免费的，而我虽然之前一直把项目设置为私有，但我开过github学生包，里面包含免费的私有仓库的权益，但最近学生包过期了，于是就不能使用gihub-page。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;hexo更新到GitHub后博客内容未变&quot;&gt;&lt;a href=&quot;#hexo更新到GitHub后博客内容未变&quot; class=&quot;headerlink&quot; title=&quot;hexo更新到GitHub后博客内容未变&quot;&gt;&lt;/a&gt;hexo更新到GitHub后博客内容未变&lt;/h1&gt;&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>【linux】学习笔记Chap_26_系统进程管理</title>
    <link href="https://blog.lthero.cn/2022/08/02/linux-learningPathChp26/"/>
    <id>https://blog.lthero.cn/2022/08/02/linux-learningPathChp26/</id>
    <published>2022-08-02T13:15:11.000Z</published>
    <updated>2022-08-02T13:15:35.541Z</updated>
    
    <content type="html"><![CDATA[<h1 id="系统进程管理"><a href="#系统进程管理" class="headerlink" title="系统进程管理"></a>系统进程管理</h1><ul><li>在Unix中，所有信息都由某个文件或程序提供，简单来说，文件只是个输入输出对象，而一个进程才是执行的对象</li></ul><h3 id="本章将搞懂-："><a href="#本章将搞懂-：" class="headerlink" title="本章将搞懂 ："></a>本章将搞懂 ：</h3><ul><li>进程从哪来？进程如何被系统控制？如何控制自己的进程？</li></ul><h2 id="系统如何控制进程"><a href="#系统如何控制进程" class="headerlink" title="系统如何控制进程"></a>系统如何控制进程</h2><ul><li>准确说：<strong>进程是一个被装载到内存的程序</strong>，全部的程序数据、信息也会被放入内存中。</li></ul><p>所有的<strong>进程被内核kernel</strong>管理，当一个进程创建时，内核指定一个 Process ID(identification number)给进程，以便追踪进程信息。</p><ul><li><ul><li>内核会管一个<strong>进程信息表</strong>，由<strong>PID和进程名构成，</strong>有了这个表，<strong>内核将掌握控制进程的必要信息。</strong></li></ul></li></ul><blockquote><p>小型Unix系统可以同时执行100多进程，大Unix可达到上千进程。</p></blockquote><h3 id="Cpu-time"><a href="#Cpu-time" class="headerlink" title="Cpu time"></a>Cpu time</h3><p>先介绍Cpu time, 以前电脑只有一个cpu，而单个cpu要面对不同进程任务，为了雨均沾，给每个进程设置一个cputime 如10毫秒。cpu从 等待执行的进程列表中选出一个进程，让其执行10毫秒，时间一到就选出下一个进程，而上一个进程就要记录当前运行的状态，以便下次再继续。</p><h3 id="System-call"><a href="#System-call" class="headerlink" title="System call"></a><strong>System call</strong></h3><p>当一个程序要执行时，要向内核(kernel)发出一条call，让系统准备不同操作</p><ul><li>最重要的system calls 有<strong>fork exec wait exit</strong></li></ul><h4 id="fork"><a href="#fork" class="headerlink" title="fork"></a>fork</h4><p>fork 用来创建一个当前进程的复制进程，源进程为父进程，复制的进程为子进程</p><h4 id="wait"><a href="#wait" class="headerlink" title="wait"></a>wait</h4><p>wait 可以将进程暂停</p><h4 id="exec"><a href="#exec" class="headerlink" title="exec"></a>exec</h4><p>exec 可以将当前正在执行的进程改变成其他进程</p><h4 id="exit"><a href="#exit" class="headerlink" title="exit"></a>exit</h4><p>exit 退出当前进程(如，对刚登陆的shell使用，则会退出) shell本身也是个进程，也有PID</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">可以用echo $$ 查看当前shell的PID</span><br><span class="line">1509615</span><br></pre></td></tr></table></figure><p>kill 用来结另一个进程</p><h2 id="一个进程如何被执行"><a href="#一个进程如何被执行" class="headerlink" title="一个进程如何被执行"></a>一个进程如何被执行</h2><p>Unix有两种命令 内部和外部命令，内部命令是内置在Unix中的，所以不用创建新的进程</p><p>对于外部命令或外部程序，<strong>以下为Unix执行过程</strong></p><p>在shell中输入一个sl命令</p><p>则Unxi会用<strong>fork</strong>(system call ) 创建一个当前进程的复制进程(子进程) ,</p><ul><li>然后将子进程用<strong>exec</strong>将当前进程改变到要执行的外部命令sl</li><li>同时，将父进程用<strong>wait</strong>暂停执行，直到子进程完成.</li></ul><blockquote><p>进入shell后打开文档进行编辑也是这个过程，父进程将等待到vim退出编辑</p></blockquote><ul><li>在子进程结束后，将执行<strong>exit</strong>，然后转到父进程中。<strong>并将子进程所用的文件、内存全部释放</strong>，让其它进程再使用，此时，像子进程这种已经失效的进程成为<strong>Zombie</strong> ,在进程表中仍然保留其信息，当父进程恢复后，可以查看子进程在进程表的信息，随后系统将自动将信息删除。</li></ul><blockquote><p>Q：上面提到了fork 可以创建一份复制进程和一个父进程，但如何辨识两个进程是父还是子进程？</p><p>A：fork对父进程产生一个返回值(return value) 是进程原PID ,对子进程返回0</p></blockquote><h2 id="最初的进程-init"><a href="#最初的进程-init" class="headerlink" title="最初的进程 init"></a>最初的进程 init</h2><blockquote><p>Q：既然所有进程都由fork创建的子进程，那终极父进程是谁？</p><p>A：init进程</p></blockquote><h4 id="unix启动时"><a href="#unix启动时" class="headerlink" title="unix启动时"></a>unix启动时</h4><p>系统会<strong>”手动“</strong>创建一个<strong>特殊进程</strong>（不用fork创建)，并给一个<strong>PID为0</strong>（**#0）<strong>被称为</strong>”空闲进程“**。</p><ul><li>他执行一些重要功能如初始化数据</li><li>随后**#0进程开始分枝(fork)出进程#1**</li></ul><blockquote><p>#1被#0分支出来的，就是init进程，而<strong>init进程会打开系统的控制台并挂载到根文件系统</strong>。</p><p>然后#1运行&#x2F;etc&#x2F;inittab这里的shell脚本，执行脚本过程中，#1<strong>用fork产生子进程</strong>来执行不同命令，如让用户登陆</p></blockquote><ul><li>随后**#0进入无限循环<strong>但</strong>不做任何事**件(名字由来)</li><li>当目前无任何进程时，系统将进入#0进程，并不做任何事。</li></ul><h4 id="综上所述"><a href="#综上所述" class="headerlink" title="综上所述"></a>综上所述</h4><blockquote><p>#0这个空闲进程才是真正的终极父进程，#1 init也是个子进程，但考虑到#0完成任务后就消失了(不做任何事，但进程还运行runing)，因此，将#1称为 在活着的(living) 终极父进程</p></blockquote><p>如果某个父进程在子进程结束前先没了，子进程将变成(orphans)<strong>孤儿</strong>，但<strong>init将领养这个孤儿</strong>，让他继续完成未完成的任务。</p><h2 id="前台和后台进程"><a href="#前台和后台进程" class="headerlink" title="前台和后台进程"></a>前台和后台进程</h2><h3 id="后台进程（background）"><a href="#后台进程（background）" class="headerlink" title="后台进程（background）"></a>后台进程（background）</h3><p>让进程自己运行，不用监看他运行，shell将<strong>不会等待</strong>进程完成，就会<strong>提示输入下一条命令</strong></p><p>后台的进程也被称为<strong>自治进程</strong></p><p>如：</p><p>要对一大堆数据排序，要花较长时间，则可以让进程自己运行，人可以再执行一些其它命令。可以用&amp;(ampersan) 实现，告诉进程让他自己运行不用交互。</p><p>在一般命令后添加一个<code>&amp;</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort &lt; file &gt; res &amp; </span><br></pre></td></tr></table></figure><p>如果一行有多个命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(sleep 5;cat /etc/passwd) &amp; #要用括号包起来</span><br></pre></td></tr></table></figure><h3 id="前台进程（foreground）"><a href="#前台进程（foreground）" class="headerlink" title="前台进程（foreground）"></a>前台进程（foreground）</h3><p>shell将<strong>等进程完成后再让输入下一命令</strong></p><h3 id="后台进程注意点"><a href="#后台进程注意点" class="headerlink" title="后台进程注意点"></a>后台进程注意点</h3><ul><li>对于某些需要在进程执行还要输入信息的情况，<strong>如果进程得不到输入，就会一直等待到有输入</strong>，这时可以用：</li></ul><p><code>fg命令</code> 将此<strong>进程移到前台</strong>并输入相关信息</p><ul><li>后台正在的进程会将<strong>输出到监视器</strong>或<strong>指定要某个文件</strong>中(推荐)</li><li>后台进程的<strong>输入会被用&#x2F;dev&#x2F;nul代替</strong>，并且无法用ctrl+c或其它方式中断。当然，可以用<code>kill</code> 来结束后台进程</li></ul><p>当后台进程完成时，shell会发送一条信息如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1] Done ls&gt;temp #表示进程完成</span><br></pre></td></tr></table></figure><p>当然，<strong>shell不会不识相</strong>的突然打断正在进行的工作并发出这条提醒，而在下一次正常提示其它命令信息时<strong>附加这条完成信息</strong></p><ul><li>如<strong>不想要提示信息</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set -o notify 就没了</span><br><span class="line">set +o notify 就有了</span><br></pre></td></tr></table></figure><h2 id="sleep命令-让进程延迟启动"><a href="#sleep命令-让进程延迟启动" class="headerlink" title="sleep命令#让进程延迟启动"></a>sleep命令#让进程延迟启动</h2><h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sleep interval[s|m|h|d]   #interval是延迟时间</span><br></pre></td></tr></table></figure><h4 id="如"><a href="#如" class="headerlink" title="如"></a>如</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sleep 5 5秒（默认以秒为单位）</span><br><span class="line">sleep 5m 5分钟</span><br><span class="line">sleep 20;cat /etc/prasswd &amp;    表示在后台等待20秒，随后将passwd复制到屏幕前</span><br></pre></td></tr></table></figure><h2 id="jobs命令-显示全部的工作-1-x2F-2-x2F-3"><a href="#jobs命令-显示全部的工作-1-x2F-2-x2F-3" class="headerlink" title="jobs命令#显示全部的工作 #1&#x2F;#2&#x2F;#3"></a>jobs命令#显示全部的工作 #1&#x2F;#2&#x2F;#3</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps process status #显示全部进程</span><br></pre></td></tr></table></figure><p>ctrl + Z 将当前进程悬挂</p><p>echo $$显示当前shell 的PID</p><p>echo $! 显示上一个被移动到后端的命令</p><h2 id="fg命令-将job移动到前端"><a href="#fg命令-将job移动到前端" class="headerlink" title="fg命令#将job移动到前端"></a>fg命令#将job移动到前端</h2><h4 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h4><ul><li>fg %[job]</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fg %num #则为通用方法</span><br></pre></td></tr></table></figure><p>若不添加**[job]**则恢复当前正在执行的job（有+）</p><p>或者可以用某个命令开头</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fg %make / fg %m /fg %?game</span><br></pre></td></tr></table></figure><p>再或者</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fg %+ / fg %-</span><br></pre></td></tr></table></figure><h4 id="常用表"><a href="#常用表" class="headerlink" title="%常用表"></a>%常用表</h4><p>%% 当前job</p><p>%+ 当前job</p><p>%- 之前job</p><p>%n job#n</p><p>%name 用具体名字</p><p>%?name 命令的一部分</p><p>[8]- running make game &gt; res &amp;</p><p>[1]+ running gcc program.c &amp;</p><p>举例：正在执行vim 编辑，突然想查找cal，可以将vim悬挂到后台按ctrl+z，在shell中输入cal 再将vim从后台中fg出来</p><p><code>ctrl+z</code> 后，shell给出一条提示，表示job#1 被停止</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1]+ Stopped vim testf   #表示testf已经停止</span><br></pre></td></tr></table></figure><p><code>fg %或fg %vim</code> 后可以恢复vim testf</p><h2 id="suspend命令-将当前shell悬挂"><a href="#suspend命令-将当前shell悬挂" class="headerlink" title="suspend命令#将当前shell悬挂"></a>suspend命令#将当前shell悬挂</h2><p>按<code>ctrl+z</code> 可以将job悬挂到后台，除了当前shell。如想将当前shell也悬挂，要用suspend</p><h4 id="功能："><a href="#功能：" class="headerlink" title="功能："></a>功能：</h4><ul><li>将当前shell悬挂，可以快速切换不同的身份</li></ul><h4 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h4><ul><li>suspend [-f]</li></ul><h4 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h4><ul><li>在bash shell下开了tcsh</li><li>在tcsh下，可以用suspend悬挂tcsh并bg到原bash</li></ul><h2 id="多任务同时协作"><a href="#多任务同时协作" class="headerlink" title="多任务同时协作"></a>多任务同时协作</h2><h3 id="jobs展示目前执行的"><a href="#jobs展示目前执行的" class="headerlink" title="jobs展示目前执行的"></a>jobs展示目前执行的</h3><h4 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h4><ul><li>jobs [-l]</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jobs</span><br><span class="line">[1] Stopped vim testf (被悬挂了)</span><br></pre></td></tr></table></figure><ul><li>jobs -l 可以显示进程PID</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jobs -l</span><br><span class="line">[1]+ 2288 Stopped vim testf</span><br></pre></td></tr></table></figure><ul><li>其中的+表示，current job正在执行的job</li><li>对应的-表示 之前的job</li></ul><h2 id="bg命令-将job移动到后端"><a href="#bg命令-将job移动到后端" class="headerlink" title="bg命令#将job移动到后端"></a>bg命令#将job移动到后端</h2><h4 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h4><ul><li>bg [%job]</li></ul><p>用法和fg一样，%后可以接数字、命令、命令部分</p><p>bg一般配合<code>ctrl+z</code> 使用，如<strong>在等待某个程序输出时</strong>，此时不能输入命令，按<code>ctrl+z</code> 将进程悬挂，再输入<code>bg</code> 将进程放入后台。</p><h2 id="ps命令-查看进程信息"><a href="#ps命令-查看进程信息" class="headerlink" title="ps命令#查看进程信息"></a>ps命令#查看进程信息</h2><p>（process status） 查看进程信息</p><h4 id="语法-4"><a href="#语法-4" class="headerlink" title="语法"></a>语法</h4><ul><li>ps [-aefFly] [-p pid] [-u uid ]</li></ul><h4 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h4><p>显示哪些文件</p><ul><li>-a 将userid与进程相关</li><li>-e (everything)全部的进程包含系统进程</li><li>-p pid 查找指定PID</li><li>-u uid 查找UID</li><li>-t 只显示系统进程</li></ul><p>显示哪些数据</p><ul><li>默认 PID TTY TIME CMD</li><li>常用 -f UID PID PPID C TTY TIME CMD</li><li>-ly  S UID PID PPID C PRI NI RSS SZ WCHAN TTY TIME CMD</li></ul><p>TTY是终端名</p><p>CMD是正在执行的命令</p><p>TIME是使用cpu时间</p><p>PID是当前进程id</p><p>PPID是父进程id</p><p>WCHAN 等待的状态？有wait&#x2F;finish等值</p><p>S 状态 R runing T suspended S waiting</p><p>SZ 物理大小（占用内存情况）</p><p>ps -ef 常用，可以查看全部的进程并包含UID</p><p>使用ps 查找非系统进程，再显示出PID后再用<code>ps -f -p 1234</code> 显示具体信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ps</span><br><span class="line">1548435 pts/0 00:00:00 ps</span><br><span class="line">ps -f -p 1548435</span><br><span class="line">UID PID PPID C STIME TTY TIME CMD</span><br><span class="line">root 1522200 1522175 0 13:44 pts/0 00:00:00 -bash</span><br></pre></td></tr></table></figure><h2 id="top命令-实时监视系统进程"><a href="#top命令-实时监视系统进程" class="headerlink" title="top命令#实时监视系统进程"></a>top命令#实时监视系统进程</h2><h4 id="功能：-1"><a href="#功能：-1" class="headerlink" title="功能："></a>功能：</h4><ul><li>top可以展示系统实时变化的信息</li><li>按h可以查看按键帮助</li></ul><h4 id="语法：-1"><a href="#语法：-1" class="headerlink" title="语法："></a>语法：</h4><ul><li>top -d delay -n count [-p pid[,pid]]</li></ul><h4 id="选项-1"><a href="#选项-1" class="headerlink" title="选项"></a>选项</h4><ul><li>-d 1 每隔1秒刷新 &#x2F;0.1s</li><li>-p PID 可以显示某个进程详细信息</li><li>-p -d 1 -p 1,2,3,4,5 可以展示多个PID</li></ul><h2 id="pstree命令"><a href="#pstree命令" class="headerlink" title="pstree命令"></a>pstree命令</h2><h4 id="功能：-2"><a href="#功能：-2" class="headerlink" title="功能："></a>功能：</h4><ul><li>展示进程树</li></ul><blockquote><p>上文提到过 ：每个进程都由其它进程复制的，源进程为父，新进程为子，而且子进程也有PID</p><p>#0被手动创建后，fork出子进程#1，再由#1执行各种操作，产生其它进程#3.4.5</p><p>而这些#3,4,5被称为<strong>守护进程</strong>，任务是等待事件发生并做出反馈</p><p>登陆进程会一直等着用户登陆，一旦用户登陆，登陆进程会创建新进程来执行shell</p><p>而shell又会执行命令，创建新进程</p><p>于是，每个进程便有唯一的父进程，整个进程系统可以用一棵树结构表示</p></blockquote><h4 id="语法-5"><a href="#语法-5" class="headerlink" title="语法"></a>语法</h4><ul><li>pstree [-aAcGnpu] [pid|userid]</li></ul><h4 id="选项-2"><a href="#选项-2" class="headerlink" title="选项"></a>选项</h4><ul><li>-p PID 指定PID&#x2F;UID 将展示属于UID的（全部）进程</li><li>-n 按PID排序</li><li>-a 展示整个命令行</li><li>-u 在子进程与父进程不同UID时标记</li></ul><h4 id="举例-1"><a href="#举例-1" class="headerlink" title="举例"></a>举例</h4><ul><li>用ps或echo $$查出当前shell的PID，再用pstree -p PID查出当前sh的结构</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo $$</span><br><span class="line">1539825</span><br><span class="line">pstree -p 1539825</span><br><span class="line">bash(1522200)---vim(1528516)---bash(1528529)---pstree(1528530)</span><br><span class="line">#可以看到 当前bash下开的命令 vim 后面的bash说明在进行vim后又打开了一个bash</span><br></pre></td></tr></table></figure><h2 id="Unix如何管理文件和进程"><a href="#Unix如何管理文件和进程" class="headerlink" title="Unix如何管理文件和进程"></a>Unix如何管理文件和进程</h2><ul><li>文件有文件系统，有文件树，根是root&#x2F; 每个文件有I-number 查看文件信息时，用ls 只要查看文件的I-node就行</li><li>进程有进程系统，进程树，根是#1 init 每个进程有PID 查看进程时，用ps&#x2F;top 要在进程所在的&#x2F;proc目录下，找到进程对应文件，再从文件中读取出信息</li></ul><blockquote><p>Q:那有什么命令可以打通文件与进程的关系吗？<code>fuser</code></p><p>A:可以列出每个<strong>进程所用到的文件</strong></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">find ./ -name &#x27;*.mp3&#x27; &gt;bar 2&gt;/dev/null &amp;   #让find在后台查找全部的mp3 把输出给bar</span><br><span class="line">[1] 2233        #表示当前进程PID</span><br><span class="line">fuser bar       #查询bar文件，可以得到</span><br><span class="line">bar:2233        #说明当前文件被2233进程使用</span><br></pre></td></tr></table></figure><h2 id="kill命令-给job发送一个信号"><a href="#kill命令-给job发送一个信号" class="headerlink" title="kill命令#给job发送一个信号"></a>kill命令#给job发送一个信号</h2><ul><li>给其它进程发送信号</li><li>停止一个进程 对某些进程不能用ctrl+c停止时（如后台进程）</li></ul><h3 id="停止进程"><a href="#停止进程" class="headerlink" title="停止进程"></a>停止进程</h3><h4 id="语法-6"><a href="#语法-6" class="headerlink" title="语法"></a>语法</h4><ul><li>kill [-9] PID | jobid</li></ul><h4 id="如-1"><a href="#如-1" class="headerlink" title="如"></a>如</h4><ul><li>kill 2233或像fg&#x2F;bg一样</li><li>kill %vim</li><li>kill %+ 停止当前运行进程</li></ul><p>如果kill也失效 <strong>-9 强制停止</strong>，保证一定会停止</p><p>kill -9 2233 —-但此方法<strong>不会让进程释放使用的资源</strong>，可能会导致文件错误关闭，<strong>要少用</strong></p><h3 id="发送信号"><a href="#发送信号" class="headerlink" title="发送信号"></a>发送信号</h3><p>kill本来是用于给不同进程发送信号的，但默认下发送结束进程信号，所以被叫做kill</p><h4 id="语法-7"><a href="#语法-7" class="headerlink" title="语法"></a>语法</h4><ul><li>kill [-signal] pid | jobid</li></ul><p>使用kill -l可以查看全部的信号</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;系统进程管理&quot;&gt;&lt;a href=&quot;#系统进程管理&quot; class=&quot;headerlink&quot; title=&quot;系统进程管理&quot;&gt;&lt;/a&gt;系统进程管理&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;在Unix中，所有信息都由某个文件或程序提供，简单来说，文件只是个输入输出对象，而一个进程才是执</summary>
      
    
    
    
    <category term="linux" scheme="https://blog.lthero.cn/categories/linux/"/>
    
    
    <category term="linux" scheme="https://blog.lthero.cn/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>【linux】学习笔记Chap_13_Shell_variable</title>
    <link href="https://blog.lthero.cn/2022/08/02/linux-learningPathChp13/"/>
    <id>https://blog.lthero.cn/2022/08/02/linux-learningPathChp13/</id>
    <published>2022-08-02T13:13:32.000Z</published>
    <updated>2022-08-02T13:14:04.072Z</updated>
    
    <content type="html"><![CDATA[<h1 id="【linux】学习笔记Chap-13-Shell-variable"><a href="#【linux】学习笔记Chap-13-Shell-variable" class="headerlink" title="【linux】学习笔记Chap_13_Shell_variable"></a>【linux】学习笔记Chap_13_Shell_variable</h1><h2 id="子进程或子shell"><a href="#子进程或子shell" class="headerlink" title="子进程或子shell"></a>子进程或子shell</h2><p>在登陆后的shell可以作为父shell</p><p>如果输入vi 命令 进入 另一个进程 则称为子进程</p><p>如果输入 bash 也可以创建一个新的shell 也是子sell</p><h3 id="global-and-local-变量"><a href="#global-and-local-变量" class="headerlink" title="global and local 变量"></a>global and local 变量</h3><p>像IGNOREEOF就是全局变量，他们可以用于任何进程 而且变量唯一</p><p>环境变量全部用<strong>大写表示</strong> 一般以<strong>小写命令局部变量</strong>（shell）变量</p><p>全部变量<strong>既是shell 也是 environment 变量</strong>不存在单纯的环境变量</p><p>想比较<strong>单纯shell变量</strong>和<strong>全部变量</strong>可以使用<strong>env</strong></p><p><strong>若只在set中</strong>,<strong>不在env中</strong>就是纯shell变量 （set中变量也比env多）</p><p><strong>两者都在的就是全部变量</strong></p><p>默认创建的变量都是shell变量</p><h2 id="创建环境变量—–export"><a href="#创建环境变量—–export" class="headerlink" title="创建环境变量—–export"></a>创建环境变量—–export</h2><p>export 来创建一个shell + environment 变量</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lthero=smart</span><br><span class="line">export lthero</span><br></pre></td></tr></table></figure><p>即可生效</p><p>或</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lthero=smart;export lthero</span><br></pre></td></tr></table></figure><p>又或</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export lthero=smart HOME=&quot;/etc/home&quot;....</span><br></pre></td></tr></table></figure><h2 id="查看环境变量—–env"><a href="#查看环境变量—–env" class="headerlink" title="查看环境变量—–env"></a>查看环境变量—–env</h2><p>env 可以查看全部的默认变量(环境变量)</p><p>用set 可以查看全部的shell 变量</p><h2 id="删除变量"><a href="#删除变量" class="headerlink" title="删除变量"></a>删除变量</h2><p>unset 删除一个变量</p><p>unset lthero HOME 只能用unset or un-export 删除shell&amp;环境变量</p><h2 id="echo-引号用法"><a href="#echo-引号用法" class="headerlink" title="echo 引号用法"></a>echo 引号用法</h2><p>echo ‘……’单引号内容的$会失效，将只输出$</p><p>“……”双引号内$() 可以起作用 $()表达执行某个命令</p><h3 id="用-连接长内容"><a href="#用-连接长内容" class="headerlink" title="用\连接长内容"></a>用\连接长内容</h3><p>echo test stetz stet \</p><p>test test ……….. \</p><p>可以换行 但内容是相连的，输出<strong>不会有换行</strong></p><h3 id="用引号连接长内容"><a href="#用引号连接长内容" class="headerlink" title="用引号连接长内容"></a>用引号连接长内容</h3><p>echo **’**test stets stet</p><p>etste**’**</p><p>或者用”” 内容会保留输入格式 即<strong>有换行</strong></p><h2 id="命令分类"><a href="#命令分类" class="headerlink" title="命令分类"></a>命令分类</h2><h3 id="internal-builtin）内部原生命令"><a href="#internal-builtin）内部原生命令" class="headerlink" title="internal(builtin）内部原生命令"></a>internal(builtin）内部原生命令</h3><p>shell会查找命令的程序位置再执行</p><h3 id="external外部命令"><a href="#external外部命令" class="headerlink" title="external外部命令"></a>external外部命令</h3><p>shell 会在 PATH这个环境变量中，优先查找外部命令程序位置</p><p>echo $PATH 可以查看全部外部命令存入位置 可以自己再添加 &#x2F;bin:&#x2F;usr&#x2F;bin: …. 用冒号分隔</p><h3 id="type检测命令类型"><a href="#type检测命令类型" class="headerlink" title="type检测命令类型"></a>type检测命令类型</h3><p>可以用type 检测所用命令是否为原生命令</p><p><code>type date time set</code> 一次查三个</p><p>date is &#x2F;bin&#x2F;date</p><p>time is a shell keyword  &#x2F;&#x2F;<strong>time 是keyword</strong> 也是原生在shell<strong>内部的命令</strong></p><p>set is a shell builtin   &#x2F;&#x2F;<strong>原生命令</strong></p><h3 id="命令help"><a href="#命令help" class="headerlink" title="命令help"></a>命令help</h3><p>help 可以列出全部的builtin命令 其中 help也是builtin命令</p><p>对于<strong>内置命令</strong>，可以查看<strong>基本用法</strong></p><p>” help 命令“ 和“命令 –help”一样</p><p>help -s pwd 将只显示其选项 参数</p><p>对于<strong>外置命令，用</strong></p><p>“命令 –help”</p><h2 id="export—-添加自定义路径"><a href="#export—-添加自定义路径" class="headerlink" title="export—-添加自定义路径"></a>export—-添加自定义路径</h2><p>对于已经设置好的PATH 可以用export 添加自己的路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exprot PATH=&quot;$PATH:/usr/bin/myfile&quot;</span><br></pre></td></tr></table></figure><p>其中 myfile 里面可以放入自定义的shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exprot PATH=&quot;/usr/bin/myfile:$PATH&quot;</span><br></pre></td></tr></table></figure><p>此用法将自定义路径<strong>添加到前面</strong></p><p>添加到前面后，如果自己有同名的内置sh文件，shell 会<strong>优先执行自定义</strong>的，再执行内置的</p><h3 id="设置PATH"><a href="#设置PATH" class="headerlink" title="设置PATH"></a>设置PATH</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exprot PATH=&quot;/bin:/usr/bin:/usr/local/bin&quot;....</span><br></pre></td></tr></table></figure><h3 id="设置终端命令符号"><a href="#设置终端命令符号" class="headerlink" title="设置终端命令符号"></a>设置终端命令符号</h3><p>在<code>/root/.bashrc</code> 中添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PS1=&quot;\[\e[33;1m\]\u@\h:\w# \[\e[0m\]&quot;</span><br></pre></td></tr></table></figure><p>32是绿色 33淡黄色</p><p>可以设置命令提示符 成为绿色 \u 命令 user \h hostname \w 是当前全路径 \W 只显示当前路径</p><p><strong>修改后立即生效source &#x2F;etc&#x2F;profile</strong></p><p><a href="https://www.cnblogs.com/kevingrace/p/5985970.html">详细</a></p><p>另外：</p><ul><li><code>vim /etc/motd</code> 可以修改连接上linux对话</li></ul><p>如：Hello,Welcome to Linux!</p><ul><li><code>/etc/profile.d</code> 目录下添加自定义sh脚本将连接到linux时执行</li></ul><h4 id="上面PS1中的用法是一种特殊写法"><a href="#上面PS1中的用法是一种特殊写法" class="headerlink" title="上面PS1中的用法是一种特殊写法"></a>上面PS1中的用法是一种特殊写法</h4><p>\u代表 $USER(环境变量) 当前用户</p><p>\w代表$PWD 当前路径</p><p>\h代表$(hostaname) 主机名</p><p>\d代表date 时间</p><p>@代表time  运行时间</p><p>!代表历史命令</p><h2 id="查看历史记录"><a href="#查看历史记录" class="headerlink" title="查看历史记录"></a>查看历史记录</h2><h3 id="history"><a href="#history" class="headerlink" title="history"></a>history</h3><p>history 将展示全部的历史记录 如果想要运行某条 num是命令编号</p><p>可以<code>!num</code> 将执行那条命令， <code>!!</code> 将自动执行上一条命令</p><h3 id="fc"><a href="#fc" class="headerlink" title="fc"></a>fc</h3><p>fc 将自动调用vim 编辑器修改命令 修改完成并自动r执行</p><p>fc -l 显示历史近20条命令</p><p><code>fc -s num</code> 和 <code>! num</code> 一样 执行指定命令</p><p><code>fc num</code> 将编辑此命令</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;【linux】学习笔记Chap-13-Shell-variable&quot;&gt;&lt;a href=&quot;#【linux】学习笔记Chap-13-Shell-variable&quot; class=&quot;headerlink&quot; title=&quot;【linux】学习笔记Chap_13_Shell_v</summary>
      
    
    
    
    <category term="linux" scheme="https://blog.lthero.cn/categories/linux/"/>
    
    
    <category term="linux" scheme="https://blog.lthero.cn/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>【linux】学习笔记Chap_14_Init_file</title>
    <link href="https://blog.lthero.cn/2022/08/02/linux-learningPathChp14/"/>
    <id>https://blog.lthero.cn/2022/08/02/linux-learningPathChp14/</id>
    <published>2022-08-02T13:12:05.000Z</published>
    <updated>2022-08-07T10:36:17.072Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Init-file"><a href="#Init-file" class="headerlink" title="Init_file"></a>Init_file</h1><blockquote><p>初始文件</p></blockquote><h3 id="命令习惯rc"><a href="#命令习惯rc" class="headerlink" title="命令习惯rc"></a>命令习惯rc</h3><p>run commonds 是一种配置文件，如 .bashrc .exrc</p><p>这些命令后在某个程序启动时自动运行</p><p>作为一个命名习惯， 如 我写了个foo 的程序 那么将<strong>初始化文件</strong></p><p>写作为 <strong>.foorc</strong> (foo 只是随便哪个名字)</p><h2 id="文档编辑器"><a href="#文档编辑器" class="headerlink" title="文档编辑器"></a>文档编辑器</h2><h3 id="nano-和-pico-和-vi"><a href="#nano-和-pico-和-vi" class="headerlink" title="nano 和 pico 和 vi"></a>nano 和 pico 和 vi</h3><p>vi 常用于 CLI 命令行接口</p><p>nano 和 pico 常用于GUI 图形化接口</p><h2 id="Shell-几种形式"><a href="#Shell-几种形式" class="headerlink" title="Shell 几种形式"></a>Shell 几种形式</h2><p>shell 的几种形式 login shell &amp;&amp; non login shell</p><p>交互的划分 interactive shell &amp;&amp; non-interactive shell</p><h3 id="login-shell"><a href="#login-shell" class="headerlink" title="login shell"></a>login shell</h3><p>login 需要用户名密码进入 ，一般的 ssh (secure shell) 登陆都用login shell</p><p>login shell 初始化，会执行 login file 和 环境 file ，顺序如下</p><ol><li>&#x2F;etc&#x2F;profile 这个是全局的配置 不管哪个用户登陆都会读取</li><li>&#x2F;etc&#x2F;profile里面会执行<strong>profile.d文件夹内</strong>的所有sh文件</li><li>&#x2F;root&#x2F;.bash_profile或 &#x2F;root&#x2F;.profile 或 &#x2F;root&#x2F;.bash_login 按顺序找到哪个，就执行哪个，只执行一个<br>这三个文件都会读取 &#x2F;root&#x2F;.bashrc (环境变量文件)</li></ol><h3 id="non-login-shell"><a href="#non-login-shell" class="headerlink" title="non-login shell"></a>non-login shell</h3><p>开non-login shell，例如，在login shell 中</p><ol><li>输入<strong>bash开的新shell</strong></li><li>通过 <strong>su username 开的 shell</strong></li></ol><p>su -username 可以开login shell 不加-开的就是non login shelll</p><h3 id="interactive-shell"><a href="#interactive-shell" class="headerlink" title="interactive shell"></a>interactive shell</h3><p>有交互的 shell 即 等待输入命令并解释执行命令 等待下一个命令</p><h3 id="non-interactive-shell"><a href="#non-interactive-shell" class="headerlink" title="non interactive shell"></a>non interactive shell</h3><p>一般的shell 脚本执行 如 bash hello.sh 即 <strong>不与用户交互 一次性执行脚本,<strong>哪怕sh中</strong>有让用户输入的过程也不是可交互脚本</strong></p><h3 id="echo-查看Shell类型"><a href="#echo-查看Shell类型" class="headerlink" title="echo $-查看Shell类型"></a>echo $-查看Shell类型</h3><p><code>echo $-</code> 可以查看当前是否为交互shell</p><p>输出有“himBH”就是交互shell</p><p>在写shell脚本头部时：</p><p><code>#!bin/bash</code>        是 non login &amp; non interactive shell</p><p><code>#!bin/bash --login</code> 是login non &amp; interactive shell</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Init-file&quot;&gt;&lt;a href=&quot;#Init-file&quot; class=&quot;headerlink&quot; title=&quot;Init_file&quot;&gt;&lt;/a&gt;Init_file&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;初始文件&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id</summary>
      
    
    
    
    <category term="linux" scheme="https://blog.lthero.cn/categories/linux/"/>
    
    
    <category term="linux" scheme="https://blog.lthero.cn/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>【linux】学习笔记Chap_15_I/O</title>
    <link href="https://blog.lthero.cn/2022/08/02/linux-learningPathChp15/"/>
    <id>https://blog.lthero.cn/2022/08/02/linux-learningPathChp15/</id>
    <published>2022-08-02T13:10:46.000Z</published>
    <updated>2022-08-02T13:11:29.567Z</updated>
    
    <content type="html"><![CDATA[<h1 id="I-x2F-O"><a href="#I-x2F-O" class="headerlink" title="I&#x2F;O"></a>I&#x2F;O</h1><h2 id="标准输入"><a href="#标准输入" class="headerlink" title="标准输入"></a>标准输入</h2><p>一旦登陆 系统就设置一个标准输入（从键盘） 标准输出和标准错误到屏幕</p><p>如果想将输出写入文件中</p><h3 id="gt-覆盖写入"><a href="#gt-覆盖写入" class="headerlink" title="&gt;覆盖写入"></a>&gt;覆盖写入</h3><p>用 “ &gt; “符号，如： sort nums &gt; file 这是覆盖写入 如果文件不存在就创建 如果存在就覆盖</p><h3 id="gt-gt-追加写入"><a href="#gt-gt-追加写入" class="headerlink" title="&gt;&gt;追加写入"></a>&gt;&gt;追加写入</h3><p>用 “&gt;&gt;” ，如： sort nums &gt;&gt; file 追加写入 如果不存在就创建 存在就追加</p><h3 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h3><p>如果 <strong>不想直接用“&gt;”覆盖</strong> 可以设置<strong>变量“</strong>noclobber”让覆盖写入变成 <strong>“&gt;|”，可以防止误触</strong></p><p><code>set -o noclobber</code> 则生效</p><p>写入 <code>/root/.bashrc</code> 中永远生效</p><h2 id="从文件中读入数据"><a href="#从文件中读入数据" class="headerlink" title="从文件中读入数据"></a>从文件中读入数据</h2><h3 id="lt-读入"><a href="#lt-读入" class="headerlink" title="&lt;读入"></a>&lt;读入</h3><p><code>&lt; file</code>  将file文件输出到某个指令或<code>sort &lt;/etc/passwd</code>  将密码排序后输出到屏幕中</p><p><strong>可以同时读入和写入</strong></p><p><code>sort &lt; rawdata &gt;report</code> 从<strong>rawdata</strong> 读入到sort 再将 sort 的结果 写入到<strong>report</strong></p><p><strong>但读入文件和保存文件不能同一个，否则文件内容清空</strong></p><p>因为，保存时按<strong>覆盖保存，先将文件”A”清空，再将文件”A”（空的）复制到文件”A”中</strong></p><p>sort 命令是原生的 可以对文件内容排序 按数值或字母</p><h2 id="标准输出"><a href="#标准输出" class="headerlink" title="标准输出"></a>标准输出</h2><p>有两种输出 shell 分为方便用户使用 可以将两种输出分开</p><h3 id="stand-out-amp-amp-stand-error"><a href="#stand-out-amp-amp-stand-error" class="headerlink" title="stand out &amp;&amp; stand error"></a>stand out &amp;&amp; stand error</h3><p><code>sort 1 &gt; res_out</code> 代表输出<strong>正确结果</strong> 和 默认 <code>sort &gt; res_out</code> 一样</p><p><code>sort 2 &gt; res_error</code> 输出<strong>错误结果</strong></p><p><code>sort 2 &gt;&gt; res_error</code><strong>追加</strong>写入<strong>错误结果</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort 0 &lt; res` 就是 stand in 默认用 `sort &lt; res</span><br></pre></td></tr></table></figure><h3 id="“2-gt-amp-1“同时写入正确-amp-错误信息"><a href="#“2-gt-amp-1“同时写入正确-amp-错误信息" class="headerlink" title="“2&gt;&amp;1“同时写入正确&amp;错误信息"></a>“2&gt;&amp;1“同时写入正确&amp;错误信息</h3><p><code>sort 1 &gt;res 2&gt;&amp;1</code> 表示将 正常输出到文件res 中 将错误信息也输出到res中</p><p><code>sort &gt;res 2&gt;&amp;1</code>等同效果</p><p><code>sort &gt;&gt; res 2&gt;&amp;1</code>追加写入</p><p><code>sort &amp;&gt; res</code> 也表示同时写入 <strong>正确和错误输出</strong></p><p><strong>举例</strong></p><ul><li><code>ls Chap_15.txt b &gt; res</code></li></ul><p>b文件不存在，将只会看到 Chap_15的文件消息（只有<strong>正确信息</strong>）</p><ul><li><code>ls Chap_15.txt b &amp;&gt; res</code></li></ul><p>则 res有<strong>Chap_15文件信息</strong>和b文件<strong>不存在的错误信息</strong></p><ul><li><code>ls Chap_15.txt b &gt;res 2 &gt;error</code></li></ul><p>则分开<strong>写入到正确、错误信息</strong></p><h3 id="使用-gt-的例子"><a href="#使用-gt-的例子" class="headerlink" title="使用&gt;的例子"></a>使用&gt;的例子</h3><p>文件名” PEOPLE “包含一些联系人信息</p><p>现在，如果文件包含”Hello” ，就将文件排序</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep hello people &amp;&amp; sort people &gt; res</span><br></pre></td></tr></table></figure><p>grep “查看内容” “文件名”<strong>成功执行后</strong>再执行 <strong>排序</strong> 再将结果<strong>写入res</strong></p><h2 id="SubSHell"><a href="#SubSHell" class="headerlink" title="SubSHell"></a>SubSHell</h2><h3 id="子shell-amp-amp-父shell"><a href="#子shell-amp-amp-父shell" class="headerlink" title="子shell &amp;&amp; 父shell"></a>子shell &amp;&amp; 父shell</h3><p>当shell 执行一个程序时， shell 是父程序 被执行程序是子程序</p><p>父shell 等着子shell 死亡后 再夺回控制权</p><p>如：在登陆后的shell 中输入 bash 则进入了子shell ,父shell 开始等待</p><p>子shell将继承父shell 的环境，但不会回传出父shell 任何信息，而且不会对父shell 造成影响</p><p><strong>相当于是个虚拟机</strong></p><h3 id="x2F-dev-x2F-null-是个垃圾箱"><a href="#x2F-dev-x2F-null-是个垃圾箱" class="headerlink" title="&#x2F;dev&#x2F;null 是个垃圾箱"></a>&#x2F;dev&#x2F;null 是个垃圾箱</h3><p>如果只要看正常输出，不要错误输出 <code>update 2&gt; /dev/null</code></p><h2 id="Piplines-管道符"><a href="#Piplines-管道符" class="headerlink" title="Piplines 管道符"></a>Piplines 管道符</h2><h3 id="功能："><a href="#功能：" class="headerlink" title="功能："></a>功能：</h3><ul><li><strong>将命令的标准输出给另一个命令的标准输入</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file1 file2 | grep hello | wc - l</span><br></pre></td></tr></table></figure><p> 在文件1、2里面<strong>找“hello”</strong>并<strong>统计行数</strong></p><ul><li>但Pipline只将前面的<strong>标准输出</strong>作为后面的<strong>“标准输入”，不能实现参数传递</strong></li></ul><h3 id="举例："><a href="#举例：" class="headerlink" title="举例："></a>举例：</h3><p>cat 命令可以接收文件名作为参数，执行后会显示出文件的内容。但是 cat 命令<strong>不能</strong>直接<strong>从标准输入接收参数</strong>，正如下面的例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#cat后面直接指定china.txt参数, 可以展示china.txt文件的内容</span><br><span class="line">[roc@roclinux ~]$ cat china.txt</span><br><span class="line">hello beijing</span><br><span class="line"> </span><br><span class="line">#我们尝试通过标准输入把参数传给cat, 结果却只是显示了文件名而已</span><br><span class="line">[roc@roclinux ~]$ echo china.txt | cat</span><br><span class="line">china.txt</span><br></pre></td></tr></table></figure><ul><li>但可以用 xargs实现传递参数</li></ul><h2 id="xargs-传递参数"><a href="#xargs-传递参数" class="headerlink" title="xargs 传递参数"></a>xargs 传递参数</h2><ul><li>execute arguments的缩写</li></ul><h3 id="功能：-1"><a href="#功能：-1" class="headerlink" title="功能："></a>功能：</h3><ul><li>xargs 会将前一个命令的标准输出转换成命令参数。</li></ul><h3 id="举例：-1"><a href="#举例：-1" class="headerlink" title="举例："></a>举例：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[roc@roclinux ~]$ echo china.txt | xargs cat</span><br><span class="line">hello beijing</span><br></pre></td></tr></table></figure><ul><li>xargs 的标准输入中出现的“<strong>换行符、空格、制表符</strong>”都将被<strong>空格</strong>取代。下面来看一个带有换行符的例子：</li></ul><h3 id="空格取代换行符"><a href="#空格取代换行符" class="headerlink" title="空格取代换行符"></a><strong>空格</strong>取代<strong>换行符</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[roc@roclinux ~]$ echo -e &quot;china.txt\njapan.txt&quot;</span><br><span class="line">china.txt</span><br><span class="line">japan.txt</span><br><span class="line"> </span><br><span class="line">#可见, 换行符和空格的作用一样</span><br><span class="line">[roc@roclinux ~]$ echo -e &quot;china.txt\njapan.txt&quot; | xargs cat</span><br><span class="line">hello beijing</span><br><span class="line">hello tokyo</span><br></pre></td></tr></table></figure><ul><li>当命令参数中包含了空格时，情况就会复杂很多，一起来看一个示例。</li></ul><h3 id="参数中包含了空格"><a href="#参数中包含了空格" class="headerlink" title="参数中包含了空格"></a>参数中包含了空格</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#我们创建了3个日志文件, 且故意让文件名称中都含有空格</span><br><span class="line">[roc@roclinux ~]$ for((i=0;i&lt;3;i++)); do touch &quot;test $&#123;i&#125;.log&quot;;done</span><br><span class="line"> </span><br><span class="line">#我们列出创建的文件</span><br><span class="line">[roc@roclinux ~]$ ls -1F</span><br><span class="line">test 0.log</span><br><span class="line">test 1.log</span><br><span class="line">test 2.log</span><br><span class="line"> </span><br><span class="line">#我们来运行xargs命令, 发现报错了 </span><br><span class="line">#-print 指定分隔符 默认为\n</span><br><span class="line">[roc@roclinux ~]$  find . -name &#x27;*.log&#x27; -print | xargs rm</span><br><span class="line">rm: cannot remove ‘./test’: No such file or directory</span><br><span class="line">rm: cannot remove ‘1.log’: No such file or directory</span><br></pre></td></tr></table></figure><p>我们在当前目录中创建了 3 个文件，文件名中间都含有空格。</p><p>但当 find 命令获取到的文件名经过 xargs 传送给 rm 命令时，文件“.&#x2F;test 1.log”就变成了“.&#x2F;test”和“1.log”两个文件了。</p><p>即原本 <strong>3 个文件名刹那间就变成了 6 个文件名</strong>，而这 6 个文件其实并不存在，从而引发了错误。</p><h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><ul><li>这个错误的根源就在于 xargs 默认的分隔符是空格，如果我们能将 xargs 的分隔符改成其他符号，问题就迎刃而解了！</li></ul><h4 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h4><ul><li>xargs 提供了<code>-0</code>选项，允许将 NULL 作为分隔符</li><li>find 命令提供的对应方法是 <code>-print0</code> 选项产生以 NULL 字符作为分隔符的输出</li></ul><p>在文件名之后输出 NULL，而不像 <strong>-print 选项那样输出换行符</strong>（换行符会被 xargs 替换成空格）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@lthero:videos$ find . -name &#x27;*.log&#x27; -print0</span><br><span class="line">./test 1.log./test 0.log./test 2.log</span><br></pre></td></tr></table></figure><p>于是，使用下命令，可以找出包含空格的文件并删除</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -name &#x27;*.log&#x27; -print0 | xargs -0 rm</span><br></pre></td></tr></table></figure><h2 id="Tee"><a href="#Tee" class="headerlink" title="Tee"></a>Tee</h2><p>tee 可以<strong>读一个标准输入</strong>并 <strong>同时复制到标准输出</strong> 和 <strong>文件中</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file1 file2 | tee file3 | grep hello</span><br></pre></td></tr></table></figure><p>cat 读取 file1 file2文件 并给tee 保存在file3中，并输出到标准输出，grep又从标准输出收到信息，再搜索”hello”</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file1 file2 file3 | tee file4 file5</span><br></pre></td></tr></table></figure><p>将1\2\3的文件<strong>合并后</strong>复制到4、5中而且内容一样</p><p>默认下 如果文件不在，tee可以创建，存在就覆盖写入</p><p>tee -a 可以追加写入</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;I-x2F-O&quot;&gt;&lt;a href=&quot;#I-x2F-O&quot; class=&quot;headerlink&quot; title=&quot;I&amp;#x2F;O&quot;&gt;&lt;/a&gt;I&amp;#x2F;O&lt;/h1&gt;&lt;h2 id=&quot;标准输入&quot;&gt;&lt;a href=&quot;#标准输入&quot; class=&quot;headerlink&quot; ti</summary>
      
    
    
    
    <category term="linux" scheme="https://blog.lthero.cn/categories/linux/"/>
    
    
    <category term="linux" scheme="https://blog.lthero.cn/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>【linux】学习笔记Chap_22_强大的Vim编程</title>
    <link href="https://blog.lthero.cn/2022/08/02/linux-learningPathChp22/"/>
    <id>https://blog.lthero.cn/2022/08/02/linux-learningPathChp22/</id>
    <published>2022-08-02T13:08:44.000Z</published>
    <updated>2022-08-07T10:34:58.109Z</updated>
    
    <content type="html"><![CDATA[<h1 id="VIM"><a href="#VIM" class="headerlink" title="VIM"></a>VIM</h1><h4 id="建议全程使用英语输入法"><a href="#建议全程使用英语输入法" class="headerlink" title="建议全程使用英语输入法"></a><strong>建议全程使用英语输入法</strong></h4><ul><li>简介：vim 即 vi improved，现在已经全面替代vi，如果想用vi ，只能用vim -C 唤出vi模式。</li><li>xxxxxxxxxx10 1# 启动frps2sudo systemctl start frps3# 自启动4sudo systemctl enable frps5# 重启应用6sudo systemctl restart frps7# 停止应用8sudo systemctl stop frps9# 查看应用的日志10sudo systemctl status frpsshell</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim flie    #打开文件 可编写</span><br><span class="line">view file 或 vim -R file  #只读文件</span><br></pre></td></tr></table></figure><h2 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h2><p>vim 打开文件将进入<strong>命令模式</strong>，此时不能直接编辑文档</p><h3 id="光标移动"><a href="#光标移动" class="headerlink" title="光标移动"></a>光标移动</h3><ul><li>h 向左移动光标</li><li>l (小写的L)向右移动光标</li><li>j 向下移动光标</li><li>k 向上移动光标</li></ul><p><a href="https://cdn.lthero.cn/wp-store/2021/07/1627286989-Snipaste_2021-07-26_09-18-30.png"><img src="https://cdn.lthero.cn/wp-store/2021/07/1627286989-Snipaste_2021-07-26_09-18-30.png" alt="img"></a></p><h3 id="光标跃起"><a href="#光标跃起" class="headerlink" title="光标跃起"></a>光标跃起</h3><p>如果先按一个<strong>数字</strong>，再按<strong>光标移动</strong>对应的四个键，可以指定跳过多少</p><ul><li>0 移动光标到行首</li><li>^ 移动光标到行首</li><li>$ 移动光标到行尾</li><li>w 移动到<strong>下个单词</strong>开始</li><li>e 移动到<strong>下个单词</strong>结尾</li><li>b 移动到<strong>上个单词</strong>开始</li></ul><h3 id="文章跳转"><a href="#文章跳转" class="headerlink" title="文章跳转"></a>文章跳转</h3><ul><li>gg 跳转到文章第一行</li><li>G 跳转到文章最后一行</li><li>10G 转到第10行，numG是第num行</li><li><strong>:10</strong> 也是转到第10行，先使用 <code>：set number</code> 唤出编号（下面有提到）</li></ul><h3 id="文章翻页"><a href="#文章翻页" class="headerlink" title="文章翻页"></a>文章翻页</h3><ul><li>^F 向下 翻页 ctrl+f</li><li>^B 向上 翻页 ctrl+b</li><li>^U 向上 翻半页 ctrl+u</li><li>^D 向下 翻半页 ctrl+d</li></ul><h3 id="设置行号"><a href="#设置行号" class="headerlink" title="设置行号"></a>设置行号</h3><ul><li>：set number 标出行号</li><li>：set nonumber 取消行号</li></ul><h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h3><ul><li>&#x2F; pattern <strong>向下</strong>查找内容（pattern是要查找的文本，以下类同）</li></ul><p>在<strong>命令模式</strong>下，按**&#x2F;<strong>键后：命令行（</strong>屏幕底部<strong>）会显示一个</strong>&#x2F;**字符，随后可以键入想查找的文本，再按回车，vim就会查找下一个匹配的文本。</p><p><strong>如：</strong></p><p><code>/lthero</code> 按下回车后，光标就会跳转到该文本上。此时按<strong>n</strong>就会跳到<strong>下一个</strong>匹配的文本，按<strong>N</strong>会跳到<strong>上一个</strong>匹配的文本。</p><ul><li>? pattern <strong>向上</strong>查找内容（pattern)</li></ul><h3 id="替换与复制"><a href="#替换与复制" class="headerlink" title="替换与复制"></a>替换与复制</h3><ul><li>yy <strong>复制光标所在行</strong></li><li>p <strong>粘贴</strong>剪切版的内容</li></ul><p><strong>全文复制：</strong></p><ul><li>ggyG：将光标移动到文章开头，复制到文章末尾</li><li>Gygg：将光标移动到文章末尾，复制到文章开头</li></ul><p><strong>替换</strong></p><ul><li>r 替换一个字符 。按一个r 替换一个字符</li><li>R 进入<strong>替换模式，将一直替换，</strong>直到按^C退出</li></ul><p><strong>指定行替换(进入输入命令的模式，按shift+:)</strong></p><ul><li><strong>:s&#x2F;pattern&#x2F;replace&#x2F;</strong> 可将光标所在行的<strong>pattern</strong>替换成指定内容(<strong>replace</strong>)，只替换从第一行中的第一个匹配项、</li><li><strong>:s?pattern?replace 则从最后一行开始，</strong>替换<strong>这行第一个</strong>匹配项</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1:Linux Linux Linux</span><br><span class="line">~</span><br><span class="line">~</span><br><span class="line">:s/Linux/Unix/</span><br><span class="line">#结果</span><br><span class="line">1:Unix Linux Linux</span><br></pre></td></tr></table></figure><ul><li><strong>:<strong>s&#x2F;pattern&#x2F;replace</strong>&#x2F;g</strong> (global) 一整行的pattern全部替换</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1:Linux Linux Linux </span><br><span class="line">~</span><br><span class="line">~ </span><br><span class="line">:s/Linux/Unix/g</span><br><span class="line">#结果 </span><br><span class="line">1:Unix Unix Unix</span><br></pre></td></tr></table></figure><ul><li><strong>:<strong>s&#x2F;pattern&#x2F;replace</strong>&#x2F;gc</strong> (global confirm) 整行替换 替换之前将咨询</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">replace with Unix (y/n/a/q/l/^E/^Y)?</span><br></pre></td></tr></table></figure><ul><li><strong>: NUM</strong>s&#x2F;pattern&#x2F;replace**&#x2F;g** 将第NUM行，整行的pattern替换**(如果不加&#x2F;g，还是只换一个）**</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">10:Linux Linux Linux </span><br><span class="line">~</span><br><span class="line">~ </span><br><span class="line">:10s/Linux/Unix/g</span><br><span class="line">#结果 </span><br><span class="line">10:Unix Unix Unix</span><br></pre></td></tr></table></figure><ul><li><strong>: N,M</strong>s&#x2F;pattern&#x2F;replace**&#x2F;g** 将<strong>N-M</strong>行内进行替换</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">10:Linux Linux Linux </span><br><span class="line">11:Linux Linux Linux </span><br><span class="line">12:Linux Linux Linux </span><br><span class="line">13:Linux Linux Linux </span><br><span class="line">14:Linux Linux Linux </span><br><span class="line">~</span><br><span class="line">~ </span><br><span class="line">:10,14s/Linux/Unix/g</span><br><span class="line">#结果 </span><br><span class="line">10~14:Unix Unix Unix</span><br></pre></td></tr></table></figure><p><strong>全文替换</strong></p><ul><li>用**.(dote)<strong>代表当前行，</strong>$(dollar)<strong>代表最后一行，</strong>%** 代表在编辑缓存区(已经保存的文章)的<strong>全部行</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">:.,$s/pattern/replace/g   全文替换</span><br><span class="line"></span><br><span class="line">:1,.s/pattern/replace/g    第一行到当前行替换</span><br><span class="line"></span><br><span class="line">:1,$s/pattern/replace/g     或者 :%s/pattern/replace/g全文替换</span><br></pre></td></tr></table></figure><h3 id="删除-x2F-剪切"><a href="#删除-x2F-剪切" class="headerlink" title="删除&#x2F;剪切"></a>删除&#x2F;剪切</h3><ul><li>x 删除光标字符，其实会剪切到剪切板上，按p可以恢复(下面有讲到）</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">heiQnous #将光标放在Q处 </span><br><span class="line">按x</span><br><span class="line">heinous</span><br></pre></td></tr></table></figure><ul><li>X 删除光标左边字符</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">heiQnous #将光标放在n处 </span><br><span class="line">按X</span><br><span class="line">heinous</span><br></pre></td></tr></table></figure><ul><li>D 从<strong>光标处</strong>删除到<strong>行尾</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Linux Unix PHP MySQL</span><br><span class="line">光标放在H处</span><br><span class="line">按D</span><br><span class="line">Linux Unix P</span><br></pre></td></tr></table></figure><ul><li>dmve (加上方向键<strong>左右</strong>) d左 就等同于X d右 等同于x</li><li>dd 删除（剪切）<strong>一行</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">：10,20d #删除10-20行</span><br><span class="line"> ：1,$d #删除全文</span><br></pre></td></tr></table></figure><ul><li><strong>db</strong> 删除光标前<strong>一个单词</strong></li></ul><p><strong>全文删除：</strong></p><ul><li>ggdG：将光标移动到文章开头，删除到文章末尾</li><li>Gdgg：将光标移动到文章末尾，删除到文章开头</li></ul><h3 id="撤销"><a href="#撤销" class="headerlink" title="撤销"></a>撤销</h3><ul><li>u 撤销一步</li></ul><h3 id="从删除中恢复-x2F-粘贴"><a href="#从删除中恢复-x2F-粘贴" class="headerlink" title="从删除中恢复&#x2F;粘贴"></a>从删除中恢复&#x2F;粘贴</h3><ul><li>p 将<strong>删除内容</strong>或<strong>剪贴板</strong>内容恢复，恢复到光标<strong>下一行</strong></li></ul><p><strong>#1、2：指行号</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1:Linux Linux Linux</span><br><span class="line">2:Unix Unix Unix</span><br><span class="line">:1d</span><br><span class="line">#将第一行删除</span><br><span class="line">2：Unix Unix Unix</span><br><span class="line">#光标在第一个U</span><br><span class="line">#按p</span><br><span class="line">1:Unix Unix Unix</span><br><span class="line">2:Linux Linux Linux</span><br></pre></td></tr></table></figure><ul><li>P 恢复到光标<strong>上一行</strong></li></ul><h3 id="复制-amp-移动行"><a href="#复制-amp-移动行" class="headerlink" title="复制&amp;移动行"></a>复制&amp;移动行</h3><ul><li><strong>命令：co</strong>(copy)</li></ul><p><strong>:</strong> 5<strong>co</strong>10 复制第5行，插入到<strong>第10行下面</strong></p><p><strong>:</strong> 5**,<strong>10</strong>co<strong>20 复制</strong>5~10行，一同<strong>插入到</strong>第20行下面**</p><ul><li><strong>命令：m</strong>(move)</li></ul><p><strong>:</strong> 5m10 移动第5行，插入到<strong>第10行下面</strong></p><p><strong>:</strong> 4,8m20 移动<strong>4~8</strong>行，一同到<strong>20行下面</strong></p><p><strong>:</strong> 1,.m$ 第一行~当前移动，插入到最后一行</p><h3 id="合并两行"><a href="#合并两行" class="headerlink" title="合并两行"></a>合并两行</h3><p>按大写<strong>J</strong> 将当前行和下一行合并，在合并处会自动留下一个空格</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">this is a</span><br><span class="line">short sentence</span><br><span class="line">按J</span><br><span class="line">this is a short sentence</span><br></pre></td></tr></table></figure><h3 id="执行命令"><a href="#执行命令" class="headerlink" title="执行命令"></a>执行命令</h3><p>进入命令模式后，按冒号，进入执行命令模式</p><p><strong>:!date</strong>，可以在原来的shell中执行命令，并能看到结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[No write since last change]</span><br><span class="line">Mon 26 Jul 2021 03:19:59 PM CST</span><br><span class="line"></span><br><span class="line">Press ENTER or type command to continue  #按return返回</span><br></pre></td></tr></table></figure><p>:!! 执行上一条命令</p><p>:!sh 将暂停vi，打开一个新的shell，<strong>如 !bash</strong></p><h3 id="编辑过程中切换文件"><a href="#编辑过程中切换文件" class="headerlink" title="编辑过程中切换文件"></a>编辑过程中切换文件</h3><ul><li>:e document</li></ul><p>切换新文件时，原先在缓存中的文件就会丢失，所以要保存原文件</p><p>一般地，若未保存，vim不让切换</p><p>用<code>e! document</code> 强制切换</p><h3 id="宏Macros"><a href="#宏Macros" class="headerlink" title="宏Macros"></a>宏Macros</h3><ul><li>:map x commands</li></ul><h4 id="功能"><a href="#功能" class="headerlink" title="功能:"></a>功能:</h4><ul><li>将命令以x代替</li></ul><p>**如:*<em>在每行首添加注释&#x2F;</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:map ^_ I/*&lt;ESC&gt;      #（直接输入&lt;ESC&gt;) 或者 ESC是^[ ，删除是^H</span><br></pre></td></tr></table></figure><p>其中的I是进入到当前行首，</p><p>用unmap取消宏命令</p><ul><li>:unmap x</li></ul><h3 id="将已有文件插入"><a href="#将已有文件插入" class="headerlink" title="将已有文件插入"></a>将已有文件插入</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:[line]r file    r是read，表示在line行插入file文件内容</span><br></pre></td></tr></table></figure><ul><li>功能：将file整个讲稿并插入到指定行</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">:10r file  #插入第10行</span><br><span class="line">:0r file    #到第一行</span><br><span class="line">:$r file    #到末尾</span><br><span class="line">:r file     #到光标行</span><br></pre></td></tr></table></figure><ul><li>如果不写数字，vim将自动添加<strong>光标所在行</strong></li></ul><h4 id="结合执行命令"><a href="#结合执行命令" class="headerlink" title="结合执行命令"></a><strong>结合执行命令</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">:r !ls    #将 ls 结果添加到当前行</span><br><span class="line">:0r !date  #添加时间到文章开头</span><br><span class="line">:0r !whoami #添加作者</span><br></pre></td></tr></table></figure><h3 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h3><ul><li>**:**w 写入原文件</li></ul><p>**:**w file 写入新文件</p><ul><li>**:**w! file 覆盖写入已存在文件</li></ul><p>**:**w&gt;&gt; file 追加写入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">:10,20w &gt;&gt;file 将10到20行追加写入文件中</span><br><span class="line">:wq 保存并退出 效果等同ZZ,但不等同ctrl+z，ctrl+z是挂起当前进程</span><br></pre></td></tr></table></figure><h3 id="退出"><a href="#退出" class="headerlink" title="退出"></a>退出</h3><ul><li><strong>保存并退出</strong>可以用快捷键<strong>ZZ</strong>，或者**:wq**</li></ul><p>用ZZ为了不误触，导致不小心退出</p><ul><li>注意 强制退出vim</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:q!&lt;Return&gt;</span><br></pre></td></tr></table></figure><ul><li>其中的!（bang）告诉vim <strong>不要管我是否保存了数据</strong>（可能造成丢失）</li></ul><hr><h2 id="输入模式"><a href="#输入模式" class="headerlink" title="输入模式"></a>输入模式</h2><ul><li><strong>按<ESC>将退出输入模式</strong></li></ul><h3 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h3><ul><li>按 i 光标处向前插入 I 插入到<strong>行首</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Kankakee 在把光标移动到K上面</span><br><span class="line">输入ibbb</span><br><span class="line">bbbKankakee</span><br></pre></td></tr></table></figure><ul><li>o光标下行插入 O光标上行插入</li><li>a光标处后插入 A插入到行尾</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Kankakee 在把光标移动到K上面</span><br><span class="line">输入ibbb</span><br><span class="line">Kbbbankakee</span><br></pre></td></tr></table></figure><ul><li>**^W(ctrl+w)**删除一个单词</li><li><strong>^U</strong> <strong>(ctrl+u)<strong>或 ^X</strong>(ctrl+x)</strong> 删除一行 （这是在编辑模式中）</li></ul><h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><ul><li>s (substitute) 将<strong>光标处字符删除</strong>并进入编辑模式</li><li>C 将<strong>光标</strong>处字符<strong>到结尾</strong>处字符<strong>全部删除</strong> 进入编辑模式</li><li>S 或 <strong>cc</strong> 将整个行全部剪切，并进入编辑模式，而且光标在原来这行。与dd不同，dd只删除不进入编辑</li></ul><h3 id="恢复数据"><a href="#恢复数据" class="headerlink" title="恢复数据"></a>恢复数据</h3><p>若在编辑模式下长时间未保存，并且vim突然中断，那未保存内容将在<strong>隐藏的</strong><strong>.file.swap文件</strong>中</p><ul><li>如ssh连接突然中止，或者电脑关机</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#用命令</span><br><span class="line">vim -r(recover) file</span><br><span class="line">#</span><br><span class="line">可以恢复原有数据</span><br></pre></td></tr></table></figure><ul><li>如果删除隐藏文件，再打开原文件，数据只会显示到<strong>上次保存位置</strong></li><li>所以，先恢复文件，再rm .swap文件</li></ul><h3 id="细节"><a href="#细节" class="headerlink" title="细节"></a>细节</h3><p>vim 将空行用~代替<br>vim 中不能用(ctrl+c) 如果要输入^C 用ctrl+v ctrl+c 输入^V要输入两次ctrl+v<br>tab键也用ctrl+i代替</p><h2 id="可视区块"><a href="#可视区块" class="headerlink" title="可视区块"></a>可视区块</h2><p>如果想要处理一个区块（以列为单位），如下这种格式：</p><blockquote><p>192.168.1.1 host1.class.net<br>192.168.1.2 host2.class.net<br>192.168.1.3 host3.class.net<br>192.168.1.4 host4.class.net<br>192.168.1.5 host5.class.net<br>192.168.1.6 host6.class.net<br>192.168.1.7 host7.class.net<br>192.168.1.8 host8.class.net<br>192.168.1.9 host9.class.net</p></blockquote><p>如果要把每行的host1再添加到这行末尾，如192.168.1.1 host1.class.net host1，我们可以使用以下命令进行操作</p><p>在一般命令模式下</p><p>v       <strong>字符</strong>选择，会将光标经过的<strong>字符</strong>反白选择</p><p>V       <strong>行</strong>选择，会将光标经过的<strong>行</strong>反白选择</p><p>ctrl+v    块选择，用<strong>矩形方式</strong>选择</p><p>y       将反白选择部分复制</p><p>d       将反白选择部分删除</p><p>p       将复制或删除的部分粘贴</p><p>1、将光标移动太第一行的host1的h上，按ctrl+v ，此时可以看到VISUAL BLOCK的字样<a href="https://cdn.lthero.cn/wp-store/2021/07/1632535027-Snipaste_2021-09-25_09-54-56.png"><img src="https://cdn.lthero.cn/wp-store/2021/07/1632535027-Snipaste_2021-09-25_09-54-56.png" alt="img"></a></p><p>2、将光标移动到最底部分，光标经过的区域会反色</p><p><a href="https://cdn.lthero.cn/wp-store/2021/07/1632535114-Snipaste_2021-09-25_09-58-26.png"><img src="https://cdn.lthero.cn/wp-store/2021/07/1632535114-Snipaste_2021-09-25_09-58-26.png" alt="img"></a></p><p>3、按y进行复制，按下【y】后，反色的区域会不见</p><p>4、将光标移动到第一行的最右边，进入编辑模式，输入两个空格，再进入命令模式，按下【p】后就会粘贴成功</p><p><a href="https://cdn.lthero.cn/wp-store/2021/07/1632535249-Snipaste_2021-09-25_10-00-40.png"><img src="https://cdn.lthero.cn/wp-store/2021/07/1632535249-Snipaste_2021-09-25_10-00-40.png" alt="img"></a></p><h2 id="多窗口功能"><a href="#多窗口功能" class="headerlink" title="多窗口功能"></a>多窗口功能</h2><p>如果有两个文件需要对照修改，总不能同时打开两个shell吧？vim也有划分窗口的功能！！！</p><p>在命令模式下<code>:sp filename</code></p><p>1、如果要在<strong>新窗口</strong>打开<strong>另一个文件</strong>，就写对应的文件名，如果文件<strong>不存在会自动创建</strong>；</p><p><a href="https://cdn.lthero.cn/wp-store/2021/07/1632536380-Snipaste_2021-09-25_10-19-24.png"><img src="https://cdn.lthero.cn/wp-store/2021/07/1632536380-Snipaste_2021-09-25_10-19-24.png" alt="img"></a></p><p>2、filename也可以不写，如仅输入<code>:sp</code> 会在两个窗口打开<strong>同一个文件，而且会同步修改</strong></p><p><a href="https://cdn.lthero.cn/wp-store/2021/07/1632536207-Snipaste_2021-09-25_10-16-13.png"><img src="https://cdn.lthero.cn/wp-store/2021/07/1632536207-Snipaste_2021-09-25_10-16-13.png" alt="img"></a></p><p><a href="https://cdn.lthero.cn/wp-store/2021/07/1632536328-Snipaste_2021-09-25_10-18-38.png"><img src="https://cdn.lthero.cn/wp-store/2021/07/1632536328-Snipaste_2021-09-25_10-18-38.png" alt="img"></a></p><p>此时，可以利用【ctrl+w+j】移动到下面窗口，【ctrl+w+k】移动到上面的窗口</p><h2 id="自动补全"><a href="#自动补全" class="headerlink" title="自动补全"></a>自动补全</h2><p>平时在用jetbrain全家桶习惯了自动补全，vim其实也有，而且功能强大。<strong>以下按键全部在编辑模式</strong></p><p>1、以扩展名作为语法补充。注意：文件名后缀一定要改成对应的扩展名，如.html&#x2F;.css&#x2F;.c&#x2F;.py</p><blockquote><p>按键：ctrl+x 再按 ctrl+o</p></blockquote><p><a href="https://cdn.lthero.cn/wp-store/2021/07/1632537129-Snipaste_2021-09-25_10-31-11.png"><img src="https://cdn.lthero.cn/wp-store/2021/07/1632537129-Snipaste_2021-09-25_10-31-11.png" alt="img"></a></p><p>在输入&lt;&#x2F;后按【ctrl+x 】和【ctrl+o】后将补全<code>head&gt;</code></p><p>2、以当前编辑的【文件内容文字】作为关键词，自动补全</p><blockquote><p>按键：ctrl+x 再按 ctrl+n</p></blockquote><p><a href="https://cdn.lthero.cn/wp-store/2021/07/1632537335-Snipaste_2021-09-25_10-28-25.png"><img src="https://cdn.lthero.cn/wp-store/2021/07/1632537335-Snipaste_2021-09-25_10-28-25.png" alt="img"></a></p><p>如，当前有三个变量var11，var22，var33，想要输出时，只用在var后按【ctrl+x】和【ctrl+n】即可出现<strong>补全列表</strong></p><p>3、以当前目录内的【文件名】作为关键词</p><blockquote><p>ctrl+x 再按 ctrl+f</p></blockquote><p><a href="https://cdn.lthero.cn/wp-store/2021/07/1632537471-Snipaste_2021-09-25_10-29-18.png"><img src="https://cdn.lthero.cn/wp-store/2021/07/1632537471-Snipaste_2021-09-25_10-29-18.png" alt="img"></a></p><p>如，输入te后，按【ctrl+x】和【ctrl+f】即可出现<strong>当前目录文件名</strong>补全<strong>列表</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;VIM&quot;&gt;&lt;a href=&quot;#VIM&quot; class=&quot;headerlink&quot; title=&quot;VIM&quot;&gt;&lt;/a&gt;VIM&lt;/h1&gt;&lt;h4 id=&quot;建议全程使用英语输入法&quot;&gt;&lt;a href=&quot;#建议全程使用英语输入法&quot; class=&quot;headerlink&quot; title=</summary>
      
    
    
    
    <category term="linux" scheme="https://blog.lthero.cn/categories/linux/"/>
    
    
    <category term="linux" scheme="https://blog.lthero.cn/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>【Broadcast-Collision】冲突域与广播域</title>
    <link href="https://blog.lthero.cn/2022/07/29/Broadcast-Collision/"/>
    <id>https://blog.lthero.cn/2022/07/29/Broadcast-Collision/</id>
    <published>2022-07-29T06:58:31.000Z</published>
    <updated>2022-07-29T07:06:05.456Z</updated>
    
    <content type="html"><![CDATA[<h1 id="冲突域与广播域"><a href="#冲突域与广播域" class="headerlink" title="冲突域与广播域"></a>冲突域与广播域</h1><h2 id="定义："><a href="#定义：" class="headerlink" title="定义："></a>定义：</h2><ul><li>冲突域（物理层）：<br>同一时间内只能有一台设备发送信息的范围。如果有多台设备同时发送信息，就会产生冲突，故称冲突域。</li><li>广播域（数据链路层）：<br>广播帧所能到达的所有的设备的集合。</li></ul><p>关系：<a href="https://so.csdn.net/so/search?q=%E5%86%B2%E7%AA%81%E5%9F%9F&spm=1001.2101.3001.7020">冲突域</a>的范围<strong>小于等于</strong>广播域的范围，一个广播域由若干个冲突域组成！</p><p>隔离及扩展：<br>1、<a href="https://so.csdn.net/so/search?q=%E7%89%A9%E7%90%86%E5%B1%82&spm=1001.2101.3001.7020">物理层</a>的设备（如集线器Hub，中继器）可以扩大冲突域，而不能隔离冲突域，更不能隔离广播域。<br>2、<a href="https://so.csdn.net/so/search?q=%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82&spm=1001.2101.3001.7020">数据链路层</a>的设备（如交换机）可以隔离冲突域，扩大广播域。<br>3、网络层的设备（如路由器）可以隔离广播域。</p><h1 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h1><h3 id="扩大广播域："><a href="#扩大广播域：" class="headerlink" title="扩大广播域："></a>扩大广播域：</h3><p>​假如有二层交换机1号，二层交换机2号。1号交换机光纤连接10台主机，2号交换机光纤连接5台主机。1号交换机与2号交换机用光纤相连。如果1号交换机连接的10台主机中，有一台主机发出广播帧。如果1号交换机没连接2号交换机，那这个广播帧，只能由这10台中的9台收到。现在1号交换机连接了2号交换机，那这个广播帧，可以经过1号交换机转发给2号交换机，2号交换机再转发给它连接的5台主机。于是，这个广播帧可以由9+5&#x3D;14台主机收到。扩大广播域</p><h3 id="隔离冲突域："><a href="#隔离冲突域：" class="headerlink" title="隔离冲突域："></a>隔离冲突域：</h3><p>​目的就是为了“消除碰撞”。还是上面的假设，1号交换机连接了10个主机，而每个主机是通过光纤线直接连接到1号交换机的10个不同的端口。如果这10台主机，用总线方式相连接，一台主机发数据比特，其它的如果也在发，肯定早晚会碰撞，因此才有很多不同的防“碰撞”的协议。而现在，每台主机用线与1号交换机的不同端口连接，相当于每台主机独占了与端口连接的一条线路，每台主机主机随时可以发送数据比特给与这台主机连接的端口。不同主机就算同时发数据比特，也只是同时发给了与它们相连接的不同端口，又因为交换机的每个端口对应一块内存和一个“没有mac地址的网卡”，每块网卡的功能是将收到的数据比特成形成帧，再由交换机查路由转发表将帧转发到其它端口【形成帧后，应该会再形成个队列，交换机按队列次序依次处理每个帧】。隔离冲突域</p><h3 id="隔离广播域："><a href="#隔离广播域：" class="headerlink" title="隔离广播域："></a>隔离广播域：</h3><p>​假设1号交换机再与路由器连接，当路由器的<strong>内网网卡</strong>（接收帧的网卡）收到帧后，会交给网络层模块处理，从中提取出源ip地址、目的ip地址。根据目的ip地址查询路由表，将目的ip与掩码计算后，有两种结果。</p><p>​结果1：若</p><p>​结果2：从<strong>外网网卡</strong>传出去。说明目的ip地址和源ip地址不是同一个子网，比如目的ip是外网web服务器，那路由器才会将根据目的ip查询路由表，找到下一跳的(Gateway)设备ip，再将帧中的目的mac地址改成下一跳的设备对应的mac地址，再从外网网卡传送出去。</p><p>​这就是路由器可以隔离广播域的原因。如果不隔离广播域，那某个子网内某个主机发出的广播帧，会被全球收到（不考虑防火墙等）</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;冲突域与广播域&quot;&gt;&lt;a href=&quot;#冲突域与广播域&quot; class=&quot;headerlink&quot; title=&quot;冲突域与广播域&quot;&gt;&lt;/a&gt;冲突域与广播域&lt;/h1&gt;&lt;h2 id=&quot;定义：&quot;&gt;&lt;a href=&quot;#定义：&quot; class=&quot;headerlink&quot; title=</summary>
      
    
    
    
    <category term="网络" scheme="https://blog.lthero.cn/categories/%E7%BD%91%E7%BB%9C/"/>
    
    
    <category term="网络" scheme="https://blog.lthero.cn/tags/%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>【Web-socket】服务器程序</title>
    <link href="https://blog.lthero.cn/2022/07/17/Web-socket-server/"/>
    <id>https://blog.lthero.cn/2022/07/17/Web-socket-server/</id>
    <published>2022-07-17T05:20:54.000Z</published>
    <updated>2022-07-21T06:51:39.711Z</updated>
    
    <content type="html"><![CDATA[<h1 id="socket编程"><a href="#socket编程" class="headerlink" title="socket编程"></a>socket编程</h1><p>linux服务端代码如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;netdb.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="comment">//手动设置连接台数</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CONNMAX 1000</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> *WorkPath;</span><br><span class="line"><span class="type">int</span> listenfd, clients[CONNMAX];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">error</span><span class="params">(<span class="type">char</span> *x)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">startServer</span><span class="params">(<span class="type">char</span> *x)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">respond</span><span class="params">(<span class="type">int</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">sockaddr_in</span> clientaddr;</span><br><span class="line"><span class="type">socklen_t</span> addrlen;</span><br><span class="line"><span class="type">char</span> c, PORT[<span class="number">6</span>];</span><br><span class="line"><span class="comment">//设置当前路径</span></span><br><span class="line">WorkPath = <span class="built_in">getenv</span>(<span class="string">&quot;PWD&quot;</span>);</span><br><span class="line"><span class="comment">//默认端口</span></span><br><span class="line"><span class="built_in">strcpy</span>(PORT,<span class="string">&quot;10000&quot;</span>);</span><br><span class="line"><span class="comment">// 当前socket标识符下标</span></span><br><span class="line"><span class="type">int</span> slot=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//从命令行接收参数</span></span><br><span class="line"><span class="keyword">while</span> ((c = <span class="built_in">getopt</span> (argc, argv, <span class="string">&quot;p:r:&quot;</span>)) != <span class="number">-1</span>)</span><br><span class="line"><span class="keyword">switch</span> (c)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;r&#x27;</span>:</span><br><span class="line">WorkPath = <span class="built_in">malloc</span>(<span class="built_in">strlen</span>(optarg));</span><br><span class="line"><span class="built_in">strcpy</span>(WorkPath,optarg);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;p&#x27;</span>:</span><br><span class="line"><span class="built_in">strcpy</span>(PORT,optarg);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;?&#x27;</span>:</span><br><span class="line"><span class="built_in">fprintf</span>(stderr,<span class="string">&quot;参数错误\n&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;服务器开放端口 %s 使用 %s 作为当前路径\n&quot;</span>,PORT,WorkPath);</span><br><span class="line"><span class="comment">// 设置所有的套接字标识符的默认值为-1，代表这个套接字标识号没有没有使用</span></span><br><span class="line"><span class="type">int</span> i;</span><br><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;CONNMAX; i++)</span><br><span class="line">clients[i]=<span class="number">-1</span>;</span><br><span class="line"><span class="comment">//先开启服务，执行流程中的1，2，3</span></span><br><span class="line"><span class="built_in">startServer</span>(PORT);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 持续接收请求</span></span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//包含addr所指向结构大小的数值，函数返回时包含对等地址(一般为服务器地址)的实际数值</span></span><br><span class="line">addrlen = <span class="built_in">sizeof</span>(clientaddr);</span><br><span class="line"><span class="comment">//4、接收来自客户端的连接请求 accept</span></span><br><span class="line"><span class="comment">//accept函数等待来自客户端的连接请求到达&quot;监听描述符listenfd&quot;----客户端会调用connect函数发送客户端的&quot;套接字地址&quot;【ip:port】</span></span><br><span class="line"><span class="comment">//accpet将客户端的套接字地址填写到clientaddr这个结构中，并返回“已连接描述符connfd”</span></span><br><span class="line">clients[slot] = <span class="built_in">accept</span> (listenfd, (<span class="keyword">struct</span> sockaddr *) &amp;clientaddr, &amp;addrlen);</span><br><span class="line"><span class="comment">//出错返回-1</span></span><br><span class="line"><span class="keyword">if</span> (clients[slot]&lt;<span class="number">0</span>)</span><br><span class="line"><span class="built_in">error</span> (<span class="string">&quot;accept()函数出错，接收失败&quot;</span>);</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//accept返回“已连接描述符后”，创建子进程，让子程序完成response。父进程继续监听</span></span><br><span class="line"><span class="keyword">if</span> ( fork()==<span class="number">0</span> )&#123;</span><br><span class="line"><span class="comment">//子进程应该关掉监听描述符【因为继续父进程全部变量】，只保留已连接描述符</span></span><br><span class="line"><span class="built_in">close</span>(listenfd);</span><br><span class="line"><span class="comment">//对连接作出响应</span></span><br><span class="line"><span class="built_in">respond</span>(slot);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//-1表示当前位置无描述符，这步用来寻找数组中下一个可用的已连接描述符的位置</span></span><br><span class="line"><span class="keyword">while</span> (clients[slot]!=<span class="number">-1</span>) </span><br><span class="line">slot = (slot+<span class="number">1</span>)%CONNMAX;</span><br><span class="line"><span class="comment">//父进程应该关掉已连接描述符</span></span><br><span class="line"><span class="built_in">close</span>(clients[slot]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//服务端进程做的“监听准备”</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">startServer</span><span class="params">(<span class="type">char</span> *port)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//hits结构可用于提供要产生的套接字类型的信息</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">addrinfo</span> hints, *res, *p;</span><br><span class="line"><span class="comment">// 将hints结构清空</span></span><br><span class="line"><span class="built_in">memset</span> (&amp;hints, <span class="number">0</span>, <span class="built_in">sizeof</span>(hints));</span><br><span class="line"><span class="comment">//使用的协议簇AF_INET=ipv4/AF_INET6=ipv6</span></span><br><span class="line">hints.ai_family = AF_INET;</span><br><span class="line"><span class="comment">//协议类型，设置为流类型</span></span><br><span class="line">hints.ai_socktype = SOCK_STREAM;</span><br><span class="line"><span class="comment">//设置标志为AI_PASSIVE，告诉函数，要产生的套接字，会被服务端当作“监听套接字”。否则默认返回&quot;主动套接字&quot;</span></span><br><span class="line">hints.ai_flags = AI_PASSIVE;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将NULL表示得到的套接字地址结构中，ip字段是通配符地址。告诉内核让这个服务器接受发送到此主机的全部请求</span></span><br><span class="line"><span class="comment">//返回结果是个链表，链表包含的是很多套接字地址，存入res中</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">getaddrinfo</span>( <span class="literal">NULL</span>, port, &amp;hints, &amp;res) != <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">perror</span> (<span class="string">&quot;getaddrinfo() 出错&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1、创建 套接字描述符</span></span><br><span class="line"><span class="comment">// 2、将“套接字描述符”与“套接字地址”绑定</span></span><br><span class="line"><span class="keyword">for</span> (p = res; p!=<span class="literal">NULL</span>; p=p-&gt;ai_next)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//若成功则返回 套接字描述符，若出错则返回-1</span></span><br><span class="line">listenfd = <span class="built_in">socket</span> (p-&gt;ai_family, p-&gt;ai_socktype, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span> (listenfd == <span class="number">-1</span>) </span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line"><span class="comment">//将“套接字描述符”与“套接字地址【ip:port】”绑定</span></span><br><span class="line"><span class="comment">//调用bind的函数之后，通过套接字描述符来读取或发送到套接字地址</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">bind</span>(listenfd, p-&gt;ai_addr, p-&gt;ai_addrlen) == <span class="number">0</span>) </span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="comment">//绑定失败，关掉当前描述符并尝试下一个</span></span><br><span class="line"><span class="built_in">close</span>(listenfd);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (p==<span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">perror</span> (<span class="string">&quot;socket() 或 bind()&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//释放这个链表</span></span><br><span class="line"><span class="built_in">freeaddrinfo</span>(res);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3、转换成监听套接字</span></span><br><span class="line"><span class="comment">// 客户端发起的请求是主动实体，默认情况下，内核会认为socket函数创建的描述符是“主动套接字”，默认存在于客户端。但服务端，需要使用listen函数，</span></span><br><span class="line"><span class="comment">//来告诉内核，这个描述符是给服务端用的。</span></span><br><span class="line"><span class="comment">//listen函数将 这个描述符 从主动套接字，变成“监听套接字”。“监听套接字”可以接受客户端的连接请求。</span></span><br><span class="line"><span class="keyword">if</span> ( <span class="built_in">listen</span> (listenfd, <span class="number">1000000</span>) != <span class="number">0</span> )</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">perror</span>(<span class="string">&quot;listen()函数转换出错&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//服务端的响应</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">respond</span><span class="params">(<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//mesg缓冲区用来存放recv函数接收到的数据</span></span><br><span class="line"><span class="type">char</span> mesg[<span class="number">99999</span>], *reqline[<span class="number">3</span>], data_to_send[<span class="number">1024</span>], path[<span class="number">99999</span>];</span><br><span class="line"><span class="comment">//rcvd用来接收copy的字节数</span></span><br><span class="line"><span class="type">int</span> rcMegLen, file, bytes_read;</span><br><span class="line"><span class="built_in">memset</span>( (<span class="type">void</span>*)mesg, (<span class="type">int</span>)<span class="string">&#x27;\0&#x27;</span>, <span class="number">99999</span> );</span><br><span class="line"><span class="comment">//5、从socket中读取字符</span></span><br><span class="line"><span class="comment">//第一个参数指定接收端套接字描述符</span></span><br><span class="line"><span class="comment">//第二个参数缓冲区用来存放recv函数接收到的数据；</span></span><br><span class="line"><span class="comment">//第三个参数指明缓冲区的长度；</span></span><br><span class="line"><span class="comment">//第四个参数一般置0。</span></span><br><span class="line">rcMegLen=<span class="built_in">recv</span>(clients[n], mesg, <span class="number">99999</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">//如果recv在copy时出错，那么它返回SOCKET_ERROR</span></span><br><span class="line"><span class="keyword">if</span> (rcMegLen&lt;<span class="number">0</span>) </span><br><span class="line"><span class="built_in">fprintf</span>(stderr,(<span class="string">&quot;无法接收消息\n&quot;</span>));</span><br><span class="line"><span class="comment">//如果recv函数在等待协议接收数据时网络中断了，那么它返回0。</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (rcMegLen==<span class="number">0</span>)    </span><br><span class="line"><span class="built_in">fprintf</span>(stderr,<span class="string">&quot;与客户端的连接意外中断.\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span>    <span class="comment">// 接收到消息</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//打印客户端请求信息</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, mesg);</span><br><span class="line"><span class="comment">//按换行进行切分消息</span></span><br><span class="line">reqline[<span class="number">0</span>] = <span class="built_in">strtok</span> (mesg, <span class="string">&quot; \t\n&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> ( <span class="built_in">strncmp</span>(reqline[<span class="number">0</span>], <span class="string">&quot;GET\0&quot;</span>, <span class="number">4</span>)==<span class="number">0</span> )</span><br><span class="line">&#123;</span><br><span class="line">reqline[<span class="number">1</span>] = <span class="built_in">strtok</span> (<span class="literal">NULL</span>, <span class="string">&quot; \t&quot;</span>);</span><br><span class="line">reqline[<span class="number">2</span>] = <span class="built_in">strtok</span> (<span class="literal">NULL</span>, <span class="string">&quot; \t\n&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">strncmp</span>( reqline[<span class="number">2</span>], <span class="string">&quot;HTTP/1.0&quot;</span>, <span class="number">8</span>)!=<span class="number">0</span> &amp;&amp; <span class="built_in">strncmp</span>( reqline[<span class="number">2</span>], <span class="string">&quot;HTTP/1.1&quot;</span>, <span class="number">8</span>)!=<span class="number">0</span> )</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">write</span>(clients[n], <span class="string">&quot;HTTP/1.1 400 Bad Request\n&quot;</span>, <span class="number">25</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//如果url后面不写任何路径，默认为index.html</span></span><br><span class="line"><span class="keyword">if</span> ( <span class="built_in">strncmp</span>(reqline[<span class="number">1</span>], <span class="string">&quot;/\0&quot;</span>, <span class="number">2</span>)==<span class="number">0</span> )</span><br><span class="line">reqline[<span class="number">1</span>] = <span class="string">&quot;/index.html&quot;</span>;        </span><br><span class="line"><span class="built_in">strcpy</span>(path, WorkPath);</span><br><span class="line"><span class="built_in">strcpy</span>(&amp;path[<span class="built_in">strlen</span>(WorkPath)], reqline[<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;向套接字描述符%d号发送了文件: %s\n&quot;</span>,clients[n], path);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;========================================================\n&quot;</span>);</span><br><span class="line"><span class="comment">//如果文件存在，向客户端发送这个文件，以只读方式打开文件</span></span><br><span class="line"><span class="keyword">if</span> ( (file=<span class="built_in">open</span>(path, O_RDONLY))!=<span class="number">-1</span> )   </span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// 5.5、向socket写入信息</span></span><br><span class="line"><span class="comment">//第一个参数指定发送端套接字描述符</span></span><br><span class="line">    <span class="comment">//第二个参数指明一个存放应用程序要发送数据的缓冲区</span></span><br><span class="line">    <span class="comment">//第三个参数指明实际要发送的数据的字节数</span></span><br><span class="line">    <span class="comment">//第四个参数一般置0</span></span><br><span class="line"><span class="built_in">send</span>(clients[n], <span class="string">&quot;HTTP/1.1 200 OK\n\n&quot;</span>, <span class="number">17</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">//向套接字发送数据</span></span><br><span class="line"><span class="keyword">while</span> ( (bytes_read=<span class="built_in">read</span>(file, data_to_send, <span class="number">1024</span>))&gt;<span class="number">0</span> )</span><br><span class="line"><span class="built_in">write</span> (clients[n], data_to_send, bytes_read);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 否则提示此文件不存在</span></span><br><span class="line"><span class="keyword">else</span>    <span class="built_in">write</span>(clients[n], <span class="string">&quot;HTTP/1.1 404 Not Found\n&quot;</span>, <span class="number">23</span>); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//来禁止套接字上的输入/输出，使用SHUT_RDWR则将同时无法读取和发送数据</span></span><br><span class="line"><span class="built_in">shutdown</span> (clients[n], SHUT_RDWR);       </span><br><span class="line"><span class="comment">//等到客商退出后才会close  </span></span><br><span class="line"><span class="comment">//6、关闭socket</span></span><br><span class="line"><span class="built_in">close</span>(clients[n]);</span><br><span class="line"><span class="comment">//可以重新使用</span></span><br><span class="line">clients[n]=<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>默认返回的index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>恭喜<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: antiquewhite;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">./bgimage.jpg</span>)no-repeat;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-size</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">60%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">10%</span> auto <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f0f0f0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">2%</span> <span class="number">5%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>:center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding-left</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">2.3</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#20a53a</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>访问成功<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>这是默认index.html<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;socket编程&quot;&gt;&lt;a href=&quot;#socket编程&quot; class=&quot;headerlink&quot; title=&quot;socket编程&quot;&gt;&lt;/a&gt;socket编程&lt;/h1&gt;&lt;p&gt;linux服务端代码如下：&lt;/p&gt;
&lt;figure class=&quot;highlight c++</summary>
      
    
    
    
    <category term="网络" scheme="https://blog.lthero.cn/categories/%E7%BD%91%E7%BB%9C/"/>
    
    
    <category term="网络" scheme="https://blog.lthero.cn/tags/%E7%BD%91%E7%BB%9C/"/>
    
    <category term="socket编程" scheme="https://blog.lthero.cn/tags/socket%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>instruction-pointer</title>
    <link href="https://blog.lthero.cn/2022/07/15/instruction-pointer/"/>
    <id>https://blog.lthero.cn/2022/07/15/instruction-pointer/</id>
    <published>2022-07-15T15:17:20.000Z</published>
    <updated>2022-07-15T15:17:36.519Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一个小程序的分析"><a href="#一个小程序的分析" class="headerlink" title="一个小程序的分析"></a>一个小程序的分析</h1><p><img src="https://cdn.lthero.cn/post_images/course/Cryptography/QQ%E6%88%AA%E5%9B%BE20220715152731.png" alt="QQ截图20220715152731"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一个小程序的分析&quot;&gt;&lt;a href=&quot;#一个小程序的分析&quot; class=&quot;headerlink&quot; title=&quot;一个小程序的分析&quot;&gt;&lt;/a&gt;一个小程序的分析&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://cdn.lthero.cn/post_images/co</summary>
      
    
    
    
    
  </entry>
  
</feed>
